"use strict";(self.webpackChunkmindmap=self.webpackChunkmindmap||[]).push([[69],{60440:(t,e,n)=>{n.d(e,{h:()=>h});var r=n(33952),i=n(2376);const s="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function o(t){let e,n,r,i,o=t.split(/-(?!$)/),l=o[o.length-1];"Space"==l&&(l=" ");for(let t=0;t<o.length-1;t++){let l=o[t];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);s?i=!0:n=!0}}return e&&(l="Alt-"+l),n&&(l="Ctrl-"+l),i&&(l="Meta-"+l),r&&(l="Shift-"+l),l}function l(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function h(t){return new i.Sy({props:{handleKeyDown:a(t)}})}function a(t){let e=function(t){let e=Object.create(null);for(let n in t)e[o(n)]=t[n];return e}(t);return function(t,n){let i,s=(0,r.YG)(n),o=1==s.length&&" "!=s,h=e[l(s,n,!o)];if(h&&h(t.state,t.dispatch,t))return!0;if(o&&(n.shiftKey||n.altKey||n.metaKey||s.charCodeAt(0)>127)&&(i=r.ue[n.keyCode])&&i!=s){let r=e[l(i,n,!0)];if(r&&r(t.state,t.dispatch,t))return!0}else if(o&&n.shiftKey){let r=e[l(s,n,!0)];if(r&&r(t.state,t.dispatch,t))return!0}return!1}}},59084:(t,e,n)=>{n.d(e,{HY:()=>o,NB:()=>I,PW:()=>ot,Ts:()=>E,V_:()=>U,ZU:()=>_,aw:()=>Z,e4:()=>p,p2:()=>d,vc:()=>c});var r=n(17258);function i(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),o=e.child(r);if(s!=o){if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let t=0;s.text[t]==o.text[t];t++)n++;return n}if(s.content.size||o.content.size){let t=i(s.content,o.content,n+1);if(null!=t)return t}n+=s.nodeSize}else n+=s.nodeSize}}function s(t,e,n,r){for(let i=t.childCount,o=e.childCount;;){if(0==i||0==o)return i==o?null:{a:n,b:r};let l=t.child(--i),h=e.child(--o),a=l.nodeSize;if(l!=h){if(!l.sameMarkup(h))return{a:n,b:r};if(l.isText&&l.text!=h.text){let t=0,e=Math.min(l.text.length,h.text.length);for(;t<e&&l.text[l.text.length-t-1]==h.text[h.text.length-t-1];)t++,n--,r--;return{a:n,b:r}}if(l.content.size||h.content.size){let t=s(l.content,h.content,n-1,r-1);if(t)return t}n-=a,r-=a}else n-=a,r-=a}}class o{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let e=0;e<t.length;e++)this.size+=t[e].nodeSize}nodesBetween(t,e,n,r=0,i){for(let s=0,o=0;o<e;s++){let l=this.content[s],h=o+l.nodeSize;if(h>t&&!1!==n(l,r+o,i||null,s)&&l.content.size){let i=o+1;l.nodesBetween(Math.max(0,t-i),Math.min(l.content.size,e-i),n,r+i)}o=h}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,r){let i="",s=!0;return this.nodesBetween(t,e,((o,l)=>{o.isText?(i+=o.text.slice(Math.max(t,l)-l,e-l),s=!n):o.isLeaf?(r?i+="function"==typeof r?r(o):r:o.type.spec.leafText&&(i+=o.type.spec.leafText(o)),s=!n):!s&&o.isBlock&&(i+=n,s=!0)}),0),i}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,r=this.content.slice(),i=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),i=1);i<t.content.length;i++)r.push(t.content[i]);return new o(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],r=0;if(e>t)for(let i=0,s=0;s<e;i++){let o=this.content[i],l=s+o.nodeSize;l>t&&((s<t||l>e)&&(o=o.isText?o.cut(Math.max(0,t-s),Math.min(o.text.length,e-s)):o.cut(Math.max(0,t-s-1),Math.min(o.content.size,e-s-1))),n.push(o),r+=o.nodeSize),s=l}return new o(n,r)}cutByIndex(t,e){return t==e?o.empty:0==t&&e==this.content.length?this:new o(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let r=this.content.slice(),i=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new o(r,i)}addToStart(t){return new o([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new o(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let r=this.content[e];t(r,n,e),n+=r.nodeSize}}findDiffStart(t,e=0){return i(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return s(this,t,e,n)}findIndex(t,e=-1){if(0==t)return h(0,t);if(t==this.size)return h(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=r+this.child(n).nodeSize;if(i>=t)return i==t||e>0?h(n+1,i):h(n,r);r=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return o.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new o(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return o.empty;let e,n=0;for(let r=0;r<t.length;r++){let i=t[r];n+=i.nodeSize,r&&i.isText&&t[r-1].sameMarkup(i)?(e||(e=t.slice(0,r)),e[e.length-1]=i.withText(e[e.length-1].text+i.text)):e&&e.push(i)}return new o(e||t,n)}static from(t){if(!t)return o.empty;if(t instanceof o)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new o([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}o.empty=new o([],0);const l={index:0,offset:0};function h(t,e){return l.index=t,l.offset=e,l}function a(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!a(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!a(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class c{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let r=0;r<t.length;r++){let i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&a(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);return n.create(e.attrs)}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return c.none;if(t instanceof c)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}c.none=[];class p extends Error{}class d{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=u(this.content,t+this.openStart,e);return n&&new d(n,this.openStart,this.openEnd)}removeBetween(t,e){return new d(f(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return d.empty;let n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new d(o.fromJSON(t,e.content),n,r)}static maxOpen(t,e=!0){let n=0,r=0;for(let r=t.firstChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.firstChild)n++;for(let n=t.lastChild;n&&!n.isLeaf&&(e||!n.type.spec.isolating);n=n.lastChild)r++;return new d(t,n,r)}}function f(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(f(s.content,e-i-1,n-i-1)))}function u(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=u(o.content,e-s-1,n);return l&&t.replaceChild(i,o.copy(l))}function m(t,e,n){if(n.openStart>t.depth)throw new p("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new p("Inconsistent open depths");return g(t,e,n,0)}function g(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=g(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){let{start:i,end:l}=function(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let t=n-1;t>=0;t--)r=e.node(t).copy(o.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}(n,t);return S(s,v(t,i,l,e,r))}{let r=t.parent,i=r.content;return S(r,i.cut(0,t.parentOffset).append(n.content).append(i.cut(e.parentOffset)))}}return S(s,M(t,e,r))}function y(t,e){if(!e.type.compatibleContent(t.type))throw new p("Cannot join "+e.type.name+" onto "+t.type.name)}function w(t,e,n){let r=t.node(n);return y(r,e.node(n)),r}function x(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function k(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(x(t.nodeAfter,r),s++));for(let t=s;t<o;t++)x(i.child(t),r);e&&e.depth==n&&e.textOffset&&x(e.nodeBefore,r)}function S(t,e){if(!t.type.validContent(e))throw new p("Invalid content for node "+t.type.name);return t.copy(e)}function v(t,e,n,r,i){let s=t.depth>i&&w(t,e,i+1),l=r.depth>i&&w(n,r,i+1),h=[];return k(null,t,i,h),s&&l&&e.index(i)==n.index(i)?(y(s,l),x(S(s,v(t,e,n,r,i+1)),h)):(s&&x(S(s,M(t,e,i+1)),h),k(e,n,i,h),l&&x(S(l,M(n,r,i+1)),h)),k(r,null,i,h),new o(h)}function M(t,e,n){let r=[];return k(null,t,n,r),t.depth>n&&x(S(w(t,e,n+1),M(t,e,n+1)),r),k(e,null,n,r),new o(r)}d.empty=new d(o.empty,0,0);class C{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let e=0;e<t;e++)r+=n.child(e).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return c.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){let t=n;n=r,r=t}let i=n.marks;for(var s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,r=t.parent.maybeChild(t.index());for(var i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new E(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],r=0,i=e;for(let e=t;;){let{index:t,offset:s}=e.content.findIndex(i),o=i-s;if(n.push(e,t,r+s),!o)break;if(e=e.child(t),e.isText)break;i=o-1,r+=s+1}return new C(e,n,i)}static resolveCached(t,e){for(let n=0;n<b.length;n++){let r=b[n];if(r.pos==e&&r.doc==t)return r}let n=b[O]=C.resolve(t,e);return O=(O+1)%T,n}}let b=[],O=0,T=12;class E{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const N=Object.create(null);class I{constructor(t,e,n,r=c.none){this.type=t,this.attrs=e,this.marks=r,this.content=n||o.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,r=0){this.content.nodesBetween(t,e,n,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,r){return this.content.textBetween(t,e,n,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&a(this.attrs,e||t.defaultAttrs||N)&&c.sameSet(this.marks,n||c.none)}copy(t=null){return t==this.content?this:new I(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new I(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return d.empty;let r=this.resolve(t),i=this.resolve(e),s=n?0:r.sharedDepth(e),o=r.start(s),l=r.node(s).content.cut(r.pos-o,i.pos-o);return new d(l,r.depth-s,i.depth-s)}replace(t,e,n){return m(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let r=this.content.child(e-1);return{node:r,index:e-1,offset:n-r.nodeSize}}resolve(t){return C.resolveCached(this,t)}resolveNoCache(t){return C.resolve(this,t)}rangeHasMark(t,e,n){let r=!1;return e>t&&this.nodesBetween(t,e,(t=>(n.isInSet(t.marks)&&(r=!0),!r))),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),z(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=o.empty,r=0,i=n.childCount){let s=this.contentMatchAt(t).matchFragment(n,r,i),l=s&&s.matchFragment(this.content,e);if(!l||!l.validEnd)return!1;for(let t=r;t<i;t++)if(!this.type.allowsMarks(n.child(t).marks))return!1;return!0}canReplaceWith(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;let i=this.contentMatchAt(t).matchType(n),s=i&&i.matchFragment(this.content,e);return!!s&&s.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let t=c.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!c.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let r=o.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)}}I.prototype.text=void 0;class R extends I{constructor(t,e,n,r){if(super(t,e,null,r),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):z(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new R(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new R(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function z(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class A{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new F(t,e);if(null==n.next)return A.empty;let r=$(n);n.next&&n.err("Unexpected trailing text");let i=function(t){let e=Object.create(null);return function n(r){let i=[];r.forEach((e=>{t[e].forEach((({term:e,to:n})=>{if(!e)return;let r;for(let t=0;t<i.length;t++)i[t][0]==e&&(r=i[t][1]);P(t,n).forEach((t=>{r||i.push([e,r=[]]),-1==r.indexOf(t)&&r.push(t)}))}))}));let s=e[r.join(",")]=new A(r.indexOf(t.length-1)>-1);for(let t=0;t<i.length;t++){let r=i[t][1].sort(H);s.next.push({type:i[t][0],next:e[r.join(",")]||n(r)})}return s}(P(t,0))}(function(t){let e=[[]];return i(function t(e,s){if("choice"==e.type)return e.exprs.reduce(((e,n)=>e.concat(t(n,s))),[]);if("seq"!=e.type){if("star"==e.type){let o=n();return r(s,o),i(t(e.expr,o),o),[r(o)]}if("plus"==e.type){let o=n();return i(t(e.expr,s),o),i(t(e.expr,o),o),[r(o)]}if("opt"==e.type)return[r(s)].concat(t(e.expr,s));if("range"==e.type){let o=s;for(let r=0;r<e.min;r++){let r=n();i(t(e.expr,o),r),o=r}if(-1==e.max)i(t(e.expr,o),o);else for(let s=e.min;s<e.max;s++){let s=n();r(o,s),i(t(e.expr,o),s),o=s}return[r(o)]}if("name"==e.type)return[r(s,void 0,e.value)];throw new Error("Unknown expr type")}for(let r=0;;r++){let o=t(e.exprs[r],s);if(r==e.exprs.length-1)return o;i(o,s=n())}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){let i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach((t=>t.to=e))}}(r));return function(t,e){for(let n=0,r=[t];n<r.length;n++){let t=r[n],i=!t.validEnd,s=[];for(let e=0;e<t.next.length;e++){let{type:n,next:o}=t.next[e];s.push(n.name),!i||n.isText||n.hasRequiredAttrs()||(i=!1),-1==r.indexOf(o)&&r.push(o)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(i,n),i}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let r=this;for(let i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let r=[this];return function i(s,l){let h=s.matchFragment(t,n);if(h&&(!e||h.validEnd))return o.from(l.map((t=>t.createAndFill())));for(let t=0;t<s.next.length;t++){let{type:e,next:n}=s.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==r.indexOf(n)){r.push(n);let t=i(n,l.concat(e));if(t)return t}}return null}(this,[])}findWrapping(t){for(let e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let r=n.shift(),i=r.match;if(i.matchType(t)){let t=[];for(let e=r;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<i.next.length;t++){let{type:s,next:o}=i.next[t];s.isLeaf||s.hasRequiredAttrs()||s.name in e||r.type&&!o.validEnd||(n.push({match:s.contentMatch,type:s,via:r}),e[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(n){t.push(n);for(let r=0;r<n.next.length;r++)-1==t.indexOf(n.next[r].next)&&e(n.next[r].next)}(this),t.map(((e,n)=>{let r=n+(e.validEnd?"*":" ")+" ";for(let n=0;n<e.next.length;n++)r+=(n?", ":"")+e.next[n].type.name+"->"+t.indexOf(e.next[n].next);return r})).join("\n")}}A.empty=new A(!0);class F{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function $(t){let e=[];do{e.push(J(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function J(t){let e=[];do{e.push(B(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function B(t){let e=function(t){if(t.eat("(")){let e=$(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let t in n){let r=n[t];r.groups.indexOf(e)>-1&&i.push(r)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=j(t,e)}return e}function D(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function j(t,e){let n=D(t),r=n;return t.eat(",")&&(r="}"!=t.next?D(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function H(t,e){return e-t}function P(t,e){let n=[];return function e(r){let i=t[r];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(r);for(let t=0;t<i.length;t++){let{term:r,to:s}=i[t];r||-1!=n.indexOf(s)||e(s)}}(e),n.sort(H)}function Y(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function q(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(void 0===i){let e=t[r];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=e.default}n[r]=i}return n}function W(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new K(t[n]);return e}class L{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=W(n.attrs),this.defaultAttrs=Y(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==A.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:q(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new I(this,this.computeAttrs(t),o.from(e),c.setFrom(n))}createChecked(t=null,e,n){if(e=o.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new I(this,this.computeAttrs(t),e,c.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),(e=o.from(e)).size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let r=this.contentMatch.matchFragment(e),i=r&&r.fillBefore(o.empty,!0);return i?new I(this,t,e.append(i),c.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let e=0;e<t.childCount;e++)if(!this.allowsMarks(t.child(e).marks))return!1;return!0}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:c.none:t}static compile(t,e){let n=Object.create(null);t.forEach(((t,r)=>n[t]=new L(t,e,r)));let r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let t in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class K{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class _{constructor(t,e,n,r){this.name=t,this.rank=e,this.schema=n,this.spec=r,this.attrs=W(r.attrs),this.excluded=null;let i=Y(this.attrs);this.instance=i?new c(this,i):null}create(t=null){return!t&&this.instance?this.instance:new c(this,q(this.attrs,t))}static compile(t,e){let n=Object.create(null),r=0;return t.forEach(((t,i)=>n[t]=new _(t,r++,e,i))),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}class U{constructor(t){this.cached=Object.create(null),this.spec={nodes:r.Z.from(t.nodes),marks:r.Z.from(t.marks||{}),topNode:t.topNode},this.nodes=L.compile(this.spec.nodes,this),this.marks=_.compile(this.spec.marks,this);let e=Object.create(null);for(let t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");let n=this.nodes[t],r=n.spec.content||"",i=n.spec.marks;n.contentMatch=e[r]||(e[r]=A.parse(r,this.nodes)),n.inlineContent=n.contentMatch.inlineContent,n.markSet="_"==i?null:i?V(this,i.split(" ")):""!=i&&n.inlineContent?null:[]}for(let t in this.marks){let e=this.marks[t],n=e.spec.excludes;e.excluded=null==n?[e]:""==n?[]:V(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof L))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)}text(t,e){let n=this.nodes.text;return new R(n,n.defaultAttrs,t,c.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return I.fromJSON(this,t)}markFromJSON(t){return c.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function V(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let e in t.marks){let r=t.marks[e];("_"==i||r.spec.group&&r.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=r)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}class Z{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((t=>{t.tag?this.tags.push(t):t.style&&this.styles.push(t)})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}parse(t,e={}){let n=new nt(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new nt(this,e,!0);return n.addAll(t,e.from,e.to),d.maxOpen(n.finish())}matchTag(t,e,n){for(let r=n?this.tags.indexOf(n)+1:0;r<this.tags.length;r++){let n=this.tags[r];if(rt(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,r){for(let i=r?this.styles.indexOf(r)+1:0;i<this.styles.length;i++){let r=this.styles[i],s=r.style;if(!(0!=s.indexOf(t)||r.context&&!n.matchesContext(r.context)||s.length>t.length&&(61!=s.charCodeAt(t.length)||s.slice(t.length+1)!=e))){if(r.getAttrs){let t=r.getAttrs(e);if(!1===t)continue;r.attrs=t||void 0}return r}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,r=0;for(;r<e.length;r++){let t=e[r];if((null==t.priority?50:t.priority)<n)break}e.splice(r,0,t)}for(let e in t.marks){let r=t.marks[e].spec.parseDOM;r&&r.forEach((t=>{n(t=it(t)),t.mark=e}))}for(let e in t.nodes){let r=t.nodes[e].spec.parseDOM;r&&r.forEach((t=>{n(t=it(t)),t.node=e}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Z(t,Z.schemaRules(t)))}}const G={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Q={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},X={ol:!0,ul:!0};function tt(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}class et{constructor(t,e,n,r,i,s,o){this.type=t,this.attrs=e,this.marks=n,this.pendingMarks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=c.none,this.stashMarks=[],this.match=s||(4&o?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(o.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=o.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(o.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,n=this.pendingMarks;e<n.length;e++){let r=n[e];(this.type?this.type.allowsMarkType(r.type):st(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!G.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class nt{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let r,i=e.topNode,s=tt(null,e.preserveWhitespace,0)|(n?4:0);r=i?new et(i.type,i.attrs,c.none,c.none,!0,e.topMatch||i.type.contentMatch,s):new et(n?null:t.schema.topNodeType,null,c.none,c.none,!0,null,s),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){let e=t.getAttribute("style"),n=e?this.readStyles(function(t){let e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];for(;e=n.exec(t);)r.push(e[1],e[2].trim());return r}(e)):null,r=this.top;if(null!=n)for(let t=0;t<n.length;t++)this.addPendingMark(n[t]);if(this.addElement(t),null!=n)for(let t=0;t<n.length;t++)this.removePendingMark(n[t],r)}}addTextNode(t){let e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let n,r=t.nodeName.toLowerCase();X.hasOwnProperty(r)&&this.parser.normalizeLists&&function(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&X.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}(t);let i=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(i?i.ignore:Q.hasOwnProperty(r))this.findInside(t),this.ignoreFallback(t);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(t=i.skip);let e,n=this.top,s=this.needsBlock;if(G.hasOwnProperty(r))e=!0,n.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),e&&this.sync(n),this.needsBlock=s}else this.addElementByRule(t,i,!1===i.consuming?n:void 0)}leafFallback(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}ignoreFallback(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=c.none;t:for(let n=0;n<t.length;n+=2)for(let r;;){let i=this.parser.matchStyle(t[n],t[n+1],this,r);if(!i)continue t;if(i.ignore)return null;if(e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;r=i}return e}addElementByRule(t,e,n){let r,i,s;e.node?(i=this.parser.schema.nodes[e.node],i.isLeaf?this.insertNode(i.create(e.attrs))||this.leafFallback(t):r=this.enter(i,e.attrs||null,e.preserveWhitespace)):(s=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(s));let o=this.top;if(i&&i.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t)));else{let n=t;"string"==typeof e.contentElement?n=t.querySelector(e.contentElement):"function"==typeof e.contentElement?n=e.contentElement(t):e.contentElement&&(n=e.contentElement),this.findAround(t,n,!0),this.addAll(n)}r&&this.sync(o)&&this.open--,s&&this.removePendingMark(s,o)}addAll(t,e,n){let r=e||0;for(let i=e?t.childNodes[e]:t.firstChild,s=null==n?null:t.childNodes[n];i!=s;i=i.nextSibling,++r)this.findAtPoint(t,r),this.addDOM(i);this.findAtPoint(t,r)}findPlace(t){let e,n;for(let r=this.open;r>=0;r--){let i=this.nodes[r],s=i.findWrapping(t);if(s&&(!e||e.length>s.length)&&(e=s,n=i,!s.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(let t=0;t<e.length;t++)this.enterInner(e[t],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let n=e.activeMarks;for(let r=0;r<t.marks.length;r++)e.type&&!e.type.allowsMarkType(t.marks[r].type)||(n=t.marks[r].addToSet(n));return e.content.push(t.mark(n)),!0}return!1}enter(t,e,n){let r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r}enterInner(t,e=null,n=!1,r){this.closeExtra();let i=this.top;i.applyPending(t),i.match=i.match&&i.match.matchType(t);let s=tt(t,r,i.options);4&i.options&&0==i.content.length&&(s|=4),this.nodes.push(new et(t,e,i.activeMarks,i.pendingMarks,n,null,s)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let r=0;r<this.find.length;r++)null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)&&e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,r=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),i=-(n?n.depth+1:0)+(r?0:1),s=(t,o)=>{for(;t>=0;t--){let l=e[t];if(""==l){if(t==e.length-1||0==t)continue;for(;o>=i;o--)if(s(t-1,o))return!0;return!1}{let t=o>0||0==o&&r?this.nodes[o].type:n&&o>=i?n.node(o-i).type:null;if(!t||t.name!=l&&-1==t.groups.indexOf(l))return!1;o--}}return!0};return s(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(t){let e=function(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let n=this.open;n>=0;n--){let r=this.nodes[n];if(r.pendingMarks.lastIndexOf(t)>-1)r.pendingMarks=t.removeFromSet(r.pendingMarks);else{r.activeMarks=t.removeFromSet(r.activeMarks);let e=r.popFromStashMark(t);e&&r.type&&r.type.allowsMarkType(e.type)&&(r.activeMarks=e.addToSet(r.activeMarks))}if(r==e)break}}}function rt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function it(t){let e={};for(let n in t)e[n]=t[n];return e}function st(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=t=>{s.push(t);for(let n=0;n<t.edgeCount;n++){let{type:r,next:i}=t.edge(n);if(r==e)return!0;if(s.indexOf(i)<0&&o(i))return!0}};if(o(i.contentMatch))return!0}}class ot{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=ht(e).createDocumentFragment());let r=n,i=[];return t.forEach((t=>{if(i.length||t.marks.length){let n=0,s=0;for(;n<i.length&&s<t.marks.length;){let e=t.marks[s];if(this.marks[e.type.name]){if(!e.eq(i[n][0])||!1===e.type.spec.spanning)break;n++,s++}else s++}for(;n<i.length;)r=i.pop()[1];for(;s<t.marks.length;){let n=t.marks[s++],o=this.serializeMark(n,t.isInline,e);o&&(i.push([n,r]),r.appendChild(o.dom),r=o.contentDOM||o.dom)}}r.appendChild(this.serializeNodeInner(t,e))})),n}serializeNodeInner(t,e){let{dom:n,contentDOM:r}=ot.renderSpec(ht(e),this.nodes[t.type.name](t));if(r){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,r)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let r=t.marks.length-1;r>=0;r--){let i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n}serializeMark(t,e,n={}){let r=this.marks[t.type.name];return r&&ot.renderSpec(ht(n),r(t,e))}static renderSpec(t,e,n=null){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let r,i=e[0],s=i.indexOf(" ");s>0&&(n=i.slice(0,s),i=i.slice(s+1));let o=n?t.createElementNS(n,i):t.createElement(i),l=e[1],h=1;if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l)){h=2;for(let t in l)if(null!=l[t]){let e=t.indexOf(" ");e>0?o.setAttributeNS(t.slice(0,e),t.slice(e+1),l[t]):o.setAttribute(t,l[t])}}for(let i=h;i<e.length;i++){let s=e[i];if(0===s){if(i<e.length-1||i>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:o,contentDOM:o}}{let{dom:e,contentDOM:i}=ot.renderSpec(t,s,n);if(o.appendChild(e),i){if(r)throw new RangeError("Multiple content holes");r=i}}}return{dom:o,contentDOM:r}}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new ot(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=lt(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return lt(t.marks)}}function lt(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function ht(t){return t.document||window.document}},53833:(t,e,n)=>{n.d(e,{IB:()=>o,KI:()=>s,bw:()=>l});var r=n(16560),i=n(59084);function s(t,e=null){return function(n,s){let{$from:o,$to:l}=n.selection,h=o.blockRange(l),a=!1,c=h;if(!h)return!1;if(h.depth>=2&&o.node(h.depth-1).type.compatibleContent(t)&&0==h.startIndex){if(0==o.index(h.depth-1))return!1;let t=n.doc.resolve(h.start-2);c=new i.Ts(t,t,h.depth),h.endIndex<h.parent.childCount&&(h=new i.Ts(o,n.doc.resolve(l.end(h.depth)),h.depth)),a=!0}let p=(0,r.nd)(c,t,e,h);return!!p&&(s&&s(function(t,e,n,s,o){let l=i.HY.empty;for(let t=n.length-1;t>=0;t--)l=i.HY.from(n[t].type.create(n[t].attrs,l));t.step(new r.FC(e.start-(s?2:0),e.end,e.start,e.end,new i.p2(l,0,0),n.length,!0));let h=0;for(let t=0;t<n.length;t++)n[t].type==o&&(h=t+1);let a=n.length-h,c=e.start+n.length-(s?2:0),p=e.parent;for(let n=e.startIndex,i=e.endIndex,s=!0;n<i;n++,s=!1)!s&&(0,r.Ax)(t.doc,c,a)&&(t.split(c,a),c+=2*a),c+=p.child(n).nodeSize;return t}(n.tr,h,p,a,t).scrollIntoView()),!0)}}function o(t){return function(e,n){let{$from:s,$to:o}=e.selection,l=s.blockRange(o,(e=>e.childCount>0&&e.firstChild.type==t));return!!l&&(!n||(s.node(l.depth-1).type==t?function(t,e,n,s){let o=t.tr,l=s.end,h=s.$to.end(s.depth);return l<h&&(o.step(new r.FC(l-1,h,l,h,new i.p2(i.HY.from(n.create(null,s.parent.copy())),1,0),1,!0)),s=new i.Ts(o.doc.resolve(s.$from.pos),o.doc.resolve(h),s.depth)),e(o.lift(s,(0,r.k9)(s)).scrollIntoView()),!0}(e,n,t,l):function(t,e,n){let s=t.tr,o=n.parent;for(let t=n.end,e=n.endIndex-1,r=n.startIndex;e>r;e--)t-=o.child(e).nodeSize,s.delete(t-1,t+1);let l=s.doc.resolve(n.start),h=l.nodeAfter;if(s.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;let a=0==n.startIndex,c=n.endIndex==o.childCount,p=l.node(-1),d=l.index(-1);if(!p.canReplace(d+(a?0:1),d+1,h.content.append(c?i.HY.empty:i.HY.from(o))))return!1;let f=l.pos,u=f+h.nodeSize;return s.step(new r.FC(f-(a?1:0),u+(c?1:0),f+1,u-1,new i.p2((a?i.HY.empty:i.HY.from(o.copy(i.HY.empty))).append(c?i.HY.empty:i.HY.from(o.copy(i.HY.empty))),a?0:1,c?0:1),a?0:1)),e(s.scrollIntoView()),!0}(e,n,l)))}}function l(t){return function(e,n){let{$from:s,$to:o}=e.selection,l=s.blockRange(o,(e=>e.childCount>0&&e.firstChild.type==t));if(!l)return!1;let h=l.startIndex;if(0==h)return!1;let a=l.parent,c=a.child(h-1);if(c.type!=t)return!1;if(n){let s=c.lastChild&&c.lastChild.type==a.type,o=i.HY.from(s?t.create():null),h=new i.p2(i.HY.from(t.create(null,i.HY.from(a.type.create(null,o)))),s?3:1,0),p=l.start,d=l.end;n(e.tr.step(new r.FC(p-(s?3:1),d,p,d,h,1,!0)).scrollIntoView())}return!0}}},2376:(t,e,n)=>{n.d(e,{Bs:()=>c,C1:()=>u,H$:()=>E,Sy:()=>b,Y1:()=>o,qv:()=>d,yy:()=>M});var r=n(59084),i=n(16560);const s=Object.create(null);class o{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new l(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=r.p2.empty){let n=e.content.lastChild,i=null;for(let t=0;t<e.openEnd;t++)i=n,n=n.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:h,$to:a}=o[l],c=t.mapping.slice(s);t.replaceRange(c.map(h.pos),c.map(a.pos),l?r.p2.empty:e),0==l&&y(t,s,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,r=this.ranges;for(let i=0;i<r.length;i++){let{$from:s,$to:o}=r[i],l=t.mapping.slice(n),h=l.map(s.pos),a=l.map(o.pos);i?t.deleteRange(h,a):(t.replaceRangeWith(h,a,e),y(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let r=t.parent.inlineContent?new c(t):g(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(let r=t.depth-1;r>=0;r--){let i=e<0?g(t.node(0),t.node(r),t.before(r+1),t.index(r),e,n):g(t.node(0),t.node(r),t.after(r+1),t.index(r)+1,e,n);if(i)return i}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new u(t.node(0))}static atStart(t){return g(t,t,0,0,1)||new u(t)}static atEnd(t){return g(t,t,t.content.size,t.childCount,-1)||new u(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=s[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in s)throw new RangeError("Duplicate use of selection JSON ID "+t);return s[t]=e,e.prototype.jsonID=t,e}getBookmark(){return c.between(this.$anchor,this.$head).getBookmark()}}o.prototype.visible=!0;class l{constructor(t,e){this.$from=t,this.$to=e}}let h=!1;function a(t){h||t.parent.inlineContent||(h=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class c extends o{constructor(t,e=t){a(t),a(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return o.near(n);let r=t.resolve(e.map(this.anchor));return new c(r.parent.inlineContent?r:n,n)}replace(t,e=r.p2.empty){if(super.replace(t,e),e==r.p2.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof c&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new p(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new c(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))}static between(t,e,n){let r=t.pos-e.pos;if(n&&!r||(n=r>=0?1:-1),!e.parent.inlineContent){let t=o.findFrom(e,n,!0)||o.findFrom(e,-n,!0);if(!t)return o.near(e,n);e=t.$head}return t.parent.inlineContent||(0==r||(t=(o.findFrom(t,-n,!0)||o.findFrom(t,n,!0)).$anchor).pos<e.pos!=r<0)&&(t=e),new c(t,e)}}o.jsonID("text",c);class p{constructor(t,e){this.anchor=t,this.head=e}map(t){return new p(t.map(this.anchor),t.map(this.head))}resolve(t){return c.between(t.resolve(this.anchor),t.resolve(this.head))}}class d extends o{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:r}=e.mapResult(this.anchor),i=t.resolve(r);return n?o.near(i):new d(i)}content(){return new r.p2(r.HY.from(this.node),0,0)}eq(t){return t instanceof d&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new f(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new d(t.resolve(e.anchor))}static create(t,e){return new d(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}d.prototype.visible=!1,o.jsonID("node",d);class f{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new p(n,n):new f(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&d.isSelectable(n)?new d(e):o.near(e)}}class u extends o{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=r.p2.empty){if(e==r.p2.empty){t.delete(0,t.doc.content.size);let e=o.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new u(t)}map(t){return new u(t)}eq(t){return t instanceof u}getBookmark(){return m}}o.jsonID("all",u);const m={map(){return this},resolve:t=>new u(t)};function g(t,e,n,r,i,s=!1){if(e.inlineContent)return c.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let r=e.child(o);if(r.isAtom){if(!s&&d.isSelectable(r))return d.create(t,n-(i<0?r.nodeSize:0))}else{let e=g(t,r,n+i,i<0?r.childCount:0,i,s);if(e)return e}n+=r.nodeSize*i}return null}function y(t,e,n){let r=t.steps.length-1;if(r<e)return;let s,l=t.steps[r];(l instanceof i.Pu||l instanceof i.FC)&&(t.mapping.maps[r].forEach(((t,e,n,r)=>{null==s&&(s=r)})),t.setSelection(o.near(t.doc.resolve(s),n)))}class w extends i.wx{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return r.vc.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r.vc.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);let i=this.storedMarks;if(!i){let t=this.doc.resolve(e);i=n==e?t.marks():t.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,i)),this.selection.empty||this.setSelection(o.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function x(t,e){return e&&t?t.bind(e):t}class k{constructor(t,e,n){this.name=t,this.init=x(e.init,n),this.apply=x(e.apply,n)}}const S=[new k("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new k("selection",{init:(t,e)=>t.selection||o.atStart(e.doc),apply:t=>t.selection}),new k("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,n,r)=>r.selection.$cursor?t.storedMarks:null}),new k("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e})];class v{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=S.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new k(t.key,t.spec.state,t))}))}}class M{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let e=this.config.plugins[n];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),r=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let o=this.config.plugins[s];if(o.spec.appendTransaction){let l=r?r[s].n:0,h=r?r[s].state:this,a=l<e.length&&o.spec.appendTransaction.call(o,l?e.slice(l):e,h,n);if(a&&n.filterTransaction(a,s)){if(a.setMeta("appendedTransaction",t),!r){r=[];for(let t=0;t<this.config.plugins.length;t++)r.push(t<s?{state:n,n:e.length}:{state:this,n:0})}e.push(a),n=n.applyInner(a),i=!0}r&&(r[s]={state:n,n:e.length})}}if(!i)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new M(this.config),n=this.config.fields;for(let r=0;r<n.length;r++){let i=n[r];e[i.name]=i.apply(t,this[i.name],this,e)}return e}get tr(){return new w(this)}static create(t){let e=new v(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new M(e);for(let r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n}reconfigure(t){let e=new v(this.schema,t.plugins),n=e.fields,r=new M(e);for(let e=0;e<n.length;e++){let i=n[e].name;r[i]=this.hasOwnProperty(i)?this[i]:n[e].init(t,r)}return r}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=t[n],i=r.spec.state;i&&i.toJSON&&(e[n]=i.toJSON.call(r,this[r.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new v(t.schema,t.plugins),s=new M(i);return i.fields.forEach((i=>{if("doc"==i.name)s.doc=r.NB.fromJSON(t.schema,e.doc);else if("selection"==i.name)s.selection=o.fromJSON(s.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(s.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let r in n){let o=n[r],l=o.spec.state;if(o.key==i.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(e,r))return void(s[i.name]=l.fromJSON.call(o,t,e[r],s))}s[i.name]=i.init(t,s)}})),s}}function C(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):"handleDOMEvents"==r&&(i=C(i,e,{})),n[r]=i}return n}class b{constructor(t){this.spec=t,this.props={},t.props&&C(t.props,this,this.props),this.key=t.key?t.key.key:T("plugin")}getState(t){return t[this.key]}}const O=Object.create(null);function T(t){return t in O?t+"$"+ ++O[t]:(O[t]=0,t+"$")}class E{constructor(t="key"){this.key=T(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}},16560:(t,e,n)=>{n.d(e,{Ax:()=>v,FC:()=>g,Mn:()=>M,Pu:()=>m,dR:()=>b,k9:()=>x,nd:()=>k,nj:()=>C,wx:()=>B});var r=n(59084);const i=Math.pow(2,16);function s(t){return 65535&t}class o{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class l{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&l.empty)return l.empty}recover(t){let e=0,n=s(t);if(!this.inverted)for(let t=0;t<n;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/i}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let r=0,s=this.inverted?2:1,l=this.inverted?1:2;for(let h=0;h<this.ranges.length;h+=3){let a=this.ranges[h]-(this.inverted?r:0);if(a>t)break;let c=this.ranges[h+s],p=this.ranges[h+l],d=a+c;if(t<=d){let s=a+r+((c?t==a?-1:t==d?1:e:e)<0?0:p);if(n)return s;let l=t==a?2:t==d?1:4;return(e<0?t!=a:t!=d)&&(l|=8),new o(s,l,t==(e<0?a:d)?null:h/3+(t-a)*i)}r+=p-c}return n?t+r:new o(t+r,0,null)}touches(t,e){let n=0,r=s(e),i=this.inverted?2:1,o=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let s=this.ranges[e]-(this.inverted?n:0);if(s>t)break;let l=this.ranges[e+i];if(t<=s+l&&e==3*r)return!0;n+=this.ranges[e+o]-l}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let r=0,i=0;r<this.ranges.length;r+=3){let s=this.ranges[r],o=s-(this.inverted?i:0),l=s+(this.inverted?0:i),h=this.ranges[r+e],a=this.ranges[r+n];t(o,o+h,l,l+a),i+=a-h}}invert(){return new l(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?l.empty:new l(t<0?[0,-t,0]:[0,0,t])}}l.empty=new l([]);class h{constructor(t=[],e,n=0,r=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=r}slice(t=0,e=this.maps.length){return new h(this.maps,this.mirror,t,e)}copy(){return new h(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:void 0)}}invert(){let t=new h;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let r=0;for(let n=this.from;n<this.to;n++){let i=this.maps[n].mapResult(t,e);if(null!=i.recover){let e=this.getMirror(n);if(null!=e&&e>n&&e<this.to){n=e,t=this.maps[e].recover(i.recover);continue}}r|=i.delInfo,t=i.pos}return n?t:new o(t,r,null)}}const a=Object.create(null);class c{getMap(){return l.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=a[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in a)throw new RangeError("Duplicate use of step JSON ID "+t);return a[t]=e,e.prototype.jsonID=t,e}}class p{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new p(t,null)}static fail(t){return new p(null,t)}static fromReplace(t,e,n,i){try{return p.ok(t.replace(e,n,i))}catch(t){if(t instanceof r.e4)return p.fail(t.message);throw t}}}function d(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let s=t.child(r);s.content.size&&(s=s.copy(d(s.content,e,s))),s.isInline&&(s=e(s,n,r)),i.push(s)}return r.HY.fromArray(i)}class f extends c{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),s=new r.p2(d(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),i),e.openStart,e.openEnd);return p.fromReplace(t,this.from,this.to,s)}invert(){return new u(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new f(e.pos,n.pos,this.mark)}merge(t){return t instanceof f&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new f(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new f(e.from,e.to,t.markFromJSON(e.mark))}}c.jsonID("addMark",f);class u extends c{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new r.p2(d(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return p.fromReplace(t,this.from,this.to,n)}invert(){return new f(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new u(e.pos,n.pos,this.mark)}merge(t){return t instanceof u&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new u(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new u(e.from,e.to,t.markFromJSON(e.mark))}}c.jsonID("removeMark",u);class m extends c{constructor(t,e,n,r=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=r}apply(t){return this.structure&&y(t,this.from,this.to)?p.fail("Structure replace would overwrite content"):p.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new l([this.from,this.to-this.from,this.slice.size])}invert(t){return new m(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new m(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof m)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new m(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?r.p2.empty:new r.p2(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new m(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new m(e.from,e.to,r.p2.fromJSON(t,e.slice),!!e.structure)}}c.jsonID("replace",m);class g extends c{constructor(t,e,n,r,i,s,o=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=r,this.slice=i,this.insert=s,this.structure=o}apply(t){if(this.structure&&(y(t,this.from,this.gapFrom)||y(t,this.gapTo,this.to)))return p.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return p.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?p.fromReplace(t,this.from,this.to,n):p.fail("Content does not fit in gap")}getMap(){return new l([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new g(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||r<e.pos||i>n.pos?null:new g(e.pos,n.pos,r,i,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new g(e.from,e.to,e.gapFrom,e.gapTo,r.p2.fromJSON(t,e.slice),e.insert,!!e.structure)}}function y(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let t=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,i--}}return!1}function w(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function x(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let r=t.$from.node(n),i=t.$from.index(n),s=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(i,s,e))return n;if(0==n||r.type.spec.isolating||!w(r,i,s))break}return null}function k(t,e,n=null,r=t){let i=function(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}(t,e),s=i&&function(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let t=r;l&&t<i;t++)l=l.matchType(n.child(t).type);return l&&l.validEnd?o:null}(r,e);return s?i.map(S).concat({type:e,attrs:n}).concat(s.map(S)):null}function S(t){return{type:t,attrs:null}}function v(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let t=i.depth-1,e=n-2;t>s;t--,e--){let n=i.node(t),s=i.index(t);if(n.type.spec.isolating)return!1;let o=n.content.cutByIndex(s,n.childCount),l=r&&r[e]||n;if(l!=n&&(o=o.replaceChild(0,l.type.create(l.attrs))),!n.canReplace(s+1,n.childCount)||!l.type.validContent(o))return!1}let l=i.indexAfter(s),h=r&&r[0];return i.node(s).canReplaceWith(l,l,h?h.type:i.node(s+1).type)}function M(t,e){let n=t.resolve(e),r=n.index();return i=n.nodeBefore,s=n.nodeAfter,!(!i||!s||i.isLeaf||!i.canAppend(s))&&n.parent.canReplace(r,r+1);var i,s}function C(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let t=0;t<n.openStart;t++)i=i.firstChild.content;for(let t=1;t<=(0==n.openStart&&n.size?2:1);t++)for(let e=r.depth;e>=0;e--){let n=e==r.depth?0:r.pos<=(r.start(e+1)+r.end(e+1))/2?-1:1,s=r.index(e)+(n>0?1:0),o=r.node(e),l=!1;if(1==t)l=o.canReplace(s,s,i);else{let t=o.contentMatchAt(s).findWrapping(i.firstChild.type);l=t&&o.canReplaceWith(s,s,t[0])}if(l)return 0==n?r.pos:n<0?r.before(e+1):r.after(e+1)}return null}function b(t,e,n=e,i=r.p2.empty){if(e==n&&!i.size)return null;let s=t.resolve(e),o=t.resolve(n);return O(s,o,i)?new m(e,n,i):new T(s,o,i).fit()}function O(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}c.jsonID("replaceAround",g);class T{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=r.HY.empty;for(let e=0;e<=t.depth;e++){let n=t.node(e);this.frontier.push({type:n.type,match:n.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=r.HY.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let s=this.placed,o=n.depth,l=i.depth;for(;o&&l&&1==s.childCount;)s=s.firstChild.content,o--,l--;let h=new r.p2(s,o,l);return t>-1?new g(n.pos,t,this.$to.pos,this.$to.end(),h,e):h.size||n.pos!=this.$to.pos?new m(n.pos,i.pos,h):null}findFittable(){for(let t=1;t<=2;t++)for(let e=this.unplaced.openStart;e>=0;e--){let n,i=null;e?(i=I(this.unplaced.content,e-1).firstChild,n=i.content):n=this.unplaced.content;let s=n.firstChild;for(let n=this.depth;n>=0;n--){let o,{type:l,match:h}=this.frontier[n],a=null;if(1==t&&(s?h.matchType(s.type)||(a=h.fillBefore(r.HY.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:e,frontierDepth:n,parent:i,inject:a};if(2==t&&s&&(o=h.findWrapping(s.type)))return{sliceDepth:e,frontierDepth:n,parent:i,wrap:o};if(i&&h.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=I(t,e);return!(!i.childCount||i.firstChild.isLeaf||(this.unplaced=new r.p2(t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),0))}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=I(t,e);if(i.childCount<=1&&e>0){let s=t.size-e<=e+i.size;this.unplaced=new r.p2(E(t,e-1,1),e-1,s?e-1:n)}else this.unplaced=new r.p2(E(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:s}){for(;this.depth>e;)this.closeFrontierNode();if(s)for(let t=0;t<s.length;t++)this.openFrontierNode(s[t]);let o=this.unplaced,l=n?n.content:o.content,h=o.openStart-t,a=0,c=[],{match:p,type:d}=this.frontier[e];if(i){for(let t=0;t<i.childCount;t++)c.push(i.child(t));p=p.matchFragment(i)}let f=l.size+t-(o.content.size-o.openEnd);for(;a<l.childCount;){let t=l.child(a),e=p.matchType(t.type);if(!e)break;a++,(a>1||0==h||t.content.size)&&(p=e,c.push(R(t.mark(d.allowedMarks(t.marks)),1==a?h:0,a==l.childCount?f:-1)))}let u=a==l.childCount;u||(f=-1),this.placed=N(this.placed,e,r.HY.from(c)),this.frontier[e].match=p,u&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=l;t<f;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=u?0==t?r.p2.empty:new r.p2(E(o.content,t-1,1),t-1,f<0?o.openEnd:t-1):new r.p2(E(o.content,t,a),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!z(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,r=this.$to.after(n);for(;n>1&&r==this.$to.end(--n);)++r;return r}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:r}=this.frontier[e],i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=z(t,e,r,n,i);if(s){for(let n=e-1;n>=0;n--){let{match:e,type:r}=this.frontier[n],i=z(t,n,r,e,!0);if(!i||i.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=N(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),r=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,r)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=N(this.placed,this.depth,r.HY.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(r.HY.empty,!0);t.childCount&&(this.placed=N(this.placed,this.frontier.length,t))}}function E(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(E(t.firstChild.content,e-1,n)))}function N(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(N(t.lastChild.content,e-1,n)))}function I(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function R(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,R(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(r.HY.empty,!0)))),t.copy(i)}function z(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!function(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,s.content,o)?l:null}function A(t){return t.spec.defining||t.spec.definingForContent}function F(t,e,n,i,s){if(e<n){let r=t.firstChild;t=t.replaceChild(0,r.copy(F(r.content,e+1,n,i,r)))}if(e>i){let e=s.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(r.HY.empty,!0))}return t}function $(t,e){let n=[];for(let r=Math.min(t.depth,e.depth);r>=0;r--){let i=t.start(r);if(i<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(i==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==i-1)&&n.push(r)}return n}let J=class extends Error{};J=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},(J.prototype=Object.create(Error.prototype)).constructor=J,J.prototype.name="TransformError";class B{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new h}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new J(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=r.p2.empty){let i=b(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new r.p2(r.HY.from(n),0,0))}delete(t,e){return this.replace(t,e,r.p2.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return function(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),o=t.doc.resolve(n);if(O(s,o,i))return t.step(new m(e,n,i));let l=$(s,t.doc.resolve(n));0==l[l.length-1]&&l.pop();let h=-(s.depth+1);l.unshift(h);for(let t=s.depth,e=s.pos-1;t>0;t--,e--){let n=s.node(t).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;l.indexOf(t)>-1?h=t:s.before(t)==e&&l.splice(1,0,-t)}let a=l.indexOf(h),c=[],p=i.openStart;for(let t=i.content,e=0;;e++){let n=t.firstChild;if(c.push(n),e==i.openStart)break;t=n.content}for(let t=p-1;t>=0;t--){let e=c[t].type,n=A(e);if(n&&s.node(a).type!=e)p=t;else if(n||!e.isTextblock)break}for(let e=i.openStart;e>=0;e--){let h=(e+p+1)%(i.openStart+1),d=c[h];if(d)for(let e=0;e<l.length;e++){let c=l[(e+a)%l.length],p=!0;c<0&&(p=!1,c=-c);let f=s.node(c-1),u=s.index(c-1);if(f.canReplaceWith(u,u,d.type,d.marks))return t.replace(s.before(c),p?o.after(c):n,new r.p2(F(i.content,0,i.openStart,h),h,i.openEnd))}}let d=t.steps.length;for(let r=l.length-1;r>=0&&(t.replace(e,n,i),!(t.steps.length>d));r--){let t=l[r];t<0||(e=s.before(t),n=o.after(t))}}(this,t,e,n),this}replaceRangeWith(t,e,n){return function(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=function(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(let t=r.depth-1;t>=0;t--){let e=r.index(t);if(r.node(t).canReplaceWith(e,e,n))return r.before(t+1);if(e>0)return null}if(r.parentOffset==r.parent.content.size)for(let t=r.depth-1;t>=0;t--){let e=r.indexAfter(t);if(r.node(t).canReplaceWith(e,e,n))return r.after(t+1);if(e<r.node(t).childCount)return null}return null}(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new r.p2(r.HY.from(i),0,0))}(this,t,e,n),this}deleteRange(t,e){return function(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=$(r,i);for(let e=0;e<s.length;e++){let n=s[e],o=e==s.length-1;if(o&&0==n||r.node(n).type.contentMatch.validEnd)return t.delete(r.start(n),i.end(n));if(n>0&&(o||r.node(n-1).canReplace(r.index(n-1),i.indexAfter(n-1))))return t.delete(r.before(n),i.after(n))}for(let s=1;s<=r.depth&&s<=i.depth;s++)if(e-r.start(s)==r.depth-s&&n>r.end(s)&&i.end(s)-n!=i.depth-s)return t.delete(r.before(s),n);t.delete(e,n)}(this,t,e),this}lift(t,e){return function(t,e,n){let{$from:i,$to:s,depth:o}=e,l=i.before(o+1),h=s.after(o+1),a=l,c=h,p=r.HY.empty,d=0;for(let t=o,e=!1;t>n;t--)e||i.index(t)>0?(e=!0,p=r.HY.from(i.node(t).copy(p)),d++):a--;let f=r.HY.empty,u=0;for(let t=o,e=!1;t>n;t--)e||s.after(t+1)<s.end(t)?(e=!0,f=r.HY.from(s.node(t).copy(f)),u++):c++;t.step(new g(a,c,l,h,new r.p2(p.append(f),d,u),p.size-d,!0))}(this,t,e),this}join(t,e=1){return function(t,e,n){let i=new m(e-n,e+n,r.p2.empty,!0);t.step(i)}(this,t,e),this}wrap(t,e){return function(t,e,n){let i=r.HY.empty;for(let t=n.length-1;t>=0;t--){if(i.size){let e=n[t].type.contentMatch.matchFragment(i);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=r.HY.from(n[t].type.create(n[t].attrs,i))}let s=e.start,o=e.end;t.step(new g(s,o,s,o,new r.p2(i,0,0),n.length,!0))}(this,t,e),this}setBlockType(t,e=t,n,i=null){return function(t,e,n,i,s){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,((e,n)=>{if(e.isTextblock&&!e.hasMarkup(i,s)&&function(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}(t.doc,t.mapping.slice(o).map(n),i)){t.clearIncompatible(t.mapping.slice(o).map(n,1),i);let l=t.mapping.slice(o),h=l.map(n,1),a=l.map(n+e.nodeSize,1);return t.step(new g(h,a,h+1,a-1,new r.p2(r.HY.from(i.create(s,null,e.marks)),0,0),1,!0)),!1}}))}(this,t,e,n,i),this}setNodeMarkup(t,e,n=null,i=[]){return function(t,e,n,i,s){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let l=n.create(i,null,s||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,l);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new g(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new r.p2(r.HY.from(l),0,0),1,!0))}(this,t,e,n,i),this}split(t,e=1,n){return function(t,e,n=1,i){let s=t.doc.resolve(e),o=r.HY.empty,l=r.HY.empty;for(let t=s.depth,e=s.depth-n,h=n-1;t>e;t--,h--){o=r.HY.from(s.node(t).copy(o));let e=i&&i[h];l=r.HY.from(e?e.type.create(e.attrs,l):s.node(t).copy(l))}t.step(new m(e,e,new r.p2(o.append(l),n,n),!0))}(this,t,e,n),this}addMark(t,e,n){return function(t,e,n,r){let i,s,o=[],l=[];t.doc.nodesBetween(e,n,((t,h,a)=>{if(!t.isInline)return;let c=t.marks;if(!r.isInSet(c)&&a.type.allowsMarkType(r.type)){let a=Math.max(h,e),p=Math.min(h+t.nodeSize,n),d=r.addToSet(c);for(let t=0;t<c.length;t++)c[t].isInSet(d)||(i&&i.to==a&&i.mark.eq(c[t])?i.to=p:o.push(i=new u(a,p,c[t])));s&&s.to==a?s.to=p:l.push(s=new f(a,p,r))}})),o.forEach((e=>t.step(e))),l.forEach((e=>t.step(e)))}(this,t,e,n),this}removeMark(t,e,n){return function(t,e,n,i){let s=[],o=0;t.doc.nodesBetween(e,n,((t,l)=>{if(!t.isInline)return;o++;let h=null;if(i instanceof r.ZU){let e,n=t.marks;for(;e=i.isInSet(n);)(h||(h=[])).push(e),n=e.removeFromSet(n)}else i?i.isInSet(t.marks)&&(h=[i]):h=t.marks;if(h&&h.length){let r=Math.min(l+t.nodeSize,n);for(let t=0;t<h.length;t++){let n,i=h[t];for(let t=0;t<s.length;t++){let e=s[t];e.step==o-1&&i.eq(s[t].style)&&(n=e)}n?(n.to=r,n.step=o):s.push({style:i,from:Math.max(l,e),to:r,step:o})}}})),s.forEach((e=>t.step(new u(e.from,e.to,e.style))))}(this,t,e,n),this}clearIncompatible(t,e,n){return function(t,e,n,i=n.contentMatch){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let e=0;e<s.childCount;e++){let h=s.child(e),a=l+h.nodeSize,c=i.matchType(h.type);if(c){i=c;for(let e=0;e<h.marks.length;e++)n.allowsMarkType(h.marks[e].type)||t.step(new u(l,a,h.marks[e]))}else o.push(new m(l,a,r.p2.empty));l=a}if(!i.validEnd){let e=i.fillBefore(r.HY.empty,!0);t.replace(l,l,new r.p2(e,0,0))}for(let e=o.length-1;e>=0;e--)t.step(o[e])}(this,t,e,n),this}}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uLTI1NjVmOTg0LjY1ZDA0OTA2NjFkMjBiYmEzYWU0LmpzIiwibWFwcGluZ3MiOiIySUFHQSxNQUFNQSxFQUEwQixvQkFBYkMsV0FBMkIscUJBQXFCQyxLQUFLRCxVQUFVRSxVQUNsRixTQUFTQyxFQUFpQkMsR0FDdEIsSUFHSUMsRUFBS0MsRUFBTUMsRUFBT0MsRUFIbEJDLEVBQVFMLEVBQUtNLE1BQU0sVUFBV0MsRUFBU0YsRUFBTUEsRUFBTUcsT0FBUyxHQUNsRCxTQUFWRCxJQUNBQSxFQUFTLEtBRWIsSUFBSyxJQUFJRSxFQUFJLEVBQUdBLEVBQUlKLEVBQU1HLE9BQVMsRUFBR0MsSUFBSyxDQUN2QyxJQUFJQyxFQUFNTCxFQUFNSSxHQUNoQixHQUFJLGtCQUFrQlosS0FBS2EsR0FDdkJOLEdBQU8sT0FDTixHQUFJLFlBQVlQLEtBQUthLEdBQ3RCVCxHQUFNLE9BQ0wsR0FBSSxzQkFBc0JKLEtBQUthLEdBQ2hDUixHQUFPLE9BQ04sR0FBSSxjQUFjTCxLQUFLYSxHQUN4QlAsR0FBUSxNQUNQLEtBQUksU0FBU04sS0FBS2EsR0FPbkIsTUFBTSxJQUFJQyxNQUFNLCtCQUFpQ0QsR0FON0NmLEVBQ0FTLEdBQU8sRUFFUEYsR0FBTyxDQUcwQyxDQUM3RCxDQVNBLE9BUklELElBQ0FNLEVBQVMsT0FBU0EsR0FDbEJMLElBQ0FLLEVBQVMsUUFBVUEsR0FDbkJILElBQ0FHLEVBQVMsUUFBVUEsR0FDbkJKLElBQ0FJLEVBQVMsU0FBV0EsR0FDakJBLENBQ1gsQ0FPQSxTQUFTSyxFQUFVWixFQUFNYSxFQUFPVixHQVM1QixPQVJJVSxFQUFNQyxTQUNOZCxFQUFPLE9BQVNBLEdBQ2hCYSxFQUFNRSxVQUNOZixFQUFPLFFBQVVBLEdBQ2pCYSxFQUFNRyxVQUNOaEIsRUFBTyxRQUFVQSxJQUNQLElBQVZHLEdBQW1CVSxFQUFNSSxXQUN6QmpCLEVBQU8sU0FBV0EsR0FDZkEsQ0FDWCxDQWdDQSxTQUFTa0IsRUFBT0MsR0FDWixPQUFPLElBQUksS0FBTyxDQUFFQyxN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QU11QyxNQUNwQyxHQUFLNnhCLEVBR0EsQ0FDRDluQixFQUFROG5CLEVBQ1IsSUFBSyxJQUFJL3pCLEVBQUksRUFBR0EsRUFBSUwsRUFBTW1HLE1BQU14SSxPQUFRMEMsSUFDL0I2ekIsRUFBV2poQixlQUFlalQsRUFBTW1HLE1BQU05RixHQUFHa0MsT0FDMUM0ZSxFQUFHRyxLQUFLLElBQUlnTSxFQUFlamUsRUFBS3pOLEVBQUs1QixFQUFNbUcsTUFBTTlGLElBQzdELE1BUEk4ekIsRUFBU2x4QixLQUFLLElBQUlzcUIsRUFBWWxlLEVBQUt6TixFQUFLLGFBUTVDeU4sRUFBTXpOLENBQ1YsQ0FDQSxJQUFLMEssRUFBTU0sU0FBVSxDQUNqQixJQUFJc00sRUFBTzVNLEVBQU13RCxXQUFXLFlBQWdCLEdBQzVDcVIsRUFBRzVaLFFBQVE4SCxFQUFLQSxFQUFLLElBQUksS0FBTTZKLEVBQU0sRUFBRyxHQUM1QyxDQUNBLElBQUssSUFBSXRiLEVBQUl1MkIsRUFBU3gyQixPQUFTLEVBQUdDLEdBQUssRUFBR0EsSUFDdEN1akIsRUFBR0csS0FBSzZTLEVBQVN2MkIsR0FDekIsQ0FxN0JRdTFCLENBQWtCOXhCLEtBQU14QixFQUFLcTBCLEVBQVk1bkIsR0FDbENqTCxJQUNYLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9taW5kbWFwLy4vbm9kZV9tb2R1bGVzL3Byb3NlbWlycm9yLWtleW1hcC9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL21pbmRtYXAvLi9ub2RlX21vZHVsZXMvcHJvc2VtaXJyb3ItbW9kZWwvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly9taW5kbWFwLy4vbm9kZV9tb2R1bGVzL3Byb3NlbWlycm9yLXNjaGVtYS1saXN0L2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWluZG1hcC8uL25vZGVfbW9kdWxlcy9wcm9zZW1pcnJvci1zdGF0ZS9kaXN0L2luZGV4LmpzIiwid2VicGFjazovL21pbmRtYXAvLi9ub2RlX21vZHVsZXMvcHJvc2VtaXJyb3ItdHJhbnNmb3JtL2Rpc3QvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsga2V5TmFtZSwgYmFzZSB9IGZyb20gJ3czYy1rZXluYW1lJztcbmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJ3Byb3NlbWlycm9yLXN0YXRlJztcblxuY29uc3QgbWFjID0gdHlwZW9mIG5hdmlnYXRvciAhPSBcInVuZGVmaW5lZFwiID8gL01hY3xpUChob25lfFtvYV1kKS8udGVzdChuYXZpZ2F0b3IucGxhdGZvcm0pIDogZmFsc2U7XG5mdW5jdGlvbiBub3JtYWxpemVLZXlOYW1lKG5hbWUpIHtcbiAgICBsZXQgcGFydHMgPSBuYW1lLnNwbGl0KC8tKD8hJCkvKSwgcmVzdWx0ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgaWYgKHJlc3VsdCA9PSBcIlNwYWNlXCIpXG4gICAgICAgIHJlc3VsdCA9IFwiIFwiO1xuICAgIGxldCBhbHQsIGN0cmwsIHNoaWZ0LCBtZXRhO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGxldCBtb2QgPSBwYXJ0c1tpXTtcbiAgICAgICAgaWYgKC9eKGNtZHxtZXRhfG0pJC9pLnRlc3QobW9kKSlcbiAgICAgICAgICAgIG1ldGEgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXmEobHQpPyQvaS50ZXN0KG1vZCkpXG4gICAgICAgICAgICBhbHQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXihjfGN0cmx8Y29udHJvbCkkL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgY3RybCA9IHRydWU7XG4gICAgICAgIGVsc2UgaWYgKC9ecyhoaWZ0KT8kL2kudGVzdChtb2QpKVxuICAgICAgICAgICAgc2hpZnQgPSB0cnVlO1xuICAgICAgICBlbHNlIGlmICgvXm1vZCQvaS50ZXN0KG1vZCkpIHtcbiAgICAgICAgICAgIGlmIChtYWMpXG4gICAgICAgICAgICAgICAgbWV0YSA9IHRydWU7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgY3RybCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIG1vZGlmaWVyIG5hbWU6IFwiICsgbW9kKTtcbiAgICB9XG4gICAgaWYgKGFsdClcbiAgICAgICAgcmVzdWx0ID0gXCJBbHQtXCIgKyByZXN1bHQ7XG4gICAgaWYgKGN0cmwpXG4gICAgICAgIHJlc3VsdCA9IFwiQ3RybC1cIiArIHJlc3VsdDtcbiAgICBpZiAobWV0YSlcbiAgICAgICAgcmVzdWx0ID0gXCJNZXRhLVwiICsgcmVzdWx0O1xuICAgIGlmIChzaGlmdClcbiAgICAgICAgcmVzdWx0ID0gXCJTaGlmdC1cIiArIHJlc3VsdDtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbm9ybWFsaXplKG1hcCkge1xuICAgIGxldCBjb3B5ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmb3IgKGxldCBwcm9wIGluIG1hcClcbiAgICAgICAgY29weVtub3JtYWxpemVLZXlOYW1lKHByb3ApXSA9IG1hcFtwcm9wXTtcbiAgICByZXR1cm4gY29weTtcbn1cbmZ1bmN0aW9uIG1vZGlmaWVycyhuYW1lLCBldmVudCwgc2hpZnQpIHtcbiAgICBpZiAoZXZlbnQuYWx0S2V5KVxuICAgICAgICBuYW1lID0gXCJBbHQtXCIgKyBuYW1lO1xuICAgIGlmIChldmVudC5jdHJsS2V5KVxuICAgICAgICBuYW1lID0gXCJDdHJsLVwiICsgbmFtZTtcbiAgICBpZiAoZXZlbnQubWV0YUtleSlcbiAgICAgICAgbmFtZSA9IFwiTWV0YS1cIiArIG5hbWU7XG4gICAgaWYgKHNoaWZ0ICE9PSBmYWxzZSAmJiBldmVudC5zaGlmdEtleSlcbiAgICAgICAgbmFtZSA9IFwiU2hpZnQtXCIgKyBuYW1lO1xuICAgIHJldHVybiBuYW1lO1xufVxuLyoqXG5DcmVhdGUgYSBrZXltYXAgcGx1Z2luIGZvciB0aGUgZ2l2ZW4gc2V0IG9mIGJpbmRpbmdzLlxuXG5CaW5kaW5ncyBzaG91bGQgbWFwIGtleSBuYW1lcyB0byBbY29tbWFuZF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI2NvbW1hbmRzKS1zdHlsZVxuZnVuY3Rpb25zLCB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aXRoIGAoRWRpdG9yU3RhdGUsIGRpc3BhdGNoLFxuRWRpdG9yVmlldylgIGFyZ3VtZW50cywgYW5kIHNob3VsZCByZXR1cm4gdHJ1ZSB3aGVuIHRoZXkndmUgaGFuZGxlZFxudGhlIGtleS4gTm90ZSB0aGF0IHRoZSB2aWV3IGFyZ3VtZW50IGlzbid0IHBhcnQgb2YgdGhlIGNvbW1hbmRcbnByb3RvY29sLCBidXQgY2FuIGJlIHVzZWQgYXMgYW4gZXNjYXBlIGhhdGNoIGlmIGEgYmluZGluZyBuZWVkcyB0b1xuZGlyZWN0bHkgaW50ZXJhY3Qgd2l0aCB0aGUgVUkuXG5cbktleSBuYW1lcyBtYXkgYmUgc3RyaW5ncyBsaWtlIGBcIlNoaWZ0LUN0cmwtRW50ZXJcImDigJRhIGtleVxuaWRlbnRpZmllciBwcmVmaXhlZCB3aXRoIHplcm8gb3IgbW9yZSBtb2RpZmllcnMuIEtleSBpZGVudGlmaWVyc1xuYXJlIGJhc2VkIG9uIHRoZSBzdHJpbmdzIHRoYXQgY2FuIGFwcGVhciBpblxuW2BLZXlFdmVudC5rZXlgXShodHRwczpkZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0tleWJvYXJkRXZlbnQva2V5KS5cblVzZSBsb3dlcmNhc2UgbGV0dGVycyB0byByZWZlciB0byBsZXR0ZXIga2V5cyAob3IgdXBwZXJjYXNlIGxldHRlcnNcbmlmIHlvdSB3YW50IHNoaWZ0IHRvIGJlIGhlbGQpLiBZb3UgbWF5IHVzZSBgXCJTcGFjZVwiYCBhcyBhbiBhbGlhc1xuZm9yIHRoZSBgXCIgXCJgIG5hbWUuXG5cbk1vZGlmaWVycyBjYW4gYmUgZ2l2ZW4gaW4gYW55IG9yZGVyLiBgU2hpZnQtYCAob3IgYHMtYCksIGBBbHQtYCAob3JcbmBhLWApLCBgQ3RybC1gIChvciBgYy1gIG9yIGBDb250cm9sLWApIGFuZCBgQ21kLWAgKG9yIGBtLWAgb3JcbmBNZXRhLWApIGFyZSByZWNvZ25pemVkLiBGb3IgY2hhcmFjdGVycyB0aGF0IGFyZSBjcmVhdGVkIGJ5IGhvbGRpbmdcbnNoaWZ0LCB0aGUgYFNoaWZ0LWAgcHJlZml4IGlzIGltcGxpZWQsIGFuZCBzaG91bGQgbm90IGJlIGFkZGVkXG5leHBsaWNpdGx5LlxuXG5Zb3UgY2FuIHVzZSBgTW9kLWAgYXMgYSBzaG9ydGhhbmQgZm9yIGBDbWQtYCBvbiBNYWMgYW5kIGBDdHJsLWAgb25cbm90aGVyIHBsYXRmb3Jtcy5cblxuWW91IGNhbiBhZGQgbXVsdGlwbGUga2V5bWFwIHBsdWdpbnMgdG8gYW4gZWRpdG9yLiBUaGUgb3JkZXIgaW5cbndoaWNoIHRoZXkgYXBwZWFyIGRldGVybWluZXMgdGhlaXIgcHJlY2VkZW5jZSAodGhlIG9uZXMgZWFybHkgaW5cbnRoZSBhcnJheSBnZXQgdG8gZGlzcGF0Y2ggZmlyc3QpLlxuKi9cbmZ1bmN0aW9uIGtleW1hcChiaW5kaW5ncykge1xuICAgIHJldHVybiBuZXcgUGx1Z2luKHsgcHJvcHM6IHsgaGFuZGxlS2V5RG93bjoga2V5ZG93bkhhbmRsZXIoYmluZGluZ3MpIH0gfSk7XG59XG4vKipcbkdpdmVuIGEgc2V0IG9mIGJpbmRpbmdzICh1c2luZyB0aGUgc2FtZSBmb3JtYXQgYXNcbltga2V5bWFwYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI2tleW1hcC5rZXltYXApKSwgcmV0dXJuIGEgW2tleWRvd25cbmhhbmRsZXJdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN2aWV3LkVkaXRvclByb3BzLmhhbmRsZUtleURvd24pIHRoYXQgaGFuZGxlcyB0aGVtLlxuKi9cbmZ1bmN0aW9uIGtleWRvd25IYW5kbGVyKGJpbmRpbmdzKSB7XG4gICAgbGV0IG1hcCA9IG5vcm1hbGl6ZShiaW5kaW5ncyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh2aWV3LCBldmVudCkge1xuICAgICAgICBsZXQgbmFtZSA9IGtleU5hbWUoZXZlbnQpLCBpc0NoYXIgPSBuYW1lLmxlbmd0aCA9PSAxICYmIG5hbWUgIT0gXCIgXCIsIGJhc2VOYW1lO1xuICAgICAgICBsZXQgZGlyZWN0ID0gbWFwW21vZGlmaWVycyhuYW1lLCBldmVudCwgIWlzQ2hhcildO1xuICAgICAgICBpZiAoZGlyZWN0ICYmIGRpcmVjdCh2aWV3LnN0YXRlLCB2aWV3LmRpc3BhdGNoLCB2aWV3KSlcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoaXNDaGFyICYmIChldmVudC5zaGlmdEtleSB8fCBldmVudC5hbHRLZXkgfHwgZXZlbnQubWV0YUtleSB8fCBuYW1lLmNoYXJDb2RlQXQoMCkgPiAxMjcpICYmXG4gICAgICAgICAgICAoYmFzZU5hbWUgPSBiYXNlW2V2ZW50LmtleUNvZGVdKSAmJiBiYXNlTmFtZSAhPSBuYW1lKSB7XG4gICAgICAgICAgICAvLyBUcnkgZmFsbGluZyBiYWNrIHRvIHRoZSBrZXlDb2RlIHdoZW4gdGhlcmUncyBhIG1vZGlmaWVyXG4gICAgICAgICAgICAvLyBhY3RpdmUgb3IgdGhlIGNoYXJhY3RlciBwcm9kdWNlZCBpc24ndCBBU0NJSSwgYW5kIG91ciB0YWJsZVxuICAgICAgICAgICAgLy8gcHJvZHVjZXMgYSBkaWZmZXJlbnQgbmFtZSBmcm9tIHRoZSB0aGUga2V5Q29kZS4gU2VlICM2NjgsXG4gICAgICAgICAgICAvLyAjMTA2MFxuICAgICAgICAgICAgbGV0IGZyb21Db2RlID0gbWFwW21vZGlmaWVycyhiYXNlTmFtZSwgZXZlbnQsIHRydWUpXTtcbiAgICAgICAgICAgIGlmIChmcm9tQ29kZSAmJiBmcm9tQ29kZSh2aWV3LnN0YXRlLCB2aWV3LmRpc3BhdGNoLCB2aWV3KSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc0NoYXIgJiYgZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgaWYgc2hpZnQgaXMgYWN0aXZlLCBhbHNvIHRyeSB0aGUgYmluZGluZyB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gU2hpZnQtIHByZWZpeCBlbmFibGVkLiBTZWUgIzk5N1xuICAgICAgICAgICAgbGV0IHdpdGhTaGlmdCA9IG1hcFttb2RpZmllcnMobmFtZSwgZXZlbnQsIHRydWUpXTtcbiAgICAgICAgICAgIGlmICh3aXRoU2hpZnQgJiYgd2l0aFNoaWZ0KHZpZXcuc3RhdGUsIHZpZXcuZGlzcGF0Y2gsIHZpZXcpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xufVxuXG5leHBvcnQgeyBrZXlkb3duSGFuZGxlciwga2V5bWFwIH07XG4iLCJpbXBvcnQgT3JkZXJlZE1hcCBmcm9tICdvcmRlcmVkbWFwJztcblxuZnVuY3Rpb24gZmluZERpZmZTdGFydChhLCBiLCBwb3MpIHtcbiAgICBmb3IgKGxldCBpID0gMDs7IGkrKykge1xuICAgICAgICBpZiAoaSA9PSBhLmNoaWxkQ291bnQgfHwgaSA9PSBiLmNoaWxkQ291bnQpXG4gICAgICAgICAgICByZXR1cm4gYS5jaGlsZENvdW50ID09IGIuY2hpbGRDb3VudCA/IG51bGwgOiBwb3M7XG4gICAgICAgIGxldCBjaGlsZEEgPSBhLmNoaWxkKGkpLCBjaGlsZEIgPSBiLmNoaWxkKGkpO1xuICAgICAgICBpZiAoY2hpbGRBID09IGNoaWxkQikge1xuICAgICAgICAgICAgcG9zICs9IGNoaWxkQS5ub2RlU2l6ZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY2hpbGRBLnNhbWVNYXJrdXAoY2hpbGRCKSlcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIGlmIChjaGlsZEEuaXNUZXh0ICYmIGNoaWxkQS50ZXh0ICE9IGNoaWxkQi50ZXh0KSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgY2hpbGRBLnRleHRbal0gPT0gY2hpbGRCLnRleHRbal07IGorKylcbiAgICAgICAgICAgICAgICBwb3MrKztcbiAgICAgICAgICAgIHJldHVybiBwb3M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoaWxkQS5jb250ZW50LnNpemUgfHwgY2hpbGRCLmNvbnRlbnQuc2l6ZSkge1xuICAgICAgICAgICAgbGV0IGlubmVyID0gZmluZERpZmZTdGFydChjaGlsZEEuY29udGVudCwgY2hpbGRCLmNvbnRlbnQsIHBvcyArIDEpO1xuICAgICAgICAgICAgaWYgKGlubmVyICE9IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlubmVyO1xuICAgICAgICB9XG4gICAgICAgIHBvcyArPSBjaGlsZEEubm9kZVNpemU7XG4gICAgfVxufVxuZnVuY3Rpb24gZmluZERpZmZFbmQoYSwgYiwgcG9zQSwgcG9zQikge1xuICAgIGZvciAobGV0IGlBID0gYS5jaGlsZENvdW50LCBpQiA9IGIuY2hpbGRDb3VudDs7KSB7XG4gICAgICAgIGlmIChpQSA9PSAwIHx8IGlCID09IDApXG4gICAgICAgICAgICByZXR1cm4gaUEgPT0gaUIgPyBudWxsIDogeyBhOiBwb3NBLCBiOiBwb3NCIH07XG4gICAgICAgIGxldCBjaGlsZEEgPSBhLmNoaWxkKC0taUEpLCBjaGlsZEIgPSBiLmNoaWxkKC0taUIpLCBzaXplID0gY2hpbGRBLm5vZGVTaXplO1xuICAgICAgICBpZiAoY2hpbGRBID09IGNoaWxkQikge1xuICAgICAgICAgICAgcG9zQSAtPSBzaXplO1xuICAgICAgICAgICAgcG9zQiAtPSBzaXplO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjaGlsZEEuc2FtZU1hcmt1cChjaGlsZEIpKVxuICAgICAgICAgICAgcmV0dXJuIHsgYTogcG9zQSwgYjogcG9zQiB9O1xuICAgICAgICBpZiAoY2hpbGRBLmlzVGV4dCAmJiBjaGlsZEEudGV4dCAhPSBjaGlsZEIudGV4dCkge1xuICAgICAgICAgICAgbGV0IHNhbWUgPSAwLCBtaW5TaXplID0gTWF0aC5taW4oY2hpbGRBLnRleHQubGVuZ3RoLCBjaGlsZEIudGV4dC5sZW5ndGgpO1xuICAgICAgICAgICAgd2hpbGUgKHNhbWUgPCBtaW5TaXplICYmIGNoaWxkQS50ZXh0W2NoaWxkQS50ZXh0Lmxlbmd0aCAtIHNhbWUgLSAxXSA9PSBjaGlsZEIudGV4dFtjaGlsZEIudGV4dC5sZW5ndGggLSBzYW1lIC0gMV0pIHtcbiAgICAgICAgICAgICAgICBzYW1lKys7XG4gICAgICAgICAgICAgICAgcG9zQS0tO1xuICAgICAgICAgICAgICAgIHBvc0ItLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGE6IHBvc0EsIGI6IHBvc0IgfTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hpbGRBLmNvbnRlbnQuc2l6ZSB8fCBjaGlsZEIuY29udGVudC5zaXplKSB7XG4gICAgICAgICAgICBsZXQgaW5uZXIgPSBmaW5kRGlmZkVuZChjaGlsZEEuY29udGVudCwgY2hpbGRCLmNvbnRlbnQsIHBvc0EgLSAxLCBwb3NCIC0gMSk7XG4gICAgICAgICAgICBpZiAoaW5uZXIpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlubmVyO1xuICAgICAgICB9XG4gICAgICAgIHBvc0EgLT0gc2l6ZTtcbiAgICAgICAgcG9zQiAtPSBzaXplO1xuICAgIH1cbn1cblxuLyoqXG5BIGZyYWdtZW50IHJlcHJlc2VudHMgYSBub2RlJ3MgY29sbGVjdGlvbiBvZiBjaGlsZCBub2Rlcy5cblxuTGlrZSBub2RlcywgZnJhZ21lbnRzIGFyZSBwZXJzaXN0ZW50IGRhdGEgc3RydWN0dXJlcywgYW5kIHlvdVxuc2hvdWxkIG5vdCBtdXRhdGUgdGhlbSBvciB0aGVpciBjb250ZW50LiBSYXRoZXIsIHlvdSBjcmVhdGUgbmV3XG5pbnN0YW5jZXMgd2hlbmV2ZXIgbmVlZGVkLiBUaGUgQVBJIHRyaWVzIHRvIG1ha2UgdGhpcyBlYXN5LlxuKi9cbmNsYXNzIEZyYWdtZW50IHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29udGVudCwgc2l6ZSkge1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICB0aGlzLnNpemUgPSBzaXplIHx8IDA7XG4gICAgICAgIGlmIChzaXplID09IG51bGwpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgdGhpcy5zaXplICs9IGNvbnRlbnRbaV0ubm9kZVNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgIEludm9rZSBhIGNhbGxiYWNrIGZvciBhbGwgZGVzY2VuZGFudCBub2RlcyBiZXR3ZWVuIHRoZSBnaXZlbiB0d29cbiAgICBwb3NpdGlvbnMgKHJlbGF0aXZlIHRvIHN0YXJ0IG9mIHRoaXMgZnJhZ21lbnQpLiBEb2Vzbid0IGRlc2NlbmRcbiAgICBpbnRvIGEgbm9kZSB3aGVuIHRoZSBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWAuXG4gICAgKi9cbiAgICBub2Rlc0JldHdlZW4oZnJvbSwgdG8sIGYsIG5vZGVTdGFydCA9IDAsIHBhcmVudCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgcG9zIDwgdG87IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gdGhpcy5jb250ZW50W2ldLCBlbmQgPSBwb3MgKyBjaGlsZC5ub2RlU2l6ZTtcbiAgICAgICAgICAgIGlmIChlbmQgPiBmcm9tICYmIGYoY2hpbGQsIG5vZGVTdGFydCArIHBvcywgcGFyZW50IHx8IG51bGwsIGkpICE9PSBmYWxzZSAmJiBjaGlsZC5jb250ZW50LnNpemUpIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSBwb3MgKyAxO1xuICAgICAgICAgICAgICAgIGNoaWxkLm5vZGVzQmV0d2VlbihNYXRoLm1heCgwLCBmcm9tIC0gc3RhcnQpLCBNYXRoLm1pbihjaGlsZC5jb250ZW50LnNpemUsIHRvIC0gc3RhcnQpLCBmLCBub2RlU3RhcnQgKyBzdGFydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3MgPSBlbmQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgQ2FsbCB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGV2ZXJ5IGRlc2NlbmRhbnQgbm9kZS4gYHBvc2Agd2lsbCBiZVxuICAgIHJlbGF0aXZlIHRvIHRoZSBzdGFydCBvZiB0aGUgZnJhZ21lbnQuIFRoZSBjYWxsYmFjayBtYXkgcmV0dXJuXG4gICAgYGZhbHNlYCB0byBwcmV2ZW50IHRyYXZlcnNhbCBvZiBhIGdpdmVuIG5vZGUncyBjaGlsZHJlbi5cbiAgICAqL1xuICAgIGRlc2NlbmRhbnRzKGYpIHtcbiAgICAgICAgdGhpcy5ub2Rlc0JldHdlZW4oMCwgdGhpcy5zaXplLCBmKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRXh0cmFjdCB0aGUgdGV4dCBiZXR3ZWVuIGBmcm9tYCBhbmQgYHRvYC4gU2VlIHRoZSBzYW1lIG1ldGhvZCBvblxuICAgIFtgTm9kZWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlLnRleHRCZXR3ZWVuKS5cbiAgICAqL1xuICAgIHRleHRCZXR3ZWVuKGZyb20sIHRvLCBibG9ja1NlcGFyYXRvciwgbGVhZlRleHQpIHtcbiAgICAgICAgbGV0IHRleHQgPSBcIlwiLCBzZXBhcmF0ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm5vZGVzQmV0d2Vlbihmcm9tLCB0bywgKG5vZGUsIHBvcykgPT4ge1xuICAgICAgICAgICAgaWYgKG5vZGUuaXNUZXh0KSB7XG4gICAgICAgICAgICAgICAgdGV4dCArPSBub2RlLnRleHQuc2xpY2UoTWF0aC5tYXgoZnJvbSwgcG9zKSAtIHBvcywgdG8gLSBwb3MpO1xuICAgICAgICAgICAgICAgIHNlcGFyYXRlZCA9ICFibG9ja1NlcGFyYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGUuaXNMZWFmKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxlYWZUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQgKz0gdHlwZW9mIGxlYWZUZXh0ID09PSBcImZ1bmN0aW9uXCIgPyBsZWFmVGV4dChub2RlKSA6IGxlYWZUZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChub2RlLnR5cGUuc3BlYy5sZWFmVGV4dCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IG5vZGUudHlwZS5zcGVjLmxlYWZUZXh0KG5vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXBhcmF0ZWQgPSAhYmxvY2tTZXBhcmF0b3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghc2VwYXJhdGVkICYmIG5vZGUuaXNCbG9jaykge1xuICAgICAgICAgICAgICAgIHRleHQgKz0gYmxvY2tTZXBhcmF0b3I7XG4gICAgICAgICAgICAgICAgc2VwYXJhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMCk7XG4gICAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgY29udGFpbmluZyB0aGUgY29tYmluZWQgY29udGVudCBvZiB0aGlzXG4gICAgZnJhZ21lbnQgYW5kIHRoZSBvdGhlci5cbiAgICAqL1xuICAgIGFwcGVuZChvdGhlcikge1xuICAgICAgICBpZiAoIW90aGVyLnNpemUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgaWYgKCF0aGlzLnNpemUpXG4gICAgICAgICAgICByZXR1cm4gb3RoZXI7XG4gICAgICAgIGxldCBsYXN0ID0gdGhpcy5sYXN0Q2hpbGQsIGZpcnN0ID0gb3RoZXIuZmlyc3RDaGlsZCwgY29udGVudCA9IHRoaXMuY29udGVudC5zbGljZSgpLCBpID0gMDtcbiAgICAgICAgaWYgKGxhc3QuaXNUZXh0ICYmIGxhc3Quc2FtZU1hcmt1cChmaXJzdCkpIHtcbiAgICAgICAgICAgIGNvbnRlbnRbY29udGVudC5sZW5ndGggLSAxXSA9IGxhc3Qud2l0aFRleHQobGFzdC50ZXh0ICsgZmlyc3QudGV4dCk7XG4gICAgICAgICAgICBpID0gMTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgaSA8IG90aGVyLmNvbnRlbnQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBjb250ZW50LnB1c2gob3RoZXIuY29udGVudFtpXSk7XG4gICAgICAgIHJldHVybiBuZXcgRnJhZ21lbnQoY29udGVudCwgdGhpcy5zaXplICsgb3RoZXIuc2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEN1dCBvdXQgdGhlIHN1Yi1mcmFnbWVudCBiZXR3ZWVuIHRoZSB0d28gZ2l2ZW4gcG9zaXRpb25zLlxuICAgICovXG4gICAgY3V0KGZyb20sIHRvID0gdGhpcy5zaXplKSB7XG4gICAgICAgIGlmIChmcm9tID09IDAgJiYgdG8gPT0gdGhpcy5zaXplKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXSwgc2l6ZSA9IDA7XG4gICAgICAgIGlmICh0byA+IGZyb20pXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgcG9zID0gMDsgcG9zIDwgdG87IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY29udGVudFtpXSwgZW5kID0gcG9zICsgY2hpbGQubm9kZVNpemU7XG4gICAgICAgICAgICAgICAgaWYgKGVuZCA+IGZyb20pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA8IGZyb20gfHwgZW5kID4gdG8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaGlsZC5pc1RleHQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQgPSBjaGlsZC5jdXQoTWF0aC5tYXgoMCwgZnJvbSAtIHBvcyksIE1hdGgubWluKGNoaWxkLnRleHQubGVuZ3RoLCB0byAtIHBvcykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkID0gY2hpbGQuY3V0KE1hdGgubWF4KDAsIGZyb20gLSBwb3MgLSAxKSwgTWF0aC5taW4oY2hpbGQuY29udGVudC5zaXplLCB0byAtIHBvcyAtIDEpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjaGlsZCk7XG4gICAgICAgICAgICAgICAgICAgIHNpemUgKz0gY2hpbGQubm9kZVNpemU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBvcyA9IGVuZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudChyZXN1bHQsIHNpemUpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGN1dEJ5SW5kZXgoZnJvbSwgdG8pIHtcbiAgICAgICAgaWYgKGZyb20gPT0gdG8pXG4gICAgICAgICAgICByZXR1cm4gRnJhZ21lbnQuZW1wdHk7XG4gICAgICAgIGlmIChmcm9tID09IDAgJiYgdG8gPT0gdGhpcy5jb250ZW50Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMuY29udGVudC5zbGljZShmcm9tLCB0bykpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgaW4gd2hpY2ggdGhlIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4IGlzXG4gICAgcmVwbGFjZWQgYnkgdGhlIGdpdmVuIG5vZGUuXG4gICAgKi9cbiAgICByZXBsYWNlQ2hpbGQoaW5kZXgsIG5vZGUpIHtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLmNvbnRlbnRbaW5kZXhdO1xuICAgICAgICBpZiAoY3VycmVudCA9PSBub2RlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIGxldCBjb3B5ID0gdGhpcy5jb250ZW50LnNsaWNlKCk7XG4gICAgICAgIGxldCBzaXplID0gdGhpcy5zaXplICsgbm9kZS5ub2RlU2l6ZSAtIGN1cnJlbnQubm9kZVNpemU7XG4gICAgICAgIGNvcHlbaW5kZXhdID0gbm9kZTtcbiAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudChjb3B5LCBzaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGJ5IHByZXBlbmRpbmcgdGhlIGdpdmVuIG5vZGUgdG8gdGhpc1xuICAgIGZyYWdtZW50LlxuICAgICovXG4gICAgYWRkVG9TdGFydChub2RlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnJhZ21lbnQoW25vZGVdLmNvbmNhdCh0aGlzLmNvbnRlbnQpLCB0aGlzLnNpemUgKyBub2RlLm5vZGVTaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGJ5IGFwcGVuZGluZyB0aGUgZ2l2ZW4gbm9kZSB0byB0aGlzXG4gICAgZnJhZ21lbnQuXG4gICAgKi9cbiAgICBhZGRUb0VuZChub2RlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5jb250ZW50LmNvbmNhdChub2RlKSwgdGhpcy5zaXplICsgbm9kZS5ub2RlU2l6ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbXBhcmUgdGhpcyBmcmFnbWVudCB0byBhbm90aGVyIG9uZS5cbiAgICAqL1xuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQubGVuZ3RoICE9IG90aGVyLmNvbnRlbnQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29udGVudC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250ZW50W2ldLmVxKG90aGVyLmNvbnRlbnRbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBmaXJzdCBjaGlsZCBvZiB0aGUgZnJhZ21lbnQsIG9yIGBudWxsYCBpZiBpdCBpcyBlbXB0eS5cbiAgICAqL1xuICAgIGdldCBmaXJzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jb250ZW50Lmxlbmd0aCA/IHRoaXMuY29udGVudFswXSA6IG51bGw7IH1cbiAgICAvKipcbiAgICBUaGUgbGFzdCBjaGlsZCBvZiB0aGUgZnJhZ21lbnQsIG9yIGBudWxsYCBpZiBpdCBpcyBlbXB0eS5cbiAgICAqL1xuICAgIGdldCBsYXN0Q2hpbGQoKSB7IHJldHVybiB0aGlzLmNvbnRlbnQubGVuZ3RoID8gdGhpcy5jb250ZW50W3RoaXMuY29udGVudC5sZW5ndGggLSAxXSA6IG51bGw7IH1cbiAgICAvKipcbiAgICBUaGUgbnVtYmVyIG9mIGNoaWxkIG5vZGVzIGluIHRoaXMgZnJhZ21lbnQuXG4gICAgKi9cbiAgICBnZXQgY2hpbGRDb3VudCgpIHsgcmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGg7IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGNoaWxkIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LiBSYWlzZSBhbiBlcnJvciB3aGVuIHRoZVxuICAgIGluZGV4IGlzIG91dCBvZiByYW5nZS5cbiAgICAqL1xuICAgIGNoaWxkKGluZGV4KSB7XG4gICAgICAgIGxldCBmb3VuZCA9IHRoaXMuY29udGVudFtpbmRleF07XG4gICAgICAgIGlmICghZm91bmQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkluZGV4IFwiICsgaW5kZXggKyBcIiBvdXQgb2YgcmFuZ2UgZm9yIFwiICsgdGhpcyk7XG4gICAgICAgIHJldHVybiBmb3VuZDtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjaGlsZCBub2RlIGF0IHRoZSBnaXZlbiBpbmRleCwgaWYgaXQgZXhpc3RzLlxuICAgICovXG4gICAgbWF5YmVDaGlsZChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50W2luZGV4XSB8fCBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBDYWxsIGBmYCBmb3IgZXZlcnkgY2hpbGQgbm9kZSwgcGFzc2luZyB0aGUgbm9kZSwgaXRzIG9mZnNldFxuICAgIGludG8gdGhpcyBwYXJlbnQgbm9kZSwgYW5kIGl0cyBpbmRleC5cbiAgICAqL1xuICAgIGZvckVhY2goZikge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgcCA9IDA7IGkgPCB0aGlzLmNvbnRlbnQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjaGlsZCA9IHRoaXMuY29udGVudFtpXTtcbiAgICAgICAgICAgIGYoY2hpbGQsIHAsIGkpO1xuICAgICAgICAgICAgcCArPSBjaGlsZC5ub2RlU2l6ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBmaXJzdCBwb3NpdGlvbiBhdCB3aGljaCB0aGlzIGZyYWdtZW50IGFuZCBhbm90aGVyXG4gICAgZnJhZ21lbnQgZGlmZmVyLCBvciBgbnVsbGAgaWYgdGhleSBhcmUgdGhlIHNhbWUuXG4gICAgKi9cbiAgICBmaW5kRGlmZlN0YXJ0KG90aGVyLCBwb3MgPSAwKSB7XG4gICAgICAgIHJldHVybiBmaW5kRGlmZlN0YXJ0KHRoaXMsIG90aGVyLCBwb3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIHRoZSBmaXJzdCBwb3NpdGlvbiwgc2VhcmNoaW5nIGZyb20gdGhlIGVuZCwgYXQgd2hpY2ggdGhpc1xuICAgIGZyYWdtZW50IGFuZCB0aGUgZ2l2ZW4gZnJhZ21lbnQgZGlmZmVyLCBvciBgbnVsbGAgaWYgdGhleSBhcmVcbiAgICB0aGUgc2FtZS4gU2luY2UgdGhpcyBwb3NpdGlvbiB3aWxsIG5vdCBiZSB0aGUgc2FtZSBpbiBib3RoXG4gICAgbm9kZXMsIGFuIG9iamVjdCB3aXRoIHR3byBzZXBhcmF0ZSBwb3NpdGlvbnMgaXMgcmV0dXJuZWQuXG4gICAgKi9cbiAgICBmaW5kRGlmZkVuZChvdGhlciwgcG9zID0gdGhpcy5zaXplLCBvdGhlclBvcyA9IG90aGVyLnNpemUpIHtcbiAgICAgICAgcmV0dXJuIGZpbmREaWZmRW5kKHRoaXMsIG90aGVyLCBwb3MsIG90aGVyUG9zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgaW5kZXggYW5kIGlubmVyIG9mZnNldCBjb3JyZXNwb25kaW5nIHRvIGEgZ2l2ZW4gcmVsYXRpdmVcbiAgICBwb3NpdGlvbiBpbiB0aGlzIGZyYWdtZW50LiBUaGUgcmVzdWx0IG9iamVjdCB3aWxsIGJlIHJldXNlZFxuICAgIChvdmVyd3JpdHRlbikgdGhlIG5leHQgdGltZSB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkLiAoTm90IHB1YmxpYy4pXG4gICAgKi9cbiAgICBmaW5kSW5kZXgocG9zLCByb3VuZCA9IC0xKSB7XG4gICAgICAgIGlmIChwb3MgPT0gMClcbiAgICAgICAgICAgIHJldHVybiByZXRJbmRleCgwLCBwb3MpO1xuICAgICAgICBpZiAocG9zID09IHRoaXMuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybiByZXRJbmRleCh0aGlzLmNvbnRlbnQubGVuZ3RoLCBwb3MpO1xuICAgICAgICBpZiAocG9zID4gdGhpcy5zaXplIHx8IHBvcyA8IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgUG9zaXRpb24gJHtwb3N9IG91dHNpZGUgb2YgZnJhZ21lbnQgKCR7dGhpc30pYCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBjdXJQb3MgPSAwOzsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgY3VyID0gdGhpcy5jaGlsZChpKSwgZW5kID0gY3VyUG9zICsgY3VyLm5vZGVTaXplO1xuICAgICAgICAgICAgaWYgKGVuZCA+PSBwb3MpIHtcbiAgICAgICAgICAgICAgICBpZiAoZW5kID09IHBvcyB8fCByb3VuZCA+IDApXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRJbmRleChpICsgMSwgZW5kKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0SW5kZXgoaSwgY3VyUG9zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1clBvcyA9IGVuZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gYSBkZWJ1Z2dpbmcgc3RyaW5nIHRoYXQgZGVzY3JpYmVzIHRoaXMgZnJhZ21lbnQuXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHsgcmV0dXJuIFwiPFwiICsgdGhpcy50b1N0cmluZ0lubmVyKCkgKyBcIj5cIjsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmdJbm5lcigpIHsgcmV0dXJuIHRoaXMuY29udGVudC5qb2luKFwiLCBcIik7IH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBKU09OLXNlcmlhbGl6ZWFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBmcmFnbWVudC5cbiAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudC5sZW5ndGggPyB0aGlzLmNvbnRlbnQubWFwKG4gPT4gbi50b0pTT04oKSkgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBEZXNlcmlhbGl6ZSBhIGZyYWdtZW50IGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKVxuICAgICAgICAgICAgcmV0dXJuIEZyYWdtZW50LmVtcHR5O1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlucHV0IGZvciBGcmFnbWVudC5mcm9tSlNPTlwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBGcmFnbWVudCh2YWx1ZS5tYXAoc2NoZW1hLm5vZGVGcm9tSlNPTikpO1xuICAgIH1cbiAgICAvKipcbiAgICBCdWlsZCBhIGZyYWdtZW50IGZyb20gYW4gYXJyYXkgb2Ygbm9kZXMuIEVuc3VyZXMgdGhhdCBhZGphY2VudFxuICAgIHRleHQgbm9kZXMgd2l0aCB0aGUgc2FtZSBtYXJrcyBhcmUgam9pbmVkIHRvZ2V0aGVyLlxuICAgICovXG4gICAgc3RhdGljIGZyb21BcnJheShhcnJheSkge1xuICAgICAgICBpZiAoIWFycmF5Lmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBGcmFnbWVudC5lbXB0eTtcbiAgICAgICAgbGV0IGpvaW5lZCwgc2l6ZSA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBub2RlID0gYXJyYXlbaV07XG4gICAgICAgICAgICBzaXplICs9IG5vZGUubm9kZVNpemU7XG4gICAgICAgICAgICBpZiAoaSAmJiBub2RlLmlzVGV4dCAmJiBhcnJheVtpIC0gMV0uc2FtZU1hcmt1cChub2RlKSkge1xuICAgICAgICAgICAgICAgIGlmICgham9pbmVkKVxuICAgICAgICAgICAgICAgICAgICBqb2luZWQgPSBhcnJheS5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgICAgICBqb2luZWRbam9pbmVkLmxlbmd0aCAtIDFdID0gbm9kZVxuICAgICAgICAgICAgICAgICAgICAud2l0aFRleHQoam9pbmVkW2pvaW5lZC5sZW5ndGggLSAxXS50ZXh0ICsgbm9kZS50ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGpvaW5lZCkge1xuICAgICAgICAgICAgICAgIGpvaW5lZC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRnJhZ21lbnQoam9pbmVkIHx8IGFycmF5LCBzaXplKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgZnJhZ21lbnQgZnJvbSBzb21ldGhpbmcgdGhhdCBjYW4gYmUgaW50ZXJwcmV0ZWQgYXMgYVxuICAgIHNldCBvZiBub2Rlcy4gRm9yIGBudWxsYCwgaXQgcmV0dXJucyB0aGUgZW1wdHkgZnJhZ21lbnQuIEZvciBhXG4gICAgZnJhZ21lbnQsIHRoZSBmcmFnbWVudCBpdHNlbGYuIEZvciBhIG5vZGUgb3IgYXJyYXkgb2Ygbm9kZXMsIGFcbiAgICBmcmFnbWVudCBjb250YWluaW5nIHRob3NlIG5vZGVzLlxuICAgICovXG4gICAgc3RhdGljIGZyb20obm9kZXMpIHtcbiAgICAgICAgaWYgKCFub2RlcylcbiAgICAgICAgICAgIHJldHVybiBGcmFnbWVudC5lbXB0eTtcbiAgICAgICAgaWYgKG5vZGVzIGluc3RhbmNlb2YgRnJhZ21lbnQpXG4gICAgICAgICAgICByZXR1cm4gbm9kZXM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGVzKSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZyb21BcnJheShub2Rlcyk7XG4gICAgICAgIGlmIChub2Rlcy5hdHRycylcbiAgICAgICAgICAgIHJldHVybiBuZXcgRnJhZ21lbnQoW25vZGVzXSwgbm9kZXMubm9kZVNpemUpO1xuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkNhbiBub3QgY29udmVydCBcIiArIG5vZGVzICsgXCIgdG8gYSBGcmFnbWVudFwiICtcbiAgICAgICAgICAgIChub2Rlcy5ub2Rlc0JldHdlZW4gPyBcIiAobG9va3MgbGlrZSBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBwcm9zZW1pcnJvci1tb2RlbCB3ZXJlIGxvYWRlZClcIiA6IFwiXCIpKTtcbiAgICB9XG59XG4vKipcbkFuIGVtcHR5IGZyYWdtZW50LiBJbnRlbmRlZCB0byBiZSByZXVzZWQgd2hlbmV2ZXIgYSBub2RlIGRvZXNuJ3RcbmNvbnRhaW4gYW55dGhpbmcgKHJhdGhlciB0aGFuIGFsbG9jYXRpbmcgYSBuZXcgZW1wdHkgZnJhZ21lbnQgZm9yXG5lYWNoIGxlYWYgbm9kZSkuXG4qL1xuRnJhZ21lbnQuZW1wdHkgPSBuZXcgRnJhZ21lbnQoW10sIDApO1xuY29uc3QgZm91bmQgPSB7IGluZGV4OiAwLCBvZmZzZXQ6IDAgfTtcbmZ1bmN0aW9uIHJldEluZGV4KGluZGV4LCBvZmZzZXQpIHtcbiAgICBmb3VuZC5pbmRleCA9IGluZGV4O1xuICAgIGZvdW5kLm9mZnNldCA9IG9mZnNldDtcbiAgICByZXR1cm4gZm91bmQ7XG59XG5cbmZ1bmN0aW9uIGNvbXBhcmVEZWVwKGEsIGIpIHtcbiAgICBpZiAoYSA9PT0gYilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKCEoYSAmJiB0eXBlb2YgYSA9PSBcIm9iamVjdFwiKSB8fFxuICAgICAgICAhKGIgJiYgdHlwZW9mIGIgPT0gXCJvYmplY3RcIikpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBsZXQgYXJyYXkgPSBBcnJheS5pc0FycmF5KGEpO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGIpICE9IGFycmF5KVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGFycmF5KSB7XG4gICAgICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKCFjb21wYXJlRGVlcChhW2ldLCBiW2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGxldCBwIGluIGEpXG4gICAgICAgICAgICBpZiAoIShwIGluIGIpIHx8ICFjb21wYXJlRGVlcChhW3BdLCBiW3BdKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IHAgaW4gYilcbiAgICAgICAgICAgIGlmICghKHAgaW4gYSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG5BIG1hcmsgaXMgYSBwaWVjZSBvZiBpbmZvcm1hdGlvbiB0aGF0IGNhbiBiZSBhdHRhY2hlZCB0byBhIG5vZGUsXG5zdWNoIGFzIGl0IGJlaW5nIGVtcGhhc2l6ZWQsIGluIGNvZGUgZm9udCwgb3IgYSBsaW5rLiBJdCBoYXMgYVxudHlwZSBhbmQgb3B0aW9uYWxseSBhIHNldCBvZiBhdHRyaWJ1dGVzIHRoYXQgcHJvdmlkZSBmdXJ0aGVyXG5pbmZvcm1hdGlvbiAoc3VjaCBhcyB0aGUgdGFyZ2V0IG9mIHRoZSBsaW5rKS4gTWFya3MgYXJlIGNyZWF0ZWRcbnRocm91Z2ggYSBgU2NoZW1hYCwgd2hpY2ggY29udHJvbHMgd2hpY2ggdHlwZXMgZXhpc3QgYW5kIHdoaWNoXG5hdHRyaWJ1dGVzIHRoZXkgaGF2ZS5cbiovXG5jbGFzcyBNYXJrIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIHRoaXMgbWFyay5cbiAgICAqL1xuICAgIHR5cGUsIFxuICAgIC8qKlxuICAgIFRoZSBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCB0aGlzIG1hcmsuXG4gICAgKi9cbiAgICBhdHRycykge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmF0dHJzID0gYXR0cnM7XG4gICAgfVxuICAgIC8qKlxuICAgIEdpdmVuIGEgc2V0IG9mIG1hcmtzLCBjcmVhdGUgYSBuZXcgc2V0IHdoaWNoIGNvbnRhaW5zIHRoaXMgb25lIGFzXG4gICAgd2VsbCwgaW4gdGhlIHJpZ2h0IHBvc2l0aW9uLiBJZiB0aGlzIG1hcmsgaXMgYWxyZWFkeSBpbiB0aGUgc2V0LFxuICAgIHRoZSBzZXQgaXRzZWxmIGlzIHJldHVybmVkLiBJZiBhbnkgbWFya3MgdGhhdCBhcmUgc2V0IHRvIGJlXG4gICAgW2V4Y2x1c2l2ZV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk1hcmtTcGVjLmV4Y2x1ZGVzKSB3aXRoIHRoaXMgbWFyayBhcmUgcHJlc2VudCxcbiAgICB0aG9zZSBhcmUgcmVwbGFjZWQgYnkgdGhpcyBvbmUuXG4gICAgKi9cbiAgICBhZGRUb1NldChzZXQpIHtcbiAgICAgICAgbGV0IGNvcHksIHBsYWNlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG90aGVyID0gc2V0W2ldO1xuICAgICAgICAgICAgaWYgKHRoaXMuZXEob3RoZXIpKVxuICAgICAgICAgICAgICAgIHJldHVybiBzZXQ7XG4gICAgICAgICAgICBpZiAodGhpcy50eXBlLmV4Y2x1ZGVzKG90aGVyLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFjb3B5KVxuICAgICAgICAgICAgICAgICAgICBjb3B5ID0gc2V0LnNsaWNlKDAsIGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3RoZXIudHlwZS5leGNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghcGxhY2VkICYmIG90aGVyLnR5cGUucmFuayA+IHRoaXMudHlwZS5yYW5rKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghY29weSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkgPSBzZXQuc2xpY2UoMCwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGNvcHkucHVzaCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgcGxhY2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGNvcHkpXG4gICAgICAgICAgICAgICAgICAgIGNvcHkucHVzaChvdGhlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjb3B5KVxuICAgICAgICAgICAgY29weSA9IHNldC5zbGljZSgpO1xuICAgICAgICBpZiAoIXBsYWNlZClcbiAgICAgICAgICAgIGNvcHkucHVzaCh0aGlzKTtcbiAgICAgICAgcmV0dXJuIGNvcHk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlbW92ZSB0aGlzIG1hcmsgZnJvbSB0aGUgZ2l2ZW4gc2V0LCByZXR1cm5pbmcgYSBuZXcgc2V0LiBJZiB0aGlzXG4gICAgbWFyayBpcyBub3QgaW4gdGhlIHNldCwgdGhlIHNldCBpdHNlbGYgaXMgcmV0dXJuZWQuXG4gICAgKi9cbiAgICByZW1vdmVGcm9tU2V0KHNldCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICh0aGlzLmVxKHNldFtpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldC5zbGljZSgwLCBpKS5jb25jYXQoc2V0LnNsaWNlKGkgKyAxKSk7XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3Qgd2hldGhlciB0aGlzIG1hcmsgaXMgaW4gdGhlIGdpdmVuIHNldCBvZiBtYXJrcy5cbiAgICAqL1xuICAgIGlzSW5TZXQoc2V0KSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2V0Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKHRoaXMuZXEoc2V0W2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBUZXN0IHdoZXRoZXIgdGhpcyBtYXJrIGhhcyB0aGUgc2FtZSB0eXBlIGFuZCBhdHRyaWJ1dGVzIGFzXG4gICAgYW5vdGhlciBtYXJrLlxuICAgICovXG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHxcbiAgICAgICAgICAgICh0aGlzLnR5cGUgPT0gb3RoZXIudHlwZSAmJiBjb21wYXJlRGVlcCh0aGlzLmF0dHJzLCBvdGhlci5hdHRycykpO1xuICAgIH1cbiAgICAvKipcbiAgICBDb252ZXJ0IHRoaXMgbWFyayB0byBhIEpTT04tc2VyaWFsaXplYWJsZSByZXByZXNlbnRhdGlvbi5cbiAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgbGV0IG9iaiA9IHsgdHlwZTogdGhpcy50eXBlLm5hbWUgfTtcbiAgICAgICAgZm9yIChsZXQgXyBpbiB0aGlzLmF0dHJzKSB7XG4gICAgICAgICAgICBvYmouYXR0cnMgPSB0aGlzLmF0dHJzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVzZXJpYWxpemUgYSBtYXJrIGZyb20gSlNPTi5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihzY2hlbWEsIGpzb24pIHtcbiAgICAgICAgaWYgKCFqc29uKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlucHV0IGZvciBNYXJrLmZyb21KU09OXCIpO1xuICAgICAgICBsZXQgdHlwZSA9IHNjaGVtYS5tYXJrc1tqc29uLnR5cGVdO1xuICAgICAgICBpZiAoIXR5cGUpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgVGhlcmUgaXMgbm8gbWFyayB0eXBlICR7anNvbi50eXBlfSBpbiB0aGlzIHNjaGVtYWApO1xuICAgICAgICByZXR1cm4gdHlwZS5jcmVhdGUoanNvbi5hdHRycyk7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3Qgd2hldGhlciB0d28gc2V0cyBvZiBtYXJrcyBhcmUgaWRlbnRpY2FsLlxuICAgICovXG4gICAgc3RhdGljIHNhbWVTZXQoYSwgYikge1xuICAgICAgICBpZiAoYSA9PSBiKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmIChhLmxlbmd0aCAhPSBiLmxlbmd0aClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKCFhW2ldLmVxKGJbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHByb3Blcmx5IHNvcnRlZCBtYXJrIHNldCBmcm9tIG51bGwsIGEgc2luZ2xlIG1hcmssIG9yIGFuXG4gICAgdW5zb3J0ZWQgYXJyYXkgb2YgbWFya3MuXG4gICAgKi9cbiAgICBzdGF0aWMgc2V0RnJvbShtYXJrcykge1xuICAgICAgICBpZiAoIW1hcmtzIHx8IEFycmF5LmlzQXJyYXkobWFya3MpICYmIG1hcmtzLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgcmV0dXJuIE1hcmsubm9uZTtcbiAgICAgICAgaWYgKG1hcmtzIGluc3RhbmNlb2YgTWFyaylcbiAgICAgICAgICAgIHJldHVybiBbbWFya3NdO1xuICAgICAgICBsZXQgY29weSA9IG1hcmtzLnNsaWNlKCk7XG4gICAgICAgIGNvcHkuc29ydCgoYSwgYikgPT4gYS50eXBlLnJhbmsgLSBiLnR5cGUucmFuayk7XG4gICAgICAgIHJldHVybiBjb3B5O1xuICAgIH1cbn1cbi8qKlxuVGhlIGVtcHR5IHNldCBvZiBtYXJrcy5cbiovXG5NYXJrLm5vbmUgPSBbXTtcblxuLyoqXG5FcnJvciB0eXBlIHJhaXNlZCBieSBbYE5vZGUucmVwbGFjZWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlLnJlcGxhY2UpIHdoZW5cbmdpdmVuIGFuIGludmFsaWQgcmVwbGFjZW1lbnQuXG4qL1xuY2xhc3MgUmVwbGFjZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLypcblJlcGxhY2VFcnJvciA9IGZ1bmN0aW9uKHRoaXM6IGFueSwgbWVzc2FnZTogc3RyaW5nKSB7XG4gIGxldCBlcnIgPSBFcnJvci5jYWxsKHRoaXMsIG1lc3NhZ2UpXG4gIDsoZXJyIGFzIGFueSkuX19wcm90b19fID0gUmVwbGFjZUVycm9yLnByb3RvdHlwZVxuICByZXR1cm4gZXJyXG59IGFzIGFueVxuXG5SZXBsYWNlRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpXG5SZXBsYWNlRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmVwbGFjZUVycm9yXG5SZXBsYWNlRXJyb3IucHJvdG90eXBlLm5hbWUgPSBcIlJlcGxhY2VFcnJvclwiXG4qL1xuLyoqXG5BIHNsaWNlIHJlcHJlc2VudHMgYSBwaWVjZSBjdXQgb3V0IG9mIGEgbGFyZ2VyIGRvY3VtZW50LiBJdFxuc3RvcmVzIG5vdCBvbmx5IGEgZnJhZ21lbnQsIGJ1dCBhbHNvIHRoZSBkZXB0aCB1cCB0byB3aGljaCBub2RlcyBvblxuYm90aCBzaWRlIGFyZSDigJhvcGVu4oCZIChjdXQgdGhyb3VnaCkuXG4qL1xuY2xhc3MgU2xpY2Uge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHNsaWNlLiBXaGVuIHNwZWNpZnlpbmcgYSBub24temVybyBvcGVuIGRlcHRoLCB5b3UgbXVzdFxuICAgIG1ha2Ugc3VyZSB0aGF0IHRoZXJlIGFyZSBub2RlcyBvZiBhdCBsZWFzdCB0aGF0IGRlcHRoIGF0IHRoZVxuICAgIGFwcHJvcHJpYXRlIHNpZGUgb2YgdGhlIGZyYWdtZW504oCUaS5lLiBpZiB0aGUgZnJhZ21lbnQgaXMgYW5cbiAgICBlbXB0eSBwYXJhZ3JhcGggbm9kZSwgYG9wZW5TdGFydGAgYW5kIGBvcGVuRW5kYCBjYW4ndCBiZSBncmVhdGVyXG4gICAgdGhhbiAxLlxuICAgIFxuICAgIEl0IGlzIG5vdCBuZWNlc3NhcnkgZm9yIHRoZSBjb250ZW50IG9mIG9wZW4gbm9kZXMgdG8gY29uZm9ybSB0b1xuICAgIHRoZSBzY2hlbWEncyBjb250ZW50IGNvbnN0cmFpbnRzLCB0aG91Z2ggaXQgc2hvdWxkIGJlIGEgdmFsaWRcbiAgICBzdGFydC9lbmQvbWlkZGxlIGZvciBzdWNoIGEgbm9kZSwgZGVwZW5kaW5nIG9uIHdoaWNoIHNpZGVzIGFyZVxuICAgIG9wZW4uXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc2xpY2UncyBjb250ZW50LlxuICAgICovXG4gICAgY29udGVudCwgXG4gICAgLyoqXG4gICAgVGhlIG9wZW4gZGVwdGggYXQgdGhlIHN0YXJ0IG9mIHRoZSBmcmFnbWVudC5cbiAgICAqL1xuICAgIG9wZW5TdGFydCwgXG4gICAgLyoqXG4gICAgVGhlIG9wZW4gZGVwdGggYXQgdGhlIGVuZC5cbiAgICAqL1xuICAgIG9wZW5FbmQpIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgdGhpcy5vcGVuU3RhcnQgPSBvcGVuU3RhcnQ7XG4gICAgICAgIHRoaXMub3BlbkVuZCA9IG9wZW5FbmQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzaXplIHRoaXMgc2xpY2Ugd291bGQgYWRkIHdoZW4gaW5zZXJ0ZWQgaW50byBhIGRvY3VtZW50LlxuICAgICovXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQuc2l6ZSAtIHRoaXMub3BlblN0YXJ0IC0gdGhpcy5vcGVuRW5kO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGluc2VydEF0KHBvcywgZnJhZ21lbnQpIHtcbiAgICAgICAgbGV0IGNvbnRlbnQgPSBpbnNlcnRJbnRvKHRoaXMuY29udGVudCwgcG9zICsgdGhpcy5vcGVuU3RhcnQsIGZyYWdtZW50KTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQgJiYgbmV3IFNsaWNlKGNvbnRlbnQsIHRoaXMub3BlblN0YXJ0LCB0aGlzLm9wZW5FbmQpO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlbW92ZUJldHdlZW4oZnJvbSwgdG8pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTbGljZShyZW1vdmVSYW5nZSh0aGlzLmNvbnRlbnQsIGZyb20gKyB0aGlzLm9wZW5TdGFydCwgdG8gKyB0aGlzLm9wZW5TdGFydCksIHRoaXMub3BlblN0YXJ0LCB0aGlzLm9wZW5FbmQpO1xuICAgIH1cbiAgICAvKipcbiAgICBUZXN0cyB3aGV0aGVyIHRoaXMgc2xpY2UgaXMgZXF1YWwgdG8gYW5vdGhlciBzbGljZS5cbiAgICAqL1xuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQuZXEob3RoZXIuY29udGVudCkgJiYgdGhpcy5vcGVuU3RhcnQgPT0gb3RoZXIub3BlblN0YXJ0ICYmIHRoaXMub3BlbkVuZCA9PSBvdGhlci5vcGVuRW5kO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50ICsgXCIoXCIgKyB0aGlzLm9wZW5TdGFydCArIFwiLFwiICsgdGhpcy5vcGVuRW5kICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbnZlcnQgYSBzbGljZSB0byBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAoIXRoaXMuY29udGVudC5zaXplKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBqc29uID0geyBjb250ZW50OiB0aGlzLmNvbnRlbnQudG9KU09OKCkgfTtcbiAgICAgICAgaWYgKHRoaXMub3BlblN0YXJ0ID4gMClcbiAgICAgICAgICAgIGpzb24ub3BlblN0YXJ0ID0gdGhpcy5vcGVuU3RhcnQ7XG4gICAgICAgIGlmICh0aGlzLm9wZW5FbmQgPiAwKVxuICAgICAgICAgICAganNvbi5vcGVuRW5kID0gdGhpcy5vcGVuRW5kO1xuICAgICAgICByZXR1cm4ganNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVzZXJpYWxpemUgYSBzbGljZSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNjaGVtYSwganNvbikge1xuICAgICAgICBpZiAoIWpzb24pXG4gICAgICAgICAgICByZXR1cm4gU2xpY2UuZW1wdHk7XG4gICAgICAgIGxldCBvcGVuU3RhcnQgPSBqc29uLm9wZW5TdGFydCB8fCAwLCBvcGVuRW5kID0ganNvbi5vcGVuRW5kIHx8IDA7XG4gICAgICAgIGlmICh0eXBlb2Ygb3BlblN0YXJ0ICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIG9wZW5FbmQgIT0gXCJudW1iZXJcIilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgU2xpY2UuZnJvbUpTT05cIik7XG4gICAgICAgIHJldHVybiBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbUpTT04oc2NoZW1hLCBqc29uLmNvbnRlbnQpLCBvcGVuU3RhcnQsIG9wZW5FbmQpO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzbGljZSBmcm9tIGEgZnJhZ21lbnQgYnkgdGFraW5nIHRoZSBtYXhpbXVtIHBvc3NpYmxlXG4gICAgb3BlbiB2YWx1ZSBvbiBib3RoIHNpZGUgb2YgdGhlIGZyYWdtZW50LlxuICAgICovXG4gICAgc3RhdGljIG1heE9wZW4oZnJhZ21lbnQsIG9wZW5Jc29sYXRpbmcgPSB0cnVlKSB7XG4gICAgICAgIGxldCBvcGVuU3RhcnQgPSAwLCBvcGVuRW5kID0gMDtcbiAgICAgICAgZm9yIChsZXQgbiA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7IG4gJiYgIW4uaXNMZWFmICYmIChvcGVuSXNvbGF0aW5nIHx8ICFuLnR5cGUuc3BlYy5pc29sYXRpbmcpOyBuID0gbi5maXJzdENoaWxkKVxuICAgICAgICAgICAgb3BlblN0YXJ0Kys7XG4gICAgICAgIGZvciAobGV0IG4gPSBmcmFnbWVudC5sYXN0Q2hpbGQ7IG4gJiYgIW4uaXNMZWFmICYmIChvcGVuSXNvbGF0aW5nIHx8ICFuLnR5cGUuc3BlYy5pc29sYXRpbmcpOyBuID0gbi5sYXN0Q2hpbGQpXG4gICAgICAgICAgICBvcGVuRW5kKys7XG4gICAgICAgIHJldHVybiBuZXcgU2xpY2UoZnJhZ21lbnQsIG9wZW5TdGFydCwgb3BlbkVuZCk7XG4gICAgfVxufVxuLyoqXG5UaGUgZW1wdHkgc2xpY2UuXG4qL1xuU2xpY2UuZW1wdHkgPSBuZXcgU2xpY2UoRnJhZ21lbnQuZW1wdHksIDAsIDApO1xuZnVuY3Rpb24gcmVtb3ZlUmFuZ2UoY29udGVudCwgZnJvbSwgdG8pIHtcbiAgICBsZXQgeyBpbmRleCwgb2Zmc2V0IH0gPSBjb250ZW50LmZpbmRJbmRleChmcm9tKSwgY2hpbGQgPSBjb250ZW50Lm1heWJlQ2hpbGQoaW5kZXgpO1xuICAgIGxldCB7IGluZGV4OiBpbmRleFRvLCBvZmZzZXQ6IG9mZnNldFRvIH0gPSBjb250ZW50LmZpbmRJbmRleCh0byk7XG4gICAgaWYgKG9mZnNldCA9PSBmcm9tIHx8IGNoaWxkLmlzVGV4dCkge1xuICAgICAgICBpZiAob2Zmc2V0VG8gIT0gdG8gJiYgIWNvbnRlbnQuY2hpbGQoaW5kZXhUbykuaXNUZXh0KVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJSZW1vdmluZyBub24tZmxhdCByYW5nZVwiKTtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQuY3V0KDAsIGZyb20pLmFwcGVuZChjb250ZW50LmN1dCh0bykpO1xuICAgIH1cbiAgICBpZiAoaW5kZXggIT0gaW5kZXhUbylcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJSZW1vdmluZyBub24tZmxhdCByYW5nZVwiKTtcbiAgICByZXR1cm4gY29udGVudC5yZXBsYWNlQ2hpbGQoaW5kZXgsIGNoaWxkLmNvcHkocmVtb3ZlUmFuZ2UoY2hpbGQuY29udGVudCwgZnJvbSAtIG9mZnNldCAtIDEsIHRvIC0gb2Zmc2V0IC0gMSkpKTtcbn1cbmZ1bmN0aW9uIGluc2VydEludG8oY29udGVudCwgZGlzdCwgaW5zZXJ0LCBwYXJlbnQpIHtcbiAgICBsZXQgeyBpbmRleCwgb2Zmc2V0IH0gPSBjb250ZW50LmZpbmRJbmRleChkaXN0KSwgY2hpbGQgPSBjb250ZW50Lm1heWJlQ2hpbGQoaW5kZXgpO1xuICAgIGlmIChvZmZzZXQgPT0gZGlzdCB8fCBjaGlsZC5pc1RleHQpIHtcbiAgICAgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50LmNhblJlcGxhY2UoaW5kZXgsIGluZGV4LCBpbnNlcnQpKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBjb250ZW50LmN1dCgwLCBkaXN0KS5hcHBlbmQoaW5zZXJ0KS5hcHBlbmQoY29udGVudC5jdXQoZGlzdCkpO1xuICAgIH1cbiAgICBsZXQgaW5uZXIgPSBpbnNlcnRJbnRvKGNoaWxkLmNvbnRlbnQsIGRpc3QgLSBvZmZzZXQgLSAxLCBpbnNlcnQpO1xuICAgIHJldHVybiBpbm5lciAmJiBjb250ZW50LnJlcGxhY2VDaGlsZChpbmRleCwgY2hpbGQuY29weShpbm5lcikpO1xufVxuZnVuY3Rpb24gcmVwbGFjZSgkZnJvbSwgJHRvLCBzbGljZSkge1xuICAgIGlmIChzbGljZS5vcGVuU3RhcnQgPiAkZnJvbS5kZXB0aClcbiAgICAgICAgdGhyb3cgbmV3IFJlcGxhY2VFcnJvcihcIkluc2VydGVkIGNvbnRlbnQgZGVlcGVyIHRoYW4gaW5zZXJ0aW9uIHBvc2l0aW9uXCIpO1xuICAgIGlmICgkZnJvbS5kZXB0aCAtIHNsaWNlLm9wZW5TdGFydCAhPSAkdG8uZGVwdGggLSBzbGljZS5vcGVuRW5kKVxuICAgICAgICB0aHJvdyBuZXcgUmVwbGFjZUVycm9yKFwiSW5jb25zaXN0ZW50IG9wZW4gZGVwdGhzXCIpO1xuICAgIHJldHVybiByZXBsYWNlT3V0ZXIoJGZyb20sICR0bywgc2xpY2UsIDApO1xufVxuZnVuY3Rpb24gcmVwbGFjZU91dGVyKCRmcm9tLCAkdG8sIHNsaWNlLCBkZXB0aCkge1xuICAgIGxldCBpbmRleCA9ICRmcm9tLmluZGV4KGRlcHRoKSwgbm9kZSA9ICRmcm9tLm5vZGUoZGVwdGgpO1xuICAgIGlmIChpbmRleCA9PSAkdG8uaW5kZXgoZGVwdGgpICYmIGRlcHRoIDwgJGZyb20uZGVwdGggLSBzbGljZS5vcGVuU3RhcnQpIHtcbiAgICAgICAgbGV0IGlubmVyID0gcmVwbGFjZU91dGVyKCRmcm9tLCAkdG8sIHNsaWNlLCBkZXB0aCArIDEpO1xuICAgICAgICByZXR1cm4gbm9kZS5jb3B5KG5vZGUuY29udGVudC5yZXBsYWNlQ2hpbGQoaW5kZXgsIGlubmVyKSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCFzbGljZS5jb250ZW50LnNpemUpIHtcbiAgICAgICAgcmV0dXJuIGNsb3NlKG5vZGUsIHJlcGxhY2VUd29XYXkoJGZyb20sICR0bywgZGVwdGgpKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIXNsaWNlLm9wZW5TdGFydCAmJiAhc2xpY2Uub3BlbkVuZCAmJiAkZnJvbS5kZXB0aCA9PSBkZXB0aCAmJiAkdG8uZGVwdGggPT0gZGVwdGgpIHsgLy8gU2ltcGxlLCBmbGF0IGNhc2VcbiAgICAgICAgbGV0IHBhcmVudCA9ICRmcm9tLnBhcmVudCwgY29udGVudCA9IHBhcmVudC5jb250ZW50O1xuICAgICAgICByZXR1cm4gY2xvc2UocGFyZW50LCBjb250ZW50LmN1dCgwLCAkZnJvbS5wYXJlbnRPZmZzZXQpLmFwcGVuZChzbGljZS5jb250ZW50KS5hcHBlbmQoY29udGVudC5jdXQoJHRvLnBhcmVudE9mZnNldCkpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGxldCB7IHN0YXJ0LCBlbmQgfSA9IHByZXBhcmVTbGljZUZvclJlcGxhY2Uoc2xpY2UsICRmcm9tKTtcbiAgICAgICAgcmV0dXJuIGNsb3NlKG5vZGUsIHJlcGxhY2VUaHJlZVdheSgkZnJvbSwgc3RhcnQsIGVuZCwgJHRvLCBkZXB0aCkpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrSm9pbihtYWluLCBzdWIpIHtcbiAgICBpZiAoIXN1Yi50eXBlLmNvbXBhdGlibGVDb250ZW50KG1haW4udHlwZSkpXG4gICAgICAgIHRocm93IG5ldyBSZXBsYWNlRXJyb3IoXCJDYW5ub3Qgam9pbiBcIiArIHN1Yi50eXBlLm5hbWUgKyBcIiBvbnRvIFwiICsgbWFpbi50eXBlLm5hbWUpO1xufVxuZnVuY3Rpb24gam9pbmFibGUoJGJlZm9yZSwgJGFmdGVyLCBkZXB0aCkge1xuICAgIGxldCBub2RlID0gJGJlZm9yZS5ub2RlKGRlcHRoKTtcbiAgICBjaGVja0pvaW4obm9kZSwgJGFmdGVyLm5vZGUoZGVwdGgpKTtcbiAgICByZXR1cm4gbm9kZTtcbn1cbmZ1bmN0aW9uIGFkZE5vZGUoY2hpbGQsIHRhcmdldCkge1xuICAgIGxldCBsYXN0ID0gdGFyZ2V0Lmxlbmd0aCAtIDE7XG4gICAgaWYgKGxhc3QgPj0gMCAmJiBjaGlsZC5pc1RleHQgJiYgY2hpbGQuc2FtZU1hcmt1cCh0YXJnZXRbbGFzdF0pKVxuICAgICAgICB0YXJnZXRbbGFzdF0gPSBjaGlsZC53aXRoVGV4dCh0YXJnZXRbbGFzdF0udGV4dCArIGNoaWxkLnRleHQpO1xuICAgIGVsc2VcbiAgICAgICAgdGFyZ2V0LnB1c2goY2hpbGQpO1xufVxuZnVuY3Rpb24gYWRkUmFuZ2UoJHN0YXJ0LCAkZW5kLCBkZXB0aCwgdGFyZ2V0KSB7XG4gICAgbGV0IG5vZGUgPSAoJGVuZCB8fCAkc3RhcnQpLm5vZGUoZGVwdGgpO1xuICAgIGxldCBzdGFydEluZGV4ID0gMCwgZW5kSW5kZXggPSAkZW5kID8gJGVuZC5pbmRleChkZXB0aCkgOiBub2RlLmNoaWxkQ291bnQ7XG4gICAgaWYgKCRzdGFydCkge1xuICAgICAgICBzdGFydEluZGV4ID0gJHN0YXJ0LmluZGV4KGRlcHRoKTtcbiAgICAgICAgaWYgKCRzdGFydC5kZXB0aCA+IGRlcHRoKSB7XG4gICAgICAgICAgICBzdGFydEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJHN0YXJ0LnRleHRPZmZzZXQpIHtcbiAgICAgICAgICAgIGFkZE5vZGUoJHN0YXJ0Lm5vZGVBZnRlciwgdGFyZ2V0KTtcbiAgICAgICAgICAgIHN0YXJ0SW5kZXgrKztcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IGVuZEluZGV4OyBpKyspXG4gICAgICAgIGFkZE5vZGUobm9kZS5jaGlsZChpKSwgdGFyZ2V0KTtcbiAgICBpZiAoJGVuZCAmJiAkZW5kLmRlcHRoID09IGRlcHRoICYmICRlbmQudGV4dE9mZnNldClcbiAgICAgICAgYWRkTm9kZSgkZW5kLm5vZGVCZWZvcmUsIHRhcmdldCk7XG59XG5mdW5jdGlvbiBjbG9zZShub2RlLCBjb250ZW50KSB7XG4gICAgaWYgKCFub2RlLnR5cGUudmFsaWRDb250ZW50KGNvbnRlbnQpKVxuICAgICAgICB0aHJvdyBuZXcgUmVwbGFjZUVycm9yKFwiSW52YWxpZCBjb250ZW50IGZvciBub2RlIFwiICsgbm9kZS50eXBlLm5hbWUpO1xuICAgIHJldHVybiBub2RlLmNvcHkoY29udGVudCk7XG59XG5mdW5jdGlvbiByZXBsYWNlVGhyZWVXYXkoJGZyb20sICRzdGFydCwgJGVuZCwgJHRvLCBkZXB0aCkge1xuICAgIGxldCBvcGVuU3RhcnQgPSAkZnJvbS5kZXB0aCA+IGRlcHRoICYmIGpvaW5hYmxlKCRmcm9tLCAkc3RhcnQsIGRlcHRoICsgMSk7XG4gICAgbGV0IG9wZW5FbmQgPSAkdG8uZGVwdGggPiBkZXB0aCAmJiBqb2luYWJsZSgkZW5kLCAkdG8sIGRlcHRoICsgMSk7XG4gICAgbGV0IGNvbnRlbnQgPSBbXTtcbiAgICBhZGRSYW5nZShudWxsLCAkZnJvbSwgZGVwdGgsIGNvbnRlbnQpO1xuICAgIGlmIChvcGVuU3RhcnQgJiYgb3BlbkVuZCAmJiAkc3RhcnQuaW5kZXgoZGVwdGgpID09ICRlbmQuaW5kZXgoZGVwdGgpKSB7XG4gICAgICAgIGNoZWNrSm9pbihvcGVuU3RhcnQsIG9wZW5FbmQpO1xuICAgICAgICBhZGROb2RlKGNsb3NlKG9wZW5TdGFydCwgcmVwbGFjZVRocmVlV2F5KCRmcm9tLCAkc3RhcnQsICRlbmQsICR0bywgZGVwdGggKyAxKSksIGNvbnRlbnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKG9wZW5TdGFydClcbiAgICAgICAgICAgIGFkZE5vZGUoY2xvc2Uob3BlblN0YXJ0LCByZXBsYWNlVHdvV2F5KCRmcm9tLCAkc3RhcnQsIGRlcHRoICsgMSkpLCBjb250ZW50KTtcbiAgICAgICAgYWRkUmFuZ2UoJHN0YXJ0LCAkZW5kLCBkZXB0aCwgY29udGVudCk7XG4gICAgICAgIGlmIChvcGVuRW5kKVxuICAgICAgICAgICAgYWRkTm9kZShjbG9zZShvcGVuRW5kLCByZXBsYWNlVHdvV2F5KCRlbmQsICR0bywgZGVwdGggKyAxKSksIGNvbnRlbnQpO1xuICAgIH1cbiAgICBhZGRSYW5nZSgkdG8sIG51bGwsIGRlcHRoLCBjb250ZW50KTtcbiAgICByZXR1cm4gbmV3IEZyYWdtZW50KGNvbnRlbnQpO1xufVxuZnVuY3Rpb24gcmVwbGFjZVR3b1dheSgkZnJvbSwgJHRvLCBkZXB0aCkge1xuICAgIGxldCBjb250ZW50ID0gW107XG4gICAgYWRkUmFuZ2UobnVsbCwgJGZyb20sIGRlcHRoLCBjb250ZW50KTtcbiAgICBpZiAoJGZyb20uZGVwdGggPiBkZXB0aCkge1xuICAgICAgICBsZXQgdHlwZSA9IGpvaW5hYmxlKCRmcm9tLCAkdG8sIGRlcHRoICsgMSk7XG4gICAgICAgIGFkZE5vZGUoY2xvc2UodHlwZSwgcmVwbGFjZVR3b1dheSgkZnJvbSwgJHRvLCBkZXB0aCArIDEpKSwgY29udGVudCk7XG4gICAgfVxuICAgIGFkZFJhbmdlKCR0bywgbnVsbCwgZGVwdGgsIGNvbnRlbnQpO1xuICAgIHJldHVybiBuZXcgRnJhZ21lbnQoY29udGVudCk7XG59XG5mdW5jdGlvbiBwcmVwYXJlU2xpY2VGb3JSZXBsYWNlKHNsaWNlLCAkYWxvbmcpIHtcbiAgICBsZXQgZXh0cmEgPSAkYWxvbmcuZGVwdGggLSBzbGljZS5vcGVuU3RhcnQsIHBhcmVudCA9ICRhbG9uZy5ub2RlKGV4dHJhKTtcbiAgICBsZXQgbm9kZSA9IHBhcmVudC5jb3B5KHNsaWNlLmNvbnRlbnQpO1xuICAgIGZvciAobGV0IGkgPSBleHRyYSAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICBub2RlID0gJGFsb25nLm5vZGUoaSkuY29weShGcmFnbWVudC5mcm9tKG5vZGUpKTtcbiAgICByZXR1cm4geyBzdGFydDogbm9kZS5yZXNvbHZlTm9DYWNoZShzbGljZS5vcGVuU3RhcnQgKyBleHRyYSksXG4gICAgICAgIGVuZDogbm9kZS5yZXNvbHZlTm9DYWNoZShub2RlLmNvbnRlbnQuc2l6ZSAtIHNsaWNlLm9wZW5FbmQgLSBleHRyYSkgfTtcbn1cblxuLyoqXG5Zb3UgY2FuIFtfcmVzb2x2ZV9dKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlLnJlc29sdmUpIGEgcG9zaXRpb24gdG8gZ2V0IG1vcmVcbmluZm9ybWF0aW9uIGFib3V0IGl0LiBPYmplY3RzIG9mIHRoaXMgY2xhc3MgcmVwcmVzZW50IHN1Y2ggYVxucmVzb2x2ZWQgcG9zaXRpb24sIHByb3ZpZGluZyB2YXJpb3VzIHBpZWNlcyBvZiBjb250ZXh0XG5pbmZvcm1hdGlvbiwgYW5kIHNvbWUgaGVscGVyIG1ldGhvZHMuXG5cblRocm91Z2hvdXQgdGhpcyBpbnRlcmZhY2UsIG1ldGhvZHMgdGhhdCB0YWtlIGFuIG9wdGlvbmFsIGBkZXB0aGBcbnBhcmFtZXRlciB3aWxsIGludGVycHJldCB1bmRlZmluZWQgYXMgYHRoaXMuZGVwdGhgIGFuZCBuZWdhdGl2ZVxubnVtYmVycyBhcyBgdGhpcy5kZXB0aCArIHZhbHVlYC5cbiovXG5jbGFzcyBSZXNvbHZlZFBvcyB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgcG9zaXRpb24gdGhhdCB3YXMgcmVzb2x2ZWQuXG4gICAgKi9cbiAgICBwb3MsIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcGF0aCwgXG4gICAgLyoqXG4gICAgVGhlIG9mZnNldCB0aGlzIHBvc2l0aW9uIGhhcyBpbnRvIGl0cyBwYXJlbnQgbm9kZS5cbiAgICAqL1xuICAgIHBhcmVudE9mZnNldCkge1xuICAgICAgICB0aGlzLnBvcyA9IHBvcztcbiAgICAgICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAgICAgdGhpcy5wYXJlbnRPZmZzZXQgPSBwYXJlbnRPZmZzZXQ7XG4gICAgICAgIHRoaXMuZGVwdGggPSBwYXRoLmxlbmd0aCAvIDMgLSAxO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlc29sdmVEZXB0aCh2YWwpIHtcbiAgICAgICAgaWYgKHZhbCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVwdGg7XG4gICAgICAgIGlmICh2YWwgPCAwKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVwdGggKyB2YWw7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBwYXJlbnQgbm9kZSB0aGF0IHRoZSBwb3NpdGlvbiBwb2ludHMgaW50by4gTm90ZSB0aGF0IGV2ZW4gaWZcbiAgICBhIHBvc2l0aW9uIHBvaW50cyBpbnRvIGEgdGV4dCBub2RlLCB0aGF0IG5vZGUgaXMgbm90IGNvbnNpZGVyZWRcbiAgICB0aGUgcGFyZW504oCUdGV4dCBub2RlcyBhcmUg4oCYZmxhdOKAmSBpbiB0aGlzIG1vZGVsLCBhbmQgaGF2ZSBubyBjb250ZW50LlxuICAgICovXG4gICAgZ2V0IHBhcmVudCgpIHsgcmV0dXJuIHRoaXMubm9kZSh0aGlzLmRlcHRoKTsgfVxuICAgIC8qKlxuICAgIFRoZSByb290IG5vZGUgaW4gd2hpY2ggdGhlIHBvc2l0aW9uIHdhcyByZXNvbHZlZC5cbiAgICAqL1xuICAgIGdldCBkb2MoKSB7IHJldHVybiB0aGlzLm5vZGUoMCk7IH1cbiAgICAvKipcbiAgICBUaGUgYW5jZXN0b3Igbm9kZSBhdCB0aGUgZ2l2ZW4gbGV2ZWwuIGBwLm5vZGUocC5kZXB0aClgIGlzIHRoZVxuICAgIHNhbWUgYXMgYHAucGFyZW50YC5cbiAgICAqL1xuICAgIG5vZGUoZGVwdGgpIHsgcmV0dXJuIHRoaXMucGF0aFt0aGlzLnJlc29sdmVEZXB0aChkZXB0aCkgKiAzXTsgfVxuICAgIC8qKlxuICAgIFRoZSBpbmRleCBpbnRvIHRoZSBhbmNlc3RvciBhdCB0aGUgZ2l2ZW4gbGV2ZWwuIElmIHRoaXMgcG9pbnRzXG4gICAgYXQgdGhlIDNyZCBub2RlIGluIHRoZSAybmQgcGFyYWdyYXBoIG9uIHRoZSB0b3AgbGV2ZWwsIGZvclxuICAgIGV4YW1wbGUsIGBwLmluZGV4KDApYCBpcyAxIGFuZCBgcC5pbmRleCgxKWAgaXMgMi5cbiAgICAqL1xuICAgIGluZGV4KGRlcHRoKSB7IHJldHVybiB0aGlzLnBhdGhbdGhpcy5yZXNvbHZlRGVwdGgoZGVwdGgpICogMyArIDFdOyB9XG4gICAgLyoqXG4gICAgVGhlIGluZGV4IHBvaW50aW5nIGFmdGVyIHRoaXMgcG9zaXRpb24gaW50byB0aGUgYW5jZXN0b3IgYXQgdGhlXG4gICAgZ2l2ZW4gbGV2ZWwuXG4gICAgKi9cbiAgICBpbmRleEFmdGVyKGRlcHRoKSB7XG4gICAgICAgIGRlcHRoID0gdGhpcy5yZXNvbHZlRGVwdGgoZGVwdGgpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleChkZXB0aCkgKyAoZGVwdGggPT0gdGhpcy5kZXB0aCAmJiAhdGhpcy50ZXh0T2Zmc2V0ID8gMCA6IDEpO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgKGFic29sdXRlKSBwb3NpdGlvbiBhdCB0aGUgc3RhcnQgb2YgdGhlIG5vZGUgYXQgdGhlIGdpdmVuXG4gICAgbGV2ZWwuXG4gICAgKi9cbiAgICBzdGFydChkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgcmV0dXJuIGRlcHRoID09IDAgPyAwIDogdGhpcy5wYXRoW2RlcHRoICogMyAtIDFdICsgMTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIChhYnNvbHV0ZSkgcG9zaXRpb24gYXQgdGhlIGVuZCBvZiB0aGUgbm9kZSBhdCB0aGUgZ2l2ZW5cbiAgICBsZXZlbC5cbiAgICAqL1xuICAgIGVuZChkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQoZGVwdGgpICsgdGhpcy5ub2RlKGRlcHRoKS5jb250ZW50LnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSAoYWJzb2x1dGUpIHBvc2l0aW9uIGRpcmVjdGx5IGJlZm9yZSB0aGUgd3JhcHBpbmcgbm9kZSBhdCB0aGVcbiAgICBnaXZlbiBsZXZlbCwgb3IsIHdoZW4gYGRlcHRoYCBpcyBgdGhpcy5kZXB0aCArIDFgLCB0aGUgb3JpZ2luYWxcbiAgICBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGJlZm9yZShkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgaWYgKCFkZXB0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlcmUgaXMgbm8gcG9zaXRpb24gYmVmb3JlIHRoZSB0b3AtbGV2ZWwgbm9kZVwiKTtcbiAgICAgICAgcmV0dXJuIGRlcHRoID09IHRoaXMuZGVwdGggKyAxID8gdGhpcy5wb3MgOiB0aGlzLnBhdGhbZGVwdGggKiAzIC0gMV07XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSAoYWJzb2x1dGUpIHBvc2l0aW9uIGRpcmVjdGx5IGFmdGVyIHRoZSB3cmFwcGluZyBub2RlIGF0IHRoZVxuICAgIGdpdmVuIGxldmVsLCBvciB0aGUgb3JpZ2luYWwgcG9zaXRpb24gd2hlbiBgZGVwdGhgIGlzIGB0aGlzLmRlcHRoICsgMWAuXG4gICAgKi9cbiAgICBhZnRlcihkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgaWYgKCFkZXB0aClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiVGhlcmUgaXMgbm8gcG9zaXRpb24gYWZ0ZXIgdGhlIHRvcC1sZXZlbCBub2RlXCIpO1xuICAgICAgICByZXR1cm4gZGVwdGggPT0gdGhpcy5kZXB0aCArIDEgPyB0aGlzLnBvcyA6IHRoaXMucGF0aFtkZXB0aCAqIDMgLSAxXSArIHRoaXMucGF0aFtkZXB0aCAqIDNdLm5vZGVTaXplO1xuICAgIH1cbiAgICAvKipcbiAgICBXaGVuIHRoaXMgcG9zaXRpb24gcG9pbnRzIGludG8gYSB0ZXh0IG5vZGUsIHRoaXMgcmV0dXJucyB0aGVcbiAgICBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb3NpdGlvbiBhbmQgdGhlIHN0YXJ0IG9mIHRoZSB0ZXh0IG5vZGUuXG4gICAgV2lsbCBiZSB6ZXJvIGZvciBwb3NpdGlvbnMgdGhhdCBwb2ludCBiZXR3ZWVuIG5vZGVzLlxuICAgICovXG4gICAgZ2V0IHRleHRPZmZzZXQoKSB7IHJldHVybiB0aGlzLnBvcyAtIHRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoIC0gMV07IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG5vZGUgZGlyZWN0bHkgYWZ0ZXIgdGhlIHBvc2l0aW9uLCBpZiBhbnkuIElmIHRoZSBwb3NpdGlvblxuICAgIHBvaW50cyBpbnRvIGEgdGV4dCBub2RlLCBvbmx5IHRoZSBwYXJ0IG9mIHRoYXQgbm9kZSBhZnRlciB0aGVcbiAgICBwb3NpdGlvbiBpcyByZXR1cm5lZC5cbiAgICAqL1xuICAgIGdldCBub2RlQWZ0ZXIoKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLnBhcmVudCwgaW5kZXggPSB0aGlzLmluZGV4KHRoaXMuZGVwdGgpO1xuICAgICAgICBpZiAoaW5kZXggPT0gcGFyZW50LmNoaWxkQ291bnQpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgbGV0IGRPZmYgPSB0aGlzLnBvcyAtIHRoaXMucGF0aFt0aGlzLnBhdGgubGVuZ3RoIC0gMV0sIGNoaWxkID0gcGFyZW50LmNoaWxkKGluZGV4KTtcbiAgICAgICAgcmV0dXJuIGRPZmYgPyBwYXJlbnQuY2hpbGQoaW5kZXgpLmN1dChkT2ZmKSA6IGNoaWxkO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIG5vZGUgZGlyZWN0bHkgYmVmb3JlIHRoZSBwb3NpdGlvbiwgaWYgYW55LiBJZiB0aGVcbiAgICBwb3NpdGlvbiBwb2ludHMgaW50byBhIHRleHQgbm9kZSwgb25seSB0aGUgcGFydCBvZiB0aGF0IG5vZGVcbiAgICBiZWZvcmUgdGhlIHBvc2l0aW9uIGlzIHJldHVybmVkLlxuICAgICovXG4gICAgZ2V0IG5vZGVCZWZvcmUoKSB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuaW5kZXgodGhpcy5kZXB0aCk7XG4gICAgICAgIGxldCBkT2ZmID0gdGhpcy5wb3MgLSB0aGlzLnBhdGhbdGhpcy5wYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAoZE9mZilcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5jaGlsZChpbmRleCkuY3V0KDAsIGRPZmYpO1xuICAgICAgICByZXR1cm4gaW5kZXggPT0gMCA/IG51bGwgOiB0aGlzLnBhcmVudC5jaGlsZChpbmRleCAtIDEpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIHBvc2l0aW9uIGF0IHRoZSBnaXZlbiBpbmRleCBpbiB0aGUgcGFyZW50IG5vZGUgYXQgdGhlXG4gICAgZ2l2ZW4gZGVwdGggKHdoaWNoIGRlZmF1bHRzIHRvIGB0aGlzLmRlcHRoYCkuXG4gICAgKi9cbiAgICBwb3NBdEluZGV4KGluZGV4LCBkZXB0aCkge1xuICAgICAgICBkZXB0aCA9IHRoaXMucmVzb2x2ZURlcHRoKGRlcHRoKTtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLnBhdGhbZGVwdGggKiAzXSwgcG9zID0gZGVwdGggPT0gMCA/IDAgOiB0aGlzLnBhdGhbZGVwdGggKiAzIC0gMV0gKyAxO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGV4OyBpKyspXG4gICAgICAgICAgICBwb3MgKz0gbm9kZS5jaGlsZChpKS5ub2RlU2l6ZTtcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBtYXJrcyBhdCB0aGlzIHBvc2l0aW9uLCBmYWN0b3JpbmcgaW4gdGhlIHN1cnJvdW5kaW5nXG4gICAgbWFya3MnIFtgaW5jbHVzaXZlYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk1hcmtTcGVjLmluY2x1c2l2ZSkgcHJvcGVydHkuIElmIHRoZVxuICAgIHBvc2l0aW9uIGlzIGF0IHRoZSBzdGFydCBvZiBhIG5vbi1lbXB0eSBub2RlLCB0aGUgbWFya3Mgb2YgdGhlXG4gICAgbm9kZSBhZnRlciBpdCAoaWYgYW55KSBhcmUgcmV0dXJuZWQuXG4gICAgKi9cbiAgICBtYXJrcygpIHtcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMucGFyZW50LCBpbmRleCA9IHRoaXMuaW5kZXgoKTtcbiAgICAgICAgLy8gSW4gYW4gZW1wdHkgcGFyZW50LCByZXR1cm4gdGhlIGVtcHR5IGFycmF5XG4gICAgICAgIGlmIChwYXJlbnQuY29udGVudC5zaXplID09IDApXG4gICAgICAgICAgICByZXR1cm4gTWFyay5ub25lO1xuICAgICAgICAvLyBXaGVuIGluc2lkZSBhIHRleHQgbm9kZSwganVzdCByZXR1cm4gdGhlIHRleHQgbm9kZSdzIG1hcmtzXG4gICAgICAgIGlmICh0aGlzLnRleHRPZmZzZXQpXG4gICAgICAgICAgICByZXR1cm4gcGFyZW50LmNoaWxkKGluZGV4KS5tYXJrcztcbiAgICAgICAgbGV0IG1haW4gPSBwYXJlbnQubWF5YmVDaGlsZChpbmRleCAtIDEpLCBvdGhlciA9IHBhcmVudC5tYXliZUNoaWxkKGluZGV4KTtcbiAgICAgICAgLy8gSWYgdGhlIGBhZnRlcmAgZmxhZyBpcyB0cnVlIG9mIHRoZXJlIGlzIG5vIG5vZGUgYmVmb3JlLCBtYWtlXG4gICAgICAgIC8vIHRoZSBub2RlIGFmdGVyIHRoaXMgcG9zaXRpb24gdGhlIG1haW4gcmVmZXJlbmNlLlxuICAgICAgICBpZiAoIW1haW4pIHtcbiAgICAgICAgICAgIGxldCB0bXAgPSBtYWluO1xuICAgICAgICAgICAgbWFpbiA9IG90aGVyO1xuICAgICAgICAgICAgb3RoZXIgPSB0bXA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVXNlIGFsbCBtYXJrcyBpbiB0aGUgbWFpbiBub2RlLCBleGNlcHQgdGhvc2UgdGhhdCBoYXZlXG4gICAgICAgIC8vIGBpbmNsdXNpdmVgIHNldCB0byBmYWxzZSBhbmQgYXJlIG5vdCBwcmVzZW50IGluIHRoZSBvdGhlciBub2RlLlxuICAgICAgICBsZXQgbWFya3MgPSBtYWluLm1hcmtzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKG1hcmtzW2ldLnR5cGUuc3BlYy5pbmNsdXNpdmUgPT09IGZhbHNlICYmICghb3RoZXIgfHwgIW1hcmtzW2ldLmlzSW5TZXQob3RoZXIubWFya3MpKSlcbiAgICAgICAgICAgICAgICBtYXJrcyA9IG1hcmtzW2ktLV0ucmVtb3ZlRnJvbVNldChtYXJrcyk7XG4gICAgICAgIHJldHVybiBtYXJrcztcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBtYXJrcyBhZnRlciB0aGUgY3VycmVudCBwb3NpdGlvbiwgaWYgYW55LCBleGNlcHQgdGhvc2VcbiAgICB0aGF0IGFyZSBub24taW5jbHVzaXZlIGFuZCBub3QgcHJlc2VudCBhdCBwb3NpdGlvbiBgJGVuZGAuIFRoaXNcbiAgICBpcyBtb3N0bHkgdXNlZnVsIGZvciBnZXR0aW5nIHRoZSBzZXQgb2YgbWFya3MgdG8gcHJlc2VydmUgYWZ0ZXIgYVxuICAgIGRlbGV0aW9uLiBXaWxsIHJldHVybiBgbnVsbGAgaWYgdGhpcyBwb3NpdGlvbiBpcyBhdCB0aGUgZW5kIG9mXG4gICAgaXRzIHBhcmVudCBub2RlIG9yIGl0cyBwYXJlbnQgbm9kZSBpc24ndCBhIHRleHRibG9jayAoaW4gd2hpY2hcbiAgICBjYXNlIG5vIG1hcmtzIHNob3VsZCBiZSBwcmVzZXJ2ZWQpLlxuICAgICovXG4gICAgbWFya3NBY3Jvc3MoJGVuZCkge1xuICAgICAgICBsZXQgYWZ0ZXIgPSB0aGlzLnBhcmVudC5tYXliZUNoaWxkKHRoaXMuaW5kZXgoKSk7XG4gICAgICAgIGlmICghYWZ0ZXIgfHwgIWFmdGVyLmlzSW5saW5lKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGxldCBtYXJrcyA9IGFmdGVyLm1hcmtzLCBuZXh0ID0gJGVuZC5wYXJlbnQubWF5YmVDaGlsZCgkZW5kLmluZGV4KCkpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgaWYgKG1hcmtzW2ldLnR5cGUuc3BlYy5pbmNsdXNpdmUgPT09IGZhbHNlICYmICghbmV4dCB8fCAhbWFya3NbaV0uaXNJblNldChuZXh0Lm1hcmtzKSkpXG4gICAgICAgICAgICAgICAgbWFya3MgPSBtYXJrc1tpLS1dLnJlbW92ZUZyb21TZXQobWFya3MpO1xuICAgICAgICByZXR1cm4gbWFya3M7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBkZXB0aCB1cCB0byB3aGljaCB0aGlzIHBvc2l0aW9uIGFuZCB0aGUgZ2l2ZW4gKG5vbi1yZXNvbHZlZClcbiAgICBwb3NpdGlvbiBzaGFyZSB0aGUgc2FtZSBwYXJlbnQgbm9kZXMuXG4gICAgKi9cbiAgICBzaGFyZWREZXB0aChwb3MpIHtcbiAgICAgICAgZm9yIChsZXQgZGVwdGggPSB0aGlzLmRlcHRoOyBkZXB0aCA+IDA7IGRlcHRoLS0pXG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydChkZXB0aCkgPD0gcG9zICYmIHRoaXMuZW5kKGRlcHRoKSA+PSBwb3MpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlcHRoO1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBhIHJhbmdlIGJhc2VkIG9uIHRoZSBwbGFjZSB3aGVyZSB0aGlzIHBvc2l0aW9uIGFuZCB0aGVcbiAgICBnaXZlbiBwb3NpdGlvbiBkaXZlcmdlIGFyb3VuZCBibG9jayBjb250ZW50LiBJZiBib3RoIHBvaW50IGludG9cbiAgICB0aGUgc2FtZSB0ZXh0YmxvY2ssIGZvciBleGFtcGxlLCBhIHJhbmdlIGFyb3VuZCB0aGF0IHRleHRibG9ja1xuICAgIHdpbGwgYmUgcmV0dXJuZWQuIElmIHRoZXkgcG9pbnQgaW50byBkaWZmZXJlbnQgYmxvY2tzLCB0aGUgcmFuZ2VcbiAgICBhcm91bmQgdGhvc2UgYmxvY2tzIGluIHRoZWlyIHNoYXJlZCBhbmNlc3RvciBpcyByZXR1cm5lZC4gWW91IGNhblxuICAgIHBhc3MgaW4gYW4gb3B0aW9uYWwgcHJlZGljYXRlIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2l0aCBhIHBhcmVudFxuICAgIG5vZGUgdG8gc2VlIGlmIGEgcmFuZ2UgaW50byB0aGF0IHBhcmVudCBpcyBhY2NlcHRhYmxlLlxuICAgICovXG4gICAgYmxvY2tSYW5nZShvdGhlciA9IHRoaXMsIHByZWQpIHtcbiAgICAgICAgaWYgKG90aGVyLnBvcyA8IHRoaXMucG9zKVxuICAgICAgICAgICAgcmV0dXJuIG90aGVyLmJsb2NrUmFuZ2UodGhpcyk7XG4gICAgICAgIGZvciAobGV0IGQgPSB0aGlzLmRlcHRoIC0gKHRoaXMucGFyZW50LmlubGluZUNvbnRlbnQgfHwgdGhpcy5wb3MgPT0gb3RoZXIucG9zID8gMSA6IDApOyBkID49IDA7IGQtLSlcbiAgICAgICAgICAgIGlmIChvdGhlci5wb3MgPD0gdGhpcy5lbmQoZCkgJiYgKCFwcmVkIHx8IHByZWQodGhpcy5ub2RlKGQpKSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOb2RlUmFuZ2UodGhpcywgb3RoZXIsIGQpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgUXVlcnkgd2hldGhlciB0aGUgZ2l2ZW4gcG9zaXRpb24gc2hhcmVzIHRoZSBzYW1lIHBhcmVudCBub2RlLlxuICAgICovXG4gICAgc2FtZVBhcmVudChvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3MgLSB0aGlzLnBhcmVudE9mZnNldCA9PSBvdGhlci5wb3MgLSBvdGhlci5wYXJlbnRPZmZzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiB0aGUgZ3JlYXRlciBvZiB0aGlzIGFuZCB0aGUgZ2l2ZW4gcG9zaXRpb24uXG4gICAgKi9cbiAgICBtYXgob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyLnBvcyA+IHRoaXMucG9zID8gb3RoZXIgOiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gdGhlIHNtYWxsZXIgb2YgdGhpcyBhbmQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgbWluKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlci5wb3MgPCB0aGlzLnBvcyA/IG90aGVyIDogdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgbGV0IHN0ciA9IFwiXCI7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IHRoaXMuZGVwdGg7IGkrKylcbiAgICAgICAgICAgIHN0ciArPSAoc3RyID8gXCIvXCIgOiBcIlwiKSArIHRoaXMubm9kZShpKS50eXBlLm5hbWUgKyBcIl9cIiArIHRoaXMuaW5kZXgoaSAtIDEpO1xuICAgICAgICByZXR1cm4gc3RyICsgXCI6XCIgKyB0aGlzLnBhcmVudE9mZnNldDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgcmVzb2x2ZShkb2MsIHBvcykge1xuICAgICAgICBpZiAoIShwb3MgPj0gMCAmJiBwb3MgPD0gZG9jLmNvbnRlbnQuc2l6ZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlBvc2l0aW9uIFwiICsgcG9zICsgXCIgb3V0IG9mIHJhbmdlXCIpO1xuICAgICAgICBsZXQgcGF0aCA9IFtdO1xuICAgICAgICBsZXQgc3RhcnQgPSAwLCBwYXJlbnRPZmZzZXQgPSBwb3M7XG4gICAgICAgIGZvciAobGV0IG5vZGUgPSBkb2M7Oykge1xuICAgICAgICAgICAgbGV0IHsgaW5kZXgsIG9mZnNldCB9ID0gbm9kZS5jb250ZW50LmZpbmRJbmRleChwYXJlbnRPZmZzZXQpO1xuICAgICAgICAgICAgbGV0IHJlbSA9IHBhcmVudE9mZnNldCAtIG9mZnNldDtcbiAgICAgICAgICAgIHBhdGgucHVzaChub2RlLCBpbmRleCwgc3RhcnQgKyBvZmZzZXQpO1xuICAgICAgICAgICAgaWYgKCFyZW0pXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5jaGlsZChpbmRleCk7XG4gICAgICAgICAgICBpZiAobm9kZS5pc1RleHQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSByZW0gLSAxO1xuICAgICAgICAgICAgc3RhcnQgKz0gb2Zmc2V0ICsgMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVkUG9zKHBvcywgcGF0aCwgcGFyZW50T2Zmc2V0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgcmVzb2x2ZUNhY2hlZChkb2MsIHBvcykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc29sdmVDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNhY2hlZCA9IHJlc29sdmVDYWNoZVtpXTtcbiAgICAgICAgICAgIGlmIChjYWNoZWQucG9zID09IHBvcyAmJiBjYWNoZWQuZG9jID09IGRvYylcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkO1xuICAgICAgICB9XG4gICAgICAgIGxldCByZXN1bHQgPSByZXNvbHZlQ2FjaGVbcmVzb2x2ZUNhY2hlUG9zXSA9IFJlc29sdmVkUG9zLnJlc29sdmUoZG9jLCBwb3MpO1xuICAgICAgICByZXNvbHZlQ2FjaGVQb3MgPSAocmVzb2x2ZUNhY2hlUG9zICsgMSkgJSByZXNvbHZlQ2FjaGVTaXplO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cbmxldCByZXNvbHZlQ2FjaGUgPSBbXSwgcmVzb2x2ZUNhY2hlUG9zID0gMCwgcmVzb2x2ZUNhY2hlU2l6ZSA9IDEyO1xuLyoqXG5SZXByZXNlbnRzIGEgZmxhdCByYW5nZSBvZiBjb250ZW50LCBpLmUuIG9uZSB0aGF0IHN0YXJ0cyBhbmRcbmVuZHMgaW4gdGhlIHNhbWUgbm9kZS5cbiovXG5jbGFzcyBOb2RlUmFuZ2Uge1xuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIG5vZGUgcmFuZ2UuIGAkZnJvbWAgYW5kIGAkdG9gIHNob3VsZCBwb2ludCBpbnRvIHRoZVxuICAgIHNhbWUgbm9kZSB1bnRpbCBhdCBsZWFzdCB0aGUgZ2l2ZW4gYGRlcHRoYCwgc2luY2UgYSBub2RlIHJhbmdlXG4gICAgZGVub3RlcyBhbiBhZGphY2VudCBzZXQgb2Ygbm9kZXMgaW4gYSBzaW5nbGUgcGFyZW50IG5vZGUuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBBIHJlc29sdmVkIHBvc2l0aW9uIGFsb25nIHRoZSBzdGFydCBvZiB0aGUgY29udGVudC4gTWF5IGhhdmUgYVxuICAgIGBkZXB0aGAgZ3JlYXRlciB0aGFuIHRoaXMgb2JqZWN0J3MgYGRlcHRoYCBwcm9wZXJ0eSwgc2luY2VcbiAgICB0aGVzZSBhcmUgdGhlIHBvc2l0aW9ucyB0aGF0IHdlcmUgdXNlZCB0byBjb21wdXRlIHRoZSByYW5nZSxcbiAgICBub3QgcmUtcmVzb2x2ZWQgcG9zaXRpb25zIGRpcmVjdGx5IGF0IGl0cyBib3VuZGFyaWVzLlxuICAgICovXG4gICAgJGZyb20sIFxuICAgIC8qKlxuICAgIEEgcG9zaXRpb24gYWxvbmcgdGhlIGVuZCBvZiB0aGUgY29udGVudC4gU2VlXG4gICAgY2F2ZWF0IGZvciBbYCRmcm9tYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVSYW5nZS4kZnJvbSkuXG4gICAgKi9cbiAgICAkdG8sIFxuICAgIC8qKlxuICAgIFRoZSBkZXB0aCBvZiB0aGUgbm9kZSB0aGF0IHRoaXMgcmFuZ2UgcG9pbnRzIGludG8uXG4gICAgKi9cbiAgICBkZXB0aCkge1xuICAgICAgICB0aGlzLiRmcm9tID0gJGZyb207XG4gICAgICAgIHRoaXMuJHRvID0gJHRvO1xuICAgICAgICB0aGlzLmRlcHRoID0gZGVwdGg7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBwb3NpdGlvbiBhdCB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgZ2V0IHN0YXJ0KCkgeyByZXR1cm4gdGhpcy4kZnJvbS5iZWZvcmUodGhpcy5kZXB0aCArIDEpOyB9XG4gICAgLyoqXG4gICAgVGhlIHBvc2l0aW9uIGF0IHRoZSBlbmQgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgZ2V0IGVuZCgpIHsgcmV0dXJuIHRoaXMuJHRvLmFmdGVyKHRoaXMuZGVwdGggKyAxKTsgfVxuICAgIC8qKlxuICAgIFRoZSBwYXJlbnQgbm9kZSB0aGF0IHRoZSByYW5nZSBwb2ludHMgaW50by5cbiAgICAqL1xuICAgIGdldCBwYXJlbnQoKSB7IHJldHVybiB0aGlzLiRmcm9tLm5vZGUodGhpcy5kZXB0aCk7IH1cbiAgICAvKipcbiAgICBUaGUgc3RhcnQgaW5kZXggb2YgdGhlIHJhbmdlIGluIHRoZSBwYXJlbnQgbm9kZS5cbiAgICAqL1xuICAgIGdldCBzdGFydEluZGV4KCkgeyByZXR1cm4gdGhpcy4kZnJvbS5pbmRleCh0aGlzLmRlcHRoKTsgfVxuICAgIC8qKlxuICAgIFRoZSBlbmQgaW5kZXggb2YgdGhlIHJhbmdlIGluIHRoZSBwYXJlbnQgbm9kZS5cbiAgICAqL1xuICAgIGdldCBlbmRJbmRleCgpIHsgcmV0dXJuIHRoaXMuJHRvLmluZGV4QWZ0ZXIodGhpcy5kZXB0aCk7IH1cbn1cblxuY29uc3QgZW1wdHlBdHRycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4vKipcblRoaXMgY2xhc3MgcmVwcmVzZW50cyBhIG5vZGUgaW4gdGhlIHRyZWUgdGhhdCBtYWtlcyB1cCBhXG5Qcm9zZU1pcnJvciBkb2N1bWVudC4gU28gYSBkb2N1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBgTm9kZWAsIHdpdGhcbmNoaWxkcmVuIHRoYXQgYXJlIGFsc28gaW5zdGFuY2VzIG9mIGBOb2RlYC5cblxuTm9kZXMgYXJlIHBlcnNpc3RlbnQgZGF0YSBzdHJ1Y3R1cmVzLiBJbnN0ZWFkIG9mIGNoYW5naW5nIHRoZW0sIHlvdVxuY3JlYXRlIG5ldyBvbmVzIHdpdGggdGhlIGNvbnRlbnQgeW91IHdhbnQuIE9sZCBvbmVzIGtlZXAgcG9pbnRpbmdcbmF0IHRoZSBvbGQgZG9jdW1lbnQgc2hhcGUuIFRoaXMgaXMgbWFkZSBjaGVhcGVyIGJ5IHNoYXJpbmdcbnN0cnVjdHVyZSBiZXR3ZWVuIHRoZSBvbGQgYW5kIG5ldyBkYXRhIGFzIG11Y2ggYXMgcG9zc2libGUsIHdoaWNoIGFcbnRyZWUgc2hhcGUgbGlrZSB0aGlzICh3aXRob3V0IGJhY2sgcG9pbnRlcnMpIG1ha2VzIGVhc3kuXG5cbioqRG8gbm90KiogZGlyZWN0bHkgbXV0YXRlIHRoZSBwcm9wZXJ0aWVzIG9mIGEgYE5vZGVgIG9iamVjdC4gU2VlXG5bdGhlIGd1aWRlXSgvZG9jcy9ndWlkZS8jZG9jKSBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiovXG5jbGFzcyBOb2RlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSB0eXBlIG9mIG5vZGUgdGhhdCB0aGlzIGlzLlxuICAgICovXG4gICAgdHlwZSwgXG4gICAgLyoqXG4gICAgQW4gb2JqZWN0IG1hcHBpbmcgYXR0cmlidXRlIG5hbWVzIHRvIHZhbHVlcy4gVGhlIGtpbmQgb2ZcbiAgICBhdHRyaWJ1dGVzIGFsbG93ZWQgYW5kIHJlcXVpcmVkIGFyZVxuICAgIFtkZXRlcm1pbmVkXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMuYXR0cnMpIGJ5IHRoZSBub2RlIHR5cGUuXG4gICAgKi9cbiAgICBhdHRycywgXG4gICAgLy8gQSBmcmFnbWVudCBob2xkaW5nIHRoZSBub2RlJ3MgY2hpbGRyZW4uXG4gICAgY29udGVudCwgXG4gICAgLyoqXG4gICAgVGhlIG1hcmtzICh0aGluZ3MgbGlrZSB3aGV0aGVyIGl0IGlzIGVtcGhhc2l6ZWQgb3IgcGFydCBvZiBhXG4gICAgbGluaykgYXBwbGllZCB0byB0aGlzIG5vZGUuXG4gICAgKi9cbiAgICBtYXJrcyA9IE1hcmsubm9uZSkge1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgICAgICB0aGlzLmF0dHJzID0gYXR0cnM7XG4gICAgICAgIHRoaXMubWFya3MgPSBtYXJrcztcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudCB8fCBGcmFnbWVudC5lbXB0eTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHNpemUgb2YgdGhpcyBub2RlLCBhcyBkZWZpbmVkIGJ5IHRoZSBpbnRlZ2VyLWJhc2VkIFtpbmRleGluZ1xuICAgIHNjaGVtZV0oL2RvY3MvZ3VpZGUvI2RvYy5pbmRleGluZykuIEZvciB0ZXh0IG5vZGVzLCB0aGlzIGlzIHRoZVxuICAgIGFtb3VudCBvZiBjaGFyYWN0ZXJzLiBGb3Igb3RoZXIgbGVhZiBub2RlcywgaXQgaXMgb25lLiBGb3JcbiAgICBub24tbGVhZiBub2RlcywgaXQgaXMgdGhlIHNpemUgb2YgdGhlIGNvbnRlbnQgcGx1cyB0d28gKHRoZVxuICAgIHN0YXJ0IGFuZCBlbmQgdG9rZW4pLlxuICAgICovXG4gICAgZ2V0IG5vZGVTaXplKCkgeyByZXR1cm4gdGhpcy5pc0xlYWYgPyAxIDogMiArIHRoaXMuY29udGVudC5zaXplOyB9XG4gICAgLyoqXG4gICAgVGhlIG51bWJlciBvZiBjaGlsZHJlbiB0aGF0IHRoZSBub2RlIGhhcy5cbiAgICAqL1xuICAgIGdldCBjaGlsZENvdW50KCkgeyByZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkQ291bnQ7IH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGNoaWxkIG5vZGUgYXQgdGhlIGdpdmVuIGluZGV4LiBSYWlzZXMgYW4gZXJyb3Igd2hlbiB0aGVcbiAgICBpbmRleCBpcyBvdXQgb2YgcmFuZ2UuXG4gICAgKi9cbiAgICBjaGlsZChpbmRleCkgeyByZXR1cm4gdGhpcy5jb250ZW50LmNoaWxkKGluZGV4KTsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgY2hpbGQgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXgsIGlmIGl0IGV4aXN0cy5cbiAgICAqL1xuICAgIG1heWJlQ2hpbGQoaW5kZXgpIHsgcmV0dXJuIHRoaXMuY29udGVudC5tYXliZUNoaWxkKGluZGV4KTsgfVxuICAgIC8qKlxuICAgIENhbGwgYGZgIGZvciBldmVyeSBjaGlsZCBub2RlLCBwYXNzaW5nIHRoZSBub2RlLCBpdHMgb2Zmc2V0XG4gICAgaW50byB0aGlzIHBhcmVudCBub2RlLCBhbmQgaXRzIGluZGV4LlxuICAgICovXG4gICAgZm9yRWFjaChmKSB7IHRoaXMuY29udGVudC5mb3JFYWNoKGYpOyB9XG4gICAgLyoqXG4gICAgSW52b2tlIGEgY2FsbGJhY2sgZm9yIGFsbCBkZXNjZW5kYW50IG5vZGVzIHJlY3Vyc2l2ZWx5IGJldHdlZW5cbiAgICB0aGUgZ2l2ZW4gdHdvIHBvc2l0aW9ucyB0aGF0IGFyZSByZWxhdGl2ZSB0byBzdGFydCBvZiB0aGlzXG4gICAgbm9kZSdzIGNvbnRlbnQuIFRoZSBjYWxsYmFjayBpcyBpbnZva2VkIHdpdGggdGhlIG5vZGUsIGl0c1xuICAgIHBhcmVudC1yZWxhdGl2ZSBwb3NpdGlvbiwgaXRzIHBhcmVudCBub2RlLCBhbmQgaXRzIGNoaWxkIGluZGV4LlxuICAgIFdoZW4gdGhlIGNhbGxiYWNrIHJldHVybnMgZmFsc2UgZm9yIGEgZ2l2ZW4gbm9kZSwgdGhhdCBub2RlJ3NcbiAgICBjaGlsZHJlbiB3aWxsIG5vdCBiZSByZWN1cnNlZCBvdmVyLiBUaGUgbGFzdCBwYXJhbWV0ZXIgY2FuIGJlXG4gICAgdXNlZCB0byBzcGVjaWZ5IGEgc3RhcnRpbmcgcG9zaXRpb24gdG8gY291bnQgZnJvbS5cbiAgICAqL1xuICAgIG5vZGVzQmV0d2Vlbihmcm9tLCB0bywgZiwgc3RhcnRQb3MgPSAwKSB7XG4gICAgICAgIHRoaXMuY29udGVudC5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIGYsIHN0YXJ0UG9zLCB0aGlzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ2FsbCB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGV2ZXJ5IGRlc2NlbmRhbnQgbm9kZS4gRG9lc24ndFxuICAgIGRlc2NlbmQgaW50byBhIG5vZGUgd2hlbiB0aGUgY2FsbGJhY2sgcmV0dXJucyBgZmFsc2VgLlxuICAgICovXG4gICAgZGVzY2VuZGFudHMoZikge1xuICAgICAgICB0aGlzLm5vZGVzQmV0d2VlbigwLCB0aGlzLmNvbnRlbnQuc2l6ZSwgZik7XG4gICAgfVxuICAgIC8qKlxuICAgIENvbmNhdGVuYXRlcyBhbGwgdGhlIHRleHQgbm9kZXMgZm91bmQgaW4gdGhpcyBmcmFnbWVudCBhbmQgaXRzXG4gICAgY2hpbGRyZW4uXG4gICAgKi9cbiAgICBnZXQgdGV4dENvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pc0xlYWYgJiYgdGhpcy50eXBlLnNwZWMubGVhZlRleHQpXG4gICAgICAgICAgICA/IHRoaXMudHlwZS5zcGVjLmxlYWZUZXh0KHRoaXMpXG4gICAgICAgICAgICA6IHRoaXMudGV4dEJldHdlZW4oMCwgdGhpcy5jb250ZW50LnNpemUsIFwiXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYWxsIHRleHQgYmV0d2VlbiBwb3NpdGlvbnMgYGZyb21gIGFuZCBgdG9gLiBXaGVuXG4gICAgYGJsb2NrU2VwYXJhdG9yYCBpcyBnaXZlbiwgaXQgd2lsbCBiZSBpbnNlcnRlZCB0byBzZXBhcmF0ZSB0ZXh0XG4gICAgZnJvbSBkaWZmZXJlbnQgYmxvY2sgbm9kZXMuIElmIGBsZWFmVGV4dGAgaXMgZ2l2ZW4sIGl0J2xsIGJlXG4gICAgaW5zZXJ0ZWQgZm9yIGV2ZXJ5IG5vbi10ZXh0IGxlYWYgbm9kZSBlbmNvdW50ZXJlZCwgb3RoZXJ3aXNlXG4gICAgW2BsZWFmVGV4dGBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlU3BlY15sZWFmVGV4dCkgd2lsbCBiZSB1c2VkLlxuICAgICovXG4gICAgdGV4dEJldHdlZW4oZnJvbSwgdG8sIGJsb2NrU2VwYXJhdG9yLCBsZWFmVGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50LnRleHRCZXR3ZWVuKGZyb20sIHRvLCBibG9ja1NlcGFyYXRvciwgbGVhZlRleHQpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRoaXMgbm9kZSdzIGZpcnN0IGNoaWxkLCBvciBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vXG4gICAgY2hpbGRyZW4uXG4gICAgKi9cbiAgICBnZXQgZmlyc3RDaGlsZCgpIHsgcmV0dXJuIHRoaXMuY29udGVudC5maXJzdENoaWxkOyB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0aGlzIG5vZGUncyBsYXN0IGNoaWxkLCBvciBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vXG4gICAgY2hpbGRyZW4uXG4gICAgKi9cbiAgICBnZXQgbGFzdENoaWxkKCkgeyByZXR1cm4gdGhpcy5jb250ZW50Lmxhc3RDaGlsZDsgfVxuICAgIC8qKlxuICAgIFRlc3Qgd2hldGhlciB0d28gbm9kZXMgcmVwcmVzZW50IHRoZSBzYW1lIHBpZWNlIG9mIGRvY3VtZW50LlxuICAgICovXG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMgPT0gb3RoZXIgfHwgKHRoaXMuc2FtZU1hcmt1cChvdGhlcikgJiYgdGhpcy5jb250ZW50LmVxKG90aGVyLmNvbnRlbnQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ29tcGFyZSB0aGUgbWFya3VwICh0eXBlLCBhdHRyaWJ1dGVzLCBhbmQgbWFya3MpIG9mIHRoaXMgbm9kZSB0b1xuICAgIHRob3NlIG9mIGFub3RoZXIuIFJldHVybnMgYHRydWVgIGlmIGJvdGggaGF2ZSB0aGUgc2FtZSBtYXJrdXAuXG4gICAgKi9cbiAgICBzYW1lTWFya3VwKG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc01hcmt1cChvdGhlci50eXBlLCBvdGhlci5hdHRycywgb3RoZXIubWFya3MpO1xuICAgIH1cbiAgICAvKipcbiAgICBDaGVjayB3aGV0aGVyIHRoaXMgbm9kZSdzIG1hcmt1cCBjb3JyZXNwb25kIHRvIHRoZSBnaXZlbiB0eXBlLFxuICAgIGF0dHJpYnV0ZXMsIGFuZCBtYXJrcy5cbiAgICAqL1xuICAgIGhhc01hcmt1cCh0eXBlLCBhdHRycywgbWFya3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PSB0eXBlICYmXG4gICAgICAgICAgICBjb21wYXJlRGVlcCh0aGlzLmF0dHJzLCBhdHRycyB8fCB0eXBlLmRlZmF1bHRBdHRycyB8fCBlbXB0eUF0dHJzKSAmJlxuICAgICAgICAgICAgTWFyay5zYW1lU2V0KHRoaXMubWFya3MsIG1hcmtzIHx8IE1hcmsubm9uZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5ldyBub2RlIHdpdGggdGhlIHNhbWUgbWFya3VwIGFzIHRoaXMgbm9kZSwgY29udGFpbmluZ1xuICAgIHRoZSBnaXZlbiBjb250ZW50IChvciBlbXB0eSwgaWYgbm8gY29udGVudCBpcyBnaXZlbikuXG4gICAgKi9cbiAgICBjb3B5KGNvbnRlbnQgPSBudWxsKSB7XG4gICAgICAgIGlmIChjb250ZW50ID09IHRoaXMuY29udGVudClcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IE5vZGUodGhpcy50eXBlLCB0aGlzLmF0dHJzLCBjb250ZW50LCB0aGlzLm1hcmtzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgY29weSBvZiB0aGlzIG5vZGUsIHdpdGggdGhlIGdpdmVuIHNldCBvZiBtYXJrcyBpbnN0ZWFkXG4gICAgb2YgdGhlIG5vZGUncyBvd24gbWFya3MuXG4gICAgKi9cbiAgICBtYXJrKG1hcmtzKSB7XG4gICAgICAgIHJldHVybiBtYXJrcyA9PSB0aGlzLm1hcmtzID8gdGhpcyA6IG5ldyBOb2RlKHRoaXMudHlwZSwgdGhpcy5hdHRycywgdGhpcy5jb250ZW50LCBtYXJrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGNvcHkgb2YgdGhpcyBub2RlIHdpdGggb25seSB0aGUgY29udGVudCBiZXR3ZWVuIHRoZVxuICAgIGdpdmVuIHBvc2l0aW9ucy4gSWYgYHRvYCBpcyBub3QgZ2l2ZW4sIGl0IGRlZmF1bHRzIHRvIHRoZSBlbmQgb2ZcbiAgICB0aGUgbm9kZS5cbiAgICAqL1xuICAgIGN1dChmcm9tLCB0byA9IHRoaXMuY29udGVudC5zaXplKSB7XG4gICAgICAgIGlmIChmcm9tID09IDAgJiYgdG8gPT0gdGhpcy5jb250ZW50LnNpemUpXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmNvbnRlbnQuY3V0KGZyb20sIHRvKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEN1dCBvdXQgdGhlIHBhcnQgb2YgdGhlIGRvY3VtZW50IGJldHdlZW4gdGhlIGdpdmVuIHBvc2l0aW9ucywgYW5kXG4gICAgcmV0dXJuIGl0IGFzIGEgYFNsaWNlYCBvYmplY3QuXG4gICAgKi9cbiAgICBzbGljZShmcm9tLCB0byA9IHRoaXMuY29udGVudC5zaXplLCBpbmNsdWRlUGFyZW50cyA9IGZhbHNlKSB7XG4gICAgICAgIGlmIChmcm9tID09IHRvKVxuICAgICAgICAgICAgcmV0dXJuIFNsaWNlLmVtcHR5O1xuICAgICAgICBsZXQgJGZyb20gPSB0aGlzLnJlc29sdmUoZnJvbSksICR0byA9IHRoaXMucmVzb2x2ZSh0byk7XG4gICAgICAgIGxldCBkZXB0aCA9IGluY2x1ZGVQYXJlbnRzID8gMCA6ICRmcm9tLnNoYXJlZERlcHRoKHRvKTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gJGZyb20uc3RhcnQoZGVwdGgpLCBub2RlID0gJGZyb20ubm9kZShkZXB0aCk7XG4gICAgICAgIGxldCBjb250ZW50ID0gbm9kZS5jb250ZW50LmN1dCgkZnJvbS5wb3MgLSBzdGFydCwgJHRvLnBvcyAtIHN0YXJ0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBTbGljZShjb250ZW50LCAkZnJvbS5kZXB0aCAtIGRlcHRoLCAkdG8uZGVwdGggLSBkZXB0aCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlcGxhY2UgdGhlIHBhcnQgb2YgdGhlIGRvY3VtZW50IGJldHdlZW4gdGhlIGdpdmVuIHBvc2l0aW9ucyB3aXRoXG4gICAgdGhlIGdpdmVuIHNsaWNlLiBUaGUgc2xpY2UgbXVzdCAnZml0JywgbWVhbmluZyBpdHMgb3BlbiBzaWRlc1xuICAgIG11c3QgYmUgYWJsZSB0byBjb25uZWN0IHRvIHRoZSBzdXJyb3VuZGluZyBjb250ZW50LCBhbmQgaXRzXG4gICAgY29udGVudCBub2RlcyBtdXN0IGJlIHZhbGlkIGNoaWxkcmVuIGZvciB0aGUgbm9kZSB0aGV5IGFyZSBwbGFjZWRcbiAgICBpbnRvLiBJZiBhbnkgb2YgdGhpcyBpcyB2aW9sYXRlZCwgYW4gZXJyb3Igb2YgdHlwZVxuICAgIFtgUmVwbGFjZUVycm9yYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLlJlcGxhY2VFcnJvcikgaXMgdGhyb3duLlxuICAgICovXG4gICAgcmVwbGFjZShmcm9tLCB0bywgc2xpY2UpIHtcbiAgICAgICAgcmV0dXJuIHJlcGxhY2UodGhpcy5yZXNvbHZlKGZyb20pLCB0aGlzLnJlc29sdmUodG8pLCBzbGljZSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIG5vZGUgZGlyZWN0bHkgYWZ0ZXIgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICAgICovXG4gICAgbm9kZUF0KHBvcykge1xuICAgICAgICBmb3IgKGxldCBub2RlID0gdGhpczs7KSB7XG4gICAgICAgICAgICBsZXQgeyBpbmRleCwgb2Zmc2V0IH0gPSBub2RlLmNvbnRlbnQuZmluZEluZGV4KHBvcyk7XG4gICAgICAgICAgICBub2RlID0gbm9kZS5tYXliZUNoaWxkKGluZGV4KTtcbiAgICAgICAgICAgIGlmICghbm9kZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGlmIChvZmZzZXQgPT0gcG9zIHx8IG5vZGUuaXNUZXh0KVxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgcG9zIC09IG9mZnNldCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgKGRpcmVjdCkgY2hpbGQgbm9kZSBhZnRlciB0aGUgZ2l2ZW4gb2Zmc2V0LCBpZiBhbnksXG4gICAgYW5kIHJldHVybiBpdCBhbG9uZyB3aXRoIGl0cyBpbmRleCBhbmQgb2Zmc2V0IHJlbGF0aXZlIHRvIHRoaXNcbiAgICBub2RlLlxuICAgICovXG4gICAgY2hpbGRBZnRlcihwb3MpIHtcbiAgICAgICAgbGV0IHsgaW5kZXgsIG9mZnNldCB9ID0gdGhpcy5jb250ZW50LmZpbmRJbmRleChwb3MpO1xuICAgICAgICByZXR1cm4geyBub2RlOiB0aGlzLmNvbnRlbnQubWF5YmVDaGlsZChpbmRleCksIGluZGV4LCBvZmZzZXQgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgKGRpcmVjdCkgY2hpbGQgbm9kZSBiZWZvcmUgdGhlIGdpdmVuIG9mZnNldCwgaWYgYW55LFxuICAgIGFuZCByZXR1cm4gaXQgYWxvbmcgd2l0aCBpdHMgaW5kZXggYW5kIG9mZnNldCByZWxhdGl2ZSB0byB0aGlzXG4gICAgbm9kZS5cbiAgICAqL1xuICAgIGNoaWxkQmVmb3JlKHBvcykge1xuICAgICAgICBpZiAocG9zID09IDApXG4gICAgICAgICAgICByZXR1cm4geyBub2RlOiBudWxsLCBpbmRleDogMCwgb2Zmc2V0OiAwIH07XG4gICAgICAgIGxldCB7IGluZGV4LCBvZmZzZXQgfSA9IHRoaXMuY29udGVudC5maW5kSW5kZXgocG9zKTtcbiAgICAgICAgaWYgKG9mZnNldCA8IHBvcylcbiAgICAgICAgICAgIHJldHVybiB7IG5vZGU6IHRoaXMuY29udGVudC5jaGlsZChpbmRleCksIGluZGV4LCBvZmZzZXQgfTtcbiAgICAgICAgbGV0IG5vZGUgPSB0aGlzLmNvbnRlbnQuY2hpbGQoaW5kZXggLSAxKTtcbiAgICAgICAgcmV0dXJuIHsgbm9kZSwgaW5kZXg6IGluZGV4IC0gMSwgb2Zmc2V0OiBvZmZzZXQgLSBub2RlLm5vZGVTaXplIH07XG4gICAgfVxuICAgIC8qKlxuICAgIFJlc29sdmUgdGhlIGdpdmVuIHBvc2l0aW9uIGluIHRoZSBkb2N1bWVudCwgcmV0dXJuaW5nIGFuXG4gICAgW29iamVjdF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLlJlc29sdmVkUG9zKSB3aXRoIGluZm9ybWF0aW9uIGFib3V0IGl0cyBjb250ZXh0LlxuICAgICovXG4gICAgcmVzb2x2ZShwb3MpIHsgcmV0dXJuIFJlc29sdmVkUG9zLnJlc29sdmVDYWNoZWQodGhpcywgcG9zKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVzb2x2ZU5vQ2FjaGUocG9zKSB7IHJldHVybiBSZXNvbHZlZFBvcy5yZXNvbHZlKHRoaXMsIHBvcyk7IH1cbiAgICAvKipcbiAgICBUZXN0IHdoZXRoZXIgYSBnaXZlbiBtYXJrIG9yIG1hcmsgdHlwZSBvY2N1cnMgaW4gdGhpcyBkb2N1bWVudFxuICAgIGJldHdlZW4gdGhlIHR3byBnaXZlbiBwb3NpdGlvbnMuXG4gICAgKi9cbiAgICByYW5nZUhhc01hcmsoZnJvbSwgdG8sIHR5cGUpIHtcbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgICAgIGlmICh0byA+IGZyb20pXG4gICAgICAgICAgICB0aGlzLm5vZGVzQmV0d2Vlbihmcm9tLCB0bywgbm9kZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGUuaXNJblNldChub2RlLm1hcmtzKSlcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZm91bmQ7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyBpcyBhIGJsb2NrIChub24taW5saW5lIG5vZGUpXG4gICAgKi9cbiAgICBnZXQgaXNCbG9jaygpIHsgcmV0dXJuIHRoaXMudHlwZS5pc0Jsb2NrOyB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgaXMgYSB0ZXh0YmxvY2sgbm9kZSwgYSBibG9jayBub2RlIHdpdGggaW5saW5lXG4gICAgY29udGVudC5cbiAgICAqL1xuICAgIGdldCBpc1RleHRibG9jaygpIHsgcmV0dXJuIHRoaXMudHlwZS5pc1RleHRibG9jazsgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIG5vZGUgYWxsb3dzIGlubGluZSBjb250ZW50LlxuICAgICovXG4gICAgZ2V0IGlubGluZUNvbnRlbnQoKSB7IHJldHVybiB0aGlzLnR5cGUuaW5saW5lQ29udGVudDsgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIGlzIGFuIGlubGluZSBub2RlIChhIHRleHQgbm9kZSBvciBhIG5vZGUgdGhhdCBjYW5cbiAgICBhcHBlYXIgYW1vbmcgdGV4dCkuXG4gICAgKi9cbiAgICBnZXQgaXNJbmxpbmUoKSB7IHJldHVybiB0aGlzLnR5cGUuaXNJbmxpbmU7IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyBpcyBhIHRleHQgbm9kZS5cbiAgICAqL1xuICAgIGdldCBpc1RleHQoKSB7IHJldHVybiB0aGlzLnR5cGUuaXNUZXh0OyB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgaXMgYSBsZWFmIG5vZGUuXG4gICAgKi9cbiAgICBnZXQgaXNMZWFmKCkgeyByZXR1cm4gdGhpcy50eXBlLmlzTGVhZjsgfVxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIGlzIGFuIGF0b20sIGkuZS4gd2hlbiBpdCBkb2VzIG5vdCBoYXZlIGRpcmVjdGx5XG4gICAgZWRpdGFibGUgY29udGVudC4gVGhpcyBpcyB1c3VhbGx5IHRoZSBzYW1lIGFzIGBpc0xlYWZgLCBidXQgY2FuXG4gICAgYmUgY29uZmlndXJlZCB3aXRoIHRoZSBbYGF0b21gIHByb3BlcnR5XShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMuYXRvbSlcbiAgICBvbiBhIG5vZGUncyBzcGVjICh0eXBpY2FsbHkgdXNlZCB3aGVuIHRoZSBub2RlIGlzIGRpc3BsYXllZCBhc1xuICAgIGFuIHVuZWRpdGFibGUgW25vZGUgdmlld10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3ZpZXcuTm9kZVZpZXcpKS5cbiAgICAqL1xuICAgIGdldCBpc0F0b20oKSB7IHJldHVybiB0aGlzLnR5cGUuaXNBdG9tOyB9XG4gICAgLyoqXG4gICAgUmV0dXJuIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgbm9kZSBmb3IgZGVidWdnaW5nXG4gICAgcHVycG9zZXMuXG4gICAgKi9cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlLnNwZWMudG9EZWJ1Z1N0cmluZyh0aGlzKTtcbiAgICAgICAgbGV0IG5hbWUgPSB0aGlzLnR5cGUubmFtZTtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudC5zaXplKVxuICAgICAgICAgICAgbmFtZSArPSBcIihcIiArIHRoaXMuY29udGVudC50b1N0cmluZ0lubmVyKCkgKyBcIilcIjtcbiAgICAgICAgcmV0dXJuIHdyYXBNYXJrcyh0aGlzLm1hcmtzLCBuYW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBjb250ZW50IG1hdGNoIGluIHRoaXMgbm9kZSBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgKi9cbiAgICBjb250ZW50TWF0Y2hBdChpbmRleCkge1xuICAgICAgICBsZXQgbWF0Y2ggPSB0aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LCAwLCBpbmRleCk7XG4gICAgICAgIGlmICghbWF0Y2gpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYWxsZWQgY29udGVudE1hdGNoQXQgb24gYSBub2RlIHdpdGggaW52YWxpZCBjb250ZW50XCIpO1xuICAgICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3Qgd2hldGhlciByZXBsYWNpbmcgdGhlIHJhbmdlIGJldHdlZW4gYGZyb21gIGFuZCBgdG9gIChieVxuICAgIGNoaWxkIGluZGV4KSB3aXRoIHRoZSBnaXZlbiByZXBsYWNlbWVudCBmcmFnbWVudCAod2hpY2ggZGVmYXVsdHNcbiAgICB0byB0aGUgZW1wdHkgZnJhZ21lbnQpIHdvdWxkIGxlYXZlIHRoZSBub2RlJ3MgY29udGVudCB2YWxpZC4gWW91XG4gICAgY2FuIG9wdGlvbmFsbHkgcGFzcyBgc3RhcnRgIGFuZCBgZW5kYCBpbmRpY2VzIGludG8gdGhlXG4gICAgcmVwbGFjZW1lbnQgZnJhZ21lbnQuXG4gICAgKi9cbiAgICBjYW5SZXBsYWNlKGZyb20sIHRvLCByZXBsYWNlbWVudCA9IEZyYWdtZW50LmVtcHR5LCBzdGFydCA9IDAsIGVuZCA9IHJlcGxhY2VtZW50LmNoaWxkQ291bnQpIHtcbiAgICAgICAgbGV0IG9uZSA9IHRoaXMuY29udGVudE1hdGNoQXQoZnJvbSkubWF0Y2hGcmFnbWVudChyZXBsYWNlbWVudCwgc3RhcnQsIGVuZCk7XG4gICAgICAgIGxldCB0d28gPSBvbmUgJiYgb25lLm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LCB0byk7XG4gICAgICAgIGlmICghdHdvIHx8ICF0d28udmFsaWRFbmQpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKVxuICAgICAgICAgICAgaWYgKCF0aGlzLnR5cGUuYWxsb3dzTWFya3MocmVwbGFjZW1lbnQuY2hpbGQoaSkubWFya3MpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3Qgd2hldGhlciByZXBsYWNpbmcgdGhlIHJhbmdlIGBmcm9tYCB0byBgdG9gIChieSBpbmRleCkgd2l0aFxuICAgIGEgbm9kZSBvZiB0aGUgZ2l2ZW4gdHlwZSB3b3VsZCBsZWF2ZSB0aGUgbm9kZSdzIGNvbnRlbnQgdmFsaWQuXG4gICAgKi9cbiAgICBjYW5SZXBsYWNlV2l0aChmcm9tLCB0bywgdHlwZSwgbWFya3MpIHtcbiAgICAgICAgaWYgKG1hcmtzICYmICF0aGlzLnR5cGUuYWxsb3dzTWFya3MobWFya3MpKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLmNvbnRlbnRNYXRjaEF0KGZyb20pLm1hdGNoVHlwZSh0eXBlKTtcbiAgICAgICAgbGV0IGVuZCA9IHN0YXJ0ICYmIHN0YXJ0Lm1hdGNoRnJhZ21lbnQodGhpcy5jb250ZW50LCB0byk7XG4gICAgICAgIHJldHVybiBlbmQgPyBlbmQudmFsaWRFbmQgOiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIHRoZSBnaXZlbiBub2RlJ3MgY29udGVudCBjb3VsZCBiZSBhcHBlbmRlZCB0byB0aGlzXG4gICAgbm9kZS4gSWYgdGhhdCBub2RlIGlzIGVtcHR5LCB0aGlzIHdpbGwgb25seSByZXR1cm4gdHJ1ZSBpZiB0aGVyZVxuICAgIGlzIGF0IGxlYXN0IG9uZSBub2RlIHR5cGUgdGhhdCBjYW4gYXBwZWFyIGluIGJvdGggbm9kZXMgKHRvIGF2b2lkXG4gICAgbWVyZ2luZyBjb21wbGV0ZWx5IGluY29tcGF0aWJsZSBub2RlcykuXG4gICAgKi9cbiAgICBjYW5BcHBlbmQob3RoZXIpIHtcbiAgICAgICAgaWYgKG90aGVyLmNvbnRlbnQuc2l6ZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhblJlcGxhY2UodGhpcy5jaGlsZENvdW50LCB0aGlzLmNoaWxkQ291bnQsIG90aGVyLmNvbnRlbnQpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50eXBlLmNvbXBhdGlibGVDb250ZW50KG90aGVyLnR5cGUpO1xuICAgIH1cbiAgICAvKipcbiAgICBDaGVjayB3aGV0aGVyIHRoaXMgbm9kZSBhbmQgaXRzIGRlc2NlbmRhbnRzIGNvbmZvcm0gdG8gdGhlXG4gICAgc2NoZW1hLCBhbmQgcmFpc2UgZXJyb3Igd2hlbiB0aGV5IGRvIG5vdC5cbiAgICAqL1xuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAoIXRoaXMudHlwZS52YWxpZENvbnRlbnQodGhpcy5jb250ZW50KSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgJHt0aGlzLnR5cGUubmFtZX06ICR7dGhpcy5jb250ZW50LnRvU3RyaW5nKCkuc2xpY2UoMCwgNTApfWApO1xuICAgICAgICBsZXQgY29weSA9IE1hcmsubm9uZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgY29weSA9IHRoaXMubWFya3NbaV0uYWRkVG9TZXQoY29weSk7XG4gICAgICAgIGlmICghTWFyay5zYW1lU2V0KGNvcHksIHRoaXMubWFya3MpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgY29sbGVjdGlvbiBvZiBtYXJrcyBmb3Igbm9kZSAke3RoaXMudHlwZS5uYW1lfTogJHt0aGlzLm1hcmtzLm1hcChtID0+IG0udHlwZS5uYW1lKX1gKTtcbiAgICAgICAgdGhpcy5jb250ZW50LmZvckVhY2gobm9kZSA9PiBub2RlLmNoZWNrKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm4gYSBKU09OLXNlcmlhbGl6ZWFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBub2RlLlxuICAgICovXG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgb2JqID0geyB0eXBlOiB0aGlzLnR5cGUubmFtZSB9O1xuICAgICAgICBmb3IgKGxldCBfIGluIHRoaXMuYXR0cnMpIHtcbiAgICAgICAgICAgIG9iai5hdHRycyA9IHRoaXMuYXR0cnM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250ZW50LnNpemUpXG4gICAgICAgICAgICBvYmouY29udGVudCA9IHRoaXMuY29udGVudC50b0pTT04oKTtcbiAgICAgICAgaWYgKHRoaXMubWFya3MubGVuZ3RoKVxuICAgICAgICAgICAgb2JqLm1hcmtzID0gdGhpcy5tYXJrcy5tYXAobiA9PiBuLnRvSlNPTigpKTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVzZXJpYWxpemUgYSBub2RlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCBqc29uKSB7XG4gICAgICAgIGlmICghanNvbilcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgTm9kZS5mcm9tSlNPTlwiKTtcbiAgICAgICAgbGV0IG1hcmtzID0gbnVsbDtcbiAgICAgICAgaWYgKGpzb24ubWFya3MpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShqc29uLm1hcmtzKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgbWFyayBkYXRhIGZvciBOb2RlLmZyb21KU09OXCIpO1xuICAgICAgICAgICAgbWFya3MgPSBqc29uLm1hcmtzLm1hcChzY2hlbWEubWFya0Zyb21KU09OKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoanNvbi50eXBlID09IFwidGV4dFwiKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGpzb24udGV4dCAhPSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCB0ZXh0IG5vZGUgaW4gSlNPTlwiKTtcbiAgICAgICAgICAgIHJldHVybiBzY2hlbWEudGV4dChqc29uLnRleHQsIG1hcmtzKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udGVudCA9IEZyYWdtZW50LmZyb21KU09OKHNjaGVtYSwganNvbi5jb250ZW50KTtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5ub2RlVHlwZShqc29uLnR5cGUpLmNyZWF0ZShqc29uLmF0dHJzLCBjb250ZW50LCBtYXJrcyk7XG4gICAgfVxufVxuTm9kZS5wcm90b3R5cGUudGV4dCA9IHVuZGVmaW5lZDtcbmNsYXNzIFRleHROb2RlIGV4dGVuZHMgTm9kZSB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBhdHRycywgY29udGVudCwgbWFya3MpIHtcbiAgICAgICAgc3VwZXIodHlwZSwgYXR0cnMsIG51bGwsIG1hcmtzKTtcbiAgICAgICAgaWYgKCFjb250ZW50KVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3QgYWxsb3dlZFwiKTtcbiAgICAgICAgdGhpcy50ZXh0ID0gY29udGVudDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGlmICh0aGlzLnR5cGUuc3BlYy50b0RlYnVnU3RyaW5nKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudHlwZS5zcGVjLnRvRGVidWdTdHJpbmcodGhpcyk7XG4gICAgICAgIHJldHVybiB3cmFwTWFya3ModGhpcy5tYXJrcywgSlNPTi5zdHJpbmdpZnkodGhpcy50ZXh0KSk7XG4gICAgfVxuICAgIGdldCB0ZXh0Q29udGVudCgpIHsgcmV0dXJuIHRoaXMudGV4dDsgfVxuICAgIHRleHRCZXR3ZWVuKGZyb20sIHRvKSB7IHJldHVybiB0aGlzLnRleHQuc2xpY2UoZnJvbSwgdG8pOyB9XG4gICAgZ2V0IG5vZGVTaXplKCkgeyByZXR1cm4gdGhpcy50ZXh0Lmxlbmd0aDsgfVxuICAgIG1hcmsobWFya3MpIHtcbiAgICAgICAgcmV0dXJuIG1hcmtzID09IHRoaXMubWFya3MgPyB0aGlzIDogbmV3IFRleHROb2RlKHRoaXMudHlwZSwgdGhpcy5hdHRycywgdGhpcy50ZXh0LCBtYXJrcyk7XG4gICAgfVxuICAgIHdpdGhUZXh0KHRleHQpIHtcbiAgICAgICAgaWYgKHRleHQgPT0gdGhpcy50ZXh0KVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgVGV4dE5vZGUodGhpcy50eXBlLCB0aGlzLmF0dHJzLCB0ZXh0LCB0aGlzLm1hcmtzKTtcbiAgICB9XG4gICAgY3V0KGZyb20gPSAwLCB0byA9IHRoaXMudGV4dC5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGZyb20gPT0gMCAmJiB0byA9PSB0aGlzLnRleHQubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhUZXh0KHRoaXMudGV4dC5zbGljZShmcm9tLCB0bykpO1xuICAgIH1cbiAgICBlcShvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zYW1lTWFya3VwKG90aGVyKSAmJiB0aGlzLnRleHQgPT0gb3RoZXIudGV4dDtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBsZXQgYmFzZSA9IHN1cGVyLnRvSlNPTigpO1xuICAgICAgICBiYXNlLnRleHQgPSB0aGlzLnRleHQ7XG4gICAgICAgIHJldHVybiBiYXNlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIHdyYXBNYXJrcyhtYXJrcywgc3RyKSB7XG4gICAgZm9yIChsZXQgaSA9IG1hcmtzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICBzdHIgPSBtYXJrc1tpXS50eXBlLm5hbWUgKyBcIihcIiArIHN0ciArIFwiKVwiO1xuICAgIHJldHVybiBzdHI7XG59XG5cbi8qKlxuSW5zdGFuY2VzIG9mIHRoaXMgY2xhc3MgcmVwcmVzZW50IGEgbWF0Y2ggc3RhdGUgb2YgYSBub2RlIHR5cGUnc1xuW2NvbnRlbnQgZXhwcmVzc2lvbl0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLmNvbnRlbnQpLCBhbmQgY2FuIGJlIHVzZWQgdG9cbmZpbmQgb3V0IHdoZXRoZXIgZnVydGhlciBjb250ZW50IG1hdGNoZXMgaGVyZSwgYW5kIHdoZXRoZXIgYSBnaXZlblxucG9zaXRpb24gaXMgYSB2YWxpZCBlbmQgb2YgdGhlIG5vZGUuXG4qL1xuY2xhc3MgQ29udGVudE1hdGNoIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRydWUgd2hlbiB0aGlzIG1hdGNoIHN0YXRlIHJlcHJlc2VudHMgYSB2YWxpZCBlbmQgb2YgdGhlIG5vZGUuXG4gICAgKi9cbiAgICB2YWxpZEVuZCkge1xuICAgICAgICB0aGlzLnZhbGlkRW5kID0gdmFsaWRFbmQ7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uZXh0ID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cmFwQ2FjaGUgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgcGFyc2Uoc3RyaW5nLCBub2RlVHlwZXMpIHtcbiAgICAgICAgbGV0IHN0cmVhbSA9IG5ldyBUb2tlblN0cmVhbShzdHJpbmcsIG5vZGVUeXBlcyk7XG4gICAgICAgIGlmIChzdHJlYW0ubmV4dCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIENvbnRlbnRNYXRjaC5lbXB0eTtcbiAgICAgICAgbGV0IGV4cHIgPSBwYXJzZUV4cHIoc3RyZWFtKTtcbiAgICAgICAgaWYgKHN0cmVhbS5uZXh0KVxuICAgICAgICAgICAgc3RyZWFtLmVycihcIlVuZXhwZWN0ZWQgdHJhaWxpbmcgdGV4dFwiKTtcbiAgICAgICAgbGV0IG1hdGNoID0gZGZhKG5mYShleHByKSk7XG4gICAgICAgIGNoZWNrRm9yRGVhZEVuZHMobWF0Y2gsIHN0cmVhbSk7XG4gICAgICAgIHJldHVybiBtYXRjaDtcbiAgICB9XG4gICAgLyoqXG4gICAgTWF0Y2ggYSBub2RlIHR5cGUsIHJldHVybmluZyBhIG1hdGNoIGFmdGVyIHRoYXQgbm9kZSBpZlxuICAgIHN1Y2Nlc3NmdWwuXG4gICAgKi9cbiAgICBtYXRjaFR5cGUodHlwZSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmV4dC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRbaV0udHlwZSA9PSB0eXBlKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm5leHRbaV0ubmV4dDtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIFRyeSB0byBtYXRjaCBhIGZyYWdtZW50LiBSZXR1cm5zIHRoZSByZXN1bHRpbmcgbWF0Y2ggd2hlblxuICAgIHN1Y2Nlc3NmdWwuXG4gICAgKi9cbiAgICBtYXRjaEZyYWdtZW50KGZyYWcsIHN0YXJ0ID0gMCwgZW5kID0gZnJhZy5jaGlsZENvdW50KSB7XG4gICAgICAgIGxldCBjdXIgPSB0aGlzO1xuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGN1ciAmJiBpIDwgZW5kOyBpKyspXG4gICAgICAgICAgICBjdXIgPSBjdXIubWF0Y2hUeXBlKGZyYWcuY2hpbGQoaSkudHlwZSk7XG4gICAgICAgIHJldHVybiBjdXI7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgZ2V0IGlubGluZUNvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHQubGVuZ3RoICYmIHRoaXMubmV4dFswXS50eXBlLmlzSW5saW5lO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGZpcnN0IG1hdGNoaW5nIG5vZGUgdHlwZSBhdCB0aGlzIG1hdGNoIHBvc2l0aW9uIHRoYXQgY2FuXG4gICAgYmUgZ2VuZXJhdGVkLlxuICAgICovXG4gICAgZ2V0IGRlZmF1bHRUeXBlKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHsgdHlwZSB9ID0gdGhpcy5uZXh0W2ldO1xuICAgICAgICAgICAgaWYgKCEodHlwZS5pc1RleHQgfHwgdHlwZS5oYXNSZXF1aXJlZEF0dHJzKCkpKVxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbXBhdGlibGUob3RoZXIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5leHQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG90aGVyLm5leHQubGVuZ3RoOyBqKyspXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubmV4dFtpXS50eXBlID09IG90aGVyLm5leHRbal0udHlwZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ5IHRvIG1hdGNoIHRoZSBnaXZlbiBmcmFnbWVudCwgYW5kIGlmIHRoYXQgZmFpbHMsIHNlZSBpZiBpdCBjYW5cbiAgICBiZSBtYWRlIHRvIG1hdGNoIGJ5IGluc2VydGluZyBub2RlcyBpbiBmcm9udCBvZiBpdC4gV2hlblxuICAgIHN1Y2Nlc3NmdWwsIHJldHVybiBhIGZyYWdtZW50IG9mIGluc2VydGVkIG5vZGVzICh3aGljaCBtYXkgYmVcbiAgICBlbXB0eSBpZiBub3RoaW5nIGhhZCB0byBiZSBpbnNlcnRlZCkuIFdoZW4gYHRvRW5kYCBpcyB0cnVlLCBvbmx5XG4gICAgcmV0dXJuIGEgZnJhZ21lbnQgaWYgdGhlIHJlc3VsdGluZyBtYXRjaCBnb2VzIHRvIHRoZSBlbmQgb2YgdGhlXG4gICAgY29udGVudCBleHByZXNzaW9uLlxuICAgICovXG4gICAgZmlsbEJlZm9yZShhZnRlciwgdG9FbmQgPSBmYWxzZSwgc3RhcnRJbmRleCA9IDApIHtcbiAgICAgICAgbGV0IHNlZW4gPSBbdGhpc107XG4gICAgICAgIGZ1bmN0aW9uIHNlYXJjaChtYXRjaCwgdHlwZXMpIHtcbiAgICAgICAgICAgIGxldCBmaW5pc2hlZCA9IG1hdGNoLm1hdGNoRnJhZ21lbnQoYWZ0ZXIsIHN0YXJ0SW5kZXgpO1xuICAgICAgICAgICAgaWYgKGZpbmlzaGVkICYmICghdG9FbmQgfHwgZmluaXNoZWQudmFsaWRFbmQpKVxuICAgICAgICAgICAgICAgIHJldHVybiBGcmFnbWVudC5mcm9tKHR5cGVzLm1hcCh0cCA9PiB0cC5jcmVhdGVBbmRGaWxsKCkpKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2gubmV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCB7IHR5cGUsIG5leHQgfSA9IG1hdGNoLm5leHRbaV07XG4gICAgICAgICAgICAgICAgaWYgKCEodHlwZS5pc1RleHQgfHwgdHlwZS5oYXNSZXF1aXJlZEF0dHJzKCkpICYmIHNlZW4uaW5kZXhPZihuZXh0KSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBzZWVuLnB1c2gobmV4dCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBmb3VuZCA9IHNlYXJjaChuZXh0LCB0eXBlcy5jb25jYXQodHlwZSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNlYXJjaCh0aGlzLCBbXSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgYSBzZXQgb2Ygd3JhcHBpbmcgbm9kZSB0eXBlcyB0aGF0IHdvdWxkIGFsbG93IGEgbm9kZSBvZiB0aGVcbiAgICBnaXZlbiB0eXBlIHRvIGFwcGVhciBhdCB0aGlzIHBvc2l0aW9uLiBUaGUgcmVzdWx0IG1heSBiZSBlbXB0eVxuICAgICh3aGVuIGl0IGZpdHMgZGlyZWN0bHkpIGFuZCB3aWxsIGJlIG51bGwgd2hlbiBubyBzdWNoIHdyYXBwaW5nXG4gICAgZXhpc3RzLlxuICAgICovXG4gICAgZmluZFdyYXBwaW5nKHRhcmdldCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMud3JhcENhY2hlLmxlbmd0aDsgaSArPSAyKVxuICAgICAgICAgICAgaWYgKHRoaXMud3JhcENhY2hlW2ldID09IHRhcmdldClcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy53cmFwQ2FjaGVbaSArIDFdO1xuICAgICAgICBsZXQgY29tcHV0ZWQgPSB0aGlzLmNvbXB1dGVXcmFwcGluZyh0YXJnZXQpO1xuICAgICAgICB0aGlzLndyYXBDYWNoZS5wdXNoKHRhcmdldCwgY29tcHV0ZWQpO1xuICAgICAgICByZXR1cm4gY29tcHV0ZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29tcHV0ZVdyYXBwaW5nKHRhcmdldCkge1xuICAgICAgICBsZXQgc2VlbiA9IE9iamVjdC5jcmVhdGUobnVsbCksIGFjdGl2ZSA9IFt7IG1hdGNoOiB0aGlzLCB0eXBlOiBudWxsLCB2aWE6IG51bGwgfV07XG4gICAgICAgIHdoaWxlIChhY3RpdmUubGVuZ3RoKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudCA9IGFjdGl2ZS5zaGlmdCgpLCBtYXRjaCA9IGN1cnJlbnQubWF0Y2g7XG4gICAgICAgICAgICBpZiAobWF0Y2gubWF0Y2hUeXBlKHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgb2JqID0gY3VycmVudDsgb2JqLnR5cGU7IG9iaiA9IG9iai52aWEpXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG9iai50eXBlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0LnJldmVyc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWF0Y2gubmV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCB7IHR5cGUsIG5leHQgfSA9IG1hdGNoLm5leHRbaV07XG4gICAgICAgICAgICAgICAgaWYgKCF0eXBlLmlzTGVhZiAmJiAhdHlwZS5oYXNSZXF1aXJlZEF0dHJzKCkgJiYgISh0eXBlLm5hbWUgaW4gc2VlbikgJiYgKCFjdXJyZW50LnR5cGUgfHwgbmV4dC52YWxpZEVuZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlLnB1c2goeyBtYXRjaDogdHlwZS5jb250ZW50TWF0Y2gsIHR5cGUsIHZpYTogY3VycmVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgc2Vlblt0eXBlLm5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBudW1iZXIgb2Ygb3V0Z29pbmcgZWRnZXMgdGhpcyBub2RlIGhhcyBpbiB0aGUgZmluaXRlXG4gICAgYXV0b21hdG9uIHRoYXQgZGVzY3JpYmVzIHRoZSBjb250ZW50IGV4cHJlc3Npb24uXG4gICAgKi9cbiAgICBnZXQgZWRnZUNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0Lmxlbmd0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBfbl/igIt0aCBvdXRnb2luZyBlZGdlIGZyb20gdGhpcyBub2RlIGluIHRoZSBmaW5pdGVcbiAgICBhdXRvbWF0b24gdGhhdCBkZXNjcmliZXMgdGhlIGNvbnRlbnQgZXhwcmVzc2lvbi5cbiAgICAqL1xuICAgIGVkZ2Uobikge1xuICAgICAgICBpZiAobiA+PSB0aGlzLm5leHQubGVuZ3RoKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYFRoZXJlJ3Mgbm8gJHtufXRoIGVkZ2UgaW4gdGhpcyBjb250ZW50IG1hdGNoYCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5leHRbbl07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGxldCBzZWVuID0gW107XG4gICAgICAgIGZ1bmN0aW9uIHNjYW4obSkge1xuICAgICAgICAgICAgc2Vlbi5wdXNoKG0pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtLm5leHQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgaWYgKHNlZW4uaW5kZXhPZihtLm5leHRbaV0ubmV4dCkgPT0gLTEpXG4gICAgICAgICAgICAgICAgICAgIHNjYW4obS5uZXh0W2ldLm5leHQpO1xuICAgICAgICB9XG4gICAgICAgIHNjYW4odGhpcyk7XG4gICAgICAgIHJldHVybiBzZWVuLm1hcCgobSwgaSkgPT4ge1xuICAgICAgICAgICAgbGV0IG91dCA9IGkgKyAobS52YWxpZEVuZCA/IFwiKlwiIDogXCIgXCIpICsgXCIgXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG0ubmV4dC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBvdXQgKz0gKGkgPyBcIiwgXCIgOiBcIlwiKSArIG0ubmV4dFtpXS50eXBlLm5hbWUgKyBcIi0+XCIgKyBzZWVuLmluZGV4T2YobS5uZXh0W2ldLm5leHQpO1xuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfSkuam9pbihcIlxcblwiKTtcbiAgICB9XG59XG4vKipcbkBpbnRlcm5hbFxuKi9cbkNvbnRlbnRNYXRjaC5lbXB0eSA9IG5ldyBDb250ZW50TWF0Y2godHJ1ZSk7XG5jbGFzcyBUb2tlblN0cmVhbSB7XG4gICAgY29uc3RydWN0b3Ioc3RyaW5nLCBub2RlVHlwZXMpIHtcbiAgICAgICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG4gICAgICAgIHRoaXMubm9kZVR5cGVzID0gbm9kZVR5cGVzO1xuICAgICAgICB0aGlzLmlubGluZSA9IG51bGw7XG4gICAgICAgIHRoaXMucG9zID0gMDtcbiAgICAgICAgdGhpcy50b2tlbnMgPSBzdHJpbmcuc3BsaXQoL1xccyooPz1cXGJ8XFxXfCQpLyk7XG4gICAgICAgIGlmICh0aGlzLnRva2Vuc1t0aGlzLnRva2Vucy5sZW5ndGggLSAxXSA9PSBcIlwiKVxuICAgICAgICAgICAgdGhpcy50b2tlbnMucG9wKCk7XG4gICAgICAgIGlmICh0aGlzLnRva2Vuc1swXSA9PSBcIlwiKVxuICAgICAgICAgICAgdGhpcy50b2tlbnMuc2hpZnQoKTtcbiAgICB9XG4gICAgZ2V0IG5leHQoKSB7IHJldHVybiB0aGlzLnRva2Vuc1t0aGlzLnBvc107IH1cbiAgICBlYXQodG9rKSB7IHJldHVybiB0aGlzLm5leHQgPT0gdG9rICYmICh0aGlzLnBvcysrIHx8IHRydWUpOyB9XG4gICAgZXJyKHN0cikgeyB0aHJvdyBuZXcgU3ludGF4RXJyb3Ioc3RyICsgXCIgKGluIGNvbnRlbnQgZXhwcmVzc2lvbiAnXCIgKyB0aGlzLnN0cmluZyArIFwiJylcIik7IH1cbn1cbmZ1bmN0aW9uIHBhcnNlRXhwcihzdHJlYW0pIHtcbiAgICBsZXQgZXhwcnMgPSBbXTtcbiAgICBkbyB7XG4gICAgICAgIGV4cHJzLnB1c2gocGFyc2VFeHByU2VxKHN0cmVhbSkpO1xuICAgIH0gd2hpbGUgKHN0cmVhbS5lYXQoXCJ8XCIpKTtcbiAgICByZXR1cm4gZXhwcnMubGVuZ3RoID09IDEgPyBleHByc1swXSA6IHsgdHlwZTogXCJjaG9pY2VcIiwgZXhwcnMgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlRXhwclNlcShzdHJlYW0pIHtcbiAgICBsZXQgZXhwcnMgPSBbXTtcbiAgICBkbyB7XG4gICAgICAgIGV4cHJzLnB1c2gocGFyc2VFeHByU3Vic2NyaXB0KHN0cmVhbSkpO1xuICAgIH0gd2hpbGUgKHN0cmVhbS5uZXh0ICYmIHN0cmVhbS5uZXh0ICE9IFwiKVwiICYmIHN0cmVhbS5uZXh0ICE9IFwifFwiKTtcbiAgICByZXR1cm4gZXhwcnMubGVuZ3RoID09IDEgPyBleHByc1swXSA6IHsgdHlwZTogXCJzZXFcIiwgZXhwcnMgfTtcbn1cbmZ1bmN0aW9uIHBhcnNlRXhwclN1YnNjcmlwdChzdHJlYW0pIHtcbiAgICBsZXQgZXhwciA9IHBhcnNlRXhwckF0b20oc3RyZWFtKTtcbiAgICBmb3IgKDs7KSB7XG4gICAgICAgIGlmIChzdHJlYW0uZWF0KFwiK1wiKSlcbiAgICAgICAgICAgIGV4cHIgPSB7IHR5cGU6IFwicGx1c1wiLCBleHByIH07XG4gICAgICAgIGVsc2UgaWYgKHN0cmVhbS5lYXQoXCIqXCIpKVxuICAgICAgICAgICAgZXhwciA9IHsgdHlwZTogXCJzdGFyXCIsIGV4cHIgfTtcbiAgICAgICAgZWxzZSBpZiAoc3RyZWFtLmVhdChcIj9cIikpXG4gICAgICAgICAgICBleHByID0geyB0eXBlOiBcIm9wdFwiLCBleHByIH07XG4gICAgICAgIGVsc2UgaWYgKHN0cmVhbS5lYXQoXCJ7XCIpKVxuICAgICAgICAgICAgZXhwciA9IHBhcnNlRXhwclJhbmdlKHN0cmVhbSwgZXhwcik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gZXhwcjtcbn1cbmZ1bmN0aW9uIHBhcnNlTnVtKHN0cmVhbSkge1xuICAgIGlmICgvXFxELy50ZXN0KHN0cmVhbS5uZXh0KSlcbiAgICAgICAgc3RyZWFtLmVycihcIkV4cGVjdGVkIG51bWJlciwgZ290ICdcIiArIHN0cmVhbS5uZXh0ICsgXCInXCIpO1xuICAgIGxldCByZXN1bHQgPSBOdW1iZXIoc3RyZWFtLm5leHQpO1xuICAgIHN0cmVhbS5wb3MrKztcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcGFyc2VFeHByUmFuZ2Uoc3RyZWFtLCBleHByKSB7XG4gICAgbGV0IG1pbiA9IHBhcnNlTnVtKHN0cmVhbSksIG1heCA9IG1pbjtcbiAgICBpZiAoc3RyZWFtLmVhdChcIixcIikpIHtcbiAgICAgICAgaWYgKHN0cmVhbS5uZXh0ICE9IFwifVwiKVxuICAgICAgICAgICAgbWF4ID0gcGFyc2VOdW0oc3RyZWFtKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbWF4ID0gLTE7XG4gICAgfVxuICAgIGlmICghc3RyZWFtLmVhdChcIn1cIikpXG4gICAgICAgIHN0cmVhbS5lcnIoXCJVbmNsb3NlZCBicmFjZWQgcmFuZ2VcIik7XG4gICAgcmV0dXJuIHsgdHlwZTogXCJyYW5nZVwiLCBtaW4sIG1heCwgZXhwciB9O1xufVxuZnVuY3Rpb24gcmVzb2x2ZU5hbWUoc3RyZWFtLCBuYW1lKSB7XG4gICAgbGV0IHR5cGVzID0gc3RyZWFtLm5vZGVUeXBlcywgdHlwZSA9IHR5cGVzW25hbWVdO1xuICAgIGlmICh0eXBlKVxuICAgICAgICByZXR1cm4gW3R5cGVdO1xuICAgIGxldCByZXN1bHQgPSBbXTtcbiAgICBmb3IgKGxldCB0eXBlTmFtZSBpbiB0eXBlcykge1xuICAgICAgICBsZXQgdHlwZSA9IHR5cGVzW3R5cGVOYW1lXTtcbiAgICAgICAgaWYgKHR5cGUuZ3JvdXBzLmluZGV4T2YobmFtZSkgPiAtMSlcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHR5cGUpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PSAwKVxuICAgICAgICBzdHJlYW0uZXJyKFwiTm8gbm9kZSB0eXBlIG9yIGdyb3VwICdcIiArIG5hbWUgKyBcIicgZm91bmRcIik7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHBhcnNlRXhwckF0b20oc3RyZWFtKSB7XG4gICAgaWYgKHN0cmVhbS5lYXQoXCIoXCIpKSB7XG4gICAgICAgIGxldCBleHByID0gcGFyc2VFeHByKHN0cmVhbSk7XG4gICAgICAgIGlmICghc3RyZWFtLmVhdChcIilcIikpXG4gICAgICAgICAgICBzdHJlYW0uZXJyKFwiTWlzc2luZyBjbG9zaW5nIHBhcmVuXCIpO1xuICAgICAgICByZXR1cm4gZXhwcjtcbiAgICB9XG4gICAgZWxzZSBpZiAoIS9cXFcvLnRlc3Qoc3RyZWFtLm5leHQpKSB7XG4gICAgICAgIGxldCBleHBycyA9IHJlc29sdmVOYW1lKHN0cmVhbSwgc3RyZWFtLm5leHQpLm1hcCh0eXBlID0+IHtcbiAgICAgICAgICAgIGlmIChzdHJlYW0uaW5saW5lID09IG51bGwpXG4gICAgICAgICAgICAgICAgc3RyZWFtLmlubGluZSA9IHR5cGUuaXNJbmxpbmU7XG4gICAgICAgICAgICBlbHNlIGlmIChzdHJlYW0uaW5saW5lICE9IHR5cGUuaXNJbmxpbmUpXG4gICAgICAgICAgICAgICAgc3RyZWFtLmVycihcIk1peGluZyBpbmxpbmUgYW5kIGJsb2NrIGNvbnRlbnRcIik7XG4gICAgICAgICAgICByZXR1cm4geyB0eXBlOiBcIm5hbWVcIiwgdmFsdWU6IHR5cGUgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIHN0cmVhbS5wb3MrKztcbiAgICAgICAgcmV0dXJuIGV4cHJzLmxlbmd0aCA9PSAxID8gZXhwcnNbMF0gOiB7IHR5cGU6IFwiY2hvaWNlXCIsIGV4cHJzIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBzdHJlYW0uZXJyKFwiVW5leHBlY3RlZCB0b2tlbiAnXCIgKyBzdHJlYW0ubmV4dCArIFwiJ1wiKTtcbiAgICB9XG59XG4vKipcbkNvbnN0cnVjdCBhbiBORkEgZnJvbSBhbiBleHByZXNzaW9uIGFzIHJldHVybmVkIGJ5IHRoZSBwYXJzZXIuIFRoZVxuTkZBIGlzIHJlcHJlc2VudGVkIGFzIGFuIGFycmF5IG9mIHN0YXRlcywgd2hpY2ggYXJlIHRoZW1zZWx2ZXNcbmFycmF5cyBvZiBlZGdlcywgd2hpY2ggYXJlIGB7dGVybSwgdG99YCBvYmplY3RzLiBUaGUgZmlyc3Qgc3RhdGUgaXNcbnRoZSBlbnRyeSBzdGF0ZSBhbmQgdGhlIGxhc3Qgbm9kZSBpcyB0aGUgc3VjY2VzcyBzdGF0ZS5cblxuTm90ZSB0aGF0IHVubGlrZSB0eXBpY2FsIE5GQXMsIHRoZSBlZGdlIG9yZGVyaW5nIGluIHRoaXMgb25lIGlzXG5zaWduaWZpY2FudCwgaW4gdGhhdCBpdCBpcyB1c2VkIHRvIGNvbnRydWN0IGZpbGxlciBjb250ZW50IHdoZW5cbm5lY2Vzc2FyeS5cbiovXG5mdW5jdGlvbiBuZmEoZXhwcikge1xuICAgIGxldCBuZmEgPSBbW11dO1xuICAgIGNvbm5lY3QoY29tcGlsZShleHByLCAwKSwgbm9kZSgpKTtcbiAgICByZXR1cm4gbmZhO1xuICAgIGZ1bmN0aW9uIG5vZGUoKSB7IHJldHVybiBuZmEucHVzaChbXSkgLSAxOyB9XG4gICAgZnVuY3Rpb24gZWRnZShmcm9tLCB0bywgdGVybSkge1xuICAgICAgICBsZXQgZWRnZSA9IHsgdGVybSwgdG8gfTtcbiAgICAgICAgbmZhW2Zyb21dLnB1c2goZWRnZSk7XG4gICAgICAgIHJldHVybiBlZGdlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjb25uZWN0KGVkZ2VzLCB0bykge1xuICAgICAgICBlZGdlcy5mb3JFYWNoKGVkZ2UgPT4gZWRnZS50byA9IHRvKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY29tcGlsZShleHByLCBmcm9tKSB7XG4gICAgICAgIGlmIChleHByLnR5cGUgPT0gXCJjaG9pY2VcIikge1xuICAgICAgICAgICAgcmV0dXJuIGV4cHIuZXhwcnMucmVkdWNlKChvdXQsIGV4cHIpID0+IG91dC5jb25jYXQoY29tcGlsZShleHByLCBmcm9tKSksIFtdKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHByLnR5cGUgPT0gXCJzZXFcIikge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7OyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IGNvbXBpbGUoZXhwci5leHByc1tpXSwgZnJvbSk7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT0gZXhwci5leHBycy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgICAgICBjb25uZWN0KG5leHQsIGZyb20gPSBub2RlKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGV4cHIudHlwZSA9PSBcInN0YXJcIikge1xuICAgICAgICAgICAgbGV0IGxvb3AgPSBub2RlKCk7XG4gICAgICAgICAgICBlZGdlKGZyb20sIGxvb3ApO1xuICAgICAgICAgICAgY29ubmVjdChjb21waWxlKGV4cHIuZXhwciwgbG9vcCksIGxvb3ApO1xuICAgICAgICAgICAgcmV0dXJuIFtlZGdlKGxvb3ApXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHByLnR5cGUgPT0gXCJwbHVzXCIpIHtcbiAgICAgICAgICAgIGxldCBsb29wID0gbm9kZSgpO1xuICAgICAgICAgICAgY29ubmVjdChjb21waWxlKGV4cHIuZXhwciwgZnJvbSksIGxvb3ApO1xuICAgICAgICAgICAgY29ubmVjdChjb21waWxlKGV4cHIuZXhwciwgbG9vcCksIGxvb3ApO1xuICAgICAgICAgICAgcmV0dXJuIFtlZGdlKGxvb3ApXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHByLnR5cGUgPT0gXCJvcHRcIikge1xuICAgICAgICAgICAgcmV0dXJuIFtlZGdlKGZyb20pXS5jb25jYXQoY29tcGlsZShleHByLmV4cHIsIGZyb20pKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChleHByLnR5cGUgPT0gXCJyYW5nZVwiKSB7XG4gICAgICAgICAgICBsZXQgY3VyID0gZnJvbTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXhwci5taW47IGkrKykge1xuICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gbm9kZSgpO1xuICAgICAgICAgICAgICAgIGNvbm5lY3QoY29tcGlsZShleHByLmV4cHIsIGN1ciksIG5leHQpO1xuICAgICAgICAgICAgICAgIGN1ciA9IG5leHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZXhwci5tYXggPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBjb25uZWN0KGNvbXBpbGUoZXhwci5leHByLCBjdXIpLCBjdXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGV4cHIubWluOyBpIDwgZXhwci5tYXg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbmV4dCA9IG5vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZWRnZShjdXIsIG5leHQpO1xuICAgICAgICAgICAgICAgICAgICBjb25uZWN0KGNvbXBpbGUoZXhwci5leHByLCBjdXIpLCBuZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgY3VyID0gbmV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW2VkZ2UoY3VyKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoZXhwci50eXBlID09IFwibmFtZVwiKSB7XG4gICAgICAgICAgICByZXR1cm4gW2VkZ2UoZnJvbSwgdW5kZWZpbmVkLCBleHByLnZhbHVlKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGV4cHIgdHlwZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGNtcChhLCBiKSB7IHJldHVybiBiIC0gYTsgfVxuLy8gR2V0IHRoZSBzZXQgb2Ygbm9kZXMgcmVhY2hhYmxlIGJ5IG51bGwgZWRnZXMgZnJvbSBgbm9kZWAuIE9taXRcbi8vIG5vZGVzIHdpdGggb25seSBhIHNpbmdsZSBudWxsLW91dC1lZGdlLCBzaW5jZSB0aGV5IG1heSBsZWFkIHRvXG4vLyBuZWVkbGVzcyBkdXBsaWNhdGVkIG5vZGVzLlxuZnVuY3Rpb24gbnVsbEZyb20obmZhLCBub2RlKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIHNjYW4obm9kZSk7XG4gICAgcmV0dXJuIHJlc3VsdC5zb3J0KGNtcCk7XG4gICAgZnVuY3Rpb24gc2Nhbihub2RlKSB7XG4gICAgICAgIGxldCBlZGdlcyA9IG5mYVtub2RlXTtcbiAgICAgICAgaWYgKGVkZ2VzLmxlbmd0aCA9PSAxICYmICFlZGdlc1swXS50ZXJtKVxuICAgICAgICAgICAgcmV0dXJuIHNjYW4oZWRnZXNbMF0udG8pO1xuICAgICAgICByZXN1bHQucHVzaChub2RlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBlZGdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHsgdGVybSwgdG8gfSA9IGVkZ2VzW2ldO1xuICAgICAgICAgICAgaWYgKCF0ZXJtICYmIHJlc3VsdC5pbmRleE9mKHRvKSA9PSAtMSlcbiAgICAgICAgICAgICAgICBzY2FuKHRvKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIENvbXBpbGVzIGFuIE5GQSBhcyBwcm9kdWNlZCBieSBgbmZhYCBpbnRvIGEgREZBLCBtb2RlbGVkIGFzIGEgc2V0XG4vLyBvZiBzdGF0ZSBvYmplY3RzIChgQ29udGVudE1hdGNoYCBpbnN0YW5jZXMpIHdpdGggdHJhbnNpdGlvbnNcbi8vIGJldHdlZW4gdGhlbS5cbmZ1bmN0aW9uIGRmYShuZmEpIHtcbiAgICBsZXQgbGFiZWxlZCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV0dXJuIGV4cGxvcmUobnVsbEZyb20obmZhLCAwKSk7XG4gICAgZnVuY3Rpb24gZXhwbG9yZShzdGF0ZXMpIHtcbiAgICAgICAgbGV0IG91dCA9IFtdO1xuICAgICAgICBzdGF0ZXMuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgIG5mYVtub2RlXS5mb3JFYWNoKCh7IHRlcm0sIHRvIH0pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRlcm0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICBsZXQgc2V0O1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb3V0Lmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICBpZiAob3V0W2ldWzBdID09IHRlcm0pXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQgPSBvdXRbaV1bMV07XG4gICAgICAgICAgICAgICAgbnVsbEZyb20obmZhLCB0bykuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXQpXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChbdGVybSwgc2V0ID0gW11dKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldC5pbmRleE9mKG5vZGUpID09IC0xKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0LnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBzdGF0ZSA9IGxhYmVsZWRbc3RhdGVzLmpvaW4oXCIsXCIpXSA9IG5ldyBDb250ZW50TWF0Y2goc3RhdGVzLmluZGV4T2YobmZhLmxlbmd0aCAtIDEpID4gLTEpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IHN0YXRlcyA9IG91dFtpXVsxXS5zb3J0KGNtcCk7XG4gICAgICAgICAgICBzdGF0ZS5uZXh0LnB1c2goeyB0eXBlOiBvdXRbaV1bMF0sIG5leHQ6IGxhYmVsZWRbc3RhdGVzLmpvaW4oXCIsXCIpXSB8fCBleHBsb3JlKHN0YXRlcykgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGNoZWNrRm9yRGVhZEVuZHMobWF0Y2gsIHN0cmVhbSkge1xuICAgIGZvciAobGV0IGkgPSAwLCB3b3JrID0gW21hdGNoXTsgaSA8IHdvcmsubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHN0YXRlID0gd29ya1tpXSwgZGVhZCA9ICFzdGF0ZS52YWxpZEVuZCwgbm9kZXMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzdGF0ZS5uZXh0Lmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICBsZXQgeyB0eXBlLCBuZXh0IH0gPSBzdGF0ZS5uZXh0W2pdO1xuICAgICAgICAgICAgbm9kZXMucHVzaCh0eXBlLm5hbWUpO1xuICAgICAgICAgICAgaWYgKGRlYWQgJiYgISh0eXBlLmlzVGV4dCB8fCB0eXBlLmhhc1JlcXVpcmVkQXR0cnMoKSkpXG4gICAgICAgICAgICAgICAgZGVhZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHdvcmsuaW5kZXhPZihuZXh0KSA9PSAtMSlcbiAgICAgICAgICAgICAgICB3b3JrLnB1c2gobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRlYWQpXG4gICAgICAgICAgICBzdHJlYW0uZXJyKFwiT25seSBub24tZ2VuZXJhdGFibGUgbm9kZXMgKFwiICsgbm9kZXMuam9pbihcIiwgXCIpICsgXCIpIGluIGEgcmVxdWlyZWQgcG9zaXRpb24gKHNlZSBodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL2d1aWRlLyNnZW5lcmF0YWJsZSlcIik7XG4gICAgfVxufVxuXG4vLyBGb3Igbm9kZSB0eXBlcyB3aGVyZSBhbGwgYXR0cnMgaGF2ZSBhIGRlZmF1bHQgdmFsdWUgKG9yIHdoaWNoIGRvbid0XG4vLyBoYXZlIGFueSBhdHRyaWJ1dGVzKSwgYnVpbGQgdXAgYSBzaW5nbGUgcmV1c2FibGUgZGVmYXVsdCBhdHRyaWJ1dGVcbi8vIG9iamVjdCwgYW5kIHVzZSBpdCBmb3IgYWxsIG5vZGVzIHRoYXQgZG9uJ3Qgc3BlY2lmeSBzcGVjaWZpY1xuLy8gYXR0cmlidXRlcy5cbmZ1bmN0aW9uIGRlZmF1bHRBdHRycyhhdHRycykge1xuICAgIGxldCBkZWZhdWx0cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZm9yIChsZXQgYXR0ck5hbWUgaW4gYXR0cnMpIHtcbiAgICAgICAgbGV0IGF0dHIgPSBhdHRyc1thdHRyTmFtZV07XG4gICAgICAgIGlmICghYXR0ci5oYXNEZWZhdWx0KVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGRlZmF1bHRzW2F0dHJOYW1lXSA9IGF0dHIuZGVmYXVsdDtcbiAgICB9XG4gICAgcmV0dXJuIGRlZmF1bHRzO1xufVxuZnVuY3Rpb24gY29tcHV0ZUF0dHJzKGF0dHJzLCB2YWx1ZSkge1xuICAgIGxldCBidWlsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgZm9yIChsZXQgbmFtZSBpbiBhdHRycykge1xuICAgICAgICBsZXQgZ2l2ZW4gPSB2YWx1ZSAmJiB2YWx1ZVtuYW1lXTtcbiAgICAgICAgaWYgKGdpdmVuID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxldCBhdHRyID0gYXR0cnNbbmFtZV07XG4gICAgICAgICAgICBpZiAoYXR0ci5oYXNEZWZhdWx0KVxuICAgICAgICAgICAgICAgIGdpdmVuID0gYXR0ci5kZWZhdWx0O1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiTm8gdmFsdWUgc3VwcGxpZWQgZm9yIGF0dHJpYnV0ZSBcIiArIG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGJ1aWx0W25hbWVdID0gZ2l2ZW47XG4gICAgfVxuICAgIHJldHVybiBidWlsdDtcbn1cbmZ1bmN0aW9uIGluaXRBdHRycyhhdHRycykge1xuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGlmIChhdHRycylcbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBhdHRycylcbiAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IG5ldyBBdHRyaWJ1dGUoYXR0cnNbbmFtZV0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKipcbk5vZGUgdHlwZXMgYXJlIG9iamVjdHMgYWxsb2NhdGVkIG9uY2UgcGVyIGBTY2hlbWFgIGFuZCB1c2VkIHRvXG5bdGFnXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZS50eXBlKSBgTm9kZWAgaW5zdGFuY2VzLiBUaGV5IGNvbnRhaW4gaW5mb3JtYXRpb25cbmFib3V0IHRoZSBub2RlIHR5cGUsIHN1Y2ggYXMgaXRzIG5hbWUgYW5kIHdoYXQga2luZCBvZiBub2RlIGl0XG5yZXByZXNlbnRzLlxuKi9cbmNsYXNzIE5vZGVUeXBlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBuYW1lIHRoZSBub2RlIHR5cGUgaGFzIGluIHRoaXMgc2NoZW1hLlxuICAgICovXG4gICAgbmFtZSwgXG4gICAgLyoqXG4gICAgQSBsaW5rIGJhY2sgdG8gdGhlIGBTY2hlbWFgIHRoZSBub2RlIHR5cGUgYmVsb25ncyB0by5cbiAgICAqL1xuICAgIHNjaGVtYSwgXG4gICAgLyoqXG4gICAgVGhlIHNwZWMgdGhhdCB0aGlzIHR5cGUgaXMgYmFzZWQgb25cbiAgICAqL1xuICAgIHNwZWMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgc2V0IG9mIG1hcmtzIGFsbG93ZWQgaW4gdGhpcyBub2RlLiBgbnVsbGAgbWVhbnMgYWxsIG1hcmtzXG4gICAgICAgIGFyZSBhbGxvd2VkLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLm1hcmtTZXQgPSBudWxsO1xuICAgICAgICB0aGlzLmdyb3VwcyA9IHNwZWMuZ3JvdXAgPyBzcGVjLmdyb3VwLnNwbGl0KFwiIFwiKSA6IFtdO1xuICAgICAgICB0aGlzLmF0dHJzID0gaW5pdEF0dHJzKHNwZWMuYXR0cnMpO1xuICAgICAgICB0aGlzLmRlZmF1bHRBdHRycyA9IGRlZmF1bHRBdHRycyh0aGlzLmF0dHJzKTtcbiAgICAgICAgdGhpcy5jb250ZW50TWF0Y2ggPSBudWxsO1xuICAgICAgICB0aGlzLmlubGluZUNvbnRlbnQgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQmxvY2sgPSAhKHNwZWMuaW5saW5lIHx8IG5hbWUgPT0gXCJ0ZXh0XCIpO1xuICAgICAgICB0aGlzLmlzVGV4dCA9IG5hbWUgPT0gXCJ0ZXh0XCI7XG4gICAgfVxuICAgIC8qKlxuICAgIFRydWUgaWYgdGhpcyBpcyBhbiBpbmxpbmUgdHlwZS5cbiAgICAqL1xuICAgIGdldCBpc0lubGluZSgpIHsgcmV0dXJuICF0aGlzLmlzQmxvY2s7IH1cbiAgICAvKipcbiAgICBUcnVlIGlmIHRoaXMgaXMgYSB0ZXh0YmxvY2sgdHlwZSwgYSBibG9jayB0aGF0IGNvbnRhaW5zIGlubGluZVxuICAgIGNvbnRlbnQuXG4gICAgKi9cbiAgICBnZXQgaXNUZXh0YmxvY2soKSB7IHJldHVybiB0aGlzLmlzQmxvY2sgJiYgdGhpcy5pbmxpbmVDb250ZW50OyB9XG4gICAgLyoqXG4gICAgVHJ1ZSBmb3Igbm9kZSB0eXBlcyB0aGF0IGFsbG93IG5vIGNvbnRlbnQuXG4gICAgKi9cbiAgICBnZXQgaXNMZWFmKCkgeyByZXR1cm4gdGhpcy5jb250ZW50TWF0Y2ggPT0gQ29udGVudE1hdGNoLmVtcHR5OyB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoaXMgbm9kZSBpcyBhbiBhdG9tLCBpLmUuIHdoZW4gaXQgZG9lcyBub3QgaGF2ZVxuICAgIGRpcmVjdGx5IGVkaXRhYmxlIGNvbnRlbnQuXG4gICAgKi9cbiAgICBnZXQgaXNBdG9tKCkgeyByZXR1cm4gdGhpcy5pc0xlYWYgfHwgISF0aGlzLnNwZWMuYXRvbTsgfVxuICAgIC8qKlxuICAgIFRoZSBub2RlIHR5cGUncyBbd2hpdGVzcGFjZV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLndoaXRlc3BhY2UpIG9wdGlvbi5cbiAgICAqL1xuICAgIGdldCB3aGl0ZXNwYWNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zcGVjLndoaXRlc3BhY2UgfHwgKHRoaXMuc3BlYy5jb2RlID8gXCJwcmVcIiA6IFwibm9ybWFsXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciB0aGlzIG5vZGUgdHlwZSBoYXMgYW55IHJlcXVpcmVkIGF0dHJpYnV0ZXMuXG4gICAgKi9cbiAgICBoYXNSZXF1aXJlZEF0dHJzKCkge1xuICAgICAgICBmb3IgKGxldCBuIGluIHRoaXMuYXR0cnMpXG4gICAgICAgICAgICBpZiAodGhpcy5hdHRyc1tuXS5pc1JlcXVpcmVkKVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoaXMgbm9kZSBhbGxvd3Mgc29tZSBvZiB0aGUgc2FtZSBjb250ZW50IGFzXG4gICAgdGhlIGdpdmVuIG5vZGUgdHlwZS5cbiAgICAqL1xuICAgIGNvbXBhdGlibGVDb250ZW50KG90aGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzID09IG90aGVyIHx8IHRoaXMuY29udGVudE1hdGNoLmNvbXBhdGlibGUob3RoZXIuY29udGVudE1hdGNoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb21wdXRlQXR0cnMoYXR0cnMpIHtcbiAgICAgICAgaWYgKCFhdHRycyAmJiB0aGlzLmRlZmF1bHRBdHRycylcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHRBdHRycztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVBdHRycyh0aGlzLmF0dHJzLCBhdHRycyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGBOb2RlYCBvZiB0aGlzIHR5cGUuIFRoZSBnaXZlbiBhdHRyaWJ1dGVzIGFyZVxuICAgIGNoZWNrZWQgYW5kIGRlZmF1bHRlZCAoeW91IGNhbiBwYXNzIGBudWxsYCB0byB1c2UgdGhlIHR5cGUnc1xuICAgIGRlZmF1bHRzIGVudGlyZWx5LCBpZiBubyByZXF1aXJlZCBhdHRyaWJ1dGVzIGV4aXN0KS4gYGNvbnRlbnRgXG4gICAgbWF5IGJlIGEgYEZyYWdtZW50YCwgYSBub2RlLCBhbiBhcnJheSBvZiBub2Rlcywgb3JcbiAgICBgbnVsbGAuIFNpbWlsYXJseSBgbWFya3NgIG1heSBiZSBgbnVsbGAgdG8gZGVmYXVsdCB0byB0aGUgZW1wdHlcbiAgICBzZXQgb2YgbWFya3MuXG4gICAgKi9cbiAgICBjcmVhdGUoYXR0cnMgPSBudWxsLCBjb250ZW50LCBtYXJrcykge1xuICAgICAgICBpZiAodGhpcy5pc1RleHQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb2RlVHlwZS5jcmVhdGUgY2FuJ3QgY29uc3RydWN0IHRleHQgbm9kZXNcIik7XG4gICAgICAgIHJldHVybiBuZXcgTm9kZSh0aGlzLCB0aGlzLmNvbXB1dGVBdHRycyhhdHRycyksIEZyYWdtZW50LmZyb20oY29udGVudCksIE1hcmsuc2V0RnJvbShtYXJrcykpO1xuICAgIH1cbiAgICAvKipcbiAgICBMaWtlIFtgY3JlYXRlYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVUeXBlLmNyZWF0ZSksIGJ1dCBjaGVjayB0aGUgZ2l2ZW4gY29udGVudFxuICAgIGFnYWluc3QgdGhlIG5vZGUgdHlwZSdzIGNvbnRlbnQgcmVzdHJpY3Rpb25zLCBhbmQgdGhyb3cgYW4gZXJyb3JcbiAgICBpZiBpdCBkb2Vzbid0IG1hdGNoLlxuICAgICovXG4gICAgY3JlYXRlQ2hlY2tlZChhdHRycyA9IG51bGwsIGNvbnRlbnQsIG1hcmtzKSB7XG4gICAgICAgIGNvbnRlbnQgPSBGcmFnbWVudC5mcm9tKGNvbnRlbnQpO1xuICAgICAgICBpZiAoIXRoaXMudmFsaWRDb250ZW50KGNvbnRlbnQpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgXCIgKyB0aGlzLm5hbWUpO1xuICAgICAgICByZXR1cm4gbmV3IE5vZGUodGhpcywgdGhpcy5jb21wdXRlQXR0cnMoYXR0cnMpLCBjb250ZW50LCBNYXJrLnNldEZyb20obWFya3MpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgTGlrZSBbYGNyZWF0ZWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlVHlwZS5jcmVhdGUpLCBidXQgc2VlIGlmIGl0IGlzXG4gICAgbmVjZXNzYXJ5IHRvIGFkZCBub2RlcyB0byB0aGUgc3RhcnQgb3IgZW5kIG9mIHRoZSBnaXZlbiBmcmFnbWVudFxuICAgIHRvIG1ha2UgaXQgZml0IHRoZSBub2RlLiBJZiBubyBmaXR0aW5nIHdyYXBwaW5nIGNhbiBiZSBmb3VuZCxcbiAgICByZXR1cm4gbnVsbC4gTm90ZSB0aGF0LCBkdWUgdG8gdGhlIGZhY3QgdGhhdCByZXF1aXJlZCBub2RlcyBjYW5cbiAgICBhbHdheXMgYmUgY3JlYXRlZCwgdGhpcyB3aWxsIGFsd2F5cyBzdWNjZWVkIGlmIHlvdSBwYXNzIG51bGwgb3JcbiAgICBgRnJhZ21lbnQuZW1wdHlgIGFzIGNvbnRlbnQuXG4gICAgKi9cbiAgICBjcmVhdGVBbmRGaWxsKGF0dHJzID0gbnVsbCwgY29udGVudCwgbWFya3MpIHtcbiAgICAgICAgYXR0cnMgPSB0aGlzLmNvbXB1dGVBdHRycyhhdHRycyk7XG4gICAgICAgIGNvbnRlbnQgPSBGcmFnbWVudC5mcm9tKGNvbnRlbnQpO1xuICAgICAgICBpZiAoY29udGVudC5zaXplKSB7XG4gICAgICAgICAgICBsZXQgYmVmb3JlID0gdGhpcy5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShjb250ZW50KTtcbiAgICAgICAgICAgIGlmICghYmVmb3JlKVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29udGVudCA9IGJlZm9yZS5hcHBlbmQoY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG1hdGNoZWQgPSB0aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGNvbnRlbnQpO1xuICAgICAgICBsZXQgYWZ0ZXIgPSBtYXRjaGVkICYmIG1hdGNoZWQuZmlsbEJlZm9yZShGcmFnbWVudC5lbXB0eSwgdHJ1ZSk7XG4gICAgICAgIGlmICghYWZ0ZXIpXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlKHRoaXMsIGF0dHJzLCBjb250ZW50LmFwcGVuZChhZnRlciksIE1hcmsuc2V0RnJvbShtYXJrcykpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZyYWdtZW50IGlzIHZhbGlkIGNvbnRlbnQgZm9yIHRoaXMgbm9kZVxuICAgIHR5cGUgd2l0aCB0aGUgZ2l2ZW4gYXR0cmlidXRlcy5cbiAgICAqL1xuICAgIHZhbGlkQ29udGVudChjb250ZW50KSB7XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGNvbnRlbnQpO1xuICAgICAgICBpZiAoIXJlc3VsdCB8fCAhcmVzdWx0LnZhbGlkRW5kKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnQuY2hpbGRDb3VudDsgaSsrKVxuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93c01hcmtzKGNvbnRlbnQuY2hpbGQoaSkubWFya3MpKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIENoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIG1hcmsgdHlwZSBpcyBhbGxvd2VkIGluIHRoaXMgbm9kZS5cbiAgICAqL1xuICAgIGFsbG93c01hcmtUeXBlKG1hcmtUeXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcmtTZXQgPT0gbnVsbCB8fCB0aGlzLm1hcmtTZXQuaW5kZXhPZihtYXJrVHlwZSkgPiAtMTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGVzdCB3aGV0aGVyIHRoZSBnaXZlbiBzZXQgb2YgbWFya3MgYXJlIGFsbG93ZWQgaW4gdGhpcyBub2RlLlxuICAgICovXG4gICAgYWxsb3dzTWFya3MobWFya3MpIHtcbiAgICAgICAgaWYgKHRoaXMubWFya1NldCA9PSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFya3MubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dzTWFya1R5cGUobWFya3NbaV0udHlwZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVtb3ZlcyB0aGUgbWFya3MgdGhhdCBhcmUgbm90IGFsbG93ZWQgaW4gdGhpcyBub2RlIGZyb20gdGhlIGdpdmVuIHNldC5cbiAgICAqL1xuICAgIGFsbG93ZWRNYXJrcyhtYXJrcykge1xuICAgICAgICBpZiAodGhpcy5tYXJrU2V0ID09IG51bGwpXG4gICAgICAgICAgICByZXR1cm4gbWFya3M7XG4gICAgICAgIGxldCBjb3B5O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYWxsb3dzTWFya1R5cGUobWFya3NbaV0udHlwZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNvcHkpXG4gICAgICAgICAgICAgICAgICAgIGNvcHkgPSBtYXJrcy5zbGljZSgwLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNvcHkpIHtcbiAgICAgICAgICAgICAgICBjb3B5LnB1c2gobWFya3NbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhY29weSA/IG1hcmtzIDogY29weS5sZW5ndGggPyBjb3B5IDogTWFyay5ub25lO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBjb21waWxlKG5vZGVzLCBzY2hlbWEpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIG5vZGVzLmZvckVhY2goKG5hbWUsIHNwZWMpID0+IHJlc3VsdFtuYW1lXSA9IG5ldyBOb2RlVHlwZShuYW1lLCBzY2hlbWEsIHNwZWMpKTtcbiAgICAgICAgbGV0IHRvcFR5cGUgPSBzY2hlbWEuc3BlYy50b3BOb2RlIHx8IFwiZG9jXCI7XG4gICAgICAgIGlmICghcmVzdWx0W3RvcFR5cGVdKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJTY2hlbWEgaXMgbWlzc2luZyBpdHMgdG9wIG5vZGUgdHlwZSAoJ1wiICsgdG9wVHlwZSArIFwiJylcIik7XG4gICAgICAgIGlmICghcmVzdWx0LnRleHQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkV2ZXJ5IHNjaGVtYSBuZWVkcyBhICd0ZXh0JyB0eXBlXCIpO1xuICAgICAgICBmb3IgKGxldCBfIGluIHJlc3VsdC50ZXh0LmF0dHJzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgdGV4dCBub2RlIHR5cGUgc2hvdWxkIG5vdCBoYXZlIGF0dHJpYnV0ZXNcIik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuLy8gQXR0cmlidXRlIGRlc2NyaXB0b3JzXG5jbGFzcyBBdHRyaWJ1dGUge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5oYXNEZWZhdWx0ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9wdGlvbnMsIFwiZGVmYXVsdFwiKTtcbiAgICAgICAgdGhpcy5kZWZhdWx0ID0gb3B0aW9ucy5kZWZhdWx0O1xuICAgIH1cbiAgICBnZXQgaXNSZXF1aXJlZCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmhhc0RlZmF1bHQ7XG4gICAgfVxufVxuLy8gTWFya3Ncbi8qKlxuTGlrZSBub2RlcywgbWFya3MgKHdoaWNoIGFyZSBhc3NvY2lhdGVkIHdpdGggbm9kZXMgdG8gc2lnbmlmeVxudGhpbmdzIGxpa2UgZW1waGFzaXMgb3IgYmVpbmcgcGFydCBvZiBhIGxpbmspIGFyZVxuW3RhZ2dlZF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk1hcmsudHlwZSkgd2l0aCB0eXBlIG9iamVjdHMsIHdoaWNoIGFyZVxuaW5zdGFudGlhdGVkIG9uY2UgcGVyIGBTY2hlbWFgLlxuKi9cbmNsYXNzIE1hcmtUeXBlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBuYW1lIG9mIHRoZSBtYXJrIHR5cGUuXG4gICAgKi9cbiAgICBuYW1lLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJhbmssIFxuICAgIC8qKlxuICAgIFRoZSBzY2hlbWEgdGhhdCB0aGlzIG1hcmsgdHlwZSBpbnN0YW5jZSBpcyBwYXJ0IG9mLlxuICAgICovXG4gICAgc2NoZW1hLCBcbiAgICAvKipcbiAgICBUaGUgc3BlYyBvbiB3aGljaCB0aGUgdHlwZSBpcyBiYXNlZC5cbiAgICAqL1xuICAgIHNwZWMpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5yYW5rID0gcmFuaztcbiAgICAgICAgdGhpcy5zY2hlbWEgPSBzY2hlbWE7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgICAgIHRoaXMuYXR0cnMgPSBpbml0QXR0cnMoc3BlYy5hdHRycyk7XG4gICAgICAgIHRoaXMuZXhjbHVkZWQgPSBudWxsO1xuICAgICAgICBsZXQgZGVmYXVsdHMgPSBkZWZhdWx0QXR0cnModGhpcy5hdHRycyk7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBkZWZhdWx0cyA/IG5ldyBNYXJrKHRoaXMsIGRlZmF1bHRzKSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcmsgb2YgdGhpcyB0eXBlLiBgYXR0cnNgIG1heSBiZSBgbnVsbGAgb3IgYW4gb2JqZWN0XG4gICAgY29udGFpbmluZyBvbmx5IHNvbWUgb2YgdGhlIG1hcmsncyBhdHRyaWJ1dGVzLiBUaGUgb3RoZXJzLCBpZlxuICAgIHRoZXkgaGF2ZSBkZWZhdWx0cywgd2lsbCBiZSBhZGRlZC5cbiAgICAqL1xuICAgIGNyZWF0ZShhdHRycyA9IG51bGwpIHtcbiAgICAgICAgaWYgKCFhdHRycyAmJiB0aGlzLmluc3RhbmNlKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XG4gICAgICAgIHJldHVybiBuZXcgTWFyayh0aGlzLCBjb21wdXRlQXR0cnModGhpcy5hdHRycywgYXR0cnMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgY29tcGlsZShtYXJrcywgc2NoZW1hKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpLCByYW5rID0gMDtcbiAgICAgICAgbWFya3MuZm9yRWFjaCgobmFtZSwgc3BlYykgPT4gcmVzdWx0W25hbWVdID0gbmV3IE1hcmtUeXBlKG5hbWUsIHJhbmsrKywgc2NoZW1hLCBzcGVjKSk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFdoZW4gdGhlcmUgaXMgYSBtYXJrIG9mIHRoaXMgdHlwZSBpbiB0aGUgZ2l2ZW4gc2V0LCBhIG5ldyBzZXRcbiAgICB3aXRob3V0IGl0IGlzIHJldHVybmVkLiBPdGhlcndpc2UsIHRoZSBpbnB1dCBzZXQgaXMgcmV0dXJuZWQuXG4gICAgKi9cbiAgICByZW1vdmVGcm9tU2V0KHNldCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGlmIChzZXRbaV0udHlwZSA9PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgc2V0ID0gc2V0LnNsaWNlKDAsIGkpLmNvbmNhdChzZXQuc2xpY2UoaSArIDEpKTtcbiAgICAgICAgICAgICAgICBpLS07XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlc3RzIHdoZXRoZXIgdGhlcmUgaXMgYSBtYXJrIG9mIHRoaXMgdHlwZSBpbiB0aGUgZ2l2ZW4gc2V0LlxuICAgICovXG4gICAgaXNJblNldChzZXQpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoc2V0W2ldLnR5cGUgPT0gdGhpcylcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0W2ldO1xuICAgIH1cbiAgICAvKipcbiAgICBRdWVyaWVzIHdoZXRoZXIgYSBnaXZlbiBtYXJrIHR5cGUgaXNcbiAgICBbZXhjbHVkZWRdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5NYXJrU3BlYy5leGNsdWRlcykgYnkgdGhpcyBvbmUuXG4gICAgKi9cbiAgICBleGNsdWRlcyhvdGhlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5leGNsdWRlZC5pbmRleE9mKG90aGVyKSA+IC0xO1xuICAgIH1cbn1cbi8qKlxuQSBkb2N1bWVudCBzY2hlbWEuIEhvbGRzIFtub2RlXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVR5cGUpIGFuZCBbbWFya1xudHlwZV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk1hcmtUeXBlKSBvYmplY3RzIGZvciB0aGUgbm9kZXMgYW5kIG1hcmtzIHRoYXQgbWF5XG5vY2N1ciBpbiBjb25mb3JtaW5nIGRvY3VtZW50cywgYW5kIHByb3ZpZGVzIGZ1bmN0aW9uYWxpdHkgZm9yXG5jcmVhdGluZyBhbmQgZGVzZXJpYWxpemluZyBzdWNoIGRvY3VtZW50cy5cblxuV2hlbiBnaXZlbiwgdGhlIHR5cGUgcGFyYW1ldGVycyBwcm92aWRlIHRoZSBuYW1lcyBvZiB0aGUgbm9kZXMgYW5kXG5tYXJrcyBpbiB0aGlzIHNjaGVtYS5cbiovXG5jbGFzcyBTY2hlbWEge1xuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIHNjaGVtYSBmcm9tIGEgc2NoZW1hIFtzcGVjaWZpY2F0aW9uXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuU2NoZW1hU3BlYykuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzcGVjKSB7XG4gICAgICAgIC8qKlxuICAgICAgICBBbiBvYmplY3QgZm9yIHN0b3Jpbmcgd2hhdGV2ZXIgdmFsdWVzIG1vZHVsZXMgbWF5IHdhbnQgdG9cbiAgICAgICAgY29tcHV0ZSBhbmQgY2FjaGUgcGVyIHNjaGVtYS4gKElmIHlvdSB3YW50IHRvIHN0b3JlIHNvbWV0aGluZ1xuICAgICAgICBpbiBpdCwgdHJ5IHRvIHVzZSBwcm9wZXJ0eSBuYW1lcyB1bmxpa2VseSB0byBjbGFzaC4pXG4gICAgICAgICovXG4gICAgICAgIHRoaXMuY2FjaGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5zcGVjID0ge1xuICAgICAgICAgICAgbm9kZXM6IE9yZGVyZWRNYXAuZnJvbShzcGVjLm5vZGVzKSxcbiAgICAgICAgICAgIG1hcmtzOiBPcmRlcmVkTWFwLmZyb20oc3BlYy5tYXJrcyB8fCB7fSksXG4gICAgICAgICAgICB0b3BOb2RlOiBzcGVjLnRvcE5vZGVcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5ub2RlcyA9IE5vZGVUeXBlLmNvbXBpbGUodGhpcy5zcGVjLm5vZGVzLCB0aGlzKTtcbiAgICAgICAgdGhpcy5tYXJrcyA9IE1hcmtUeXBlLmNvbXBpbGUodGhpcy5zcGVjLm1hcmtzLCB0aGlzKTtcbiAgICAgICAgbGV0IGNvbnRlbnRFeHByQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBmb3IgKGxldCBwcm9wIGluIHRoaXMubm9kZXMpIHtcbiAgICAgICAgICAgIGlmIChwcm9wIGluIHRoaXMubWFya3MpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IocHJvcCArIFwiIGNhbiBub3QgYmUgYm90aCBhIG5vZGUgYW5kIGEgbWFya1wiKTtcbiAgICAgICAgICAgIGxldCB0eXBlID0gdGhpcy5ub2Rlc1twcm9wXSwgY29udGVudEV4cHIgPSB0eXBlLnNwZWMuY29udGVudCB8fCBcIlwiLCBtYXJrRXhwciA9IHR5cGUuc3BlYy5tYXJrcztcbiAgICAgICAgICAgIHR5cGUuY29udGVudE1hdGNoID0gY29udGVudEV4cHJDYWNoZVtjb250ZW50RXhwcl0gfHxcbiAgICAgICAgICAgICAgICAoY29udGVudEV4cHJDYWNoZVtjb250ZW50RXhwcl0gPSBDb250ZW50TWF0Y2gucGFyc2UoY29udGVudEV4cHIsIHRoaXMubm9kZXMpKTtcbiAgICAgICAgICAgIHR5cGUuaW5saW5lQ29udGVudCA9IHR5cGUuY29udGVudE1hdGNoLmlubGluZUNvbnRlbnQ7XG4gICAgICAgICAgICB0eXBlLm1hcmtTZXQgPSBtYXJrRXhwciA9PSBcIl9cIiA/IG51bGwgOlxuICAgICAgICAgICAgICAgIG1hcmtFeHByID8gZ2F0aGVyTWFya3ModGhpcywgbWFya0V4cHIuc3BsaXQoXCIgXCIpKSA6XG4gICAgICAgICAgICAgICAgICAgIG1hcmtFeHByID09IFwiXCIgfHwgIXR5cGUuaW5saW5lQ29udGVudCA/IFtdIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBwcm9wIGluIHRoaXMubWFya3MpIHtcbiAgICAgICAgICAgIGxldCB0eXBlID0gdGhpcy5tYXJrc1twcm9wXSwgZXhjbCA9IHR5cGUuc3BlYy5leGNsdWRlcztcbiAgICAgICAgICAgIHR5cGUuZXhjbHVkZWQgPSBleGNsID09IG51bGwgPyBbdHlwZV0gOiBleGNsID09IFwiXCIgPyBbXSA6IGdhdGhlck1hcmtzKHRoaXMsIGV4Y2wuc3BsaXQoXCIgXCIpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5vZGVGcm9tSlNPTiA9IHRoaXMubm9kZUZyb21KU09OLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMubWFya0Zyb21KU09OID0gdGhpcy5tYXJrRnJvbUpTT04uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy50b3BOb2RlVHlwZSA9IHRoaXMubm9kZXNbdGhpcy5zcGVjLnRvcE5vZGUgfHwgXCJkb2NcIl07XG4gICAgICAgIHRoaXMuY2FjaGVkLndyYXBwaW5ncyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5vZGUgaW4gdGhpcyBzY2hlbWEuIFRoZSBgdHlwZWAgbWF5IGJlIGEgc3RyaW5nIG9yIGFcbiAgICBgTm9kZVR5cGVgIGluc3RhbmNlLiBBdHRyaWJ1dGVzIHdpbGwgYmUgZXh0ZW5kZWQgd2l0aCBkZWZhdWx0cyxcbiAgICBgY29udGVudGAgbWF5IGJlIGEgYEZyYWdtZW50YCwgYG51bGxgLCBhIGBOb2RlYCwgb3IgYW4gYXJyYXkgb2ZcbiAgICBub2Rlcy5cbiAgICAqL1xuICAgIG5vZGUodHlwZSwgYXR0cnMgPSBudWxsLCBjb250ZW50LCBtYXJrcykge1xuICAgICAgICBpZiAodHlwZW9mIHR5cGUgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHR5cGUgPSB0aGlzLm5vZGVUeXBlKHR5cGUpO1xuICAgICAgICBlbHNlIGlmICghKHR5cGUgaW5zdGFuY2VvZiBOb2RlVHlwZSkpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgbm9kZSB0eXBlOiBcIiArIHR5cGUpO1xuICAgICAgICBlbHNlIGlmICh0eXBlLnNjaGVtYSAhPSB0aGlzKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJOb2RlIHR5cGUgZnJvbSBkaWZmZXJlbnQgc2NoZW1hIHVzZWQgKFwiICsgdHlwZS5uYW1lICsgXCIpXCIpO1xuICAgICAgICByZXR1cm4gdHlwZS5jcmVhdGVDaGVja2VkKGF0dHJzLCBjb250ZW50LCBtYXJrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIHRleHQgbm9kZSBpbiB0aGUgc2NoZW1hLiBFbXB0eSB0ZXh0IG5vZGVzIGFyZSBub3RcbiAgICBhbGxvd2VkLlxuICAgICovXG4gICAgdGV4dCh0ZXh0LCBtYXJrcykge1xuICAgICAgICBsZXQgdHlwZSA9IHRoaXMubm9kZXMudGV4dDtcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0Tm9kZSh0eXBlLCB0eXBlLmRlZmF1bHRBdHRycywgdGV4dCwgTWFyay5zZXRGcm9tKG1hcmtzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcmsgd2l0aCB0aGUgZ2l2ZW4gdHlwZSBhbmQgYXR0cmlidXRlcy5cbiAgICAqL1xuICAgIG1hcmsodHlwZSwgYXR0cnMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0eXBlID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICB0eXBlID0gdGhpcy5tYXJrc1t0eXBlXTtcbiAgICAgICAgcmV0dXJuIHR5cGUuY3JlYXRlKGF0dHJzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVzZXJpYWxpemUgYSBub2RlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uIFRoaXMgbWV0aG9kIGlzXG4gICAgYm91bmQuXG4gICAgKi9cbiAgICBub2RlRnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gTm9kZS5mcm9tSlNPTih0aGlzLCBqc29uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRGVzZXJpYWxpemUgYSBtYXJrIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24uIFRoaXMgbWV0aG9kIGlzXG4gICAgYm91bmQuXG4gICAgKi9cbiAgICBtYXJrRnJvbUpTT04oanNvbikge1xuICAgICAgICByZXR1cm4gTWFyay5mcm9tSlNPTih0aGlzLCBqc29uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBub2RlVHlwZShuYW1lKSB7XG4gICAgICAgIGxldCBmb3VuZCA9IHRoaXMubm9kZXNbbmFtZV07XG4gICAgICAgIGlmICghZm91bmQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlVua25vd24gbm9kZSB0eXBlOiBcIiArIG5hbWUpO1xuICAgICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2F0aGVyTWFya3Moc2NoZW1hLCBtYXJrcykge1xuICAgIGxldCBmb3VuZCA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFya3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5hbWUgPSBtYXJrc1tpXSwgbWFyayA9IHNjaGVtYS5tYXJrc1tuYW1lXSwgb2sgPSBtYXJrO1xuICAgICAgICBpZiAobWFyaykge1xuICAgICAgICAgICAgZm91bmQucHVzaChtYXJrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAobGV0IHByb3AgaW4gc2NoZW1hLm1hcmtzKSB7XG4gICAgICAgICAgICAgICAgbGV0IG1hcmsgPSBzY2hlbWEubWFya3NbcHJvcF07XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT0gXCJfXCIgfHwgKG1hcmsuc3BlYy5ncm91cCAmJiBtYXJrLnNwZWMuZ3JvdXAuc3BsaXQoXCIgXCIpLmluZGV4T2YobmFtZSkgPiAtMSkpXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kLnB1c2gob2sgPSBtYXJrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIW9rKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiVW5rbm93biBtYXJrIHR5cGU6ICdcIiArIG1hcmtzW2ldICsgXCInXCIpO1xuICAgIH1cbiAgICByZXR1cm4gZm91bmQ7XG59XG5cbi8qKlxuQSBET00gcGFyc2VyIHJlcHJlc2VudHMgYSBzdHJhdGVneSBmb3IgcGFyc2luZyBET00gY29udGVudCBpbnRvIGFcblByb3NlTWlycm9yIGRvY3VtZW50IGNvbmZvcm1pbmcgdG8gYSBnaXZlbiBzY2hlbWEuIEl0cyBiZWhhdmlvciBpc1xuZGVmaW5lZCBieSBhbiBhcnJheSBvZiBbcnVsZXNdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5QYXJzZVJ1bGUpLlxuKi9cbmNsYXNzIERPTVBhcnNlciB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcGFyc2VyIHRoYXQgdGFyZ2V0cyB0aGUgZ2l2ZW4gc2NoZW1hLCB1c2luZyB0aGUgZ2l2ZW5cbiAgICBwYXJzaW5nIHJ1bGVzLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHNjaGVtYSBpbnRvIHdoaWNoIHRoZSBwYXJzZXIgcGFyc2VzLlxuICAgICovXG4gICAgc2NoZW1hLCBcbiAgICAvKipcbiAgICBUaGUgc2V0IG9mIFtwYXJzZSBydWxlc10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLlBhcnNlUnVsZSkgdGhhdCB0aGUgcGFyc2VyXG4gICAgdXNlcywgaW4gb3JkZXIgb2YgcHJlY2VkZW5jZS5cbiAgICAqL1xuICAgIHJ1bGVzKSB7XG4gICAgICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgICAgICB0aGlzLnJ1bGVzID0gcnVsZXM7XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWdzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICBAaW50ZXJuYWxcbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdHlsZXMgPSBbXTtcbiAgICAgICAgcnVsZXMuZm9yRWFjaChydWxlID0+IHtcbiAgICAgICAgICAgIGlmIChydWxlLnRhZylcbiAgICAgICAgICAgICAgICB0aGlzLnRhZ3MucHVzaChydWxlKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHJ1bGUuc3R5bGUpXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZXMucHVzaChydWxlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIE9ubHkgbm9ybWFsaXplIGxpc3QgZWxlbWVudHMgd2hlbiBsaXN0cyBpbiB0aGUgc2NoZW1hIGNhbid0IGRpcmVjdGx5IGNvbnRhaW4gdGhlbXNlbHZlc1xuICAgICAgICB0aGlzLm5vcm1hbGl6ZUxpc3RzID0gIXRoaXMudGFncy5zb21lKHIgPT4ge1xuICAgICAgICAgICAgaWYgKCEvXih1bHxvbClcXGIvLnRlc3Qoci50YWcpIHx8ICFyLm5vZGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgbGV0IG5vZGUgPSBzY2hlbWEubm9kZXNbci5ub2RlXTtcbiAgICAgICAgICAgIHJldHVybiBub2RlLmNvbnRlbnRNYXRjaC5tYXRjaFR5cGUobm9kZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICBQYXJzZSBhIGRvY3VtZW50IGZyb20gdGhlIGNvbnRlbnQgb2YgYSBET00gbm9kZS5cbiAgICAqL1xuICAgIHBhcnNlKGRvbSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGxldCBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dCh0aGlzLCBvcHRpb25zLCBmYWxzZSk7XG4gICAgICAgIGNvbnRleHQuYWRkQWxsKGRvbSwgb3B0aW9ucy5mcm9tLCBvcHRpb25zLnRvKTtcbiAgICAgICAgcmV0dXJuIGNvbnRleHQuZmluaXNoKCk7XG4gICAgfVxuICAgIC8qKlxuICAgIFBhcnNlcyB0aGUgY29udGVudCBvZiB0aGUgZ2l2ZW4gRE9NIG5vZGUsIGxpa2VcbiAgICBbYHBhcnNlYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLkRPTVBhcnNlci5wYXJzZSksIGFuZCB0YWtlcyB0aGUgc2FtZSBzZXQgb2ZcbiAgICBvcHRpb25zLiBCdXQgdW5saWtlIHRoYXQgbWV0aG9kLCB3aGljaCBwcm9kdWNlcyBhIHdob2xlIG5vZGUsXG4gICAgdGhpcyBvbmUgcmV0dXJucyBhIHNsaWNlIHRoYXQgaXMgb3BlbiBhdCB0aGUgc2lkZXMsIG1lYW5pbmcgdGhhdFxuICAgIHRoZSBzY2hlbWEgY29uc3RyYWludHMgYXJlbid0IGFwcGxpZWQgdG8gdGhlIHN0YXJ0IG9mIG5vZGVzIHRvXG4gICAgdGhlIGxlZnQgb2YgdGhlIGlucHV0IGFuZCB0aGUgZW5kIG9mIG5vZGVzIGF0IHRoZSBlbmQuXG4gICAgKi9cbiAgICBwYXJzZVNsaWNlKGRvbSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGxldCBjb250ZXh0ID0gbmV3IFBhcnNlQ29udGV4dCh0aGlzLCBvcHRpb25zLCB0cnVlKTtcbiAgICAgICAgY29udGV4dC5hZGRBbGwoZG9tLCBvcHRpb25zLmZyb20sIG9wdGlvbnMudG8pO1xuICAgICAgICByZXR1cm4gU2xpY2UubWF4T3Blbihjb250ZXh0LmZpbmlzaCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBtYXRjaFRhZyhkb20sIGNvbnRleHQsIGFmdGVyKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSBhZnRlciA/IHRoaXMudGFncy5pbmRleE9mKGFmdGVyKSArIDEgOiAwOyBpIDwgdGhpcy50YWdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcnVsZSA9IHRoaXMudGFnc1tpXTtcbiAgICAgICAgICAgIGlmIChtYXRjaGVzKGRvbSwgcnVsZS50YWcpICYmXG4gICAgICAgICAgICAgICAgKHJ1bGUubmFtZXNwYWNlID09PSB1bmRlZmluZWQgfHwgZG9tLm5hbWVzcGFjZVVSSSA9PSBydWxlLm5hbWVzcGFjZSkgJiZcbiAgICAgICAgICAgICAgICAoIXJ1bGUuY29udGV4dCB8fCBjb250ZXh0Lm1hdGNoZXNDb250ZXh0KHJ1bGUuY29udGV4dCkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuZ2V0QXR0cnMpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHJ1bGUuZ2V0QXR0cnMoZG9tKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5hdHRycyA9IHJlc3VsdCB8fCB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBydWxlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbWF0Y2hTdHlsZShwcm9wLCB2YWx1ZSwgY29udGV4dCwgYWZ0ZXIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IGFmdGVyID8gdGhpcy5zdHlsZXMuaW5kZXhPZihhZnRlcikgKyAxIDogMDsgaSA8IHRoaXMuc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgcnVsZSA9IHRoaXMuc3R5bGVzW2ldLCBzdHlsZSA9IHJ1bGUuc3R5bGU7XG4gICAgICAgICAgICBpZiAoc3R5bGUuaW5kZXhPZihwcm9wKSAhPSAwIHx8XG4gICAgICAgICAgICAgICAgcnVsZS5jb250ZXh0ICYmICFjb250ZXh0Lm1hdGNoZXNDb250ZXh0KHJ1bGUuY29udGV4dCkgfHxcbiAgICAgICAgICAgICAgICAvLyBUZXN0IHRoYXQgdGhlIHN0eWxlIHN0cmluZyBlaXRoZXIgcHJlY2lzZWx5IG1hdGNoZXMgdGhlIHByb3AsXG4gICAgICAgICAgICAgICAgLy8gb3IgaGFzIGFuICc9JyBzaWduIGFmdGVyIHRoZSBwcm9wLCBmb2xsb3dlZCBieSB0aGUgZ2l2ZW5cbiAgICAgICAgICAgICAgICAvLyB2YWx1ZS5cbiAgICAgICAgICAgICAgICBzdHlsZS5sZW5ndGggPiBwcm9wLmxlbmd0aCAmJlxuICAgICAgICAgICAgICAgICAgICAoc3R5bGUuY2hhckNvZGVBdChwcm9wLmxlbmd0aCkgIT0gNjEgfHwgc3R5bGUuc2xpY2UocHJvcC5sZW5ndGggKyAxKSAhPSB2YWx1ZSkpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBpZiAocnVsZS5nZXRBdHRycykge1xuICAgICAgICAgICAgICAgIGxldCByZXN1bHQgPSBydWxlLmdldEF0dHJzKHZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgcnVsZS5hdHRycyA9IHJlc3VsdCB8fCB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnVsZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBzY2hlbWFSdWxlcyhzY2hlbWEpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgICAgICBmdW5jdGlvbiBpbnNlcnQocnVsZSkge1xuICAgICAgICAgICAgbGV0IHByaW9yaXR5ID0gcnVsZS5wcmlvcml0eSA9PSBudWxsID8gNTAgOiBydWxlLnByaW9yaXR5LCBpID0gMDtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHQgPSByZXN1bHRbaV0sIG5leHRQcmlvcml0eSA9IG5leHQucHJpb3JpdHkgPT0gbnVsbCA/IDUwIDogbmV4dC5wcmlvcml0eTtcbiAgICAgICAgICAgICAgICBpZiAobmV4dFByaW9yaXR5IDwgcHJpb3JpdHkpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzdWx0LnNwbGljZShpLCAwLCBydWxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHNjaGVtYS5tYXJrcykge1xuICAgICAgICAgICAgbGV0IHJ1bGVzID0gc2NoZW1hLm1hcmtzW25hbWVdLnNwZWMucGFyc2VET007XG4gICAgICAgICAgICBpZiAocnVsZXMpXG4gICAgICAgICAgICAgICAgcnVsZXMuZm9yRWFjaChydWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0KHJ1bGUgPSBjb3B5KHJ1bGUpKTtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5tYXJrID0gbmFtZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBuYW1lIGluIHNjaGVtYS5ub2Rlcykge1xuICAgICAgICAgICAgbGV0IHJ1bGVzID0gc2NoZW1hLm5vZGVzW25hbWVdLnNwZWMucGFyc2VET007XG4gICAgICAgICAgICBpZiAocnVsZXMpXG4gICAgICAgICAgICAgICAgcnVsZXMuZm9yRWFjaChydWxlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0KHJ1bGUgPSBjb3B5KHJ1bGUpKTtcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5ub2RlID0gbmFtZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBDb25zdHJ1Y3QgYSBET00gcGFyc2VyIHVzaW5nIHRoZSBwYXJzaW5nIHJ1bGVzIGxpc3RlZCBpbiBhXG4gICAgc2NoZW1hJ3MgW25vZGUgc3BlY3NdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlU3BlYy5wYXJzZURPTSksIHJlb3JkZXJlZCBieVxuICAgIFtwcmlvcml0eV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLlBhcnNlUnVsZS5wcmlvcml0eSkuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIHNjaGVtYS5jYWNoZWQuZG9tUGFyc2VyIHx8XG4gICAgICAgICAgICAoc2NoZW1hLmNhY2hlZC5kb21QYXJzZXIgPSBuZXcgRE9NUGFyc2VyKHNjaGVtYSwgRE9NUGFyc2VyLnNjaGVtYVJ1bGVzKHNjaGVtYSkpKTtcbiAgICB9XG59XG5jb25zdCBibG9ja1RhZ3MgPSB7XG4gICAgYWRkcmVzczogdHJ1ZSwgYXJ0aWNsZTogdHJ1ZSwgYXNpZGU6IHRydWUsIGJsb2NrcXVvdGU6IHRydWUsIGNhbnZhczogdHJ1ZSxcbiAgICBkZDogdHJ1ZSwgZGl2OiB0cnVlLCBkbDogdHJ1ZSwgZmllbGRzZXQ6IHRydWUsIGZpZ2NhcHRpb246IHRydWUsIGZpZ3VyZTogdHJ1ZSxcbiAgICBmb290ZXI6IHRydWUsIGZvcm06IHRydWUsIGgxOiB0cnVlLCBoMjogdHJ1ZSwgaDM6IHRydWUsIGg0OiB0cnVlLCBoNTogdHJ1ZSxcbiAgICBoNjogdHJ1ZSwgaGVhZGVyOiB0cnVlLCBoZ3JvdXA6IHRydWUsIGhyOiB0cnVlLCBsaTogdHJ1ZSwgbm9zY3JpcHQ6IHRydWUsIG9sOiB0cnVlLFxuICAgIG91dHB1dDogdHJ1ZSwgcDogdHJ1ZSwgcHJlOiB0cnVlLCBzZWN0aW9uOiB0cnVlLCB0YWJsZTogdHJ1ZSwgdGZvb3Q6IHRydWUsIHVsOiB0cnVlXG59O1xuY29uc3QgaWdub3JlVGFncyA9IHtcbiAgICBoZWFkOiB0cnVlLCBub3NjcmlwdDogdHJ1ZSwgb2JqZWN0OiB0cnVlLCBzY3JpcHQ6IHRydWUsIHN0eWxlOiB0cnVlLCB0aXRsZTogdHJ1ZVxufTtcbmNvbnN0IGxpc3RUYWdzID0geyBvbDogdHJ1ZSwgdWw6IHRydWUgfTtcbi8vIFVzaW5nIGEgYml0ZmllbGQgZm9yIG5vZGUgY29udGV4dCBvcHRpb25zXG5jb25zdCBPUFRfUFJFU0VSVkVfV1MgPSAxLCBPUFRfUFJFU0VSVkVfV1NfRlVMTCA9IDIsIE9QVF9PUEVOX0xFRlQgPSA0O1xuZnVuY3Rpb24gd3NPcHRpb25zRm9yKHR5cGUsIHByZXNlcnZlV2hpdGVzcGFjZSwgYmFzZSkge1xuICAgIGlmIChwcmVzZXJ2ZVdoaXRlc3BhY2UgIT0gbnVsbClcbiAgICAgICAgcmV0dXJuIChwcmVzZXJ2ZVdoaXRlc3BhY2UgPyBPUFRfUFJFU0VSVkVfV1MgOiAwKSB8XG4gICAgICAgICAgICAocHJlc2VydmVXaGl0ZXNwYWNlID09PSBcImZ1bGxcIiA/IE9QVF9QUkVTRVJWRV9XU19GVUxMIDogMCk7XG4gICAgcmV0dXJuIHR5cGUgJiYgdHlwZS53aGl0ZXNwYWNlID09IFwicHJlXCIgPyBPUFRfUFJFU0VSVkVfV1MgfCBPUFRfUFJFU0VSVkVfV1NfRlVMTCA6IGJhc2UgJiB+T1BUX09QRU5fTEVGVDtcbn1cbmNsYXNzIE5vZGVDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBhdHRycywgXG4gICAgLy8gTWFya3MgYXBwbGllZCB0byB0aGlzIG5vZGUgaXRzZWxmXG4gICAgbWFya3MsIFxuICAgIC8vIE1hcmtzIHRoYXQgY2FuJ3QgYXBwbHkgaGVyZSwgYnV0IHdpbGwgYmUgdXNlZCBpbiBjaGlsZHJlbiBpZiBwb3NzaWJsZVxuICAgIHBlbmRpbmdNYXJrcywgc29saWQsIG1hdGNoLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgICAgIHRoaXMuYXR0cnMgPSBhdHRycztcbiAgICAgICAgdGhpcy5tYXJrcyA9IG1hcmtzO1xuICAgICAgICB0aGlzLnBlbmRpbmdNYXJrcyA9IHBlbmRpbmdNYXJrcztcbiAgICAgICAgdGhpcy5zb2xpZCA9IHNvbGlkO1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBbXTtcbiAgICAgICAgLy8gTWFya3MgYXBwbGllZCB0byB0aGUgbm9kZSdzIGNoaWxkcmVuXG4gICAgICAgIHRoaXMuYWN0aXZlTWFya3MgPSBNYXJrLm5vbmU7XG4gICAgICAgIC8vIE5lc3RlZCBNYXJrcyB3aXRoIHNhbWUgdHlwZVxuICAgICAgICB0aGlzLnN0YXNoTWFya3MgPSBbXTtcbiAgICAgICAgdGhpcy5tYXRjaCA9IG1hdGNoIHx8IChvcHRpb25zICYgT1BUX09QRU5fTEVGVCA/IG51bGwgOiB0eXBlLmNvbnRlbnRNYXRjaCk7XG4gICAgfVxuICAgIGZpbmRXcmFwcGluZyhub2RlKSB7XG4gICAgICAgIGlmICghdGhpcy5tYXRjaCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnR5cGUpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgbGV0IGZpbGwgPSB0aGlzLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUoRnJhZ21lbnQuZnJvbShub2RlKSk7XG4gICAgICAgICAgICBpZiAoZmlsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWF0Y2ggPSB0aGlzLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoZmlsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnR5cGUuY29udGVudE1hdGNoLCB3cmFwO1xuICAgICAgICAgICAgICAgIGlmICh3cmFwID0gc3RhcnQuZmluZFdyYXBwaW5nKG5vZGUudHlwZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRjaCA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd3JhcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5tYXRjaC5maW5kV3JhcHBpbmcobm9kZS50eXBlKTtcbiAgICB9XG4gICAgZmluaXNoKG9wZW5FbmQpIHtcbiAgICAgICAgaWYgKCEodGhpcy5vcHRpb25zICYgT1BUX1BSRVNFUlZFX1dTKSkgeyAvLyBTdHJpcCB0cmFpbGluZyB3aGl0ZXNwYWNlXG4gICAgICAgICAgICBsZXQgbGFzdCA9IHRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoIC0gMV0sIG07XG4gICAgICAgICAgICBpZiAobGFzdCAmJiBsYXN0LmlzVGV4dCAmJiAobSA9IC9bIFxcdFxcclxcblxcdTAwMGNdKyQvLmV4ZWMobGFzdC50ZXh0KSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IGxhc3Q7XG4gICAgICAgICAgICAgICAgaWYgKGxhc3QudGV4dC5sZW5ndGggPT0gbVswXS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudC5wb3AoKTtcbiAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFt0aGlzLmNvbnRlbnQubGVuZ3RoIC0gMV0gPSB0ZXh0LndpdGhUZXh0KHRleHQudGV4dC5zbGljZSgwLCB0ZXh0LnRleHQubGVuZ3RoIC0gbVswXS5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgY29udGVudCA9IEZyYWdtZW50LmZyb20odGhpcy5jb250ZW50KTtcbiAgICAgICAgaWYgKCFvcGVuRW5kICYmIHRoaXMubWF0Y2gpXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5hcHBlbmQodGhpcy5tYXRjaC5maWxsQmVmb3JlKEZyYWdtZW50LmVtcHR5LCB0cnVlKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPyB0aGlzLnR5cGUuY3JlYXRlKHRoaXMuYXR0cnMsIGNvbnRlbnQsIHRoaXMubWFya3MpIDogY29udGVudDtcbiAgICB9XG4gICAgcG9wRnJvbVN0YXNoTWFyayhtYXJrKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLnN0YXNoTWFya3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgICAgICBpZiAobWFyay5lcSh0aGlzLnN0YXNoTWFya3NbaV0pKVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXNoTWFya3Muc3BsaWNlKGksIDEpWzBdO1xuICAgIH1cbiAgICBhcHBseVBlbmRpbmcobmV4dFR5cGUpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHBlbmRpbmcgPSB0aGlzLnBlbmRpbmdNYXJrczsgaSA8IHBlbmRpbmcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBtYXJrID0gcGVuZGluZ1tpXTtcbiAgICAgICAgICAgIGlmICgodGhpcy50eXBlID8gdGhpcy50eXBlLmFsbG93c01hcmtUeXBlKG1hcmsudHlwZSkgOiBtYXJrTWF5QXBwbHkobWFyay50eXBlLCBuZXh0VHlwZSkpICYmXG4gICAgICAgICAgICAgICAgIW1hcmsuaXNJblNldCh0aGlzLmFjdGl2ZU1hcmtzKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTWFya3MgPSBtYXJrLmFkZFRvU2V0KHRoaXMuYWN0aXZlTWFya3MpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZ01hcmtzID0gbWFyay5yZW1vdmVGcm9tU2V0KHRoaXMucGVuZGluZ01hcmtzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpbmxpbmVDb250ZXh0KG5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSlcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnR5cGUuaW5saW5lQ29udGVudDtcbiAgICAgICAgaWYgKHRoaXMuY29udGVudC5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50WzBdLmlzSW5saW5lO1xuICAgICAgICByZXR1cm4gbm9kZS5wYXJlbnROb2RlICYmICFibG9ja1RhZ3MuaGFzT3duUHJvcGVydHkobm9kZS5wYXJlbnROb2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cbn1cbmNsYXNzIFBhcnNlQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gVGhlIHBhcnNlciB3ZSBhcmUgdXNpbmcuXG4gICAgcGFyc2VyLCBcbiAgICAvLyBUaGUgb3B0aW9ucyBwYXNzZWQgdG8gdGhpcyBwYXJzZS5cbiAgICBvcHRpb25zLCBpc09wZW4pIHtcbiAgICAgICAgdGhpcy5wYXJzZXIgPSBwYXJzZXI7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuaXNPcGVuID0gaXNPcGVuO1xuICAgICAgICB0aGlzLm9wZW4gPSAwO1xuICAgICAgICBsZXQgdG9wTm9kZSA9IG9wdGlvbnMudG9wTm9kZSwgdG9wQ29udGV4dDtcbiAgICAgICAgbGV0IHRvcE9wdGlvbnMgPSB3c09wdGlvbnNGb3IobnVsbCwgb3B0aW9ucy5wcmVzZXJ2ZVdoaXRlc3BhY2UsIDApIHwgKGlzT3BlbiA/IE9QVF9PUEVOX0xFRlQgOiAwKTtcbiAgICAgICAgaWYgKHRvcE5vZGUpXG4gICAgICAgICAgICB0b3BDb250ZXh0ID0gbmV3IE5vZGVDb250ZXh0KHRvcE5vZGUudHlwZSwgdG9wTm9kZS5hdHRycywgTWFyay5ub25lLCBNYXJrLm5vbmUsIHRydWUsIG9wdGlvbnMudG9wTWF0Y2ggfHwgdG9wTm9kZS50eXBlLmNvbnRlbnRNYXRjaCwgdG9wT3B0aW9ucyk7XG4gICAgICAgIGVsc2UgaWYgKGlzT3BlbilcbiAgICAgICAgICAgIHRvcENvbnRleHQgPSBuZXcgTm9kZUNvbnRleHQobnVsbCwgbnVsbCwgTWFyay5ub25lLCBNYXJrLm5vbmUsIHRydWUsIG51bGwsIHRvcE9wdGlvbnMpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0b3BDb250ZXh0ID0gbmV3IE5vZGVDb250ZXh0KHBhcnNlci5zY2hlbWEudG9wTm9kZVR5cGUsIG51bGwsIE1hcmsubm9uZSwgTWFyay5ub25lLCB0cnVlLCBudWxsLCB0b3BPcHRpb25zKTtcbiAgICAgICAgdGhpcy5ub2RlcyA9IFt0b3BDb250ZXh0XTtcbiAgICAgICAgdGhpcy5maW5kID0gb3B0aW9ucy5maW5kUG9zaXRpb25zO1xuICAgICAgICB0aGlzLm5lZWRzQmxvY2sgPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IHRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZXNbdGhpcy5vcGVuXTtcbiAgICB9XG4gICAgLy8gQWRkIGEgRE9NIG5vZGUgdG8gdGhlIGNvbnRlbnQuIFRleHQgaXMgaW5zZXJ0ZWQgYXMgdGV4dCBub2RlLFxuICAgIC8vIG90aGVyd2lzZSwgdGhlIG5vZGUgaXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCBvciwgaWYgaXQgaGFzIGFcbiAgICAvLyBgc3R5bGVgIGF0dHJpYnV0ZSwgYGFkZEVsZW1lbnRXaXRoU3R5bGVzYC5cbiAgICBhZGRET00oZG9tKSB7XG4gICAgICAgIGlmIChkb20ubm9kZVR5cGUgPT0gMykge1xuICAgICAgICAgICAgdGhpcy5hZGRUZXh0Tm9kZShkb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRvbS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICBsZXQgc3R5bGUgPSBkb20uZ2V0QXR0cmlidXRlKFwic3R5bGVcIik7XG4gICAgICAgICAgICBsZXQgbWFya3MgPSBzdHlsZSA/IHRoaXMucmVhZFN0eWxlcyhwYXJzZVN0eWxlcyhzdHlsZSkpIDogbnVsbCwgdG9wID0gdGhpcy50b3A7XG4gICAgICAgICAgICBpZiAobWFya3MgIT0gbnVsbClcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNYXJrKG1hcmtzW2ldKTtcbiAgICAgICAgICAgIHRoaXMuYWRkRWxlbWVudChkb20pO1xuICAgICAgICAgICAgaWYgKG1hcmtzICE9IG51bGwpXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXJrcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVQZW5kaW5nTWFyayhtYXJrc1tpXSwgdG9wKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRUZXh0Tm9kZShkb20pIHtcbiAgICAgICAgbGV0IHZhbHVlID0gZG9tLm5vZGVWYWx1ZTtcbiAgICAgICAgbGV0IHRvcCA9IHRoaXMudG9wO1xuICAgICAgICBpZiAodG9wLm9wdGlvbnMgJiBPUFRfUFJFU0VSVkVfV1NfRlVMTCB8fFxuICAgICAgICAgICAgdG9wLmlubGluZUNvbnRleHQoZG9tKSB8fFxuICAgICAgICAgICAgL1teIFxcdFxcclxcblxcdTAwMGNdLy50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgICAgaWYgKCEodG9wLm9wdGlvbnMgJiBPUFRfUFJFU0VSVkVfV1MpKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9bIFxcdFxcclxcblxcdTAwMGNdKy9nLCBcIiBcIik7XG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBzdGFydHMgd2l0aCB3aGl0ZXNwYWNlLCBhbmQgdGhlcmUgaXMgbm8gbm9kZSBiZWZvcmUgaXQsIG9yXG4gICAgICAgICAgICAgICAgLy8gYSBoYXJkIGJyZWFrLCBvciBhIHRleHQgbm9kZSB0aGF0IGVuZHMgd2l0aCB3aGl0ZXNwYWNlLCBzdHJpcCB0aGVcbiAgICAgICAgICAgICAgICAvLyBsZWFkaW5nIHNwYWNlLlxuICAgICAgICAgICAgICAgIGlmICgvXlsgXFx0XFxyXFxuXFx1MDAwY10vLnRlc3QodmFsdWUpICYmIHRoaXMub3BlbiA9PSB0aGlzLm5vZGVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVCZWZvcmUgPSB0b3AuY29udGVudFt0b3AuY29udGVudC5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRvbU5vZGVCZWZvcmUgPSBkb20ucHJldmlvdXNTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGVCZWZvcmUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChkb21Ob2RlQmVmb3JlICYmIGRvbU5vZGVCZWZvcmUubm9kZU5hbWUgPT0gJ0JSJykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIChub2RlQmVmb3JlLmlzVGV4dCAmJiAvWyBcXHRcXHJcXG5cXHUwMDBjXSQvLnRlc3Qobm9kZUJlZm9yZS50ZXh0KSkpXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCEodG9wLm9wdGlvbnMgJiBPUFRfUFJFU0VSVkVfV1NfRlVMTCkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xccj9cXG58XFxyL2csIFwiIFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFxyXFxuPy9nLCBcIlxcblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydE5vZGUodGhpcy5wYXJzZXIuc2NoZW1hLnRleHQodmFsdWUpKTtcbiAgICAgICAgICAgIHRoaXMuZmluZEluVGV4dChkb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5maW5kSW5zaWRlKGRvbSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBoYW5kbGVyIGZvciB0aGUgZ2l2ZW4gdGFnIGFuZCB1c2UgdGhhdCB0byBwYXJzZS4gSWZcbiAgICAvLyBub25lIGlzIGZvdW5kLCB0aGUgZWxlbWVudCdzIGNvbnRlbnQgbm9kZXMgYXJlIGFkZGVkIGRpcmVjdGx5LlxuICAgIGFkZEVsZW1lbnQoZG9tLCBtYXRjaEFmdGVyKSB7XG4gICAgICAgIGxldCBuYW1lID0gZG9tLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksIHJ1bGVJRDtcbiAgICAgICAgaWYgKGxpc3RUYWdzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHRoaXMucGFyc2VyLm5vcm1hbGl6ZUxpc3RzKVxuICAgICAgICAgICAgbm9ybWFsaXplTGlzdChkb20pO1xuICAgICAgICBsZXQgcnVsZSA9ICh0aGlzLm9wdGlvbnMucnVsZUZyb21Ob2RlICYmIHRoaXMub3B0aW9ucy5ydWxlRnJvbU5vZGUoZG9tKSkgfHxcbiAgICAgICAgICAgIChydWxlSUQgPSB0aGlzLnBhcnNlci5tYXRjaFRhZyhkb20sIHRoaXMsIG1hdGNoQWZ0ZXIpKTtcbiAgICAgICAgaWYgKHJ1bGUgPyBydWxlLmlnbm9yZSA6IGlnbm9yZVRhZ3MuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuZmluZEluc2lkZShkb20pO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVGYWxsYmFjayhkb20pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFydWxlIHx8IHJ1bGUuc2tpcCB8fCBydWxlLmNsb3NlUGFyZW50KSB7XG4gICAgICAgICAgICBpZiAocnVsZSAmJiBydWxlLmNsb3NlUGFyZW50KVxuICAgICAgICAgICAgICAgIHRoaXMub3BlbiA9IE1hdGgubWF4KDAsIHRoaXMub3BlbiAtIDEpO1xuICAgICAgICAgICAgZWxzZSBpZiAocnVsZSAmJiBydWxlLnNraXAubm9kZVR5cGUpXG4gICAgICAgICAgICAgICAgZG9tID0gcnVsZS5za2lwO1xuICAgICAgICAgICAgbGV0IHN5bmMsIHRvcCA9IHRoaXMudG9wLCBvbGROZWVkc0Jsb2NrID0gdGhpcy5uZWVkc0Jsb2NrO1xuICAgICAgICAgICAgaWYgKGJsb2NrVGFncy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICAgICAgICAgIHN5bmMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghdG9wLnR5cGUpXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmVlZHNCbG9jayA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghZG9tLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlYWZGYWxsYmFjayhkb20pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWRkQWxsKGRvbSk7XG4gICAgICAgICAgICBpZiAoc3luYylcbiAgICAgICAgICAgICAgICB0aGlzLnN5bmModG9wKTtcbiAgICAgICAgICAgIHRoaXMubmVlZHNCbG9jayA9IG9sZE5lZWRzQmxvY2s7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnRCeVJ1bGUoZG9tLCBydWxlLCBydWxlLmNvbnN1bWluZyA9PT0gZmFsc2UgPyBydWxlSUQgOiB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENhbGxlZCBmb3IgbGVhZiBET00gbm9kZXMgdGhhdCB3b3VsZCBvdGhlcndpc2UgYmUgaWdub3JlZFxuICAgIGxlYWZGYWxsYmFjayhkb20pIHtcbiAgICAgICAgaWYgKGRvbS5ub2RlTmFtZSA9PSBcIkJSXCIgJiYgdGhpcy50b3AudHlwZSAmJiB0aGlzLnRvcC50eXBlLmlubGluZUNvbnRlbnQpXG4gICAgICAgICAgICB0aGlzLmFkZFRleHROb2RlKGRvbS5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXFxuXCIpKTtcbiAgICB9XG4gICAgLy8gQ2FsbGVkIGZvciBpZ25vcmVkIG5vZGVzXG4gICAgaWdub3JlRmFsbGJhY2soZG9tKSB7XG4gICAgICAgIC8vIElnbm9yZWQgQlIgbm9kZXMgc2hvdWxkIGF0IGxlYXN0IGNyZWF0ZSBhbiBpbmxpbmUgY29udGV4dFxuICAgICAgICBpZiAoZG9tLm5vZGVOYW1lID09IFwiQlJcIiAmJiAoIXRoaXMudG9wLnR5cGUgfHwgIXRoaXMudG9wLnR5cGUuaW5saW5lQ29udGVudCkpXG4gICAgICAgICAgICB0aGlzLmZpbmRQbGFjZSh0aGlzLnBhcnNlci5zY2hlbWEudGV4dChcIi1cIikpO1xuICAgIH1cbiAgICAvLyBSdW4gYW55IHN0eWxlIHBhcnNlciBhc3NvY2lhdGVkIHdpdGggdGhlIG5vZGUncyBzdHlsZXMuIEVpdGhlclxuICAgIC8vIHJldHVybiBhbiBhcnJheSBvZiBtYXJrcywgb3IgbnVsbCB0byBpbmRpY2F0ZSBzb21lIG9mIHRoZSBzdHlsZXNcbiAgICAvLyBoYWQgYSBydWxlIHdpdGggYGlnbm9yZWAgc2V0LlxuICAgIHJlYWRTdHlsZXMoc3R5bGVzKSB7XG4gICAgICAgIGxldCBtYXJrcyA9IE1hcmsubm9uZTtcbiAgICAgICAgc3R5bGU6IGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBhZnRlciA9IHVuZGVmaW5lZDs7KSB7XG4gICAgICAgICAgICAgICAgbGV0IHJ1bGUgPSB0aGlzLnBhcnNlci5tYXRjaFN0eWxlKHN0eWxlc1tpXSwgc3R5bGVzW2kgKyAxXSwgdGhpcywgYWZ0ZXIpO1xuICAgICAgICAgICAgICAgIGlmICghcnVsZSlcbiAgICAgICAgICAgICAgICAgICAgY29udGludWUgc3R5bGU7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuaWdub3JlKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICBtYXJrcyA9IHRoaXMucGFyc2VyLnNjaGVtYS5tYXJrc1tydWxlLm1hcmtdLmNyZWF0ZShydWxlLmF0dHJzKS5hZGRUb1NldChtYXJrcyk7XG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuY29uc3VtaW5nID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgYWZ0ZXIgPSBydWxlO1xuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hcmtzO1xuICAgIH1cbiAgICAvLyBMb29rIHVwIGEgaGFuZGxlciBmb3IgdGhlIGdpdmVuIG5vZGUuIElmIG5vbmUgYXJlIGZvdW5kLCByZXR1cm5cbiAgICAvLyBmYWxzZS4gT3RoZXJ3aXNlLCBhcHBseSBpdCwgdXNlIGl0cyByZXR1cm4gdmFsdWUgdG8gZHJpdmUgdGhlIHdheVxuICAgIC8vIHRoZSBub2RlJ3MgY29udGVudCBpcyB3cmFwcGVkLCBhbmQgcmV0dXJuIHRydWUuXG4gICAgYWRkRWxlbWVudEJ5UnVsZShkb20sIHJ1bGUsIGNvbnRpbnVlQWZ0ZXIpIHtcbiAgICAgICAgbGV0IHN5bmMsIG5vZGVUeXBlLCBtYXJrO1xuICAgICAgICBpZiAocnVsZS5ub2RlKSB7XG4gICAgICAgICAgICBub2RlVHlwZSA9IHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tydWxlLm5vZGVdO1xuICAgICAgICAgICAgaWYgKCFub2RlVHlwZS5pc0xlYWYpIHtcbiAgICAgICAgICAgICAgICBzeW5jID0gdGhpcy5lbnRlcihub2RlVHlwZSwgcnVsZS5hdHRycyB8fCBudWxsLCBydWxlLnByZXNlcnZlV2hpdGVzcGFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICghdGhpcy5pbnNlcnROb2RlKG5vZGVUeXBlLmNyZWF0ZShydWxlLmF0dHJzKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlYWZGYWxsYmFjayhkb20pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IG1hcmtUeXBlID0gdGhpcy5wYXJzZXIuc2NoZW1hLm1hcmtzW3J1bGUubWFya107XG4gICAgICAgICAgICBtYXJrID0gbWFya1R5cGUuY3JlYXRlKHJ1bGUuYXR0cnMpO1xuICAgICAgICAgICAgdGhpcy5hZGRQZW5kaW5nTWFyayhtYXJrKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc3RhcnRJbiA9IHRoaXMudG9wO1xuICAgICAgICBpZiAobm9kZVR5cGUgJiYgbm9kZVR5cGUuaXNMZWFmKSB7XG4gICAgICAgICAgICB0aGlzLmZpbmRJbnNpZGUoZG9tKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb250aW51ZUFmdGVyKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEVsZW1lbnQoZG9tLCBjb250aW51ZUFmdGVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChydWxlLmdldENvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZmluZEluc2lkZShkb20pO1xuICAgICAgICAgICAgcnVsZS5nZXRDb250ZW50KGRvbSwgdGhpcy5wYXJzZXIuc2NoZW1hKS5mb3JFYWNoKG5vZGUgPT4gdGhpcy5pbnNlcnROb2RlKG5vZGUpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxldCBjb250ZW50RE9NID0gZG9tO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBydWxlLmNvbnRlbnRFbGVtZW50ID09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgY29udGVudERPTSA9IGRvbS5xdWVyeVNlbGVjdG9yKHJ1bGUuY29udGVudEVsZW1lbnQpO1xuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJ1bGUuY29udGVudEVsZW1lbnQgPT0gXCJmdW5jdGlvblwiKVxuICAgICAgICAgICAgICAgIGNvbnRlbnRET00gPSBydWxlLmNvbnRlbnRFbGVtZW50KGRvbSk7XG4gICAgICAgICAgICBlbHNlIGlmIChydWxlLmNvbnRlbnRFbGVtZW50KVxuICAgICAgICAgICAgICAgIGNvbnRlbnRET00gPSBydWxlLmNvbnRlbnRFbGVtZW50O1xuICAgICAgICAgICAgdGhpcy5maW5kQXJvdW5kKGRvbSwgY29udGVudERPTSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLmFkZEFsbChjb250ZW50RE9NKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3luYyAmJiB0aGlzLnN5bmMoc3RhcnRJbikpXG4gICAgICAgICAgICB0aGlzLm9wZW4tLTtcbiAgICAgICAgaWYgKG1hcmspXG4gICAgICAgICAgICB0aGlzLnJlbW92ZVBlbmRpbmdNYXJrKG1hcmssIHN0YXJ0SW4pO1xuICAgIH1cbiAgICAvLyBBZGQgYWxsIGNoaWxkIG5vZGVzIGJldHdlZW4gYHN0YXJ0SW5kZXhgIGFuZCBgZW5kSW5kZXhgIChvciB0aGVcbiAgICAvLyB3aG9sZSBub2RlLCBpZiBub3QgZ2l2ZW4pLiBJZiBgc3luY2AgaXMgcGFzc2VkLCB1c2UgaXQgdG9cbiAgICAvLyBzeW5jaHJvbml6ZSBhZnRlciBldmVyeSBibG9jayBlbGVtZW50LlxuICAgIGFkZEFsbChwYXJlbnQsIHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgIGxldCBpbmRleCA9IHN0YXJ0SW5kZXggfHwgMDtcbiAgICAgICAgZm9yIChsZXQgZG9tID0gc3RhcnRJbmRleCA/IHBhcmVudC5jaGlsZE5vZGVzW3N0YXJ0SW5kZXhdIDogcGFyZW50LmZpcnN0Q2hpbGQsIGVuZCA9IGVuZEluZGV4ID09IG51bGwgPyBudWxsIDogcGFyZW50LmNoaWxkTm9kZXNbZW5kSW5kZXhdOyBkb20gIT0gZW5kOyBkb20gPSBkb20ubmV4dFNpYmxpbmcsICsraW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuZmluZEF0UG9pbnQocGFyZW50LCBpbmRleCk7XG4gICAgICAgICAgICB0aGlzLmFkZERPTShkb20pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmluZEF0UG9pbnQocGFyZW50LCBpbmRleCk7XG4gICAgfVxuICAgIC8vIFRyeSB0byBmaW5kIGEgd2F5IHRvIGZpdCB0aGUgZ2l2ZW4gbm9kZSB0eXBlIGludG8gdGhlIGN1cnJlbnRcbiAgICAvLyBjb250ZXh0LiBNYXkgYWRkIGludGVybWVkaWF0ZSB3cmFwcGVycyBhbmQvb3IgbGVhdmUgbm9uLXNvbGlkXG4gICAgLy8gbm9kZXMgdGhhdCB3ZSdyZSBpbi5cbiAgICBmaW5kUGxhY2Uobm9kZSkge1xuICAgICAgICBsZXQgcm91dGUsIHN5bmM7XG4gICAgICAgIGZvciAobGV0IGRlcHRoID0gdGhpcy5vcGVuOyBkZXB0aCA+PSAwOyBkZXB0aC0tKSB7XG4gICAgICAgICAgICBsZXQgY3ggPSB0aGlzLm5vZGVzW2RlcHRoXTtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IGN4LmZpbmRXcmFwcGluZyhub2RlKTtcbiAgICAgICAgICAgIGlmIChmb3VuZCAmJiAoIXJvdXRlIHx8IHJvdXRlLmxlbmd0aCA+IGZvdW5kLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICByb3V0ZSA9IGZvdW5kO1xuICAgICAgICAgICAgICAgIHN5bmMgPSBjeDtcbiAgICAgICAgICAgICAgICBpZiAoIWZvdW5kLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3guc29saWQpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFyb3V0ZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy5zeW5jKHN5bmMpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvdXRlLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgdGhpcy5lbnRlcklubmVyKHJvdXRlW2ldLCBudWxsLCBmYWxzZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBUcnkgdG8gaW5zZXJ0IHRoZSBnaXZlbiBub2RlLCBhZGp1c3RpbmcgdGhlIGNvbnRleHQgd2hlbiBuZWVkZWQuXG4gICAgaW5zZXJ0Tm9kZShub2RlKSB7XG4gICAgICAgIGlmIChub2RlLmlzSW5saW5lICYmIHRoaXMubmVlZHNCbG9jayAmJiAhdGhpcy50b3AudHlwZSkge1xuICAgICAgICAgICAgbGV0IGJsb2NrID0gdGhpcy50ZXh0YmxvY2tGcm9tQ29udGV4dCgpO1xuICAgICAgICAgICAgaWYgKGJsb2NrKVxuICAgICAgICAgICAgICAgIHRoaXMuZW50ZXJJbm5lcihibG9jayk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZmluZFBsYWNlKG5vZGUpKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlRXh0cmEoKTtcbiAgICAgICAgICAgIGxldCB0b3AgPSB0aGlzLnRvcDtcbiAgICAgICAgICAgIHRvcC5hcHBseVBlbmRpbmcobm9kZS50eXBlKTtcbiAgICAgICAgICAgIGlmICh0b3AubWF0Y2gpXG4gICAgICAgICAgICAgICAgdG9wLm1hdGNoID0gdG9wLm1hdGNoLm1hdGNoVHlwZShub2RlLnR5cGUpO1xuICAgICAgICAgICAgbGV0IG1hcmtzID0gdG9wLmFjdGl2ZU1hcmtzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLm1hcmtzLmxlbmd0aDsgaSsrKVxuICAgICAgICAgICAgICAgIGlmICghdG9wLnR5cGUgfHwgdG9wLnR5cGUuYWxsb3dzTWFya1R5cGUobm9kZS5tYXJrc1tpXS50eXBlKSlcbiAgICAgICAgICAgICAgICAgICAgbWFya3MgPSBub2RlLm1hcmtzW2ldLmFkZFRvU2V0KG1hcmtzKTtcbiAgICAgICAgICAgIHRvcC5jb250ZW50LnB1c2gobm9kZS5tYXJrKG1hcmtzKSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIFRyeSB0byBzdGFydCBhIG5vZGUgb2YgdGhlIGdpdmVuIHR5cGUsIGFkanVzdGluZyB0aGUgY29udGV4dCB3aGVuXG4gICAgLy8gbmVjZXNzYXJ5LlxuICAgIGVudGVyKHR5cGUsIGF0dHJzLCBwcmVzZXJ2ZVdTKSB7XG4gICAgICAgIGxldCBvayA9IHRoaXMuZmluZFBsYWNlKHR5cGUuY3JlYXRlKGF0dHJzKSk7XG4gICAgICAgIGlmIChvaylcbiAgICAgICAgICAgIHRoaXMuZW50ZXJJbm5lcih0eXBlLCBhdHRycywgdHJ1ZSwgcHJlc2VydmVXUyk7XG4gICAgICAgIHJldHVybiBvaztcbiAgICB9XG4gICAgLy8gT3BlbiBhIG5vZGUgb2YgdGhlIGdpdmVuIHR5cGVcbiAgICBlbnRlcklubmVyKHR5cGUsIGF0dHJzID0gbnVsbCwgc29saWQgPSBmYWxzZSwgcHJlc2VydmVXUykge1xuICAgICAgICB0aGlzLmNsb3NlRXh0cmEoKTtcbiAgICAgICAgbGV0IHRvcCA9IHRoaXMudG9wO1xuICAgICAgICB0b3AuYXBwbHlQZW5kaW5nKHR5cGUpO1xuICAgICAgICB0b3AubWF0Y2ggPSB0b3AubWF0Y2ggJiYgdG9wLm1hdGNoLm1hdGNoVHlwZSh0eXBlKTtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB3c09wdGlvbnNGb3IodHlwZSwgcHJlc2VydmVXUywgdG9wLm9wdGlvbnMpO1xuICAgICAgICBpZiAoKHRvcC5vcHRpb25zICYgT1BUX09QRU5fTEVGVCkgJiYgdG9wLmNvbnRlbnQubGVuZ3RoID09IDApXG4gICAgICAgICAgICBvcHRpb25zIHw9IE9QVF9PUEVOX0xFRlQ7XG4gICAgICAgIHRoaXMubm9kZXMucHVzaChuZXcgTm9kZUNvbnRleHQodHlwZSwgYXR0cnMsIHRvcC5hY3RpdmVNYXJrcywgdG9wLnBlbmRpbmdNYXJrcywgc29saWQsIG51bGwsIG9wdGlvbnMpKTtcbiAgICAgICAgdGhpcy5vcGVuKys7XG4gICAgfVxuICAgIC8vIE1ha2Ugc3VyZSBhbGwgbm9kZXMgYWJvdmUgdGhpcy5vcGVuIGFyZSBmaW5pc2hlZCBhbmQgYWRkZWQgdG9cbiAgICAvLyB0aGVpciBwYXJlbnRzXG4gICAgY2xvc2VFeHRyYShvcGVuRW5kID0gZmFsc2UpIHtcbiAgICAgICAgbGV0IGkgPSB0aGlzLm5vZGVzLmxlbmd0aCAtIDE7XG4gICAgICAgIGlmIChpID4gdGhpcy5vcGVuKSB7XG4gICAgICAgICAgICBmb3IgKDsgaSA+IHRoaXMub3BlbjsgaS0tKVxuICAgICAgICAgICAgICAgIHRoaXMubm9kZXNbaSAtIDFdLmNvbnRlbnQucHVzaCh0aGlzLm5vZGVzW2ldLmZpbmlzaChvcGVuRW5kKSk7XG4gICAgICAgICAgICB0aGlzLm5vZGVzLmxlbmd0aCA9IHRoaXMub3BlbiArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluaXNoKCkge1xuICAgICAgICB0aGlzLm9wZW4gPSAwO1xuICAgICAgICB0aGlzLmNsb3NlRXh0cmEodGhpcy5pc09wZW4pO1xuICAgICAgICByZXR1cm4gdGhpcy5ub2Rlc1swXS5maW5pc2godGhpcy5pc09wZW4gfHwgdGhpcy5vcHRpb25zLnRvcE9wZW4pO1xuICAgIH1cbiAgICBzeW5jKHRvKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLm9wZW47IGkgPj0gMDsgaS0tKVxuICAgICAgICAgICAgaWYgKHRoaXMubm9kZXNbaV0gPT0gdG8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4gPSBpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBjdXJyZW50UG9zKCkge1xuICAgICAgICB0aGlzLmNsb3NlRXh0cmEoKTtcbiAgICAgICAgbGV0IHBvcyA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLm9wZW47IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9IHRoaXMubm9kZXNbaV0uY29udGVudDtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSBjb250ZW50Lmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKVxuICAgICAgICAgICAgICAgIHBvcyArPSBjb250ZW50W2pdLm5vZGVTaXplO1xuICAgICAgICAgICAgaWYgKGkpXG4gICAgICAgICAgICAgICAgcG9zKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICB9XG4gICAgZmluZEF0UG9pbnQocGFyZW50LCBvZmZzZXQpIHtcbiAgICAgICAgaWYgKHRoaXMuZmluZClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5maW5kLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZFtpXS5ub2RlID09IHBhcmVudCAmJiB0aGlzLmZpbmRbaV0ub2Zmc2V0ID09IG9mZnNldClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kW2ldLnBvcyA9IHRoaXMuY3VycmVudFBvcztcbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgZmluZEluc2lkZShwYXJlbnQpIHtcbiAgICAgICAgaWYgKHRoaXMuZmluZClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5maW5kLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZFtpXS5wb3MgPT0gbnVsbCAmJiBwYXJlbnQubm9kZVR5cGUgPT0gMSAmJiBwYXJlbnQuY29udGFpbnModGhpcy5maW5kW2ldLm5vZGUpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRbaV0ucG9zID0gdGhpcy5jdXJyZW50UG9zO1xuICAgICAgICAgICAgfVxuICAgIH1cbiAgICBmaW5kQXJvdW5kKHBhcmVudCwgY29udGVudCwgYmVmb3JlKSB7XG4gICAgICAgIGlmIChwYXJlbnQgIT0gY29udGVudCAmJiB0aGlzLmZpbmQpXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZmluZC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmRbaV0ucG9zID09IG51bGwgJiYgcGFyZW50Lm5vZGVUeXBlID09IDEgJiYgcGFyZW50LmNvbnRhaW5zKHRoaXMuZmluZFtpXS5ub2RlKSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zID0gY29udGVudC5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbih0aGlzLmZpbmRbaV0ubm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3MgJiAoYmVmb3JlID8gMiA6IDQpKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5maW5kW2ldLnBvcyA9IHRoaXMuY3VycmVudFBvcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgfVxuICAgIGZpbmRJblRleHQodGV4dE5vZGUpIHtcbiAgICAgICAgaWYgKHRoaXMuZmluZClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5maW5kLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluZFtpXS5ub2RlID09IHRleHROb2RlKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRbaV0ucG9zID0gdGhpcy5jdXJyZW50UG9zIC0gKHRleHROb2RlLm5vZGVWYWx1ZS5sZW5ndGggLSB0aGlzLmZpbmRbaV0ub2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICB9XG4gICAgLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBnaXZlbiBjb250ZXh0IHN0cmluZyBtYXRjaGVzIHRoaXMgY29udGV4dC5cbiAgICBtYXRjaGVzQ29udGV4dChjb250ZXh0KSB7XG4gICAgICAgIGlmIChjb250ZXh0LmluZGV4T2YoXCJ8XCIpID4gLTEpXG4gICAgICAgICAgICByZXR1cm4gY29udGV4dC5zcGxpdCgvXFxzKlxcfFxccyovKS5zb21lKHRoaXMubWF0Y2hlc0NvbnRleHQsIHRoaXMpO1xuICAgICAgICBsZXQgcGFydHMgPSBjb250ZXh0LnNwbGl0KFwiL1wiKTtcbiAgICAgICAgbGV0IG9wdGlvbiA9IHRoaXMub3B0aW9ucy5jb250ZXh0O1xuICAgICAgICBsZXQgdXNlUm9vdCA9ICF0aGlzLmlzT3BlbiAmJiAoIW9wdGlvbiB8fCBvcHRpb24ucGFyZW50LnR5cGUgPT0gdGhpcy5ub2Rlc1swXS50eXBlKTtcbiAgICAgICAgbGV0IG1pbkRlcHRoID0gLShvcHRpb24gPyBvcHRpb24uZGVwdGggKyAxIDogMCkgKyAodXNlUm9vdCA/IDAgOiAxKTtcbiAgICAgICAgbGV0IG1hdGNoID0gKGksIGRlcHRoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBsZXQgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0ID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gcGFydHMubGVuZ3RoIC0gMSB8fCBpID09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICg7IGRlcHRoID49IG1pbkRlcHRoOyBkZXB0aC0tKVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKGkgLSAxLCBkZXB0aCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuZXh0ID0gZGVwdGggPiAwIHx8IChkZXB0aCA9PSAwICYmIHVzZVJvb3QpID8gdGhpcy5ub2Rlc1tkZXB0aF0udHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBvcHRpb24gJiYgZGVwdGggPj0gbWluRGVwdGggPyBvcHRpb24ubm9kZShkZXB0aCAtIG1pbkRlcHRoKS50eXBlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5leHQgfHwgKG5leHQubmFtZSAhPSBwYXJ0ICYmIG5leHQuZ3JvdXBzLmluZGV4T2YocGFydCkgPT0gLTEpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBkZXB0aC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbWF0Y2gocGFydHMubGVuZ3RoIC0gMSwgdGhpcy5vcGVuKTtcbiAgICB9XG4gICAgdGV4dGJsb2NrRnJvbUNvbnRleHQoKSB7XG4gICAgICAgIGxldCAkY29udGV4dCA9IHRoaXMub3B0aW9ucy5jb250ZXh0O1xuICAgICAgICBpZiAoJGNvbnRleHQpXG4gICAgICAgICAgICBmb3IgKGxldCBkID0gJGNvbnRleHQuZGVwdGg7IGQgPj0gMDsgZC0tKSB7XG4gICAgICAgICAgICAgICAgbGV0IGRlZmx0ID0gJGNvbnRleHQubm9kZShkKS5jb250ZW50TWF0Y2hBdCgkY29udGV4dC5pbmRleEFmdGVyKGQpKS5kZWZhdWx0VHlwZTtcbiAgICAgICAgICAgICAgICBpZiAoZGVmbHQgJiYgZGVmbHQuaXNUZXh0YmxvY2sgJiYgZGVmbHQuZGVmYXVsdEF0dHJzKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmbHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IG5hbWUgaW4gdGhpcy5wYXJzZXIuc2NoZW1hLm5vZGVzKSB7XG4gICAgICAgICAgICBsZXQgdHlwZSA9IHRoaXMucGFyc2VyLnNjaGVtYS5ub2Rlc1tuYW1lXTtcbiAgICAgICAgICAgIGlmICh0eXBlLmlzVGV4dGJsb2NrICYmIHR5cGUuZGVmYXVsdEF0dHJzKVxuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNYXJrKG1hcmspIHtcbiAgICAgICAgbGV0IGZvdW5kID0gZmluZFNhbWVNYXJrSW5TZXQobWFyaywgdGhpcy50b3AucGVuZGluZ01hcmtzKTtcbiAgICAgICAgaWYgKGZvdW5kKVxuICAgICAgICAgICAgdGhpcy50b3Auc3Rhc2hNYXJrcy5wdXNoKGZvdW5kKTtcbiAgICAgICAgdGhpcy50b3AucGVuZGluZ01hcmtzID0gbWFyay5hZGRUb1NldCh0aGlzLnRvcC5wZW5kaW5nTWFya3MpO1xuICAgIH1cbiAgICByZW1vdmVQZW5kaW5nTWFyayhtYXJrLCB1cHRvKSB7XG4gICAgICAgIGZvciAobGV0IGRlcHRoID0gdGhpcy5vcGVuOyBkZXB0aCA+PSAwOyBkZXB0aC0tKSB7XG4gICAgICAgICAgICBsZXQgbGV2ZWwgPSB0aGlzLm5vZGVzW2RlcHRoXTtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IGxldmVsLnBlbmRpbmdNYXJrcy5sYXN0SW5kZXhPZihtYXJrKTtcbiAgICAgICAgICAgIGlmIChmb3VuZCA+IC0xKSB7XG4gICAgICAgICAgICAgICAgbGV2ZWwucGVuZGluZ01hcmtzID0gbWFyay5yZW1vdmVGcm9tU2V0KGxldmVsLnBlbmRpbmdNYXJrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXZlbC5hY3RpdmVNYXJrcyA9IG1hcmsucmVtb3ZlRnJvbVNldChsZXZlbC5hY3RpdmVNYXJrcyk7XG4gICAgICAgICAgICAgICAgbGV0IHN0YXNoTWFyayA9IGxldmVsLnBvcEZyb21TdGFzaE1hcmsobWFyayk7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXNoTWFyayAmJiBsZXZlbC50eXBlICYmIGxldmVsLnR5cGUuYWxsb3dzTWFya1R5cGUoc3Rhc2hNYXJrLnR5cGUpKVxuICAgICAgICAgICAgICAgICAgICBsZXZlbC5hY3RpdmVNYXJrcyA9IHN0YXNoTWFyay5hZGRUb1NldChsZXZlbC5hY3RpdmVNYXJrcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobGV2ZWwgPT0gdXB0bylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIEtsdWRnZSB0byB3b3JrIGFyb3VuZCBkaXJlY3RseSBuZXN0ZWQgbGlzdCBub2RlcyBwcm9kdWNlZCBieSBzb21lXG4vLyB0b29scyBhbmQgYWxsb3dlZCBieSBicm93c2VycyB0byBtZWFuIHRoYXQgdGhlIG5lc3RlZCBsaXN0IGlzXG4vLyBhY3R1YWxseSBwYXJ0IG9mIHRoZSBsaXN0IGl0ZW0gYWJvdmUgaXQuXG5mdW5jdGlvbiBub3JtYWxpemVMaXN0KGRvbSkge1xuICAgIGZvciAobGV0IGNoaWxkID0gZG9tLmZpcnN0Q2hpbGQsIHByZXZJdGVtID0gbnVsbDsgY2hpbGQ7IGNoaWxkID0gY2hpbGQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgbGV0IG5hbWUgPSBjaGlsZC5ub2RlVHlwZSA9PSAxID8gY2hpbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA6IG51bGw7XG4gICAgICAgIGlmIChuYW1lICYmIGxpc3RUYWdzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHByZXZJdGVtKSB7XG4gICAgICAgICAgICBwcmV2SXRlbS5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgICAgICAgICBjaGlsZCA9IHByZXZJdGVtO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5hbWUgPT0gXCJsaVwiKSB7XG4gICAgICAgICAgICBwcmV2SXRlbSA9IGNoaWxkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgIHByZXZJdGVtID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIEFwcGx5IGEgQ1NTIHNlbGVjdG9yLlxuZnVuY3Rpb24gbWF0Y2hlcyhkb20sIHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIChkb20ubWF0Y2hlcyB8fCBkb20ubXNNYXRjaGVzU2VsZWN0b3IgfHwgZG9tLndlYmtpdE1hdGNoZXNTZWxlY3RvciB8fCBkb20ubW96TWF0Y2hlc1NlbGVjdG9yKS5jYWxsKGRvbSwgc2VsZWN0b3IpO1xufVxuLy8gVG9rZW5pemUgYSBzdHlsZSBhdHRyaWJ1dGUgaW50byBwcm9wZXJ0eS92YWx1ZSBwYWlycy5cbmZ1bmN0aW9uIHBhcnNlU3R5bGVzKHN0eWxlKSB7XG4gICAgbGV0IHJlID0gL1xccyooW1xcdy1dKylcXHMqOlxccyooW147XSspL2csIG0sIHJlc3VsdCA9IFtdO1xuICAgIHdoaWxlIChtID0gcmUuZXhlYyhzdHlsZSkpXG4gICAgICAgIHJlc3VsdC5wdXNoKG1bMV0sIG1bMl0udHJpbSgpKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gY29weShvYmopIHtcbiAgICBsZXQgY29weSA9IHt9O1xuICAgIGZvciAobGV0IHByb3AgaW4gb2JqKVxuICAgICAgICBjb3B5W3Byb3BdID0gb2JqW3Byb3BdO1xuICAgIHJldHVybiBjb3B5O1xufVxuLy8gVXNlZCB3aGVuIGZpbmRpbmcgYSBtYXJrIGF0IHRoZSB0b3AgbGV2ZWwgb2YgYSBmcmFnbWVudCBwYXJzZS5cbi8vIENoZWNrcyB3aGV0aGVyIGl0IHdvdWxkIGJlIHJlYXNvbmFibGUgdG8gYXBwbHkgYSBnaXZlbiBtYXJrIHR5cGUgdG9cbi8vIGEgZ2l2ZW4gbm9kZSwgYnkgbG9va2luZyBhdCB0aGUgd2F5IHRoZSBtYXJrIG9jY3VycyBpbiB0aGUgc2NoZW1hLlxuZnVuY3Rpb24gbWFya01heUFwcGx5KG1hcmtUeXBlLCBub2RlVHlwZSkge1xuICAgIGxldCBub2RlcyA9IG5vZGVUeXBlLnNjaGVtYS5ub2RlcztcbiAgICBmb3IgKGxldCBuYW1lIGluIG5vZGVzKSB7XG4gICAgICAgIGxldCBwYXJlbnQgPSBub2Rlc1tuYW1lXTtcbiAgICAgICAgaWYgKCFwYXJlbnQuYWxsb3dzTWFya1R5cGUobWFya1R5cGUpKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGxldCBzZWVuID0gW10sIHNjYW4gPSAobWF0Y2gpID0+IHtcbiAgICAgICAgICAgIHNlZW4ucHVzaChtYXRjaCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hdGNoLmVkZ2VDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHsgdHlwZSwgbmV4dCB9ID0gbWF0Y2guZWRnZShpKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PSBub2RlVHlwZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKHNlZW4uaW5kZXhPZihuZXh0KSA8IDAgJiYgc2NhbihuZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzY2FuKHBhcmVudC5jb250ZW50TWF0Y2gpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZnVuY3Rpb24gZmluZFNhbWVNYXJrSW5TZXQobWFyaywgc2V0KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKG1hcmsuZXEoc2V0W2ldKSlcbiAgICAgICAgICAgIHJldHVybiBzZXRbaV07XG4gICAgfVxufVxuXG4vKipcbkEgRE9NIHNlcmlhbGl6ZXIga25vd3MgaG93IHRvIGNvbnZlcnQgUHJvc2VNaXJyb3Igbm9kZXMgYW5kXG5tYXJrcyBvZiB2YXJpb3VzIHR5cGVzIHRvIERPTSBub2Rlcy5cbiovXG5jbGFzcyBET01TZXJpYWxpemVyIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBzZXJpYWxpemVyLiBgbm9kZXNgIHNob3VsZCBtYXAgbm9kZSBuYW1lcyB0byBmdW5jdGlvbnNcbiAgICB0aGF0IHRha2UgYSBub2RlIGFuZCByZXR1cm4gYSBkZXNjcmlwdGlvbiBvZiB0aGUgY29ycmVzcG9uZGluZ1xuICAgIERPTS4gYG1hcmtzYCBkb2VzIHRoZSBzYW1lIGZvciBtYXJrIG5hbWVzLCBidXQgYWxzbyBnZXRzIGFuXG4gICAgYXJndW1lbnQgdGhhdCB0ZWxscyBpdCB3aGV0aGVyIHRoZSBtYXJrJ3MgY29udGVudCBpcyBibG9jayBvclxuICAgIGlubGluZSBjb250ZW50IChmb3IgdHlwaWNhbCB1c2UsIGl0J2xsIGFsd2F5cyBiZSBpbmxpbmUpLiBBIG1hcmtcbiAgICBzZXJpYWxpemVyIG1heSBiZSBgbnVsbGAgdG8gaW5kaWNhdGUgdGhhdCBtYXJrcyBvZiB0aGF0IHR5cGVcbiAgICBzaG91bGQgbm90IGJlIHNlcmlhbGl6ZWQuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgbm9kZSBzZXJpYWxpemF0aW9uIGZ1bmN0aW9ucy5cbiAgICAqL1xuICAgIG5vZGVzLCBcbiAgICAvKipcbiAgICBUaGUgbWFyayBzZXJpYWxpemF0aW9uIGZ1bmN0aW9ucy5cbiAgICAqL1xuICAgIG1hcmtzKSB7XG4gICAgICAgIHRoaXMubm9kZXMgPSBub2RlcztcbiAgICAgICAgdGhpcy5tYXJrcyA9IG1hcmtzO1xuICAgIH1cbiAgICAvKipcbiAgICBTZXJpYWxpemUgdGhlIGNvbnRlbnQgb2YgdGhpcyBmcmFnbWVudCB0byBhIERPTSBmcmFnbWVudC4gV2hlblxuICAgIG5vdCBpbiB0aGUgYnJvd3NlciwgdGhlIGBkb2N1bWVudGAgb3B0aW9uLCBjb250YWluaW5nIGEgRE9NXG4gICAgZG9jdW1lbnQsIHNob3VsZCBiZSBwYXNzZWQgc28gdGhhdCB0aGUgc2VyaWFsaXplciBjYW4gY3JlYXRlXG4gICAgbm9kZXMuXG4gICAgKi9cbiAgICBzZXJpYWxpemVGcmFnbWVudChmcmFnbWVudCwgb3B0aW9ucyA9IHt9LCB0YXJnZXQpIHtcbiAgICAgICAgaWYgKCF0YXJnZXQpXG4gICAgICAgICAgICB0YXJnZXQgPSBkb2Mob3B0aW9ucykuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBsZXQgdG9wID0gdGFyZ2V0LCBhY3RpdmUgPSBbXTtcbiAgICAgICAgZnJhZ21lbnQuZm9yRWFjaChub2RlID0+IHtcbiAgICAgICAgICAgIGlmIChhY3RpdmUubGVuZ3RoIHx8IG5vZGUubWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGtlZXAgPSAwLCByZW5kZXJlZCA9IDA7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGtlZXAgPCBhY3RpdmUubGVuZ3RoICYmIHJlbmRlcmVkIDwgbm9kZS5tYXJrcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5leHQgPSBub2RlLm1hcmtzW3JlbmRlcmVkXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1hcmtzW25leHQudHlwZS5uYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWQrKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghbmV4dC5lcShhY3RpdmVba2VlcF1bMF0pIHx8IG5leHQudHlwZS5zcGVjLnNwYW5uaW5nID09PSBmYWxzZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBrZWVwKys7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHdoaWxlIChrZWVwIDwgYWN0aXZlLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdG9wID0gYWN0aXZlLnBvcCgpWzFdO1xuICAgICAgICAgICAgICAgIHdoaWxlIChyZW5kZXJlZCA8IG5vZGUubWFya3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhZGQgPSBub2RlLm1hcmtzW3JlbmRlcmVkKytdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWFya0RPTSA9IHRoaXMuc2VyaWFsaXplTWFyayhhZGQsIG5vZGUuaXNJbmxpbmUsIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWFya0RPTSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlLnB1c2goW2FkZCwgdG9wXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3AuYXBwZW5kQ2hpbGQobWFya0RPTS5kb20pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gbWFya0RPTS5jb250ZW50RE9NIHx8IG1hcmtET00uZG9tO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG9wLmFwcGVuZENoaWxkKHRoaXMuc2VyaWFsaXplTm9kZUlubmVyKG5vZGUsIG9wdGlvbnMpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc2VyaWFsaXplTm9kZUlubmVyKG5vZGUsIG9wdGlvbnMpIHtcbiAgICAgICAgbGV0IHsgZG9tLCBjb250ZW50RE9NIH0gPSBET01TZXJpYWxpemVyLnJlbmRlclNwZWMoZG9jKG9wdGlvbnMpLCB0aGlzLm5vZGVzW25vZGUudHlwZS5uYW1lXShub2RlKSk7XG4gICAgICAgIGlmIChjb250ZW50RE9NKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5pc0xlYWYpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJDb250ZW50IGhvbGUgbm90IGFsbG93ZWQgaW4gYSBsZWFmIG5vZGUgc3BlY1wiKTtcbiAgICAgICAgICAgIHRoaXMuc2VyaWFsaXplRnJhZ21lbnQobm9kZS5jb250ZW50LCBvcHRpb25zLCBjb250ZW50RE9NKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9tO1xuICAgIH1cbiAgICAvKipcbiAgICBTZXJpYWxpemUgdGhpcyBub2RlIHRvIGEgRE9NIG5vZGUuIFRoaXMgY2FuIGJlIHVzZWZ1bCB3aGVuIHlvdVxuICAgIG5lZWQgdG8gc2VyaWFsaXplIGEgcGFydCBvZiBhIGRvY3VtZW50LCBhcyBvcHBvc2VkIHRvIHRoZSB3aG9sZVxuICAgIGRvY3VtZW50LiBUbyBzZXJpYWxpemUgYSB3aG9sZSBkb2N1bWVudCwgdXNlXG4gICAgW2BzZXJpYWxpemVGcmFnbWVudGBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5ET01TZXJpYWxpemVyLnNlcmlhbGl6ZUZyYWdtZW50KSBvblxuICAgIGl0cyBbY29udGVudF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGUuY29udGVudCkuXG4gICAgKi9cbiAgICBzZXJpYWxpemVOb2RlKG5vZGUsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBsZXQgZG9tID0gdGhpcy5zZXJpYWxpemVOb2RlSW5uZXIobm9kZSwgb3B0aW9ucyk7XG4gICAgICAgIGZvciAobGV0IGkgPSBub2RlLm1hcmtzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBsZXQgd3JhcCA9IHRoaXMuc2VyaWFsaXplTWFyayhub2RlLm1hcmtzW2ldLCBub2RlLmlzSW5saW5lLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGlmICh3cmFwKSB7XG4gICAgICAgICAgICAgICAgKHdyYXAuY29udGVudERPTSB8fCB3cmFwLmRvbSkuYXBwZW5kQ2hpbGQoZG9tKTtcbiAgICAgICAgICAgICAgICBkb20gPSB3cmFwLmRvbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZG9tO1xuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHNlcmlhbGl6ZU1hcmsobWFyaywgaW5saW5lLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgbGV0IHRvRE9NID0gdGhpcy5tYXJrc1ttYXJrLnR5cGUubmFtZV07XG4gICAgICAgIHJldHVybiB0b0RPTSAmJiBET01TZXJpYWxpemVyLnJlbmRlclNwZWMoZG9jKG9wdGlvbnMpLCB0b0RPTShtYXJrLCBpbmxpbmUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVuZGVyIGFuIFtvdXRwdXQgc3BlY10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLkRPTU91dHB1dFNwZWMpIHRvIGEgRE9NIG5vZGUuIElmXG4gICAgdGhlIHNwZWMgaGFzIGEgaG9sZSAoemVybykgaW4gaXQsIGBjb250ZW50RE9NYCB3aWxsIHBvaW50IGF0IHRoZVxuICAgIG5vZGUgd2l0aCB0aGUgaG9sZS5cbiAgICAqL1xuICAgIHN0YXRpYyByZW5kZXJTcGVjKGRvYywgc3RydWN0dXJlLCB4bWxOUyA9IG51bGwpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzdHJ1Y3R1cmUgPT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgIHJldHVybiB7IGRvbTogZG9jLmNyZWF0ZVRleHROb2RlKHN0cnVjdHVyZSkgfTtcbiAgICAgICAgaWYgKHN0cnVjdHVyZS5ub2RlVHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHsgZG9tOiBzdHJ1Y3R1cmUgfTtcbiAgICAgICAgaWYgKHN0cnVjdHVyZS5kb20gJiYgc3RydWN0dXJlLmRvbS5ub2RlVHlwZSAhPSBudWxsKVxuICAgICAgICAgICAgcmV0dXJuIHN0cnVjdHVyZTtcbiAgICAgICAgbGV0IHRhZ05hbWUgPSBzdHJ1Y3R1cmVbMF0sIHNwYWNlID0gdGFnTmFtZS5pbmRleE9mKFwiIFwiKTtcbiAgICAgICAgaWYgKHNwYWNlID4gMCkge1xuICAgICAgICAgICAgeG1sTlMgPSB0YWdOYW1lLnNsaWNlKDAsIHNwYWNlKTtcbiAgICAgICAgICAgIHRhZ05hbWUgPSB0YWdOYW1lLnNsaWNlKHNwYWNlICsgMSk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGNvbnRlbnRET007XG4gICAgICAgIGxldCBkb20gPSAoeG1sTlMgPyBkb2MuY3JlYXRlRWxlbWVudE5TKHhtbE5TLCB0YWdOYW1lKSA6IGRvYy5jcmVhdGVFbGVtZW50KHRhZ05hbWUpKTtcbiAgICAgICAgbGV0IGF0dHJzID0gc3RydWN0dXJlWzFdLCBzdGFydCA9IDE7XG4gICAgICAgIGlmIChhdHRycyAmJiB0eXBlb2YgYXR0cnMgPT0gXCJvYmplY3RcIiAmJiBhdHRycy5ub2RlVHlwZSA9PSBudWxsICYmICFBcnJheS5pc0FycmF5KGF0dHJzKSkge1xuICAgICAgICAgICAgc3RhcnQgPSAyO1xuICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBhdHRycylcbiAgICAgICAgICAgICAgICBpZiAoYXR0cnNbbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc3BhY2UgPSBuYW1lLmluZGV4T2YoXCIgXCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3BhY2UgPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9tLnNldEF0dHJpYnV0ZU5TKG5hbWUuc2xpY2UoMCwgc3BhY2UpLCBuYW1lLnNsaWNlKHNwYWNlICsgMSksIGF0dHJzW25hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9tLnNldEF0dHJpYnV0ZShuYW1lLCBhdHRyc1tuYW1lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IHN0cnVjdHVyZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IGNoaWxkID0gc3RydWN0dXJlW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkID09PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPCBzdHJ1Y3R1cmUubGVuZ3RoIC0gMSB8fCBpID4gc3RhcnQpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQ29udGVudCBob2xlIG11c3QgYmUgdGhlIG9ubHkgY2hpbGQgb2YgaXRzIHBhcmVudCBub2RlXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7IGRvbSwgY29udGVudERPTTogZG9tIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgeyBkb206IGlubmVyLCBjb250ZW50RE9NOiBpbm5lckNvbnRlbnQgfSA9IERPTVNlcmlhbGl6ZXIucmVuZGVyU3BlYyhkb2MsIGNoaWxkLCB4bWxOUyk7XG4gICAgICAgICAgICAgICAgZG9tLmFwcGVuZENoaWxkKGlubmVyKTtcbiAgICAgICAgICAgICAgICBpZiAoaW5uZXJDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50RE9NKVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJNdWx0aXBsZSBjb250ZW50IGhvbGVzXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50RE9NID0gaW5uZXJDb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkb20sIGNvbnRlbnRET00gfTtcbiAgICB9XG4gICAgLyoqXG4gICAgQnVpbGQgYSBzZXJpYWxpemVyIHVzaW5nIHRoZSBbYHRvRE9NYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLnRvRE9NKVxuICAgIHByb3BlcnRpZXMgaW4gYSBzY2hlbWEncyBub2RlIGFuZCBtYXJrIHNwZWNzLlxuICAgICovXG4gICAgc3RhdGljIGZyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiBzY2hlbWEuY2FjaGVkLmRvbVNlcmlhbGl6ZXIgfHxcbiAgICAgICAgICAgIChzY2hlbWEuY2FjaGVkLmRvbVNlcmlhbGl6ZXIgPSBuZXcgRE9NU2VyaWFsaXplcih0aGlzLm5vZGVzRnJvbVNjaGVtYShzY2hlbWEpLCB0aGlzLm1hcmtzRnJvbVNjaGVtYShzY2hlbWEpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIEdhdGhlciB0aGUgc2VyaWFsaXplcnMgaW4gYSBzY2hlbWEncyBub2RlIHNwZWNzIGludG8gYW4gb2JqZWN0LlxuICAgIFRoaXMgY2FuIGJlIHVzZWZ1bCBhcyBhIGJhc2UgdG8gYnVpbGQgYSBjdXN0b20gc2VyaWFsaXplciBmcm9tLlxuICAgICovXG4gICAgc3RhdGljIG5vZGVzRnJvbVNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IGdhdGhlclRvRE9NKHNjaGVtYS5ub2Rlcyk7XG4gICAgICAgIGlmICghcmVzdWx0LnRleHQpXG4gICAgICAgICAgICByZXN1bHQudGV4dCA9IG5vZGUgPT4gbm9kZS50ZXh0O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICBHYXRoZXIgdGhlIHNlcmlhbGl6ZXJzIGluIGEgc2NoZW1hJ3MgbWFyayBzcGVjcyBpbnRvIGFuIG9iamVjdC5cbiAgICAqL1xuICAgIHN0YXRpYyBtYXJrc0Zyb21TY2hlbWEoc2NoZW1hKSB7XG4gICAgICAgIHJldHVybiBnYXRoZXJUb0RPTShzY2hlbWEubWFya3MpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdhdGhlclRvRE9NKG9iaikge1xuICAgIGxldCByZXN1bHQgPSB7fTtcbiAgICBmb3IgKGxldCBuYW1lIGluIG9iaikge1xuICAgICAgICBsZXQgdG9ET00gPSBvYmpbbmFtZV0uc3BlYy50b0RPTTtcbiAgICAgICAgaWYgKHRvRE9NKVxuICAgICAgICAgICAgcmVzdWx0W25hbWVdID0gdG9ET007XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBkb2Mob3B0aW9ucykge1xuICAgIHJldHVybiBvcHRpb25zLmRvY3VtZW50IHx8IHdpbmRvdy5kb2N1bWVudDtcbn1cblxuZXhwb3J0IHsgQ29udGVudE1hdGNoLCBET01QYXJzZXIsIERPTVNlcmlhbGl6ZXIsIEZyYWdtZW50LCBNYXJrLCBNYXJrVHlwZSwgTm9kZSwgTm9kZVJhbmdlLCBOb2RlVHlwZSwgUmVwbGFjZUVycm9yLCBSZXNvbHZlZFBvcywgU2NoZW1hLCBTbGljZSB9O1xuIiwiaW1wb3J0IHsgZmluZFdyYXBwaW5nLCBSZXBsYWNlQXJvdW5kU3RlcCwgY2FuU3BsaXQsIGxpZnRUYXJnZXQgfSBmcm9tICdwcm9zZW1pcnJvci10cmFuc2Zvcm0nO1xuaW1wb3J0IHsgTm9kZVJhbmdlLCBGcmFnbWVudCwgU2xpY2UgfSBmcm9tICdwcm9zZW1pcnJvci1tb2RlbCc7XG5pbXBvcnQgeyBTZWxlY3Rpb24gfSBmcm9tICdwcm9zZW1pcnJvci1zdGF0ZSc7XG5cbmNvbnN0IG9sRE9NID0gW1wib2xcIiwgMF0sIHVsRE9NID0gW1widWxcIiwgMF0sIGxpRE9NID0gW1wibGlcIiwgMF07XG4vKipcbkFuIG9yZGVyZWQgbGlzdCBbbm9kZSBzcGVjXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMpLiBIYXMgYSBzaW5nbGVcbmF0dHJpYnV0ZSwgYG9yZGVyYCwgd2hpY2ggZGV0ZXJtaW5lcyB0aGUgbnVtYmVyIGF0IHdoaWNoIHRoZSBsaXN0XG5zdGFydHMgY291bnRpbmcsIGFuZCBkZWZhdWx0cyB0byAxLiBSZXByZXNlbnRlZCBhcyBhbiBgPG9sPmBcbmVsZW1lbnQuXG4qL1xuY29uc3Qgb3JkZXJlZExpc3QgPSB7XG4gICAgYXR0cnM6IHsgb3JkZXI6IHsgZGVmYXVsdDogMSB9IH0sXG4gICAgcGFyc2VET006IFt7IHRhZzogXCJvbFwiLCBnZXRBdHRycyhkb20pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyBvcmRlcjogZG9tLmhhc0F0dHJpYnV0ZShcInN0YXJ0XCIpID8gK2RvbS5nZXRBdHRyaWJ1dGUoXCJzdGFydFwiKSA6IDEgfTtcbiAgICAgICAgICAgIH0gfV0sXG4gICAgdG9ET00obm9kZSkge1xuICAgICAgICByZXR1cm4gbm9kZS5hdHRycy5vcmRlciA9PSAxID8gb2xET00gOiBbXCJvbFwiLCB7IHN0YXJ0OiBub2RlLmF0dHJzLm9yZGVyIH0sIDBdO1xuICAgIH1cbn07XG4vKipcbkEgYnVsbGV0IGxpc3Qgbm9kZSBzcGVjLCByZXByZXNlbnRlZCBpbiB0aGUgRE9NIGFzIGA8dWw+YC5cbiovXG5jb25zdCBidWxsZXRMaXN0ID0ge1xuICAgIHBhcnNlRE9NOiBbeyB0YWc6IFwidWxcIiB9XSxcbiAgICB0b0RPTSgpIHsgcmV0dXJuIHVsRE9NOyB9XG59O1xuLyoqXG5BIGxpc3QgaXRlbSAoYDxsaT5gKSBzcGVjLlxuKi9cbmNvbnN0IGxpc3RJdGVtID0ge1xuICAgIHBhcnNlRE9NOiBbeyB0YWc6IFwibGlcIiB9XSxcbiAgICB0b0RPTSgpIHsgcmV0dXJuIGxpRE9NOyB9LFxuICAgIGRlZmluaW5nOiB0cnVlXG59O1xuZnVuY3Rpb24gYWRkKG9iaiwgcHJvcHMpIHtcbiAgICBsZXQgY29weSA9IHt9O1xuICAgIGZvciAobGV0IHByb3AgaW4gb2JqKVxuICAgICAgICBjb3B5W3Byb3BdID0gb2JqW3Byb3BdO1xuICAgIGZvciAobGV0IHByb3AgaW4gcHJvcHMpXG4gICAgICAgIGNvcHlbcHJvcF0gPSBwcm9wc1twcm9wXTtcbiAgICByZXR1cm4gY29weTtcbn1cbi8qKlxuQ29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGFkZGluZyBsaXN0LXJlbGF0ZWQgbm9kZSB0eXBlcyB0byBhIG1hcFxuc3BlY2lmeWluZyB0aGUgbm9kZXMgZm9yIGEgc2NoZW1hLiBBZGRzXG5bYG9yZGVyZWRMaXN0YF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3NjaGVtYS1saXN0Lm9yZGVyZWRMaXN0KSBhcyBgXCJvcmRlcmVkX2xpc3RcImAsXG5bYGJ1bGxldExpc3RgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc2NoZW1hLWxpc3QuYnVsbGV0TGlzdCkgYXMgYFwiYnVsbGV0X2xpc3RcImAsIGFuZFxuW2BsaXN0SXRlbWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzY2hlbWEtbGlzdC5saXN0SXRlbSkgYXMgYFwibGlzdF9pdGVtXCJgLlxuXG5gaXRlbUNvbnRlbnRgIGRldGVybWluZXMgdGhlIGNvbnRlbnQgZXhwcmVzc2lvbiBmb3IgdGhlIGxpc3QgaXRlbXMuXG5JZiB5b3Ugd2FudCB0aGUgY29tbWFuZHMgZGVmaW5lZCBpbiB0aGlzIG1vZHVsZSB0byBhcHBseSB0byB5b3VyXG5saXN0IHN0cnVjdHVyZSwgaXQgc2hvdWxkIGhhdmUgYSBzaGFwZSBsaWtlIGBcInBhcmFncmFwaCBibG9jaypcImAgb3JcbmBcInBhcmFncmFwaCAob3JkZXJlZF9saXN0IHwgYnVsbGV0X2xpc3QpKlwiYC4gYGxpc3RHcm91cGAgY2FuIGJlXG5naXZlbiB0byBhc3NpZ24gYSBncm91cCBuYW1lIHRvIHRoZSBsaXN0IG5vZGUgdHlwZXMsIGZvciBleGFtcGxlXG5gXCJibG9ja1wiYC5cbiovXG5mdW5jdGlvbiBhZGRMaXN0Tm9kZXMobm9kZXMsIGl0ZW1Db250ZW50LCBsaXN0R3JvdXApIHtcbiAgICByZXR1cm4gbm9kZXMuYXBwZW5kKHtcbiAgICAgICAgb3JkZXJlZF9saXN0OiBhZGQob3JkZXJlZExpc3QsIHsgY29udGVudDogXCJsaXN0X2l0ZW0rXCIsIGdyb3VwOiBsaXN0R3JvdXAgfSksXG4gICAgICAgIGJ1bGxldF9saXN0OiBhZGQoYnVsbGV0TGlzdCwgeyBjb250ZW50OiBcImxpc3RfaXRlbStcIiwgZ3JvdXA6IGxpc3RHcm91cCB9KSxcbiAgICAgICAgbGlzdF9pdGVtOiBhZGQobGlzdEl0ZW0sIHsgY29udGVudDogaXRlbUNvbnRlbnQgfSlcbiAgICB9KTtcbn1cbi8qKlxuUmV0dXJucyBhIGNvbW1hbmQgZnVuY3Rpb24gdGhhdCB3cmFwcyB0aGUgc2VsZWN0aW9uIGluIGEgbGlzdCB3aXRoXG50aGUgZ2l2ZW4gdHlwZSBhbiBhdHRyaWJ1dGVzLiBJZiBgZGlzcGF0Y2hgIGlzIG51bGwsIG9ubHkgcmV0dXJuIGFcbnZhbHVlIHRvIGluZGljYXRlIHdoZXRoZXIgdGhpcyBpcyBwb3NzaWJsZSwgYnV0IGRvbid0IGFjdHVhbGx5XG5wZXJmb3JtIHRoZSBjaGFuZ2UuXG4qL1xuZnVuY3Rpb24gd3JhcEluTGlzdChsaXN0VHlwZSwgYXR0cnMgPSBudWxsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgZGlzcGF0Y2gpIHtcbiAgICAgICAgbGV0IHsgJGZyb20sICR0byB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBsZXQgcmFuZ2UgPSAkZnJvbS5ibG9ja1JhbmdlKCR0byksIGRvSm9pbiA9IGZhbHNlLCBvdXRlclJhbmdlID0gcmFuZ2U7XG4gICAgICAgIGlmICghcmFuZ2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIFRoaXMgaXMgYXQgdGhlIHRvcCBvZiBhbiBleGlzdGluZyBsaXN0IGl0ZW1cbiAgICAgICAgaWYgKHJhbmdlLmRlcHRoID49IDIgJiYgJGZyb20ubm9kZShyYW5nZS5kZXB0aCAtIDEpLnR5cGUuY29tcGF0aWJsZUNvbnRlbnQobGlzdFR5cGUpICYmIHJhbmdlLnN0YXJ0SW5kZXggPT0gMCkge1xuICAgICAgICAgICAgLy8gRG9uJ3QgZG8gYW55dGhpbmcgaWYgdGhpcyBpcyB0aGUgdG9wIG9mIHRoZSBsaXN0XG4gICAgICAgICAgICBpZiAoJGZyb20uaW5kZXgocmFuZ2UuZGVwdGggLSAxKSA9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGxldCAkaW5zZXJ0ID0gc3RhdGUuZG9jLnJlc29sdmUocmFuZ2Uuc3RhcnQgLSAyKTtcbiAgICAgICAgICAgIG91dGVyUmFuZ2UgPSBuZXcgTm9kZVJhbmdlKCRpbnNlcnQsICRpbnNlcnQsIHJhbmdlLmRlcHRoKTtcbiAgICAgICAgICAgIGlmIChyYW5nZS5lbmRJbmRleCA8IHJhbmdlLnBhcmVudC5jaGlsZENvdW50KVxuICAgICAgICAgICAgICAgIHJhbmdlID0gbmV3IE5vZGVSYW5nZSgkZnJvbSwgc3RhdGUuZG9jLnJlc29sdmUoJHRvLmVuZChyYW5nZS5kZXB0aCkpLCByYW5nZS5kZXB0aCk7XG4gICAgICAgICAgICBkb0pvaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCB3cmFwID0gZmluZFdyYXBwaW5nKG91dGVyUmFuZ2UsIGxpc3RUeXBlLCBhdHRycywgcmFuZ2UpO1xuICAgICAgICBpZiAoIXdyYXApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICAgIGRpc3BhdGNoKGRvV3JhcEluTGlzdChzdGF0ZS50ciwgcmFuZ2UsIHdyYXAsIGRvSm9pbiwgbGlzdFR5cGUpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuZnVuY3Rpb24gZG9XcmFwSW5MaXN0KHRyLCByYW5nZSwgd3JhcHBlcnMsIGpvaW5CZWZvcmUsIGxpc3RUeXBlKSB7XG4gICAgbGV0IGNvbnRlbnQgPSBGcmFnbWVudC5lbXB0eTtcbiAgICBmb3IgKGxldCBpID0gd3JhcHBlcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pXG4gICAgICAgIGNvbnRlbnQgPSBGcmFnbWVudC5mcm9tKHdyYXBwZXJzW2ldLnR5cGUuY3JlYXRlKHdyYXBwZXJzW2ldLmF0dHJzLCBjb250ZW50KSk7XG4gICAgdHIuc3RlcChuZXcgUmVwbGFjZUFyb3VuZFN0ZXAocmFuZ2Uuc3RhcnQgLSAoam9pbkJlZm9yZSA/IDIgOiAwKSwgcmFuZ2UuZW5kLCByYW5nZS5zdGFydCwgcmFuZ2UuZW5kLCBuZXcgU2xpY2UoY29udGVudCwgMCwgMCksIHdyYXBwZXJzLmxlbmd0aCwgdHJ1ZSkpO1xuICAgIGxldCBmb3VuZCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3cmFwcGVycy5sZW5ndGg7IGkrKylcbiAgICAgICAgaWYgKHdyYXBwZXJzW2ldLnR5cGUgPT0gbGlzdFR5cGUpXG4gICAgICAgICAgICBmb3VuZCA9IGkgKyAxO1xuICAgIGxldCBzcGxpdERlcHRoID0gd3JhcHBlcnMubGVuZ3RoIC0gZm91bmQ7XG4gICAgbGV0IHNwbGl0UG9zID0gcmFuZ2Uuc3RhcnQgKyB3cmFwcGVycy5sZW5ndGggLSAoam9pbkJlZm9yZSA/IDIgOiAwKSwgcGFyZW50ID0gcmFuZ2UucGFyZW50O1xuICAgIGZvciAobGV0IGkgPSByYW5nZS5zdGFydEluZGV4LCBlID0gcmFuZ2UuZW5kSW5kZXgsIGZpcnN0ID0gdHJ1ZTsgaSA8IGU7IGkrKywgZmlyc3QgPSBmYWxzZSkge1xuICAgICAgICBpZiAoIWZpcnN0ICYmIGNhblNwbGl0KHRyLmRvYywgc3BsaXRQb3MsIHNwbGl0RGVwdGgpKSB7XG4gICAgICAgICAgICB0ci5zcGxpdChzcGxpdFBvcywgc3BsaXREZXB0aCk7XG4gICAgICAgICAgICBzcGxpdFBvcyArPSAyICogc3BsaXREZXB0aDtcbiAgICAgICAgfVxuICAgICAgICBzcGxpdFBvcyArPSBwYXJlbnQuY2hpbGQoaSkubm9kZVNpemU7XG4gICAgfVxuICAgIHJldHVybiB0cjtcbn1cbi8qKlxuQnVpbGQgYSBjb21tYW5kIHRoYXQgc3BsaXRzIGEgbm9uLWVtcHR5IHRleHRibG9jayBhdCB0aGUgdG9wIGxldmVsXG5vZiBhIGxpc3QgaXRlbSBieSBhbHNvIHNwbGl0dGluZyB0aGF0IGxpc3QgaXRlbS5cbiovXG5mdW5jdGlvbiBzcGxpdExpc3RJdGVtKGl0ZW1UeXBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgZGlzcGF0Y2gpIHtcbiAgICAgICAgbGV0IHsgJGZyb20sICR0bywgbm9kZSB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBpZiAoKG5vZGUgJiYgbm9kZS5pc0Jsb2NrKSB8fCAkZnJvbS5kZXB0aCA8IDIgfHwgISRmcm9tLnNhbWVQYXJlbnQoJHRvKSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IGdyYW5kUGFyZW50ID0gJGZyb20ubm9kZSgtMSk7XG4gICAgICAgIGlmIChncmFuZFBhcmVudC50eXBlICE9IGl0ZW1UeXBlKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBpZiAoJGZyb20ucGFyZW50LmNvbnRlbnQuc2l6ZSA9PSAwICYmICRmcm9tLm5vZGUoLTEpLmNoaWxkQ291bnQgPT0gJGZyb20uaW5kZXhBZnRlcigtMSkpIHtcbiAgICAgICAgICAgIC8vIEluIGFuIGVtcHR5IGJsb2NrLiBJZiB0aGlzIGlzIGEgbmVzdGVkIGxpc3QsIHRoZSB3cmFwcGluZ1xuICAgICAgICAgICAgLy8gbGlzdCBpdGVtIHNob3VsZCBiZSBzcGxpdC4gT3RoZXJ3aXNlLCBiYWlsIG91dCBhbmQgbGV0IG5leHRcbiAgICAgICAgICAgIC8vIGNvbW1hbmQgaGFuZGxlIGxpZnRpbmcuXG4gICAgICAgICAgICBpZiAoJGZyb20uZGVwdGggPT0gMyB8fCAkZnJvbS5ub2RlKC0zKS50eXBlICE9IGl0ZW1UeXBlIHx8XG4gICAgICAgICAgICAgICAgJGZyb20uaW5kZXgoLTIpICE9ICRmcm9tLm5vZGUoLTIpLmNoaWxkQ291bnQgLSAxKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICAgICAgICAgIGxldCB3cmFwID0gRnJhZ21lbnQuZW1wdHk7XG4gICAgICAgICAgICAgICAgbGV0IGRlcHRoQmVmb3JlID0gJGZyb20uaW5kZXgoLTEpID8gMSA6ICRmcm9tLmluZGV4KC0yKSA/IDIgOiAzO1xuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGEgZnJhZ21lbnQgY29udGFpbmluZyBlbXB0eSB2ZXJzaW9ucyBvZiB0aGUgc3RydWN0dXJlXG4gICAgICAgICAgICAgICAgLy8gZnJvbSB0aGUgb3V0ZXIgbGlzdCBpdGVtIHRvIHRoZSBwYXJlbnQgbm9kZSBvZiB0aGUgY3Vyc29yXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZCA9ICRmcm9tLmRlcHRoIC0gZGVwdGhCZWZvcmU7IGQgPj0gJGZyb20uZGVwdGggLSAzOyBkLS0pXG4gICAgICAgICAgICAgICAgICAgIHdyYXAgPSBGcmFnbWVudC5mcm9tKCRmcm9tLm5vZGUoZCkuY29weSh3cmFwKSk7XG4gICAgICAgICAgICAgICAgbGV0IGRlcHRoQWZ0ZXIgPSAkZnJvbS5pbmRleEFmdGVyKC0xKSA8ICRmcm9tLm5vZGUoLTIpLmNoaWxkQ291bnQgPyAxXG4gICAgICAgICAgICAgICAgICAgIDogJGZyb20uaW5kZXhBZnRlcigtMikgPCAkZnJvbS5ub2RlKC0zKS5jaGlsZENvdW50ID8gMiA6IDM7XG4gICAgICAgICAgICAgICAgLy8gQWRkIGEgc2Vjb25kIGxpc3QgaXRlbSB3aXRoIGFuIGVtcHR5IGRlZmF1bHQgc3RhcnQgbm9kZVxuICAgICAgICAgICAgICAgIHdyYXAgPSB3cmFwLmFwcGVuZChGcmFnbWVudC5mcm9tKGl0ZW1UeXBlLmNyZWF0ZUFuZEZpbGwoKSkpO1xuICAgICAgICAgICAgICAgIGxldCBzdGFydCA9ICRmcm9tLmJlZm9yZSgkZnJvbS5kZXB0aCAtIChkZXB0aEJlZm9yZSAtIDEpKTtcbiAgICAgICAgICAgICAgICBsZXQgdHIgPSBzdGF0ZS50ci5yZXBsYWNlKHN0YXJ0LCAkZnJvbS5hZnRlcigtZGVwdGhBZnRlciksIG5ldyBTbGljZSh3cmFwLCA0IC0gZGVwdGhCZWZvcmUsIDApKTtcbiAgICAgICAgICAgICAgICBsZXQgc2VsID0gLTE7XG4gICAgICAgICAgICAgICAgdHIuZG9jLm5vZGVzQmV0d2VlbihzdGFydCwgdHIuZG9jLmNvbnRlbnQuc2l6ZSwgKG5vZGUsIHBvcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsID4gLTEpXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlLmlzVGV4dGJsb2NrICYmIG5vZGUuY29udGVudC5zaXplID09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWwgPSBwb3MgKyAxO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChzZWwgPiAtMSlcbiAgICAgICAgICAgICAgICAgICAgdHIuc2V0U2VsZWN0aW9uKFNlbGVjdGlvbi5uZWFyKHRyLmRvYy5yZXNvbHZlKHNlbCkpKTtcbiAgICAgICAgICAgICAgICBkaXNwYXRjaCh0ci5zY3JvbGxJbnRvVmlldygpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBuZXh0VHlwZSA9ICR0by5wb3MgPT0gJGZyb20uZW5kKCkgPyBncmFuZFBhcmVudC5jb250ZW50TWF0Y2hBdCgwKS5kZWZhdWx0VHlwZSA6IG51bGw7XG4gICAgICAgIGxldCB0ciA9IHN0YXRlLnRyLmRlbGV0ZSgkZnJvbS5wb3MsICR0by5wb3MpO1xuICAgICAgICBsZXQgdHlwZXMgPSBuZXh0VHlwZSA/IFtudWxsLCB7IHR5cGU6IG5leHRUeXBlIH1dIDogdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIWNhblNwbGl0KHRyLmRvYywgJGZyb20ucG9zLCAyLCB0eXBlcykpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChkaXNwYXRjaClcbiAgICAgICAgICAgIGRpc3BhdGNoKHRyLnNwbGl0KCRmcm9tLnBvcywgMiwgdHlwZXMpLnNjcm9sbEludG9WaWV3KCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xufVxuLyoqXG5DcmVhdGUgYSBjb21tYW5kIHRvIGxpZnQgdGhlIGxpc3QgaXRlbSBhcm91bmQgdGhlIHNlbGVjdGlvbiB1cCBpbnRvXG5hIHdyYXBwaW5nIGxpc3QuXG4qL1xuZnVuY3Rpb24gbGlmdExpc3RJdGVtKGl0ZW1UeXBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdGF0ZSwgZGlzcGF0Y2gpIHtcbiAgICAgICAgbGV0IHsgJGZyb20sICR0byB9ID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICBsZXQgcmFuZ2UgPSAkZnJvbS5ibG9ja1JhbmdlKCR0bywgbm9kZSA9PiBub2RlLmNoaWxkQ291bnQgPiAwICYmIG5vZGUuZmlyc3RDaGlsZC50eXBlID09IGl0ZW1UeXBlKTtcbiAgICAgICAgaWYgKCFyYW5nZSlcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKCFkaXNwYXRjaClcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoJGZyb20ubm9kZShyYW5nZS5kZXB0aCAtIDEpLnR5cGUgPT0gaXRlbVR5cGUpIC8vIEluc2lkZSBhIHBhcmVudCBsaXN0XG4gICAgICAgICAgICByZXR1cm4gbGlmdFRvT3V0ZXJMaXN0KHN0YXRlLCBkaXNwYXRjaCwgaXRlbVR5cGUsIHJhbmdlKTtcbiAgICAgICAgZWxzZSAvLyBPdXRlciBsaXN0IG5vZGVcbiAgICAgICAgICAgIHJldHVybiBsaWZ0T3V0T2ZMaXN0KHN0YXRlLCBkaXNwYXRjaCwgcmFuZ2UpO1xuICAgIH07XG59XG5mdW5jdGlvbiBsaWZ0VG9PdXRlckxpc3Qoc3RhdGUsIGRpc3BhdGNoLCBpdGVtVHlwZSwgcmFuZ2UpIHtcbiAgICBsZXQgdHIgPSBzdGF0ZS50ciwgZW5kID0gcmFuZ2UuZW5kLCBlbmRPZkxpc3QgPSByYW5nZS4kdG8uZW5kKHJhbmdlLmRlcHRoKTtcbiAgICBpZiAoZW5kIDwgZW5kT2ZMaXN0KSB7XG4gICAgICAgIC8vIFRoZXJlIGFyZSBzaWJsaW5ncyBhZnRlciB0aGUgbGlmdGVkIGl0ZW1zLCB3aGljaCBtdXN0IGJlY29tZVxuICAgICAgICAvLyBjaGlsZHJlbiBvZiB0aGUgbGFzdCBpdGVtXG4gICAgICAgIHRyLnN0ZXAobmV3IFJlcGxhY2VBcm91bmRTdGVwKGVuZCAtIDEsIGVuZE9mTGlzdCwgZW5kLCBlbmRPZkxpc3QsIG5ldyBTbGljZShGcmFnbWVudC5mcm9tKGl0ZW1UeXBlLmNyZWF0ZShudWxsLCByYW5nZS5wYXJlbnQuY29weSgpKSksIDEsIDApLCAxLCB0cnVlKSk7XG4gICAgICAgIHJhbmdlID0gbmV3IE5vZGVSYW5nZSh0ci5kb2MucmVzb2x2ZShyYW5nZS4kZnJvbS5wb3MpLCB0ci5kb2MucmVzb2x2ZShlbmRPZkxpc3QpLCByYW5nZS5kZXB0aCk7XG4gICAgfVxuICAgIGRpc3BhdGNoKHRyLmxpZnQocmFuZ2UsIGxpZnRUYXJnZXQocmFuZ2UpKS5zY3JvbGxJbnRvVmlldygpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIGxpZnRPdXRPZkxpc3Qoc3RhdGUsIGRpc3BhdGNoLCByYW5nZSkge1xuICAgIGxldCB0ciA9IHN0YXRlLnRyLCBsaXN0ID0gcmFuZ2UucGFyZW50O1xuICAgIC8vIE1lcmdlIHRoZSBsaXN0IGl0ZW1zIGludG8gYSBzaW5nbGUgYmlnIGl0ZW1cbiAgICBmb3IgKGxldCBwb3MgPSByYW5nZS5lbmQsIGkgPSByYW5nZS5lbmRJbmRleCAtIDEsIGUgPSByYW5nZS5zdGFydEluZGV4OyBpID4gZTsgaS0tKSB7XG4gICAgICAgIHBvcyAtPSBsaXN0LmNoaWxkKGkpLm5vZGVTaXplO1xuICAgICAgICB0ci5kZWxldGUocG9zIC0gMSwgcG9zICsgMSk7XG4gICAgfVxuICAgIGxldCAkc3RhcnQgPSB0ci5kb2MucmVzb2x2ZShyYW5nZS5zdGFydCksIGl0ZW0gPSAkc3RhcnQubm9kZUFmdGVyO1xuICAgIGlmICh0ci5tYXBwaW5nLm1hcChyYW5nZS5lbmQpICE9IHJhbmdlLnN0YXJ0ICsgJHN0YXJ0Lm5vZGVBZnRlci5ub2RlU2l6ZSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBhdFN0YXJ0ID0gcmFuZ2Uuc3RhcnRJbmRleCA9PSAwLCBhdEVuZCA9IHJhbmdlLmVuZEluZGV4ID09IGxpc3QuY2hpbGRDb3VudDtcbiAgICBsZXQgcGFyZW50ID0gJHN0YXJ0Lm5vZGUoLTEpLCBpbmRleEJlZm9yZSA9ICRzdGFydC5pbmRleCgtMSk7XG4gICAgaWYgKCFwYXJlbnQuY2FuUmVwbGFjZShpbmRleEJlZm9yZSArIChhdFN0YXJ0ID8gMCA6IDEpLCBpbmRleEJlZm9yZSArIDEsIGl0ZW0uY29udGVudC5hcHBlbmQoYXRFbmQgPyBGcmFnbWVudC5lbXB0eSA6IEZyYWdtZW50LmZyb20obGlzdCkpKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGxldCBzdGFydCA9ICRzdGFydC5wb3MsIGVuZCA9IHN0YXJ0ICsgaXRlbS5ub2RlU2l6ZTtcbiAgICAvLyBTdHJpcCBvZmYgdGhlIHN1cnJvdW5kaW5nIGxpc3QuIEF0IHRoZSBzaWRlcyB3aGVyZSB3ZSdyZSBub3QgYXRcbiAgICAvLyB0aGUgZW5kIG9mIHRoZSBsaXN0LCB0aGUgZXhpc3RpbmcgbGlzdCBpcyBjbG9zZWQuIEF0IHNpZGVzIHdoZXJlXG4gICAgLy8gdGhpcyBpcyB0aGUgZW5kLCBpdCBpcyBvdmVyd3JpdHRlbiB0byBpdHMgZW5kLlxuICAgIHRyLnN0ZXAobmV3IFJlcGxhY2VBcm91bmRTdGVwKHN0YXJ0IC0gKGF0U3RhcnQgPyAxIDogMCksIGVuZCArIChhdEVuZCA/IDEgOiAwKSwgc3RhcnQgKyAxLCBlbmQgLSAxLCBuZXcgU2xpY2UoKGF0U3RhcnQgPyBGcmFnbWVudC5lbXB0eSA6IEZyYWdtZW50LmZyb20obGlzdC5jb3B5KEZyYWdtZW50LmVtcHR5KSkpXG4gICAgICAgIC5hcHBlbmQoYXRFbmQgPyBGcmFnbWVudC5lbXB0eSA6IEZyYWdtZW50LmZyb20obGlzdC5jb3B5KEZyYWdtZW50LmVtcHR5KSkpLCBhdFN0YXJ0ID8gMCA6IDEsIGF0RW5kID8gMCA6IDEpLCBhdFN0YXJ0ID8gMCA6IDEpKTtcbiAgICBkaXNwYXRjaCh0ci5zY3JvbGxJbnRvVmlldygpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuQ3JlYXRlIGEgY29tbWFuZCB0byBzaW5rIHRoZSBsaXN0IGl0ZW0gYXJvdW5kIHRoZSBzZWxlY3Rpb24gZG93blxuaW50byBhbiBpbm5lciBsaXN0LlxuKi9cbmZ1bmN0aW9uIHNpbmtMaXN0SXRlbShpdGVtVHlwZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RhdGUsIGRpc3BhdGNoKSB7XG4gICAgICAgIGxldCB7ICRmcm9tLCAkdG8gfSA9IHN0YXRlLnNlbGVjdGlvbjtcbiAgICAgICAgbGV0IHJhbmdlID0gJGZyb20uYmxvY2tSYW5nZSgkdG8sIG5vZGUgPT4gbm9kZS5jaGlsZENvdW50ID4gMCAmJiBub2RlLmZpcnN0Q2hpbGQudHlwZSA9PSBpdGVtVHlwZSk7XG4gICAgICAgIGlmICghcmFuZ2UpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCBzdGFydEluZGV4ID0gcmFuZ2Uuc3RhcnRJbmRleDtcbiAgICAgICAgaWYgKHN0YXJ0SW5kZXggPT0gMClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgbGV0IHBhcmVudCA9IHJhbmdlLnBhcmVudCwgbm9kZUJlZm9yZSA9IHBhcmVudC5jaGlsZChzdGFydEluZGV4IC0gMSk7XG4gICAgICAgIGlmIChub2RlQmVmb3JlLnR5cGUgIT0gaXRlbVR5cGUpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChkaXNwYXRjaCkge1xuICAgICAgICAgICAgbGV0IG5lc3RlZEJlZm9yZSA9IG5vZGVCZWZvcmUubGFzdENoaWxkICYmIG5vZGVCZWZvcmUubGFzdENoaWxkLnR5cGUgPT0gcGFyZW50LnR5cGU7XG4gICAgICAgICAgICBsZXQgaW5uZXIgPSBGcmFnbWVudC5mcm9tKG5lc3RlZEJlZm9yZSA/IGl0ZW1UeXBlLmNyZWF0ZSgpIDogbnVsbCk7XG4gICAgICAgICAgICBsZXQgc2xpY2UgPSBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbShpdGVtVHlwZS5jcmVhdGUobnVsbCwgRnJhZ21lbnQuZnJvbShwYXJlbnQudHlwZS5jcmVhdGUobnVsbCwgaW5uZXIpKSkpLCBuZXN0ZWRCZWZvcmUgPyAzIDogMSwgMCk7XG4gICAgICAgICAgICBsZXQgYmVmb3JlID0gcmFuZ2Uuc3RhcnQsIGFmdGVyID0gcmFuZ2UuZW5kO1xuICAgICAgICAgICAgZGlzcGF0Y2goc3RhdGUudHIuc3RlcChuZXcgUmVwbGFjZUFyb3VuZFN0ZXAoYmVmb3JlIC0gKG5lc3RlZEJlZm9yZSA/IDMgOiAxKSwgYWZ0ZXIsIGJlZm9yZSwgYWZ0ZXIsIHNsaWNlLCAxLCB0cnVlKSlcbiAgICAgICAgICAgICAgICAuc2Nyb2xsSW50b1ZpZXcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgYWRkTGlzdE5vZGVzLCBidWxsZXRMaXN0LCBsaWZ0TGlzdEl0ZW0sIGxpc3RJdGVtLCBvcmRlcmVkTGlzdCwgc2lua0xpc3RJdGVtLCBzcGxpdExpc3RJdGVtLCB3cmFwSW5MaXN0IH07XG4iLCJpbXBvcnQgeyBTbGljZSwgRnJhZ21lbnQsIE1hcmssIE5vZGUgfSBmcm9tICdwcm9zZW1pcnJvci1tb2RlbCc7XG5pbXBvcnQgeyBSZXBsYWNlU3RlcCwgUmVwbGFjZUFyb3VuZFN0ZXAsIFRyYW5zZm9ybSB9IGZyb20gJ3Byb3NlbWlycm9yLXRyYW5zZm9ybSc7XG5cbmNvbnN0IGNsYXNzZXNCeUlkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8qKlxuU3VwZXJjbGFzcyBmb3IgZWRpdG9yIHNlbGVjdGlvbnMuIEV2ZXJ5IHNlbGVjdGlvbiB0eXBlIHNob3VsZFxuZXh0ZW5kIHRoaXMuIFNob3VsZCBub3QgYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxuKi9cbmNsYXNzIFNlbGVjdGlvbiB7XG4gICAgLyoqXG4gICAgSW5pdGlhbGl6ZSBhIHNlbGVjdGlvbiB3aXRoIHRoZSBoZWFkIGFuZCBhbmNob3IgYW5kIHJhbmdlcy4gSWYgbm9cbiAgICByYW5nZXMgYXJlIGdpdmVuLCBjb25zdHJ1Y3RzIGEgc2luZ2xlIHJhbmdlIGFjcm9zcyBgJGFuY2hvcmAgYW5kXG4gICAgYCRoZWFkYC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSByZXNvbHZlZCBhbmNob3Igb2YgdGhlIHNlbGVjdGlvbiAodGhlIHNpZGUgdGhhdCBzdGF5cyBpblxuICAgIHBsYWNlIHdoZW4gdGhlIHNlbGVjdGlvbiBpcyBtb2RpZmllZCkuXG4gICAgKi9cbiAgICAkYW5jaG9yLCBcbiAgICAvKipcbiAgICBUaGUgcmVzb2x2ZWQgaGVhZCBvZiB0aGUgc2VsZWN0aW9uICh0aGUgc2lkZSB0aGF0IG1vdmVzIHdoZW5cbiAgICB0aGUgc2VsZWN0aW9uIGlzIG1vZGlmaWVkKS5cbiAgICAqL1xuICAgICRoZWFkLCByYW5nZXMpIHtcbiAgICAgICAgdGhpcy4kYW5jaG9yID0gJGFuY2hvcjtcbiAgICAgICAgdGhpcy4kaGVhZCA9ICRoZWFkO1xuICAgICAgICB0aGlzLnJhbmdlcyA9IHJhbmdlcyB8fCBbbmV3IFNlbGVjdGlvblJhbmdlKCRhbmNob3IubWluKCRoZWFkKSwgJGFuY2hvci5tYXgoJGhlYWQpKV07XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSBzZWxlY3Rpb24ncyBhbmNob3IsIGFzIGFuIHVucmVzb2x2ZWQgcG9zaXRpb24uXG4gICAgKi9cbiAgICBnZXQgYW5jaG9yKCkgeyByZXR1cm4gdGhpcy4kYW5jaG9yLnBvczsgfVxuICAgIC8qKlxuICAgIFRoZSBzZWxlY3Rpb24ncyBoZWFkLlxuICAgICovXG4gICAgZ2V0IGhlYWQoKSB7IHJldHVybiB0aGlzLiRoZWFkLnBvczsgfVxuICAgIC8qKlxuICAgIFRoZSBsb3dlciBib3VuZCBvZiB0aGUgc2VsZWN0aW9uJ3MgbWFpbiByYW5nZS5cbiAgICAqL1xuICAgIGdldCBmcm9tKCkgeyByZXR1cm4gdGhpcy4kZnJvbS5wb3M7IH1cbiAgICAvKipcbiAgICBUaGUgdXBwZXIgYm91bmQgb2YgdGhlIHNlbGVjdGlvbidzIG1haW4gcmFuZ2UuXG4gICAgKi9cbiAgICBnZXQgdG8oKSB7IHJldHVybiB0aGlzLiR0by5wb3M7IH1cbiAgICAvKipcbiAgICBUaGUgcmVzb2x2ZWQgbG93ZXIgIGJvdW5kIG9mIHRoZSBzZWxlY3Rpb24ncyBtYWluIHJhbmdlLlxuICAgICovXG4gICAgZ2V0ICRmcm9tKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yYW5nZXNbMF0uJGZyb207XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSByZXNvbHZlZCB1cHBlciBib3VuZCBvZiB0aGUgc2VsZWN0aW9uJ3MgbWFpbiByYW5nZS5cbiAgICAqL1xuICAgIGdldCAkdG8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlc1swXS4kdG87XG4gICAgfVxuICAgIC8qKlxuICAgIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gY29udGFpbnMgYW55IGNvbnRlbnQuXG4gICAgKi9cbiAgICBnZXQgZW1wdHkoKSB7XG4gICAgICAgIGxldCByYW5nZXMgPSB0aGlzLnJhbmdlcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAocmFuZ2VzW2ldLiRmcm9tLnBvcyAhPSByYW5nZXNbaV0uJHRvLnBvcylcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgdGhlIGNvbnRlbnQgb2YgdGhpcyBzZWxlY3Rpb24gYXMgYSBzbGljZS5cbiAgICAqL1xuICAgIGNvbnRlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRmcm9tLmRvYy5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8sIHRydWUpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIHRoZSBzZWxlY3Rpb24gd2l0aCBhIHNsaWNlIG9yLCBpZiBubyBzbGljZSBpcyBnaXZlbixcbiAgICBkZWxldGUgdGhlIHNlbGVjdGlvbi4gV2lsbCBhcHBlbmQgdG8gdGhlIGdpdmVuIHRyYW5zYWN0aW9uLlxuICAgICovXG4gICAgcmVwbGFjZSh0ciwgY29udGVudCA9IFNsaWNlLmVtcHR5KSB7XG4gICAgICAgIC8vIFB1dCB0aGUgbmV3IHNlbGVjdGlvbiBhdCB0aGUgcG9zaXRpb24gYWZ0ZXIgdGhlIGluc2VydGVkXG4gICAgICAgIC8vIGNvbnRlbnQuIFdoZW4gdGhhdCBlbmRlZCBpbiBhbiBpbmxpbmUgbm9kZSwgc2VhcmNoIGJhY2t3YXJkcyxcbiAgICAgICAgLy8gdG8gZ2V0IHRoZSBwb3NpdGlvbiBhZnRlciB0aGF0IG5vZGUuIElmIG5vdCwgc2VhcmNoIGZvcndhcmQuXG4gICAgICAgIGxldCBsYXN0Tm9kZSA9IGNvbnRlbnQuY29udGVudC5sYXN0Q2hpbGQsIGxhc3RQYXJlbnQgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvbnRlbnQub3BlbkVuZDsgaSsrKSB7XG4gICAgICAgICAgICBsYXN0UGFyZW50ID0gbGFzdE5vZGU7XG4gICAgICAgICAgICBsYXN0Tm9kZSA9IGxhc3ROb2RlLmxhc3RDaGlsZDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWFwRnJvbSA9IHRyLnN0ZXBzLmxlbmd0aCwgcmFuZ2VzID0gdGhpcy5yYW5nZXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmFuZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgeyAkZnJvbSwgJHRvIH0gPSByYW5nZXNbaV0sIG1hcHBpbmcgPSB0ci5tYXBwaW5nLnNsaWNlKG1hcEZyb20pO1xuICAgICAgICAgICAgdHIucmVwbGFjZVJhbmdlKG1hcHBpbmcubWFwKCRmcm9tLnBvcyksIG1hcHBpbmcubWFwKCR0by5wb3MpLCBpID8gU2xpY2UuZW1wdHkgOiBjb250ZW50KTtcbiAgICAgICAgICAgIGlmIChpID09IDApXG4gICAgICAgICAgICAgICAgc2VsZWN0aW9uVG9JbnNlcnRpb25FbmQodHIsIG1hcEZyb20sIChsYXN0Tm9kZSA/IGxhc3ROb2RlLmlzSW5saW5lIDogbGFzdFBhcmVudCAmJiBsYXN0UGFyZW50LmlzVGV4dGJsb2NrKSA/IC0xIDogMSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSB0aGUgc2VsZWN0aW9uIHdpdGggdGhlIGdpdmVuIG5vZGUsIGFwcGVuZGluZyB0aGUgY2hhbmdlc1xuICAgIHRvIHRoZSBnaXZlbiB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIHJlcGxhY2VXaXRoKHRyLCBub2RlKSB7XG4gICAgICAgIGxldCBtYXBGcm9tID0gdHIuc3RlcHMubGVuZ3RoLCByYW5nZXMgPSB0aGlzLnJhbmdlcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB7ICRmcm9tLCAkdG8gfSA9IHJhbmdlc1tpXSwgbWFwcGluZyA9IHRyLm1hcHBpbmcuc2xpY2UobWFwRnJvbSk7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IG1hcHBpbmcubWFwKCRmcm9tLnBvcyksIHRvID0gbWFwcGluZy5tYXAoJHRvLnBvcyk7XG4gICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgIHRyLmRlbGV0ZVJhbmdlKGZyb20sIHRvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyLnJlcGxhY2VSYW5nZVdpdGgoZnJvbSwgdG8sIG5vZGUpO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvblRvSW5zZXJ0aW9uRW5kKHRyLCBtYXBGcm9tLCBub2RlLmlzSW5saW5lID8gLTEgOiAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIGEgdmFsaWQgY3Vyc29yIG9yIGxlYWYgbm9kZSBzZWxlY3Rpb24gc3RhcnRpbmcgYXQgdGhlIGdpdmVuXG4gICAgcG9zaXRpb24gYW5kIHNlYXJjaGluZyBiYWNrIGlmIGBkaXJgIGlzIG5lZ2F0aXZlLCBhbmQgZm9yd2FyZCBpZlxuICAgIHBvc2l0aXZlLiBXaGVuIGB0ZXh0T25seWAgaXMgdHJ1ZSwgb25seSBjb25zaWRlciBjdXJzb3JcbiAgICBzZWxlY3Rpb25zLiBXaWxsIHJldHVybiBudWxsIHdoZW4gbm8gdmFsaWQgc2VsZWN0aW9uIHBvc2l0aW9uIGlzXG4gICAgZm91bmQuXG4gICAgKi9cbiAgICBzdGF0aWMgZmluZEZyb20oJHBvcywgZGlyLCB0ZXh0T25seSA9IGZhbHNlKSB7XG4gICAgICAgIGxldCBpbm5lciA9ICRwb3MucGFyZW50LmlubGluZUNvbnRlbnQgPyBuZXcgVGV4dFNlbGVjdGlvbigkcG9zKVxuICAgICAgICAgICAgOiBmaW5kU2VsZWN0aW9uSW4oJHBvcy5ub2RlKDApLCAkcG9zLnBhcmVudCwgJHBvcy5wb3MsICRwb3MuaW5kZXgoKSwgZGlyLCB0ZXh0T25seSk7XG4gICAgICAgIGlmIChpbm5lcilcbiAgICAgICAgICAgIHJldHVybiBpbm5lcjtcbiAgICAgICAgZm9yIChsZXQgZGVwdGggPSAkcG9zLmRlcHRoIC0gMTsgZGVwdGggPj0gMDsgZGVwdGgtLSkge1xuICAgICAgICAgICAgbGV0IGZvdW5kID0gZGlyIDwgMFxuICAgICAgICAgICAgICAgID8gZmluZFNlbGVjdGlvbkluKCRwb3Mubm9kZSgwKSwgJHBvcy5ub2RlKGRlcHRoKSwgJHBvcy5iZWZvcmUoZGVwdGggKyAxKSwgJHBvcy5pbmRleChkZXB0aCksIGRpciwgdGV4dE9ubHkpXG4gICAgICAgICAgICAgICAgOiBmaW5kU2VsZWN0aW9uSW4oJHBvcy5ub2RlKDApLCAkcG9zLm5vZGUoZGVwdGgpLCAkcG9zLmFmdGVyKGRlcHRoICsgMSksICRwb3MuaW5kZXgoZGVwdGgpICsgMSwgZGlyLCB0ZXh0T25seSk7XG4gICAgICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICBGaW5kIGEgdmFsaWQgY3Vyc29yIG9yIGxlYWYgbm9kZSBzZWxlY3Rpb24gbmVhciB0aGUgZ2l2ZW5cbiAgICBwb3NpdGlvbi4gU2VhcmNoZXMgZm9yd2FyZCBmaXJzdCBieSBkZWZhdWx0LCBidXQgaWYgYGJpYXNgIGlzXG4gICAgbmVnYXRpdmUsIGl0IHdpbGwgc2VhcmNoIGJhY2t3YXJkcyBmaXJzdC5cbiAgICAqL1xuICAgIHN0YXRpYyBuZWFyKCRwb3MsIGJpYXMgPSAxKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRGcm9tKCRwb3MsIGJpYXMpIHx8IHRoaXMuZmluZEZyb20oJHBvcywgLWJpYXMpIHx8IG5ldyBBbGxTZWxlY3Rpb24oJHBvcy5ub2RlKDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRmluZCB0aGUgY3Vyc29yIG9yIGxlYWYgbm9kZSBzZWxlY3Rpb24gY2xvc2VzdCB0byB0aGUgc3RhcnQgb2ZcbiAgICB0aGUgZ2l2ZW4gZG9jdW1lbnQuIFdpbGwgcmV0dXJuIGFuXG4gICAgW2BBbGxTZWxlY3Rpb25gXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuQWxsU2VsZWN0aW9uKSBpZiBubyB2YWxpZCBwb3NpdGlvblxuICAgIGV4aXN0cy5cbiAgICAqL1xuICAgIHN0YXRpYyBhdFN0YXJ0KGRvYykge1xuICAgICAgICByZXR1cm4gZmluZFNlbGVjdGlvbkluKGRvYywgZG9jLCAwLCAwLCAxKSB8fCBuZXcgQWxsU2VsZWN0aW9uKGRvYyk7XG4gICAgfVxuICAgIC8qKlxuICAgIEZpbmQgdGhlIGN1cnNvciBvciBsZWFmIG5vZGUgc2VsZWN0aW9uIGNsb3Nlc3QgdG8gdGhlIGVuZCBvZiB0aGVcbiAgICBnaXZlbiBkb2N1bWVudC5cbiAgICAqL1xuICAgIHN0YXRpYyBhdEVuZChkb2MpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRTZWxlY3Rpb25Jbihkb2MsIGRvYywgZG9jLmNvbnRlbnQuc2l6ZSwgZG9jLmNoaWxkQ291bnQsIC0xKSB8fCBuZXcgQWxsU2VsZWN0aW9uKGRvYyk7XG4gICAgfVxuICAgIC8qKlxuICAgIERlc2VyaWFsaXplIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgc2VsZWN0aW9uLiBNdXN0IGJlXG4gICAgaW1wbGVtZW50ZWQgZm9yIGN1c3RvbSBjbGFzc2VzIChhcyBhIHN0YXRpYyBjbGFzcyBtZXRob2QpLlxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGRvYywganNvbikge1xuICAgICAgICBpZiAoIWpzb24gfHwgIWpzb24udHlwZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgU2VsZWN0aW9uLmZyb21KU09OXCIpO1xuICAgICAgICBsZXQgY2xzID0gY2xhc3Nlc0J5SWRbanNvbi50eXBlXTtcbiAgICAgICAgaWYgKCFjbHMpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgTm8gc2VsZWN0aW9uIHR5cGUgJHtqc29uLnR5cGV9IGRlZmluZWRgKTtcbiAgICAgICAgcmV0dXJuIGNscy5mcm9tSlNPTihkb2MsIGpzb24pO1xuICAgIH1cbiAgICAvKipcbiAgICBUbyBiZSBhYmxlIHRvIGRlc2VyaWFsaXplIHNlbGVjdGlvbnMgZnJvbSBKU09OLCBjdXN0b20gc2VsZWN0aW9uXG4gICAgY2xhc3NlcyBtdXN0IHJlZ2lzdGVyIHRoZW1zZWx2ZXMgd2l0aCBhbiBJRCBzdHJpbmcsIHNvIHRoYXQgdGhleVxuICAgIGNhbiBiZSBkaXNhbWJpZ3VhdGVkLiBUcnkgdG8gcGljayBzb21ldGhpbmcgdGhhdCdzIHVubGlrZWx5IHRvXG4gICAgY2xhc2ggd2l0aCBjbGFzc2VzIGZyb20gb3RoZXIgbW9kdWxlcy5cbiAgICAqL1xuICAgIHN0YXRpYyBqc29uSUQoaWQsIHNlbGVjdGlvbkNsYXNzKSB7XG4gICAgICAgIGlmIChpZCBpbiBjbGFzc2VzQnlJZClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRHVwbGljYXRlIHVzZSBvZiBzZWxlY3Rpb24gSlNPTiBJRCBcIiArIGlkKTtcbiAgICAgICAgY2xhc3Nlc0J5SWRbaWRdID0gc2VsZWN0aW9uQ2xhc3M7XG4gICAgICAgIHNlbGVjdGlvbkNsYXNzLnByb3RvdHlwZS5qc29uSUQgPSBpZDtcbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvbkNsYXNzO1xuICAgIH1cbiAgICAvKipcbiAgICBHZXQgYSBbYm9va21hcmtdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzdGF0ZS5TZWxlY3Rpb25Cb29rbWFyaykgZm9yIHRoaXMgc2VsZWN0aW9uLFxuICAgIHdoaWNoIGlzIGEgdmFsdWUgdGhhdCBjYW4gYmUgbWFwcGVkIHdpdGhvdXQgaGF2aW5nIGFjY2VzcyB0byBhXG4gICAgY3VycmVudCBkb2N1bWVudCwgYW5kIGxhdGVyIHJlc29sdmVkIHRvIGEgcmVhbCBzZWxlY3Rpb24gZm9yIGFcbiAgICBnaXZlbiBkb2N1bWVudCBhZ2Fpbi4gKFRoaXMgaXMgdXNlZCBtb3N0bHkgYnkgdGhlIGhpc3RvcnkgdG9cbiAgICB0cmFjayBhbmQgcmVzdG9yZSBvbGQgc2VsZWN0aW9ucy4pIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mXG4gICAgdGhpcyBtZXRob2QganVzdCBjb252ZXJ0cyB0aGUgc2VsZWN0aW9uIHRvIGEgdGV4dCBzZWxlY3Rpb24gYW5kXG4gICAgcmV0dXJucyB0aGUgYm9va21hcmsgZm9yIHRoYXQuXG4gICAgKi9cbiAgICBnZXRCb29rbWFyaygpIHtcbiAgICAgICAgcmV0dXJuIFRleHRTZWxlY3Rpb24uYmV0d2Vlbih0aGlzLiRhbmNob3IsIHRoaXMuJGhlYWQpLmdldEJvb2ttYXJrKCk7XG4gICAgfVxufVxuU2VsZWN0aW9uLnByb3RvdHlwZS52aXNpYmxlID0gdHJ1ZTtcbi8qKlxuUmVwcmVzZW50cyBhIHNlbGVjdGVkIHJhbmdlIGluIGEgZG9jdW1lbnQuXG4qL1xuY2xhc3MgU2VsZWN0aW9uUmFuZ2Uge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHJhbmdlLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIGxvd2VyIGJvdW5kIG9mIHRoZSByYW5nZS5cbiAgICAqL1xuICAgICRmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgdXBwZXIgYm91bmQgb2YgdGhlIHJhbmdlLlxuICAgICovXG4gICAgJHRvKSB7XG4gICAgICAgIHRoaXMuJGZyb20gPSAkZnJvbTtcbiAgICAgICAgdGhpcy4kdG8gPSAkdG87XG4gICAgfVxufVxubGV0IHdhcm5lZEFib3V0VGV4dFNlbGVjdGlvbiA9IGZhbHNlO1xuZnVuY3Rpb24gY2hlY2tUZXh0U2VsZWN0aW9uKCRwb3MpIHtcbiAgICBpZiAoIXdhcm5lZEFib3V0VGV4dFNlbGVjdGlvbiAmJiAhJHBvcy5wYXJlbnQuaW5saW5lQ29udGVudCkge1xuICAgICAgICB3YXJuZWRBYm91dFRleHRTZWxlY3Rpb24gPSB0cnVlO1xuICAgICAgICBjb25zb2xlW1wid2FyblwiXShcIlRleHRTZWxlY3Rpb24gZW5kcG9pbnQgbm90IHBvaW50aW5nIGludG8gYSBub2RlIHdpdGggaW5saW5lIGNvbnRlbnQgKFwiICsgJHBvcy5wYXJlbnQudHlwZS5uYW1lICsgXCIpXCIpO1xuICAgIH1cbn1cbi8qKlxuQSB0ZXh0IHNlbGVjdGlvbiByZXByZXNlbnRzIGEgY2xhc3NpY2FsIGVkaXRvciBzZWxlY3Rpb24sIHdpdGggYVxuaGVhZCAodGhlIG1vdmluZyBzaWRlKSBhbmQgYW5jaG9yIChpbW1vYmlsZSBzaWRlKSwgYm90aCBvZiB3aGljaFxucG9pbnQgaW50byB0ZXh0YmxvY2sgbm9kZXMuIEl0IGNhbiBiZSBlbXB0eSAoYSByZWd1bGFyIGN1cnNvclxucG9zaXRpb24pLlxuKi9cbmNsYXNzIFRleHRTZWxlY3Rpb24gZXh0ZW5kcyBTZWxlY3Rpb24ge1xuICAgIC8qKlxuICAgIENvbnN0cnVjdCBhIHRleHQgc2VsZWN0aW9uIGJldHdlZW4gdGhlIGdpdmVuIHBvaW50cy5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCRhbmNob3IsICRoZWFkID0gJGFuY2hvcikge1xuICAgICAgICBjaGVja1RleHRTZWxlY3Rpb24oJGFuY2hvcik7XG4gICAgICAgIGNoZWNrVGV4dFNlbGVjdGlvbigkaGVhZCk7XG4gICAgICAgIHN1cGVyKCRhbmNob3IsICRoZWFkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyBhIHJlc29sdmVkIHBvc2l0aW9uIGlmIHRoaXMgaXMgYSBjdXJzb3Igc2VsZWN0aW9uIChhblxuICAgIGVtcHR5IHRleHQgc2VsZWN0aW9uKSwgYW5kIG51bGwgb3RoZXJ3aXNlLlxuICAgICovXG4gICAgZ2V0ICRjdXJzb3IoKSB7IHJldHVybiB0aGlzLiRhbmNob3IucG9zID09IHRoaXMuJGhlYWQucG9zID8gdGhpcy4kaGVhZCA6IG51bGw7IH1cbiAgICBtYXAoZG9jLCBtYXBwaW5nKSB7XG4gICAgICAgIGxldCAkaGVhZCA9IGRvYy5yZXNvbHZlKG1hcHBpbmcubWFwKHRoaXMuaGVhZCkpO1xuICAgICAgICBpZiAoISRoZWFkLnBhcmVudC5pbmxpbmVDb250ZW50KVxuICAgICAgICAgICAgcmV0dXJuIFNlbGVjdGlvbi5uZWFyKCRoZWFkKTtcbiAgICAgICAgbGV0ICRhbmNob3IgPSBkb2MucmVzb2x2ZShtYXBwaW5nLm1hcCh0aGlzLmFuY2hvcikpO1xuICAgICAgICByZXR1cm4gbmV3IFRleHRTZWxlY3Rpb24oJGFuY2hvci5wYXJlbnQuaW5saW5lQ29udGVudCA/ICRhbmNob3IgOiAkaGVhZCwgJGhlYWQpO1xuICAgIH1cbiAgICByZXBsYWNlKHRyLCBjb250ZW50ID0gU2xpY2UuZW1wdHkpIHtcbiAgICAgICAgc3VwZXIucmVwbGFjZSh0ciwgY29udGVudCk7XG4gICAgICAgIGlmIChjb250ZW50ID09IFNsaWNlLmVtcHR5KSB7XG4gICAgICAgICAgICBsZXQgbWFya3MgPSB0aGlzLiRmcm9tLm1hcmtzQWNyb3NzKHRoaXMuJHRvKTtcbiAgICAgICAgICAgIGlmIChtYXJrcylcbiAgICAgICAgICAgICAgICB0ci5lbnN1cmVNYXJrcyhtYXJrcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXEob3RoZXIpIHtcbiAgICAgICAgcmV0dXJuIG90aGVyIGluc3RhbmNlb2YgVGV4dFNlbGVjdGlvbiAmJiBvdGhlci5hbmNob3IgPT0gdGhpcy5hbmNob3IgJiYgb3RoZXIuaGVhZCA9PSB0aGlzLmhlYWQ7XG4gICAgfVxuICAgIGdldEJvb2ttYXJrKCkge1xuICAgICAgICByZXR1cm4gbmV3IFRleHRCb29rbWFyayh0aGlzLmFuY2hvciwgdGhpcy5oZWFkKTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4geyB0eXBlOiBcInRleHRcIiwgYW5jaG9yOiB0aGlzLmFuY2hvciwgaGVhZDogdGhpcy5oZWFkIH07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKGRvYywganNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGpzb24uYW5jaG9yICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIGpzb24uaGVhZCAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlucHV0IGZvciBUZXh0U2VsZWN0aW9uLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFRleHRTZWxlY3Rpb24oZG9jLnJlc29sdmUoanNvbi5hbmNob3IpLCBkb2MucmVzb2x2ZShqc29uLmhlYWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgdGV4dCBzZWxlY3Rpb24gZnJvbSBub24tcmVzb2x2ZWQgcG9zaXRpb25zLlxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShkb2MsIGFuY2hvciwgaGVhZCA9IGFuY2hvcikge1xuICAgICAgICBsZXQgJGFuY2hvciA9IGRvYy5yZXNvbHZlKGFuY2hvcik7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcygkYW5jaG9yLCBoZWFkID09IGFuY2hvciA/ICRhbmNob3IgOiBkb2MucmVzb2x2ZShoZWFkKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFJldHVybiBhIHRleHQgc2VsZWN0aW9uIHRoYXQgc3BhbnMgdGhlIGdpdmVuIHBvc2l0aW9ucyBvciwgaWZcbiAgICB0aGV5IGFyZW4ndCB0ZXh0IHBvc2l0aW9ucywgZmluZCBhIHRleHQgc2VsZWN0aW9uIG5lYXIgdGhlbS5cbiAgICBgYmlhc2AgZGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBtZXRob2Qgc2VhcmNoZXMgZm9yd2FyZCAoZGVmYXVsdClcbiAgICBvciBiYWNrd2FyZHMgKG5lZ2F0aXZlIG51bWJlcikgZmlyc3QuIFdpbGwgZmFsbCBiYWNrIHRvIGNhbGxpbmdcbiAgICBbYFNlbGVjdGlvbi5uZWFyYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlNlbGVjdGlvbl5uZWFyKSB3aGVuIHRoZSBkb2N1bWVudFxuICAgIGRvZXNuJ3QgY29udGFpbiBhIHZhbGlkIHRleHQgcG9zaXRpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgYmV0d2VlbigkYW5jaG9yLCAkaGVhZCwgYmlhcykge1xuICAgICAgICBsZXQgZFBvcyA9ICRhbmNob3IucG9zIC0gJGhlYWQucG9zO1xuICAgICAgICBpZiAoIWJpYXMgfHwgZFBvcylcbiAgICAgICAgICAgIGJpYXMgPSBkUG9zID49IDAgPyAxIDogLTE7XG4gICAgICAgIGlmICghJGhlYWQucGFyZW50LmlubGluZUNvbnRlbnQpIHtcbiAgICAgICAgICAgIGxldCBmb3VuZCA9IFNlbGVjdGlvbi5maW5kRnJvbSgkaGVhZCwgYmlhcywgdHJ1ZSkgfHwgU2VsZWN0aW9uLmZpbmRGcm9tKCRoZWFkLCAtYmlhcywgdHJ1ZSk7XG4gICAgICAgICAgICBpZiAoZm91bmQpXG4gICAgICAgICAgICAgICAgJGhlYWQgPSBmb3VuZC4kaGVhZDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICByZXR1cm4gU2VsZWN0aW9uLm5lYXIoJGhlYWQsIGJpYXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghJGFuY2hvci5wYXJlbnQuaW5saW5lQ29udGVudCkge1xuICAgICAgICAgICAgaWYgKGRQb3MgPT0gMCkge1xuICAgICAgICAgICAgICAgICRhbmNob3IgPSAkaGVhZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICRhbmNob3IgPSAoU2VsZWN0aW9uLmZpbmRGcm9tKCRhbmNob3IsIC1iaWFzLCB0cnVlKSB8fCBTZWxlY3Rpb24uZmluZEZyb20oJGFuY2hvciwgYmlhcywgdHJ1ZSkpLiRhbmNob3I7XG4gICAgICAgICAgICAgICAgaWYgKCgkYW5jaG9yLnBvcyA8ICRoZWFkLnBvcykgIT0gKGRQb3MgPCAwKSlcbiAgICAgICAgICAgICAgICAgICAgJGFuY2hvciA9ICRoZWFkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgVGV4dFNlbGVjdGlvbigkYW5jaG9yLCAkaGVhZCk7XG4gICAgfVxufVxuU2VsZWN0aW9uLmpzb25JRChcInRleHRcIiwgVGV4dFNlbGVjdGlvbik7XG5jbGFzcyBUZXh0Qm9va21hcmsge1xuICAgIGNvbnN0cnVjdG9yKGFuY2hvciwgaGVhZCkge1xuICAgICAgICB0aGlzLmFuY2hvciA9IGFuY2hvcjtcbiAgICAgICAgdGhpcy5oZWFkID0gaGVhZDtcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUZXh0Qm9va21hcmsobWFwcGluZy5tYXAodGhpcy5hbmNob3IpLCBtYXBwaW5nLm1hcCh0aGlzLmhlYWQpKTtcbiAgICB9XG4gICAgcmVzb2x2ZShkb2MpIHtcbiAgICAgICAgcmV0dXJuIFRleHRTZWxlY3Rpb24uYmV0d2Vlbihkb2MucmVzb2x2ZSh0aGlzLmFuY2hvciksIGRvYy5yZXNvbHZlKHRoaXMuaGVhZCkpO1xuICAgIH1cbn1cbi8qKlxuQSBub2RlIHNlbGVjdGlvbiBpcyBhIHNlbGVjdGlvbiB0aGF0IHBvaW50cyBhdCBhIHNpbmdsZSBub2RlLiBBbGxcbm5vZGVzIG1hcmtlZCBbc2VsZWN0YWJsZV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLnNlbGVjdGFibGUpIGNhbiBiZSB0aGVcbnRhcmdldCBvZiBhIG5vZGUgc2VsZWN0aW9uLiBJbiBzdWNoIGEgc2VsZWN0aW9uLCBgZnJvbWAgYW5kIGB0b2BcbnBvaW50IGRpcmVjdGx5IGJlZm9yZSBhbmQgYWZ0ZXIgdGhlIHNlbGVjdGVkIG5vZGUsIGBhbmNob3JgIGVxdWFsc1xuYGZyb21gLCBhbmQgYGhlYWRgIGVxdWFscyBgdG9gLi5cbiovXG5jbGFzcyBOb2RlU2VsZWN0aW9uIGV4dGVuZHMgU2VsZWN0aW9uIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBub2RlIHNlbGVjdGlvbi4gRG9lcyBub3QgdmVyaWZ5IHRoZSB2YWxpZGl0eSBvZiBpdHNcbiAgICBhcmd1bWVudC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCRwb3MpIHtcbiAgICAgICAgbGV0IG5vZGUgPSAkcG9zLm5vZGVBZnRlcjtcbiAgICAgICAgbGV0ICRlbmQgPSAkcG9zLm5vZGUoMCkucmVzb2x2ZSgkcG9zLnBvcyArIG5vZGUubm9kZVNpemUpO1xuICAgICAgICBzdXBlcigkcG9zLCAkZW5kKTtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICB9XG4gICAgbWFwKGRvYywgbWFwcGluZykge1xuICAgICAgICBsZXQgeyBkZWxldGVkLCBwb3MgfSA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMuYW5jaG9yKTtcbiAgICAgICAgbGV0ICRwb3MgPSBkb2MucmVzb2x2ZShwb3MpO1xuICAgICAgICBpZiAoZGVsZXRlZClcbiAgICAgICAgICAgIHJldHVybiBTZWxlY3Rpb24ubmVhcigkcG9zKTtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlU2VsZWN0aW9uKCRwb3MpO1xuICAgIH1cbiAgICBjb250ZW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IFNsaWNlKEZyYWdtZW50LmZyb20odGhpcy5ub2RlKSwgMCwgMCk7XG4gICAgfVxuICAgIGVxKG90aGVyKSB7XG4gICAgICAgIHJldHVybiBvdGhlciBpbnN0YW5jZW9mIE5vZGVTZWxlY3Rpb24gJiYgb3RoZXIuYW5jaG9yID09IHRoaXMuYW5jaG9yO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7IHR5cGU6IFwibm9kZVwiLCBhbmNob3I6IHRoaXMuYW5jaG9yIH07XG4gICAgfVxuICAgIGdldEJvb2ttYXJrKCkgeyByZXR1cm4gbmV3IE5vZGVCb29rbWFyayh0aGlzLmFuY2hvcik7IH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihkb2MsIGpzb24pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBqc29uLmFuY2hvciAhPSBcIm51bWJlclwiKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGlucHV0IGZvciBOb2RlU2VsZWN0aW9uLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IE5vZGVTZWxlY3Rpb24oZG9jLnJlc29sdmUoanNvbi5hbmNob3IpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbm9kZSBzZWxlY3Rpb24gZnJvbSBub24tcmVzb2x2ZWQgcG9zaXRpb25zLlxuICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShkb2MsIGZyb20pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOb2RlU2VsZWN0aW9uKGRvYy5yZXNvbHZlKGZyb20pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBnaXZlbiBub2RlIG1heSBiZSBzZWxlY3RlZCBhcyBhIG5vZGVcbiAgICBzZWxlY3Rpb24uXG4gICAgKi9cbiAgICBzdGF0aWMgaXNTZWxlY3RhYmxlKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuICFub2RlLmlzVGV4dCAmJiBub2RlLnR5cGUuc3BlYy5zZWxlY3RhYmxlICE9PSBmYWxzZTtcbiAgICB9XG59XG5Ob2RlU2VsZWN0aW9uLnByb3RvdHlwZS52aXNpYmxlID0gZmFsc2U7XG5TZWxlY3Rpb24uanNvbklEKFwibm9kZVwiLCBOb2RlU2VsZWN0aW9uKTtcbmNsYXNzIE5vZGVCb29rbWFyayB7XG4gICAgY29uc3RydWN0b3IoYW5jaG9yKSB7XG4gICAgICAgIHRoaXMuYW5jaG9yID0gYW5jaG9yO1xuICAgIH1cbiAgICBtYXAobWFwcGluZykge1xuICAgICAgICBsZXQgeyBkZWxldGVkLCBwb3MgfSA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMuYW5jaG9yKTtcbiAgICAgICAgcmV0dXJuIGRlbGV0ZWQgPyBuZXcgVGV4dEJvb2ttYXJrKHBvcywgcG9zKSA6IG5ldyBOb2RlQm9va21hcmsocG9zKTtcbiAgICB9XG4gICAgcmVzb2x2ZShkb2MpIHtcbiAgICAgICAgbGV0ICRwb3MgPSBkb2MucmVzb2x2ZSh0aGlzLmFuY2hvciksIG5vZGUgPSAkcG9zLm5vZGVBZnRlcjtcbiAgICAgICAgaWYgKG5vZGUgJiYgTm9kZVNlbGVjdGlvbi5pc1NlbGVjdGFibGUobm9kZSkpXG4gICAgICAgICAgICByZXR1cm4gbmV3IE5vZGVTZWxlY3Rpb24oJHBvcyk7XG4gICAgICAgIHJldHVybiBTZWxlY3Rpb24ubmVhcigkcG9zKTtcbiAgICB9XG59XG4vKipcbkEgc2VsZWN0aW9uIHR5cGUgdGhhdCByZXByZXNlbnRzIHNlbGVjdGluZyB0aGUgd2hvbGUgZG9jdW1lbnRcbih3aGljaCBjYW4gbm90IG5lY2Vzc2FyaWx5IGJlIGV4cHJlc3NlZCB3aXRoIGEgdGV4dCBzZWxlY3Rpb24sIHdoZW5cbnRoZXJlIGFyZSBmb3IgZXhhbXBsZSBsZWFmIGJsb2NrIG5vZGVzIGF0IHRoZSBzdGFydCBvciBlbmQgb2YgdGhlXG5kb2N1bWVudCkuXG4qL1xuY2xhc3MgQWxsU2VsZWN0aW9uIGV4dGVuZHMgU2VsZWN0aW9uIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYW4gYWxsLXNlbGVjdGlvbiBvdmVyIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRvYykge1xuICAgICAgICBzdXBlcihkb2MucmVzb2x2ZSgwKSwgZG9jLnJlc29sdmUoZG9jLmNvbnRlbnQuc2l6ZSkpO1xuICAgIH1cbiAgICByZXBsYWNlKHRyLCBjb250ZW50ID0gU2xpY2UuZW1wdHkpIHtcbiAgICAgICAgaWYgKGNvbnRlbnQgPT0gU2xpY2UuZW1wdHkpIHtcbiAgICAgICAgICAgIHRyLmRlbGV0ZSgwLCB0ci5kb2MuY29udGVudC5zaXplKTtcbiAgICAgICAgICAgIGxldCBzZWwgPSBTZWxlY3Rpb24uYXRTdGFydCh0ci5kb2MpO1xuICAgICAgICAgICAgaWYgKCFzZWwuZXEodHIuc2VsZWN0aW9uKSlcbiAgICAgICAgICAgICAgICB0ci5zZXRTZWxlY3Rpb24oc2VsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN1cGVyLnJlcGxhY2UodHIsIGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHsgcmV0dXJuIHsgdHlwZTogXCJhbGxcIiB9OyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oZG9jKSB7IHJldHVybiBuZXcgQWxsU2VsZWN0aW9uKGRvYyk7IH1cbiAgICBtYXAoZG9jKSB7IHJldHVybiBuZXcgQWxsU2VsZWN0aW9uKGRvYyk7IH1cbiAgICBlcShvdGhlcikgeyByZXR1cm4gb3RoZXIgaW5zdGFuY2VvZiBBbGxTZWxlY3Rpb247IH1cbiAgICBnZXRCb29rbWFyaygpIHsgcmV0dXJuIEFsbEJvb2ttYXJrOyB9XG59XG5TZWxlY3Rpb24uanNvbklEKFwiYWxsXCIsIEFsbFNlbGVjdGlvbik7XG5jb25zdCBBbGxCb29rbWFyayA9IHtcbiAgICBtYXAoKSB7IHJldHVybiB0aGlzOyB9LFxuICAgIHJlc29sdmUoZG9jKSB7IHJldHVybiBuZXcgQWxsU2VsZWN0aW9uKGRvYyk7IH1cbn07XG4vLyBGSVhNRSB3ZSdsbCBuZWVkIHNvbWUgYXdhcmVuZXNzIG9mIHRleHQgZGlyZWN0aW9uIHdoZW4gc2Nhbm5pbmcgZm9yIHNlbGVjdGlvbnNcbi8vIFRyeSB0byBmaW5kIGEgc2VsZWN0aW9uIGluc2lkZSB0aGUgZ2l2ZW4gbm9kZS4gYHBvc2AgcG9pbnRzIGF0IHRoZVxuLy8gcG9zaXRpb24gd2hlcmUgdGhlIHNlYXJjaCBzdGFydHMuIFdoZW4gYHRleHRgIGlzIHRydWUsIG9ubHkgcmV0dXJuXG4vLyB0ZXh0IHNlbGVjdGlvbnMuXG5mdW5jdGlvbiBmaW5kU2VsZWN0aW9uSW4oZG9jLCBub2RlLCBwb3MsIGluZGV4LCBkaXIsIHRleHQgPSBmYWxzZSkge1xuICAgIGlmIChub2RlLmlubGluZUNvbnRlbnQpXG4gICAgICAgIHJldHVybiBUZXh0U2VsZWN0aW9uLmNyZWF0ZShkb2MsIHBvcyk7XG4gICAgZm9yIChsZXQgaSA9IGluZGV4IC0gKGRpciA+IDAgPyAwIDogMSk7IGRpciA+IDAgPyBpIDwgbm9kZS5jaGlsZENvdW50IDogaSA+PSAwOyBpICs9IGRpcikge1xuICAgICAgICBsZXQgY2hpbGQgPSBub2RlLmNoaWxkKGkpO1xuICAgICAgICBpZiAoIWNoaWxkLmlzQXRvbSkge1xuICAgICAgICAgICAgbGV0IGlubmVyID0gZmluZFNlbGVjdGlvbkluKGRvYywgY2hpbGQsIHBvcyArIGRpciwgZGlyIDwgMCA/IGNoaWxkLmNoaWxkQ291bnQgOiAwLCBkaXIsIHRleHQpO1xuICAgICAgICAgICAgaWYgKGlubmVyKVxuICAgICAgICAgICAgICAgIHJldHVybiBpbm5lcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghdGV4dCAmJiBOb2RlU2VsZWN0aW9uLmlzU2VsZWN0YWJsZShjaGlsZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBOb2RlU2VsZWN0aW9uLmNyZWF0ZShkb2MsIHBvcyAtIChkaXIgPCAwID8gY2hpbGQubm9kZVNpemUgOiAwKSk7XG4gICAgICAgIH1cbiAgICAgICAgcG9zICs9IGNoaWxkLm5vZGVTaXplICogZGlyO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIHNlbGVjdGlvblRvSW5zZXJ0aW9uRW5kKHRyLCBzdGFydExlbiwgYmlhcykge1xuICAgIGxldCBsYXN0ID0gdHIuc3RlcHMubGVuZ3RoIC0gMTtcbiAgICBpZiAobGFzdCA8IHN0YXJ0TGVuKVxuICAgICAgICByZXR1cm47XG4gICAgbGV0IHN0ZXAgPSB0ci5zdGVwc1tsYXN0XTtcbiAgICBpZiAoIShzdGVwIGluc3RhbmNlb2YgUmVwbGFjZVN0ZXAgfHwgc3RlcCBpbnN0YW5jZW9mIFJlcGxhY2VBcm91bmRTdGVwKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGxldCBtYXAgPSB0ci5tYXBwaW5nLm1hcHNbbGFzdF0sIGVuZDtcbiAgICBtYXAuZm9yRWFjaCgoX2Zyb20sIF90bywgX25ld0Zyb20sIG5ld1RvKSA9PiB7IGlmIChlbmQgPT0gbnVsbClcbiAgICAgICAgZW5kID0gbmV3VG87IH0pO1xuICAgIHRyLnNldFNlbGVjdGlvbihTZWxlY3Rpb24ubmVhcih0ci5kb2MucmVzb2x2ZShlbmQpLCBiaWFzKSk7XG59XG5cbmNvbnN0IFVQREFURURfU0VMID0gMSwgVVBEQVRFRF9NQVJLUyA9IDIsIFVQREFURURfU0NST0xMID0gNDtcbi8qKlxuQW4gZWRpdG9yIHN0YXRlIHRyYW5zYWN0aW9uLCB3aGljaCBjYW4gYmUgYXBwbGllZCB0byBhIHN0YXRlIHRvXG5jcmVhdGUgYW4gdXBkYXRlZCBzdGF0ZS4gVXNlXG5bYEVkaXRvclN0YXRlLnRyYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnRyKSB0byBjcmVhdGUgYW4gaW5zdGFuY2UuXG5cblRyYW5zYWN0aW9ucyB0cmFjayBjaGFuZ2VzIHRvIHRoZSBkb2N1bWVudCAodGhleSBhcmUgYSBzdWJjbGFzcyBvZlxuW2BUcmFuc2Zvcm1gXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdHJhbnNmb3JtLlRyYW5zZm9ybSkpLCBidXQgYWxzbyBvdGhlciBzdGF0ZSBjaGFuZ2VzLFxubGlrZSBzZWxlY3Rpb24gdXBkYXRlcyBhbmQgYWRqdXN0bWVudHMgb2YgdGhlIHNldCBvZiBbc3RvcmVkXG5tYXJrc10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLnN0b3JlZE1hcmtzKS4gSW4gYWRkaXRpb24sIHlvdSBjYW4gc3RvcmVcbm1ldGFkYXRhIHByb3BlcnRpZXMgaW4gYSB0cmFuc2FjdGlvbiwgd2hpY2ggYXJlIGV4dHJhIHBpZWNlcyBvZlxuaW5mb3JtYXRpb24gdGhhdCBjbGllbnQgY29kZSBvciBwbHVnaW5zIGNhbiB1c2UgdG8gZGVzY3JpYmUgd2hhdCBhXG50cmFuc2FjdGlvbiByZXByZXNlbnRzLCBzbyB0aGF0IHRoZXkgY2FuIHVwZGF0ZSB0aGVpciBbb3duXG5zdGF0ZV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlN0YXRlRmllbGQpIGFjY29yZGluZ2x5LlxuXG5UaGUgW2VkaXRvciB2aWV3XShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5FZGl0b3JWaWV3KSB1c2VzIGEgZmV3IG1ldGFkYXRhIHByb3BlcnRpZXM6XG5pdCB3aWxsIGF0dGFjaCBhIHByb3BlcnR5IGBcInBvaW50ZXJcImAgd2l0aCB0aGUgdmFsdWUgYHRydWVgIHRvXG5zZWxlY3Rpb24gdHJhbnNhY3Rpb25zIGRpcmVjdGx5IGNhdXNlZCBieSBtb3VzZSBvciB0b3VjaCBpbnB1dCwgYW5kXG5hIGBcInVpRXZlbnRcImAgcHJvcGVydHkgb2YgdGhhdCBtYXkgYmUgYFwicGFzdGVcImAsIGBcImN1dFwiYCwgb3IgYFwiZHJvcFwiYC5cbiovXG5jbGFzcyBUcmFuc2FjdGlvbiBleHRlbmRzIFRyYW5zZm9ybSB7XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihzdGF0ZSkge1xuICAgICAgICBzdXBlcihzdGF0ZS5kb2MpO1xuICAgICAgICAvLyBUaGUgc3RlcCBjb3VudCBmb3Igd2hpY2ggdGhlIGN1cnJlbnQgc2VsZWN0aW9uIGlzIHZhbGlkLlxuICAgICAgICB0aGlzLmN1clNlbGVjdGlvbkZvciA9IDA7XG4gICAgICAgIC8vIEJpdGZpZWxkIHRvIHRyYWNrIHdoaWNoIGFzcGVjdHMgb2YgdGhlIHN0YXRlIHdlcmUgdXBkYXRlZCBieVxuICAgICAgICAvLyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnVwZGF0ZWQgPSAwO1xuICAgICAgICAvLyBPYmplY3QgdXNlZCB0byBzdG9yZSBtZXRhZGF0YSBwcm9wZXJ0aWVzIGZvciB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgIHRoaXMubWV0YSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgIHRoaXMudGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHRoaXMuY3VyU2VsZWN0aW9uID0gc3RhdGUuc2VsZWN0aW9uO1xuICAgICAgICB0aGlzLnN0b3JlZE1hcmtzID0gc3RhdGUuc3RvcmVkTWFya3M7XG4gICAgfVxuICAgIC8qKlxuICAgIFRoZSB0cmFuc2FjdGlvbidzIGN1cnJlbnQgc2VsZWN0aW9uLiBUaGlzIGRlZmF1bHRzIHRvIHRoZSBlZGl0b3JcbiAgICBzZWxlY3Rpb24gW21hcHBlZF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlNlbGVjdGlvbi5tYXApIHRocm91Z2ggdGhlIHN0ZXBzIGluIHRoZVxuICAgIHRyYW5zYWN0aW9uLCBidXQgY2FuIGJlIG92ZXJ3cml0dGVuIHdpdGhcbiAgICBbYHNldFNlbGVjdGlvbmBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzdGF0ZS5UcmFuc2FjdGlvbi5zZXRTZWxlY3Rpb24pLlxuICAgICovXG4gICAgZ2V0IHNlbGVjdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuY3VyU2VsZWN0aW9uRm9yIDwgdGhpcy5zdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY3VyU2VsZWN0aW9uID0gdGhpcy5jdXJTZWxlY3Rpb24ubWFwKHRoaXMuZG9jLCB0aGlzLm1hcHBpbmcuc2xpY2UodGhpcy5jdXJTZWxlY3Rpb25Gb3IpKTtcbiAgICAgICAgICAgIHRoaXMuY3VyU2VsZWN0aW9uRm9yID0gdGhpcy5zdGVwcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY3VyU2VsZWN0aW9uO1xuICAgIH1cbiAgICAvKipcbiAgICBVcGRhdGUgdGhlIHRyYW5zYWN0aW9uJ3MgY3VycmVudCBzZWxlY3Rpb24uIFdpbGwgZGV0ZXJtaW5lIHRoZVxuICAgIHNlbGVjdGlvbiB0aGF0IHRoZSBlZGl0b3IgZ2V0cyB3aGVuIHRoZSB0cmFuc2FjdGlvbiBpcyBhcHBsaWVkLlxuICAgICovXG4gICAgc2V0U2VsZWN0aW9uKHNlbGVjdGlvbikge1xuICAgICAgICBpZiAoc2VsZWN0aW9uLiRmcm9tLmRvYyAhPSB0aGlzLmRvYylcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiU2VsZWN0aW9uIHBhc3NlZCB0byBzZXRTZWxlY3Rpb24gbXVzdCBwb2ludCBhdCB0aGUgY3VycmVudCBkb2N1bWVudFwiKTtcbiAgICAgICAgdGhpcy5jdXJTZWxlY3Rpb24gPSBzZWxlY3Rpb247XG4gICAgICAgIHRoaXMuY3VyU2VsZWN0aW9uRm9yID0gdGhpcy5zdGVwcy5sZW5ndGg7XG4gICAgICAgIHRoaXMudXBkYXRlZCA9ICh0aGlzLnVwZGF0ZWQgfCBVUERBVEVEX1NFTCkgJiB+VVBEQVRFRF9NQVJLUztcbiAgICAgICAgdGhpcy5zdG9yZWRNYXJrcyA9IG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBXaGV0aGVyIHRoZSBzZWxlY3Rpb24gd2FzIGV4cGxpY2l0bHkgdXBkYXRlZCBieSB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICovXG4gICAgZ2V0IHNlbGVjdGlvblNldCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLnVwZGF0ZWQgJiBVUERBVEVEX1NFTCkgPiAwO1xuICAgIH1cbiAgICAvKipcbiAgICBTZXQgdGhlIGN1cnJlbnQgc3RvcmVkIG1hcmtzLlxuICAgICovXG4gICAgc2V0U3RvcmVkTWFya3MobWFya3MpIHtcbiAgICAgICAgdGhpcy5zdG9yZWRNYXJrcyA9IG1hcmtzO1xuICAgICAgICB0aGlzLnVwZGF0ZWQgfD0gVVBEQVRFRF9NQVJLUztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIE1ha2Ugc3VyZSB0aGUgY3VycmVudCBzdG9yZWQgbWFya3Mgb3IsIGlmIHRoYXQgaXMgbnVsbCwgdGhlIG1hcmtzXG4gICAgYXQgdGhlIHNlbGVjdGlvbiwgbWF0Y2ggdGhlIGdpdmVuIHNldCBvZiBtYXJrcy4gRG9lcyBub3RoaW5nIGlmXG4gICAgdGhpcyBpcyBhbHJlYWR5IHRoZSBjYXNlLlxuICAgICovXG4gICAgZW5zdXJlTWFya3MobWFya3MpIHtcbiAgICAgICAgaWYgKCFNYXJrLnNhbWVTZXQodGhpcy5zdG9yZWRNYXJrcyB8fCB0aGlzLnNlbGVjdGlvbi4kZnJvbS5tYXJrcygpLCBtYXJrcykpXG4gICAgICAgICAgICB0aGlzLnNldFN0b3JlZE1hcmtzKG1hcmtzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIEFkZCBhIG1hcmsgdG8gdGhlIHNldCBvZiBzdG9yZWQgbWFya3MuXG4gICAgKi9cbiAgICBhZGRTdG9yZWRNYXJrKG1hcmspIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5zdXJlTWFya3MobWFyay5hZGRUb1NldCh0aGlzLnN0b3JlZE1hcmtzIHx8IHRoaXMuc2VsZWN0aW9uLiRoZWFkLm1hcmtzKCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmVtb3ZlIGEgbWFyayBvciBtYXJrIHR5cGUgZnJvbSB0aGUgc2V0IG9mIHN0b3JlZCBtYXJrcy5cbiAgICAqL1xuICAgIHJlbW92ZVN0b3JlZE1hcmsobWFyaykge1xuICAgICAgICByZXR1cm4gdGhpcy5lbnN1cmVNYXJrcyhtYXJrLnJlbW92ZUZyb21TZXQodGhpcy5zdG9yZWRNYXJrcyB8fCB0aGlzLnNlbGVjdGlvbi4kaGVhZC5tYXJrcygpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgIFdoZXRoZXIgdGhlIHN0b3JlZCBtYXJrcyB3ZXJlIGV4cGxpY2l0bHkgc2V0IGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICovXG4gICAgZ2V0IHN0b3JlZE1hcmtzU2V0KCkge1xuICAgICAgICByZXR1cm4gKHRoaXMudXBkYXRlZCAmIFVQREFURURfTUFSS1MpID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBhZGRTdGVwKHN0ZXAsIGRvYykge1xuICAgICAgICBzdXBlci5hZGRTdGVwKHN0ZXAsIGRvYyk7XG4gICAgICAgIHRoaXMudXBkYXRlZCA9IHRoaXMudXBkYXRlZCAmIH5VUERBVEVEX01BUktTO1xuICAgICAgICB0aGlzLnN0b3JlZE1hcmtzID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgVXBkYXRlIHRoZSB0aW1lc3RhbXAgZm9yIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIHNldFRpbWUodGltZSkge1xuICAgICAgICB0aGlzLnRpbWUgPSB0aW1lO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSB0aGUgY3VycmVudCBzZWxlY3Rpb24gd2l0aCB0aGUgZ2l2ZW4gc2xpY2UuXG4gICAgKi9cbiAgICByZXBsYWNlU2VsZWN0aW9uKHNsaWNlKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uLnJlcGxhY2UodGhpcywgc2xpY2UpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSB0aGUgc2VsZWN0aW9uIHdpdGggdGhlIGdpdmVuIG5vZGUuIFdoZW4gYGluaGVyaXRNYXJrc2AgaXNcbiAgICB0cnVlIGFuZCB0aGUgY29udGVudCBpcyBpbmxpbmUsIGl0IGluaGVyaXRzIHRoZSBtYXJrcyBmcm9tIHRoZVxuICAgIHBsYWNlIHdoZXJlIGl0IGlzIGluc2VydGVkLlxuICAgICovXG4gICAgcmVwbGFjZVNlbGVjdGlvbldpdGgobm9kZSwgaW5oZXJpdE1hcmtzID0gdHJ1ZSkge1xuICAgICAgICBsZXQgc2VsZWN0aW9uID0gdGhpcy5zZWxlY3Rpb247XG4gICAgICAgIGlmIChpbmhlcml0TWFya3MpXG4gICAgICAgICAgICBub2RlID0gbm9kZS5tYXJrKHRoaXMuc3RvcmVkTWFya3MgfHwgKHNlbGVjdGlvbi5lbXB0eSA/IHNlbGVjdGlvbi4kZnJvbS5tYXJrcygpIDogKHNlbGVjdGlvbi4kZnJvbS5tYXJrc0Fjcm9zcyhzZWxlY3Rpb24uJHRvKSB8fCBNYXJrLm5vbmUpKSk7XG4gICAgICAgIHNlbGVjdGlvbi5yZXBsYWNlV2l0aCh0aGlzLCBub2RlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIERlbGV0ZSB0aGUgc2VsZWN0aW9uLlxuICAgICovXG4gICAgZGVsZXRlU2VsZWN0aW9uKCkge1xuICAgICAgICB0aGlzLnNlbGVjdGlvbi5yZXBsYWNlKHRoaXMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSB0aGUgZ2l2ZW4gcmFuZ2UsIG9yIHRoZSBzZWxlY3Rpb24gaWYgbm8gcmFuZ2UgaXMgZ2l2ZW4sXG4gICAgd2l0aCBhIHRleHQgbm9kZSBjb250YWluaW5nIHRoZSBnaXZlbiBzdHJpbmcuXG4gICAgKi9cbiAgICBpbnNlcnRUZXh0KHRleHQsIGZyb20sIHRvKSB7XG4gICAgICAgIGxldCBzY2hlbWEgPSB0aGlzLmRvYy50eXBlLnNjaGVtYTtcbiAgICAgICAgaWYgKGZyb20gPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKCF0ZXh0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlbGV0ZVNlbGVjdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVNlbGVjdGlvbldpdGgoc2NoZW1hLnRleHQodGV4dCksIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRvID09IG51bGwpXG4gICAgICAgICAgICAgICAgdG8gPSBmcm9tO1xuICAgICAgICAgICAgdG8gPSB0byA9PSBudWxsID8gZnJvbSA6IHRvO1xuICAgICAgICAgICAgaWYgKCF0ZXh0KVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRlbGV0ZVJhbmdlKGZyb20sIHRvKTtcbiAgICAgICAgICAgIGxldCBtYXJrcyA9IHRoaXMuc3RvcmVkTWFya3M7XG4gICAgICAgICAgICBpZiAoIW1hcmtzKSB7XG4gICAgICAgICAgICAgICAgbGV0ICRmcm9tID0gdGhpcy5kb2MucmVzb2x2ZShmcm9tKTtcbiAgICAgICAgICAgICAgICBtYXJrcyA9IHRvID09IGZyb20gPyAkZnJvbS5tYXJrcygpIDogJGZyb20ubWFya3NBY3Jvc3ModGhpcy5kb2MucmVzb2x2ZSh0bykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZXBsYWNlUmFuZ2VXaXRoKGZyb20sIHRvLCBzY2hlbWEudGV4dCh0ZXh0LCBtYXJrcykpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvbi5lbXB0eSlcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNlbGVjdGlvbihTZWxlY3Rpb24ubmVhcih0aGlzLnNlbGVjdGlvbi4kdG8pKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIFN0b3JlIGEgbWV0YWRhdGEgcHJvcGVydHkgaW4gdGhpcyB0cmFuc2FjdGlvbiwga2V5ZWQgZWl0aGVyIGJ5XG4gICAgbmFtZSBvciBieSBwbHVnaW4uXG4gICAgKi9cbiAgICBzZXRNZXRhKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5tZXRhW3R5cGVvZiBrZXkgPT0gXCJzdHJpbmdcIiA/IGtleSA6IGtleS5rZXldID0gdmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXRyaWV2ZSBhIG1ldGFkYXRhIHByb3BlcnR5IGZvciBhIGdpdmVuIG5hbWUgb3IgcGx1Z2luLlxuICAgICovXG4gICAgZ2V0TWV0YShrZXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWV0YVt0eXBlb2Yga2V5ID09IFwic3RyaW5nXCIgPyBrZXkgOiBrZXkua2V5XTtcbiAgICB9XG4gICAgLyoqXG4gICAgUmV0dXJucyB0cnVlIGlmIHRoaXMgdHJhbnNhY3Rpb24gZG9lc24ndCBjb250YWluIGFueSBtZXRhZGF0YSxcbiAgICBhbmQgY2FuIHRodXMgc2FmZWx5IGJlIGV4dGVuZGVkLlxuICAgICovXG4gICAgZ2V0IGlzR2VuZXJpYygpIHtcbiAgICAgICAgZm9yIChsZXQgXyBpbiB0aGlzLm1ldGEpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICBJbmRpY2F0ZSB0aGF0IHRoZSBlZGl0b3Igc2hvdWxkIHNjcm9sbCB0aGUgc2VsZWN0aW9uIGludG8gdmlld1xuICAgIHdoZW4gdXBkYXRlZCB0byB0aGUgc3RhdGUgcHJvZHVjZWQgYnkgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAqL1xuICAgIHNjcm9sbEludG9WaWV3KCkge1xuICAgICAgICB0aGlzLnVwZGF0ZWQgfD0gVVBEQVRFRF9TQ1JPTEw7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhpcyB0cmFuc2FjdGlvbiBoYXMgaGFkIGBzY3JvbGxJbnRvVmlld2AgY2FsbGVkIG9uIGl0LlxuICAgICovXG4gICAgZ2V0IHNjcm9sbGVkSW50b1ZpZXcoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy51cGRhdGVkICYgVVBEQVRFRF9TQ1JPTEwpID4gMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJpbmQoZiwgc2VsZikge1xuICAgIHJldHVybiAhc2VsZiB8fCAhZiA/IGYgOiBmLmJpbmQoc2VsZik7XG59XG5jbGFzcyBGaWVsZERlc2Mge1xuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGRlc2MsIHNlbGYpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5pbml0ID0gYmluZChkZXNjLmluaXQsIHNlbGYpO1xuICAgICAgICB0aGlzLmFwcGx5ID0gYmluZChkZXNjLmFwcGx5LCBzZWxmKTtcbiAgICB9XG59XG5jb25zdCBiYXNlRmllbGRzID0gW1xuICAgIG5ldyBGaWVsZERlc2MoXCJkb2NcIiwge1xuICAgICAgICBpbml0KGNvbmZpZykgeyByZXR1cm4gY29uZmlnLmRvYyB8fCBjb25maWcuc2NoZW1hLnRvcE5vZGVUeXBlLmNyZWF0ZUFuZEZpbGwoKTsgfSxcbiAgICAgICAgYXBwbHkodHIpIHsgcmV0dXJuIHRyLmRvYzsgfVxuICAgIH0pLFxuICAgIG5ldyBGaWVsZERlc2MoXCJzZWxlY3Rpb25cIiwge1xuICAgICAgICBpbml0KGNvbmZpZywgaW5zdGFuY2UpIHsgcmV0dXJuIGNvbmZpZy5zZWxlY3Rpb24gfHwgU2VsZWN0aW9uLmF0U3RhcnQoaW5zdGFuY2UuZG9jKTsgfSxcbiAgICAgICAgYXBwbHkodHIpIHsgcmV0dXJuIHRyLnNlbGVjdGlvbjsgfVxuICAgIH0pLFxuICAgIG5ldyBGaWVsZERlc2MoXCJzdG9yZWRNYXJrc1wiLCB7XG4gICAgICAgIGluaXQoY29uZmlnKSB7IHJldHVybiBjb25maWcuc3RvcmVkTWFya3MgfHwgbnVsbDsgfSxcbiAgICAgICAgYXBwbHkodHIsIF9tYXJrcywgX29sZCwgc3RhdGUpIHsgcmV0dXJuIHN0YXRlLnNlbGVjdGlvbi4kY3Vyc29yID8gdHIuc3RvcmVkTWFya3MgOiBudWxsOyB9XG4gICAgfSksXG4gICAgbmV3IEZpZWxkRGVzYyhcInNjcm9sbFRvU2VsZWN0aW9uXCIsIHtcbiAgICAgICAgaW5pdCgpIHsgcmV0dXJuIDA7IH0sXG4gICAgICAgIGFwcGx5KHRyLCBwcmV2KSB7IHJldHVybiB0ci5zY3JvbGxlZEludG9WaWV3ID8gcHJldiArIDEgOiBwcmV2OyB9XG4gICAgfSlcbl07XG4vLyBPYmplY3Qgd3JhcHBpbmcgdGhlIHBhcnQgb2YgYSBzdGF0ZSBvYmplY3QgdGhhdCBzdGF5cyB0aGUgc2FtZVxuLy8gYWNyb3NzIHRyYW5zYWN0aW9ucy4gU3RvcmVkIGluIHRoZSBzdGF0ZSdzIGBjb25maWdgIHByb3BlcnR5LlxuY2xhc3MgQ29uZmlndXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3Ioc2NoZW1hLCBwbHVnaW5zKSB7XG4gICAgICAgIHRoaXMuc2NoZW1hID0gc2NoZW1hO1xuICAgICAgICB0aGlzLnBsdWdpbnMgPSBbXTtcbiAgICAgICAgdGhpcy5wbHVnaW5zQnlLZXkgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICB0aGlzLmZpZWxkcyA9IGJhc2VGaWVsZHMuc2xpY2UoKTtcbiAgICAgICAgaWYgKHBsdWdpbnMpXG4gICAgICAgICAgICBwbHVnaW5zLmZvckVhY2gocGx1Z2luID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW5zQnlLZXlbcGx1Z2luLmtleV0pXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiQWRkaW5nIGRpZmZlcmVudCBpbnN0YW5jZXMgb2YgYSBrZXllZCBwbHVnaW4gKFwiICsgcGx1Z2luLmtleSArIFwiKVwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbnMucHVzaChwbHVnaW4pO1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luc0J5S2V5W3BsdWdpbi5rZXldID0gcGx1Z2luO1xuICAgICAgICAgICAgICAgIGlmIChwbHVnaW4uc3BlYy5zdGF0ZSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5maWVsZHMucHVzaChuZXcgRmllbGREZXNjKHBsdWdpbi5rZXksIHBsdWdpbi5zcGVjLnN0YXRlLCBwbHVnaW4pKTtcbiAgICAgICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuVGhlIHN0YXRlIG9mIGEgUHJvc2VNaXJyb3IgZWRpdG9yIGlzIHJlcHJlc2VudGVkIGJ5IGFuIG9iamVjdCBvZlxudGhpcyB0eXBlLiBBIHN0YXRlIGlzIGEgcGVyc2lzdGVudCBkYXRhIHN0cnVjdHVyZeKAlGl0IGlzbid0XG51cGRhdGVkLCBidXQgcmF0aGVyIGEgbmV3IHN0YXRlIHZhbHVlIGlzIGNvbXB1dGVkIGZyb20gYW4gb2xkIG9uZVxudXNpbmcgdGhlIFtgYXBwbHlgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuRWRpdG9yU3RhdGUuYXBwbHkpIG1ldGhvZC5cblxuQSBzdGF0ZSBob2xkcyBhIG51bWJlciBvZiBidWlsdC1pbiBmaWVsZHMsIGFuZCBwbHVnaW5zIGNhblxuW2RlZmluZV0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLlBsdWdpblNwZWMuc3RhdGUpIGFkZGl0aW9uYWwgZmllbGRzLlxuKi9cbmNsYXNzIEVkaXRvclN0YXRlIHtcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgc2NoZW1hIG9mIHRoZSBzdGF0ZSdzIGRvY3VtZW50LlxuICAgICovXG4gICAgZ2V0IHNjaGVtYSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLnNjaGVtYTtcbiAgICB9XG4gICAgLyoqXG4gICAgVGhlIHBsdWdpbnMgdGhhdCBhcmUgYWN0aXZlIGluIHRoaXMgc3RhdGUuXG4gICAgKi9cbiAgICBnZXQgcGx1Z2lucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLnBsdWdpbnM7XG4gICAgfVxuICAgIC8qKlxuICAgIEFwcGx5IHRoZSBnaXZlbiB0cmFuc2FjdGlvbiB0byBwcm9kdWNlIGEgbmV3IHN0YXRlLlxuICAgICovXG4gICAgYXBwbHkodHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlUcmFuc2FjdGlvbih0cikuc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpZ25vcmVcbiAgICAqL1xuICAgIGZpbHRlclRyYW5zYWN0aW9uKHRyLCBpZ25vcmUgPSAtMSkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICBpZiAoaSAhPSBpZ25vcmUpIHtcbiAgICAgICAgICAgICAgICBsZXQgcGx1Z2luID0gdGhpcy5jb25maWcucGx1Z2luc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnNwZWMuZmlsdGVyVHJhbnNhY3Rpb24gJiYgIXBsdWdpbi5zcGVjLmZpbHRlclRyYW5zYWN0aW9uLmNhbGwocGx1Z2luLCB0ciwgdGhpcykpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgIFZlcmJvc2UgdmFyaWFudCBvZiBbYGFwcGx5YF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3N0YXRlLkVkaXRvclN0YXRlLmFwcGx5KSB0aGF0XG4gICAgcmV0dXJucyB0aGUgcHJlY2lzZSB0cmFuc2FjdGlvbnMgdGhhdCB3ZXJlIGFwcGxpZWQgKHdoaWNoIG1pZ2h0XG4gICAgYmUgaW5mbHVlbmNlZCBieSB0aGUgW3RyYW5zYWN0aW9uXG4gICAgaG9va3NdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzdGF0ZS5QbHVnaW5TcGVjLmZpbHRlclRyYW5zYWN0aW9uKSBvZlxuICAgIHBsdWdpbnMpIGFsb25nIHdpdGggdGhlIG5ldyBzdGF0ZS5cbiAgICAqL1xuICAgIGFwcGx5VHJhbnNhY3Rpb24ocm9vdFRyKSB7XG4gICAgICAgIGlmICghdGhpcy5maWx0ZXJUcmFuc2FjdGlvbihyb290VHIpKVxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IHRoaXMsIHRyYW5zYWN0aW9uczogW10gfTtcbiAgICAgICAgbGV0IHRycyA9IFtyb290VHJdLCBuZXdTdGF0ZSA9IHRoaXMuYXBwbHlJbm5lcihyb290VHIpLCBzZWVuID0gbnVsbDtcbiAgICAgICAgLy8gVGhpcyBsb29wIHJlcGVhdGVkbHkgZ2l2ZXMgcGx1Z2lucyBhIGNoYW5jZSB0byByZXNwb25kIHRvXG4gICAgICAgIC8vIHRyYW5zYWN0aW9ucyBhcyBuZXcgdHJhbnNhY3Rpb25zIGFyZSBhZGRlZCwgbWFraW5nIHN1cmUgdG8gb25seVxuICAgICAgICAvLyBwYXNzIHRoZSB0cmFuc2FjdGlvbnMgdGhlIHBsdWdpbiBkaWQgbm90IHNlZSBiZWZvcmUuXG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGxldCBoYXZlTmV3ID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgcGx1Z2luID0gdGhpcy5jb25maWcucGx1Z2luc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLnNwZWMuYXBwZW5kVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBzZWVuID8gc2VlbltpXS5uIDogMCwgb2xkU3RhdGUgPSBzZWVuID8gc2VlbltpXS5zdGF0ZSA6IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0ciA9IG4gPCB0cnMubGVuZ3RoICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc3BlYy5hcHBlbmRUcmFuc2FjdGlvbi5jYWxsKHBsdWdpbiwgbiA/IHRycy5zbGljZShuKSA6IHRycywgb2xkU3RhdGUsIG5ld1N0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyICYmIG5ld1N0YXRlLmZpbHRlclRyYW5zYWN0aW9uKHRyLCBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHIuc2V0TWV0YShcImFwcGVuZGVkVHJhbnNhY3Rpb25cIiwgcm9vdFRyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2Vlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZW4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMuY29uZmlnLnBsdWdpbnMubGVuZ3RoOyBqKyspXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlZW4ucHVzaChqIDwgaSA/IHsgc3RhdGU6IG5ld1N0YXRlLCBuOiB0cnMubGVuZ3RoIH0gOiB7IHN0YXRlOiB0aGlzLCBuOiAwIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdHJzLnB1c2godHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhdGUgPSBuZXdTdGF0ZS5hcHBseUlubmVyKHRyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhdmVOZXcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWVuKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VlbltpXSA9IHsgc3RhdGU6IG5ld1N0YXRlLCBuOiB0cnMubGVuZ3RoIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFoYXZlTmV3KVxuICAgICAgICAgICAgICAgIHJldHVybiB7IHN0YXRlOiBuZXdTdGF0ZSwgdHJhbnNhY3Rpb25zOiB0cnMgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIGFwcGx5SW5uZXIodHIpIHtcbiAgICAgICAgaWYgKCF0ci5iZWZvcmUuZXEodGhpcy5kb2MpKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJBcHBseWluZyBhIG1pc21hdGNoZWQgdHJhbnNhY3Rpb25cIik7XG4gICAgICAgIGxldCBuZXdJbnN0YW5jZSA9IG5ldyBFZGl0b3JTdGF0ZSh0aGlzLmNvbmZpZyksIGZpZWxkcyA9IHRoaXMuY29uZmlnLmZpZWxkcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWVsZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBmaWVsZCA9IGZpZWxkc1tpXTtcbiAgICAgICAgICAgIG5ld0luc3RhbmNlW2ZpZWxkLm5hbWVdID0gZmllbGQuYXBwbHkodHIsIHRoaXNbZmllbGQubmFtZV0sIHRoaXMsIG5ld0luc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3SW5zdGFuY2U7XG4gICAgfVxuICAgIC8qKlxuICAgIFN0YXJ0IGEgW3RyYW5zYWN0aW9uXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuVHJhbnNhY3Rpb24pIGZyb20gdGhpcyBzdGF0ZS5cbiAgICAqL1xuICAgIGdldCB0cigpIHsgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbih0aGlzKTsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG5ldyBzdGF0ZS5cbiAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoY29uZmlnKSB7XG4gICAgICAgIGxldCAkY29uZmlnID0gbmV3IENvbmZpZ3VyYXRpb24oY29uZmlnLmRvYyA/IGNvbmZpZy5kb2MudHlwZS5zY2hlbWEgOiBjb25maWcuc2NoZW1hLCBjb25maWcucGx1Z2lucyk7XG4gICAgICAgIGxldCBpbnN0YW5jZSA9IG5ldyBFZGl0b3JTdGF0ZSgkY29uZmlnKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAkY29uZmlnLmZpZWxkcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgIGluc3RhbmNlWyRjb25maWcuZmllbGRzW2ldLm5hbWVdID0gJGNvbmZpZy5maWVsZHNbaV0uaW5pdChjb25maWcsIGluc3RhbmNlKTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgc3RhdGUgYmFzZWQgb24gdGhpcyBvbmUsIGJ1dCB3aXRoIGFuIGFkanVzdGVkIHNldFxuICAgIG9mIGFjdGl2ZSBwbHVnaW5zLiBTdGF0ZSBmaWVsZHMgdGhhdCBleGlzdCBpbiBib3RoIHNldHMgb2ZcbiAgICBwbHVnaW5zIGFyZSBrZXB0IHVuY2hhbmdlZC4gVGhvc2UgdGhhdCBubyBsb25nZXIgZXhpc3QgYXJlXG4gICAgZHJvcHBlZCwgYW5kIHRob3NlIHRoYXQgYXJlIG5ldyBhcmUgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlaXJcbiAgICBbYGluaXRgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuU3RhdGVGaWVsZC5pbml0KSBtZXRob2QsIHBhc3NpbmcgaW4gdGhlIG5ld1xuICAgIGNvbmZpZ3VyYXRpb24gb2JqZWN0Li5cbiAgICAqL1xuICAgIHJlY29uZmlndXJlKGNvbmZpZykge1xuICAgICAgICBsZXQgJGNvbmZpZyA9IG5ldyBDb25maWd1cmF0aW9uKHRoaXMuc2NoZW1hLCBjb25maWcucGx1Z2lucyk7XG4gICAgICAgIGxldCBmaWVsZHMgPSAkY29uZmlnLmZpZWxkcywgaW5zdGFuY2UgPSBuZXcgRWRpdG9yU3RhdGUoJGNvbmZpZyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IGZpZWxkc1tpXS5uYW1lO1xuICAgICAgICAgICAgaW5zdGFuY2VbbmFtZV0gPSB0aGlzLmhhc093blByb3BlcnR5KG5hbWUpID8gdGhpc1tuYW1lXSA6IGZpZWxkc1tpXS5pbml0KGNvbmZpZywgaW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgU2VyaWFsaXplIHRoaXMgc3RhdGUgdG8gSlNPTi4gSWYgeW91IHdhbnQgdG8gc2VyaWFsaXplIHRoZSBzdGF0ZVxuICAgIG9mIHBsdWdpbnMsIHBhc3MgYW4gb2JqZWN0IG1hcHBpbmcgcHJvcGVydHkgbmFtZXMgdG8gdXNlIGluIHRoZVxuICAgIHJlc3VsdGluZyBKU09OIG9iamVjdCB0byBwbHVnaW4gb2JqZWN0cy4gVGhlIGFyZ3VtZW50IG1heSBhbHNvIGJlXG4gICAgYSBzdHJpbmcgb3IgbnVtYmVyLCBpbiB3aGljaCBjYXNlIGl0IGlzIGlnbm9yZWQsIHRvIHN1cHBvcnQgdGhlXG4gICAgd2F5IGBKU09OLnN0cmluZ2lmeWAgY2FsbHMgYHRvU3RyaW5nYCBtZXRob2RzLlxuICAgICovXG4gICAgdG9KU09OKHBsdWdpbkZpZWxkcykge1xuICAgICAgICBsZXQgcmVzdWx0ID0geyBkb2M6IHRoaXMuZG9jLnRvSlNPTigpLCBzZWxlY3Rpb246IHRoaXMuc2VsZWN0aW9uLnRvSlNPTigpIH07XG4gICAgICAgIGlmICh0aGlzLnN0b3JlZE1hcmtzKVxuICAgICAgICAgICAgcmVzdWx0LnN0b3JlZE1hcmtzID0gdGhpcy5zdG9yZWRNYXJrcy5tYXAobSA9PiBtLnRvSlNPTigpKTtcbiAgICAgICAgaWYgKHBsdWdpbkZpZWxkcyAmJiB0eXBlb2YgcGx1Z2luRmllbGRzID09ICdvYmplY3QnKVxuICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBwbHVnaW5GaWVsZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAocHJvcCA9PSBcImRvY1wiIHx8IHByb3AgPT0gXCJzZWxlY3Rpb25cIilcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJUaGUgSlNPTiBmaWVsZHMgYGRvY2AgYW5kIGBzZWxlY3Rpb25gIGFyZSByZXNlcnZlZFwiKTtcbiAgICAgICAgICAgICAgICBsZXQgcGx1Z2luID0gcGx1Z2luRmllbGRzW3Byb3BdLCBzdGF0ZSA9IHBsdWdpbi5zcGVjLnN0YXRlO1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS50b0pTT04pXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdFtwcm9wXSA9IHN0YXRlLnRvSlNPTi5jYWxsKHBsdWdpbiwgdGhpc1twbHVnaW4ua2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIC8qKlxuICAgIERlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIHN0YXRlLiBgY29uZmlnYCBzaG91bGRcbiAgICBoYXZlIGF0IGxlYXN0IGEgYHNjaGVtYWAgZmllbGQsIGFuZCBzaG91bGQgY29udGFpbiBhcnJheSBvZlxuICAgIHBsdWdpbnMgdG8gaW5pdGlhbGl6ZSB0aGUgc3RhdGUgd2l0aC4gYHBsdWdpbkZpZWxkc2AgY2FuIGJlIHVzZWRcbiAgICB0byBkZXNlcmlhbGl6ZSB0aGUgc3RhdGUgb2YgcGx1Z2lucywgYnkgYXNzb2NpYXRpbmcgcGx1Z2luXG4gICAgaW5zdGFuY2VzIHdpdGggdGhlIHByb3BlcnR5IG5hbWVzIHRoZXkgdXNlIGluIHRoZSBKU09OIG9iamVjdC5cbiAgICAqL1xuICAgIHN0YXRpYyBmcm9tSlNPTihjb25maWcsIGpzb24sIHBsdWdpbkZpZWxkcykge1xuICAgICAgICBpZiAoIWpzb24pXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIEVkaXRvclN0YXRlLmZyb21KU09OXCIpO1xuICAgICAgICBpZiAoIWNvbmZpZy5zY2hlbWEpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlJlcXVpcmVkIGNvbmZpZyBmaWVsZCAnc2NoZW1hJyBtaXNzaW5nXCIpO1xuICAgICAgICBsZXQgJGNvbmZpZyA9IG5ldyBDb25maWd1cmF0aW9uKGNvbmZpZy5zY2hlbWEsIGNvbmZpZy5wbHVnaW5zKTtcbiAgICAgICAgbGV0IGluc3RhbmNlID0gbmV3IEVkaXRvclN0YXRlKCRjb25maWcpO1xuICAgICAgICAkY29uZmlnLmZpZWxkcy5mb3JFYWNoKGZpZWxkID0+IHtcbiAgICAgICAgICAgIGlmIChmaWVsZC5uYW1lID09IFwiZG9jXCIpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZS5kb2MgPSBOb2RlLmZyb21KU09OKGNvbmZpZy5zY2hlbWEsIGpzb24uZG9jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZpZWxkLm5hbWUgPT0gXCJzZWxlY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLnNlbGVjdGlvbiA9IFNlbGVjdGlvbi5mcm9tSlNPTihpbnN0YW5jZS5kb2MsIGpzb24uc2VsZWN0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGZpZWxkLm5hbWUgPT0gXCJzdG9yZWRNYXJrc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKGpzb24uc3RvcmVkTWFya3MpXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlLnN0b3JlZE1hcmtzID0ganNvbi5zdG9yZWRNYXJrcy5tYXAoY29uZmlnLnNjaGVtYS5tYXJrRnJvbUpTT04pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbkZpZWxkcylcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgcHJvcCBpbiBwbHVnaW5GaWVsZHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwbHVnaW4gPSBwbHVnaW5GaWVsZHNbcHJvcF0sIHN0YXRlID0gcGx1Z2luLnNwZWMuc3RhdGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luLmtleSA9PSBmaWVsZC5uYW1lICYmIHN0YXRlICYmIHN0YXRlLmZyb21KU09OICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGpzb24sIHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VbZmllbGQubmFtZV0gPSBzdGF0ZS5mcm9tSlNPTi5jYWxsKHBsdWdpbiwgY29uZmlnLCBqc29uW3Byb3BdLCBpbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VbZmllbGQubmFtZV0gPSBmaWVsZC5pbml0KGNvbmZpZywgaW5zdGFuY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYmluZFByb3BzKG9iaiwgc2VsZiwgdGFyZ2V0KSB7XG4gICAgZm9yIChsZXQgcHJvcCBpbiBvYmopIHtcbiAgICAgICAgbGV0IHZhbCA9IG9ialtwcm9wXTtcbiAgICAgICAgaWYgKHZhbCBpbnN0YW5jZW9mIEZ1bmN0aW9uKVxuICAgICAgICAgICAgdmFsID0gdmFsLmJpbmQoc2VsZik7XG4gICAgICAgIGVsc2UgaWYgKHByb3AgPT0gXCJoYW5kbGVET01FdmVudHNcIilcbiAgICAgICAgICAgIHZhbCA9IGJpbmRQcm9wcyh2YWwsIHNlbGYsIHt9KTtcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0O1xufVxuLyoqXG5QbHVnaW5zIGJ1bmRsZSBmdW5jdGlvbmFsaXR5IHRoYXQgY2FuIGJlIGFkZGVkIHRvIGFuIGVkaXRvci5cblRoZXkgYXJlIHBhcnQgb2YgdGhlIFtlZGl0b3Igc3RhdGVdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNzdGF0ZS5FZGl0b3JTdGF0ZSkgYW5kXG5tYXkgaW5mbHVlbmNlIHRoYXQgc3RhdGUgYW5kIHRoZSB2aWV3IHRoYXQgY29udGFpbnMgaXQuXG4qL1xuY2xhc3MgUGx1Z2luIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBwbHVnaW4uXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgcGx1Z2luJ3MgW3NwZWMgb2JqZWN0XShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuUGx1Z2luU3BlYykuXG4gICAgKi9cbiAgICBzcGVjKSB7XG4gICAgICAgIHRoaXMuc3BlYyA9IHNwZWM7XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgW3Byb3BzXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdmlldy5FZGl0b3JQcm9wcykgZXhwb3J0ZWQgYnkgdGhpcyBwbHVnaW4uXG4gICAgICAgICovXG4gICAgICAgIHRoaXMucHJvcHMgPSB7fTtcbiAgICAgICAgaWYgKHNwZWMucHJvcHMpXG4gICAgICAgICAgICBiaW5kUHJvcHMoc3BlYy5wcm9wcywgdGhpcywgdGhpcy5wcm9wcyk7XG4gICAgICAgIHRoaXMua2V5ID0gc3BlYy5rZXkgPyBzcGVjLmtleS5rZXkgOiBjcmVhdGVLZXkoXCJwbHVnaW5cIik7XG4gICAgfVxuICAgIC8qKlxuICAgIEV4dHJhY3QgdGhlIHBsdWdpbidzIHN0YXRlIGZpZWxkIGZyb20gYW4gZWRpdG9yIHN0YXRlLlxuICAgICovXG4gICAgZ2V0U3RhdGUoc3RhdGUpIHsgcmV0dXJuIHN0YXRlW3RoaXMua2V5XTsgfVxufVxuY29uc3Qga2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5mdW5jdGlvbiBjcmVhdGVLZXkobmFtZSkge1xuICAgIGlmIChuYW1lIGluIGtleXMpXG4gICAgICAgIHJldHVybiBuYW1lICsgXCIkXCIgKyArK2tleXNbbmFtZV07XG4gICAga2V5c1tuYW1lXSA9IDA7XG4gICAgcmV0dXJuIG5hbWUgKyBcIiRcIjtcbn1cbi8qKlxuQSBrZXkgaXMgdXNlZCB0byBbdGFnXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jc3RhdGUuUGx1Z2luU3BlYy5rZXkpIHBsdWdpbnMgaW4gYSB3YXlcbnRoYXQgbWFrZXMgaXQgcG9zc2libGUgdG8gZmluZCB0aGVtLCBnaXZlbiBhbiBlZGl0b3Igc3RhdGUuXG5Bc3NpZ25pbmcgYSBrZXkgZG9lcyBtZWFuIG9ubHkgb25lIHBsdWdpbiBvZiB0aGF0IHR5cGUgY2FuIGJlXG5hY3RpdmUgaW4gYSBzdGF0ZS5cbiovXG5jbGFzcyBQbHVnaW5LZXkge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHBsdWdpbiBrZXkuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lID0gXCJrZXlcIikgeyB0aGlzLmtleSA9IGNyZWF0ZUtleShuYW1lKTsgfVxuICAgIC8qKlxuICAgIEdldCB0aGUgYWN0aXZlIHBsdWdpbiB3aXRoIHRoaXMga2V5LCBpZiBhbnksIGZyb20gYW4gZWRpdG9yXG4gICAgc3RhdGUuXG4gICAgKi9cbiAgICBnZXQoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLmNvbmZpZy5wbHVnaW5zQnlLZXlbdGhpcy5rZXldOyB9XG4gICAgLyoqXG4gICAgR2V0IHRoZSBwbHVnaW4ncyBzdGF0ZSBmcm9tIGFuIGVkaXRvciBzdGF0ZS5cbiAgICAqL1xuICAgIGdldFN0YXRlKHN0YXRlKSB7IHJldHVybiBzdGF0ZVt0aGlzLmtleV07IH1cbn1cblxuZXhwb3J0IHsgQWxsU2VsZWN0aW9uLCBFZGl0b3JTdGF0ZSwgTm9kZVNlbGVjdGlvbiwgUGx1Z2luLCBQbHVnaW5LZXksIFNlbGVjdGlvbiwgU2VsZWN0aW9uUmFuZ2UsIFRleHRTZWxlY3Rpb24sIFRyYW5zYWN0aW9uIH07XG4iLCJpbXBvcnQgeyBSZXBsYWNlRXJyb3IsIFNsaWNlLCBGcmFnbWVudCwgTWFya1R5cGUgfSBmcm9tICdwcm9zZW1pcnJvci1tb2RlbCc7XG5cbi8vIFJlY292ZXJ5IHZhbHVlcyBlbmNvZGUgYSByYW5nZSBpbmRleCBhbmQgYW4gb2Zmc2V0LiBUaGV5IGFyZVxuLy8gcmVwcmVzZW50ZWQgYXMgbnVtYmVycywgYmVjYXVzZSB0b25zIG9mIHRoZW0gd2lsbCBiZSBjcmVhdGVkIHdoZW5cbi8vIG1hcHBpbmcsIGZvciBleGFtcGxlLCBhIGxhcmdlIG51bWJlciBvZiBkZWNvcmF0aW9ucy4gVGhlIG51bWJlcidzXG4vLyBsb3dlciAxNiBiaXRzIHByb3ZpZGUgdGhlIGluZGV4LCB0aGUgcmVtYWluaW5nIGJpdHMgdGhlIG9mZnNldC5cbi8vXG4vLyBOb3RlOiBXZSBpbnRlbnRpb25hbGx5IGRvbid0IHVzZSBiaXQgc2hpZnQgb3BlcmF0b3JzIHRvIGVuLSBhbmRcbi8vIGRlY29kZSB0aGVzZSwgc2luY2UgdGhvc2UgY2xpcCB0byAzMiBiaXRzLCB3aGljaCB3ZSBtaWdodCBpbiByYXJlXG4vLyBjYXNlcyB3YW50IHRvIG92ZXJmbG93LiBBIDY0LWJpdCBmbG9hdCBjYW4gcmVwcmVzZW50IDQ4LWJpdFxuLy8gaW50ZWdlcnMgcHJlY2lzZWx5LlxuY29uc3QgbG93ZXIxNiA9IDB4ZmZmZjtcbmNvbnN0IGZhY3RvcjE2ID0gTWF0aC5wb3coMiwgMTYpO1xuZnVuY3Rpb24gbWFrZVJlY292ZXIoaW5kZXgsIG9mZnNldCkgeyByZXR1cm4gaW5kZXggKyBvZmZzZXQgKiBmYWN0b3IxNjsgfVxuZnVuY3Rpb24gcmVjb3ZlckluZGV4KHZhbHVlKSB7IHJldHVybiB2YWx1ZSAmIGxvd2VyMTY7IH1cbmZ1bmN0aW9uIHJlY292ZXJPZmZzZXQodmFsdWUpIHsgcmV0dXJuICh2YWx1ZSAtICh2YWx1ZSAmIGxvd2VyMTYpKSAvIGZhY3RvcjE2OyB9XG5jb25zdCBERUxfQkVGT1JFID0gMSwgREVMX0FGVEVSID0gMiwgREVMX0FDUk9TUyA9IDQsIERFTF9TSURFID0gODtcbi8qKlxuQW4gb2JqZWN0IHJlcHJlc2VudGluZyBhIG1hcHBlZCBwb3NpdGlvbiB3aXRoIGV4dHJhXG5pbmZvcm1hdGlvbi5cbiovXG5jbGFzcyBNYXBSZXN1bHQge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIG1hcHBlZCB2ZXJzaW9uIG9mIHRoZSBwb3NpdGlvbi5cbiAgICAqL1xuICAgIHBvcywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBkZWxJbmZvLCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJlY292ZXIpIHtcbiAgICAgICAgdGhpcy5wb3MgPSBwb3M7XG4gICAgICAgIHRoaXMuZGVsSW5mbyA9IGRlbEluZm87XG4gICAgICAgIHRoaXMucmVjb3ZlciA9IHJlY292ZXI7XG4gICAgfVxuICAgIC8qKlxuICAgIFRlbGxzIHlvdSB3aGV0aGVyIHRoZSBwb3NpdGlvbiB3YXMgZGVsZXRlZCwgdGhhdCBpcywgd2hldGhlciB0aGVcbiAgICBzdGVwIHJlbW92ZWQgdGhlIHRva2VuIG9uIHRoZSBzaWRlIHF1ZXJpZWQgKHZpYSB0aGUgYGFzc29jYClcbiAgICBhcmd1bWVudCBmcm9tIHRoZSBkb2N1bWVudC5cbiAgICAqL1xuICAgIGdldCBkZWxldGVkKCkgeyByZXR1cm4gKHRoaXMuZGVsSW5mbyAmIERFTF9TSURFKSA+IDA7IH1cbiAgICAvKipcbiAgICBUZWxscyB5b3Ugd2hldGhlciB0aGUgdG9rZW4gYmVmb3JlIHRoZSBtYXBwZWQgcG9zaXRpb24gd2FzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBnZXQgZGVsZXRlZEJlZm9yZSgpIHsgcmV0dXJuICh0aGlzLmRlbEluZm8gJiAoREVMX0JFRk9SRSB8IERFTF9BQ1JPU1MpKSA+IDA7IH1cbiAgICAvKipcbiAgICBUcnVlIHdoZW4gdGhlIHRva2VuIGFmdGVyIHRoZSBtYXBwZWQgcG9zaXRpb24gd2FzIGRlbGV0ZWQuXG4gICAgKi9cbiAgICBnZXQgZGVsZXRlZEFmdGVyKCkgeyByZXR1cm4gKHRoaXMuZGVsSW5mbyAmIChERUxfQUZURVIgfCBERUxfQUNST1NTKSkgPiAwOyB9XG4gICAgLyoqXG4gICAgVGVsbHMgd2hldGhlciBhbnkgb2YgdGhlIHN0ZXBzIG1hcHBlZCB0aHJvdWdoIGRlbGV0ZXMgYWNyb3NzIHRoZVxuICAgIHBvc2l0aW9uIChpbmNsdWRpbmcgYm90aCB0aGUgdG9rZW4gYmVmb3JlIGFuZCBhZnRlciB0aGVcbiAgICBwb3NpdGlvbikuXG4gICAgKi9cbiAgICBnZXQgZGVsZXRlZEFjcm9zcygpIHsgcmV0dXJuICh0aGlzLmRlbEluZm8gJiBERUxfQUNST1NTKSA+IDA7IH1cbn1cbi8qKlxuQSBtYXAgZGVzY3JpYmluZyB0aGUgZGVsZXRpb25zIGFuZCBpbnNlcnRpb25zIG1hZGUgYnkgYSBzdGVwLCB3aGljaFxuY2FuIGJlIHVzZWQgdG8gZmluZCB0aGUgY29ycmVzcG9uZGVuY2UgYmV0d2VlbiBwb3NpdGlvbnMgaW4gdGhlXG5wcmUtc3RlcCB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgYW5kIHRoZSBzYW1lIHBvc2l0aW9uIGluIHRoZVxucG9zdC1zdGVwIHZlcnNpb24uXG4qL1xuY2xhc3MgU3RlcE1hcCB7XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgcG9zaXRpb24gbWFwLiBUaGUgbW9kaWZpY2F0aW9ucyB0byB0aGUgZG9jdW1lbnQgYXJlXG4gICAgcmVwcmVzZW50ZWQgYXMgYW4gYXJyYXkgb2YgbnVtYmVycywgaW4gd2hpY2ggZWFjaCBncm91cCBvZiB0aHJlZVxuICAgIHJlcHJlc2VudHMgYSBtb2RpZmllZCBjaHVuayBhcyBgW3N0YXJ0LCBvbGRTaXplLCBuZXdTaXplXWAuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHJhbmdlcywgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBpbnZlcnRlZCA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMucmFuZ2VzID0gcmFuZ2VzO1xuICAgICAgICB0aGlzLmludmVydGVkID0gaW52ZXJ0ZWQ7XG4gICAgICAgIGlmICghcmFuZ2VzLmxlbmd0aCAmJiBTdGVwTWFwLmVtcHR5KVxuICAgICAgICAgICAgcmV0dXJuIFN0ZXBNYXAuZW1wdHk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgcmVjb3Zlcih2YWx1ZSkge1xuICAgICAgICBsZXQgZGlmZiA9IDAsIGluZGV4ID0gcmVjb3ZlckluZGV4KHZhbHVlKTtcbiAgICAgICAgaWYgKCF0aGlzLmludmVydGVkKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleDsgaSsrKVxuICAgICAgICAgICAgICAgIGRpZmYgKz0gdGhpcy5yYW5nZXNbaSAqIDMgKyAyXSAtIHRoaXMucmFuZ2VzW2kgKiAzICsgMV07XG4gICAgICAgIHJldHVybiB0aGlzLnJhbmdlc1tpbmRleCAqIDNdICsgZGlmZiArIHJlY292ZXJPZmZzZXQodmFsdWUpO1xuICAgIH1cbiAgICBtYXBSZXN1bHQocG9zLCBhc3NvYyA9IDEpIHsgcmV0dXJuIHRoaXMuX21hcChwb3MsIGFzc29jLCBmYWxzZSk7IH1cbiAgICBtYXAocG9zLCBhc3NvYyA9IDEpIHsgcmV0dXJuIHRoaXMuX21hcChwb3MsIGFzc29jLCB0cnVlKTsgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgX21hcChwb3MsIGFzc29jLCBzaW1wbGUpIHtcbiAgICAgICAgbGV0IGRpZmYgPSAwLCBvbGRJbmRleCA9IHRoaXMuaW52ZXJ0ZWQgPyAyIDogMSwgbmV3SW5kZXggPSB0aGlzLmludmVydGVkID8gMSA6IDI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yYW5nZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgICAgIGxldCBzdGFydCA9IHRoaXMucmFuZ2VzW2ldIC0gKHRoaXMuaW52ZXJ0ZWQgPyBkaWZmIDogMCk7XG4gICAgICAgICAgICBpZiAoc3RhcnQgPiBwb3MpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBsZXQgb2xkU2l6ZSA9IHRoaXMucmFuZ2VzW2kgKyBvbGRJbmRleF0sIG5ld1NpemUgPSB0aGlzLnJhbmdlc1tpICsgbmV3SW5kZXhdLCBlbmQgPSBzdGFydCArIG9sZFNpemU7XG4gICAgICAgICAgICBpZiAocG9zIDw9IGVuZCkge1xuICAgICAgICAgICAgICAgIGxldCBzaWRlID0gIW9sZFNpemUgPyBhc3NvYyA6IHBvcyA9PSBzdGFydCA/IC0xIDogcG9zID09IGVuZCA/IDEgOiBhc3NvYztcbiAgICAgICAgICAgICAgICBsZXQgcmVzdWx0ID0gc3RhcnQgKyBkaWZmICsgKHNpZGUgPCAwID8gMCA6IG5ld1NpemUpO1xuICAgICAgICAgICAgICAgIGlmIChzaW1wbGUpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgbGV0IHJlY292ZXIgPSBwb3MgPT0gKGFzc29jIDwgMCA/IHN0YXJ0IDogZW5kKSA/IG51bGwgOiBtYWtlUmVjb3ZlcihpIC8gMywgcG9zIC0gc3RhcnQpO1xuICAgICAgICAgICAgICAgIGxldCBkZWwgPSBwb3MgPT0gc3RhcnQgPyBERUxfQUZURVIgOiBwb3MgPT0gZW5kID8gREVMX0JFRk9SRSA6IERFTF9BQ1JPU1M7XG4gICAgICAgICAgICAgICAgaWYgKGFzc29jIDwgMCA/IHBvcyAhPSBzdGFydCA6IHBvcyAhPSBlbmQpXG4gICAgICAgICAgICAgICAgICAgIGRlbCB8PSBERUxfU0lERTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE1hcFJlc3VsdChyZXN1bHQsIGRlbCwgcmVjb3Zlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaWZmICs9IG5ld1NpemUgLSBvbGRTaXplO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzaW1wbGUgPyBwb3MgKyBkaWZmIDogbmV3IE1hcFJlc3VsdChwb3MgKyBkaWZmLCAwLCBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICB0b3VjaGVzKHBvcywgcmVjb3Zlcikge1xuICAgICAgICBsZXQgZGlmZiA9IDAsIGluZGV4ID0gcmVjb3ZlckluZGV4KHJlY292ZXIpO1xuICAgICAgICBsZXQgb2xkSW5kZXggPSB0aGlzLmludmVydGVkID8gMiA6IDEsIG5ld0luZGV4ID0gdGhpcy5pbnZlcnRlZCA/IDEgOiAyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucmFuZ2VzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSB0aGlzLnJhbmdlc1tpXSAtICh0aGlzLmludmVydGVkID8gZGlmZiA6IDApO1xuICAgICAgICAgICAgaWYgKHN0YXJ0ID4gcG9zKVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgbGV0IG9sZFNpemUgPSB0aGlzLnJhbmdlc1tpICsgb2xkSW5kZXhdLCBlbmQgPSBzdGFydCArIG9sZFNpemU7XG4gICAgICAgICAgICBpZiAocG9zIDw9IGVuZCAmJiBpID09IGluZGV4ICogMylcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIGRpZmYgKz0gdGhpcy5yYW5nZXNbaSArIG5ld0luZGV4XSAtIG9sZFNpemU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICBDYWxscyB0aGUgZ2l2ZW4gZnVuY3Rpb24gb24gZWFjaCBvZiB0aGUgY2hhbmdlZCByYW5nZXMgaW5jbHVkZWQgaW5cbiAgICB0aGlzIG1hcC5cbiAgICAqL1xuICAgIGZvckVhY2goZikge1xuICAgICAgICBsZXQgb2xkSW5kZXggPSB0aGlzLmludmVydGVkID8gMiA6IDEsIG5ld0luZGV4ID0gdGhpcy5pbnZlcnRlZCA/IDEgOiAyO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgZGlmZiA9IDA7IGkgPCB0aGlzLnJhbmdlcy5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICAgICAgbGV0IHN0YXJ0ID0gdGhpcy5yYW5nZXNbaV0sIG9sZFN0YXJ0ID0gc3RhcnQgLSAodGhpcy5pbnZlcnRlZCA/IGRpZmYgOiAwKSwgbmV3U3RhcnQgPSBzdGFydCArICh0aGlzLmludmVydGVkID8gMCA6IGRpZmYpO1xuICAgICAgICAgICAgbGV0IG9sZFNpemUgPSB0aGlzLnJhbmdlc1tpICsgb2xkSW5kZXhdLCBuZXdTaXplID0gdGhpcy5yYW5nZXNbaSArIG5ld0luZGV4XTtcbiAgICAgICAgICAgIGYob2xkU3RhcnQsIG9sZFN0YXJ0ICsgb2xkU2l6ZSwgbmV3U3RhcnQsIG5ld1N0YXJ0ICsgbmV3U2l6ZSk7XG4gICAgICAgICAgICBkaWZmICs9IG5ld1NpemUgLSBvbGRTaXplO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhbiBpbnZlcnRlZCB2ZXJzaW9uIG9mIHRoaXMgbWFwLiBUaGUgcmVzdWx0IGNhbiBiZSB1c2VkIHRvXG4gICAgbWFwIHBvc2l0aW9ucyBpbiB0aGUgcG9zdC1zdGVwIGRvY3VtZW50IHRvIHRoZSBwcmUtc3RlcCBkb2N1bWVudC5cbiAgICAqL1xuICAgIGludmVydCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdGVwTWFwKHRoaXMucmFuZ2VzLCAhdGhpcy5pbnZlcnRlZCk7XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5pbnZlcnRlZCA/IFwiLVwiIDogXCJcIikgKyBKU09OLnN0cmluZ2lmeSh0aGlzLnJhbmdlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcCB0aGF0IG1vdmVzIGFsbCBwb3NpdGlvbnMgYnkgb2Zmc2V0IGBuYCAod2hpY2ggbWF5IGJlXG4gICAgbmVnYXRpdmUpLiBUaGlzIGNhbiBiZSB1c2VmdWwgd2hlbiBhcHBseWluZyBzdGVwcyBtZWFudCBmb3IgYVxuICAgIHN1Yi1kb2N1bWVudCB0byBhIGxhcmdlciBkb2N1bWVudCwgb3IgdmljZS12ZXJzYS5cbiAgICAqL1xuICAgIHN0YXRpYyBvZmZzZXQobikge1xuICAgICAgICByZXR1cm4gbiA9PSAwID8gU3RlcE1hcC5lbXB0eSA6IG5ldyBTdGVwTWFwKG4gPCAwID8gWzAsIC1uLCAwXSA6IFswLCAwLCBuXSk7XG4gICAgfVxufVxuLyoqXG5BIFN0ZXBNYXAgdGhhdCBjb250YWlucyBubyBjaGFuZ2VkIHJhbmdlcy5cbiovXG5TdGVwTWFwLmVtcHR5ID0gbmV3IFN0ZXBNYXAoW10pO1xuLyoqXG5BIG1hcHBpbmcgcmVwcmVzZW50cyBhIHBpcGVsaW5lIG9mIHplcm8gb3IgbW9yZSBbc3RlcFxubWFwc10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5TdGVwTWFwKS4gSXQgaGFzIHNwZWNpYWwgcHJvdmlzaW9ucyBmb3IgbG9zc2xlc3NseVxuaGFuZGxpbmcgbWFwcGluZyBwb3NpdGlvbnMgdGhyb3VnaCBhIHNlcmllcyBvZiBzdGVwcyBpbiB3aGljaCBzb21lXG5zdGVwcyBhcmUgaW52ZXJ0ZWQgdmVyc2lvbnMgb2YgZWFybGllciBzdGVwcy4gKFRoaXMgY29tZXMgdXAgd2hlblxu4oCYW3JlYmFzaW5nXSgvZG9jcy9ndWlkZS8jdHJhbnNmb3JtLnJlYmFzaW5nKeKAmSBzdGVwcyBmb3JcbmNvbGxhYm9yYXRpb24gb3IgaGlzdG9yeSBtYW5hZ2VtZW50LilcbiovXG5jbGFzcyBNYXBwaW5nIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBuZXcgbWFwcGluZyB3aXRoIHRoZSBnaXZlbiBwb3NpdGlvbiBtYXBzLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHN0ZXAgbWFwcyBpbiB0aGlzIG1hcHBpbmcuXG4gICAgKi9cbiAgICBtYXBzID0gW10sIFxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgbWlycm9yLCBcbiAgICAvKipcbiAgICBUaGUgc3RhcnRpbmcgcG9zaXRpb24gaW4gdGhlIGBtYXBzYCBhcnJheSwgdXNlZCB3aGVuIGBtYXBgIG9yXG4gICAgYG1hcFJlc3VsdGAgaXMgY2FsbGVkLlxuICAgICovXG4gICAgZnJvbSA9IDAsIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgcG9zaXRpb24gaW4gdGhlIGBtYXBzYCBhcnJheS5cbiAgICAqL1xuICAgIHRvID0gbWFwcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5tYXBzID0gbWFwcztcbiAgICAgICAgdGhpcy5taXJyb3IgPSBtaXJyb3I7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICB9XG4gICAgLyoqXG4gICAgQ3JlYXRlIGEgbWFwcGluZyB0aGF0IG1hcHMgb25seSB0aHJvdWdoIGEgcGFydCBvZiB0aGlzIG9uZS5cbiAgICAqL1xuICAgIHNsaWNlKGZyb20gPSAwLCB0byA9IHRoaXMubWFwcy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNYXBwaW5nKHRoaXMubWFwcywgdGhpcy5taXJyb3IsIGZyb20sIHRvKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IE1hcHBpbmcodGhpcy5tYXBzLnNsaWNlKCksIHRoaXMubWlycm9yICYmIHRoaXMubWlycm9yLnNsaWNlKCksIHRoaXMuZnJvbSwgdGhpcy50byk7XG4gICAgfVxuICAgIC8qKlxuICAgIEFkZCBhIHN0ZXAgbWFwIHRvIHRoZSBlbmQgb2YgdGhpcyBtYXBwaW5nLiBJZiBgbWlycm9yc2AgaXNcbiAgICBnaXZlbiwgaXQgc2hvdWxkIGJlIHRoZSBpbmRleCBvZiB0aGUgc3RlcCBtYXAgdGhhdCBpcyB0aGUgbWlycm9yXG4gICAgaW1hZ2Ugb2YgdGhpcyBvbmUuXG4gICAgKi9cbiAgICBhcHBlbmRNYXAobWFwLCBtaXJyb3JzKSB7XG4gICAgICAgIHRoaXMudG8gPSB0aGlzLm1hcHMucHVzaChtYXApO1xuICAgICAgICBpZiAobWlycm9ycyAhPSBudWxsKVxuICAgICAgICAgICAgdGhpcy5zZXRNaXJyb3IodGhpcy5tYXBzLmxlbmd0aCAtIDEsIG1pcnJvcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICBBZGQgYWxsIHRoZSBzdGVwIG1hcHMgaW4gYSBnaXZlbiBtYXBwaW5nIHRvIHRoaXMgb25lIChwcmVzZXJ2aW5nXG4gICAgbWlycm9yaW5nIGluZm9ybWF0aW9uKS5cbiAgICAqL1xuICAgIGFwcGVuZE1hcHBpbmcobWFwcGluZykge1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgc3RhcnRTaXplID0gdGhpcy5tYXBzLmxlbmd0aDsgaSA8IG1hcHBpbmcubWFwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG1pcnIgPSBtYXBwaW5nLmdldE1pcnJvcihpKTtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kTWFwKG1hcHBpbmcubWFwc1tpXSwgbWlyciAhPSBudWxsICYmIG1pcnIgPCBpID8gc3RhcnRTaXplICsgbWlyciA6IHVuZGVmaW5lZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgRmluZHMgdGhlIG9mZnNldCBvZiB0aGUgc3RlcCBtYXAgdGhhdCBtaXJyb3JzIHRoZSBtYXAgYXQgdGhlXG4gICAgZ2l2ZW4gb2Zmc2V0LCBpbiB0aGlzIG1hcHBpbmcgKGFzIHBlciB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvXG4gICAgYGFwcGVuZE1hcGApLlxuICAgICovXG4gICAgZ2V0TWlycm9yKG4pIHtcbiAgICAgICAgaWYgKHRoaXMubWlycm9yKVxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm1pcnJvci5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5taXJyb3JbaV0gPT0gbilcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWlycm9yW2kgKyAoaSAlIDIgPyAtMSA6IDEpXTtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzZXRNaXJyb3IobiwgbSkge1xuICAgICAgICBpZiAoIXRoaXMubWlycm9yKVxuICAgICAgICAgICAgdGhpcy5taXJyb3IgPSBbXTtcbiAgICAgICAgdGhpcy5taXJyb3IucHVzaChuLCBtKTtcbiAgICB9XG4gICAgLyoqXG4gICAgQXBwZW5kIHRoZSBpbnZlcnNlIG9mIHRoZSBnaXZlbiBtYXBwaW5nIHRvIHRoaXMgb25lLlxuICAgICovXG4gICAgYXBwZW5kTWFwcGluZ0ludmVydGVkKG1hcHBpbmcpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IG1hcHBpbmcubWFwcy5sZW5ndGggLSAxLCB0b3RhbFNpemUgPSB0aGlzLm1hcHMubGVuZ3RoICsgbWFwcGluZy5tYXBzLmxlbmd0aDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGxldCBtaXJyID0gbWFwcGluZy5nZXRNaXJyb3IoaSk7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZE1hcChtYXBwaW5nLm1hcHNbaV0uaW52ZXJ0KCksIG1pcnIgIT0gbnVsbCAmJiBtaXJyID4gaSA/IHRvdGFsU2l6ZSAtIG1pcnIgLSAxIDogdW5kZWZpbmVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYW4gaW52ZXJ0ZWQgdmVyc2lvbiBvZiB0aGlzIG1hcHBpbmcuXG4gICAgKi9cbiAgICBpbnZlcnQoKSB7XG4gICAgICAgIGxldCBpbnZlcnNlID0gbmV3IE1hcHBpbmc7XG4gICAgICAgIGludmVyc2UuYXBwZW5kTWFwcGluZ0ludmVydGVkKHRoaXMpO1xuICAgICAgICByZXR1cm4gaW52ZXJzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgTWFwIGEgcG9zaXRpb24gdGhyb3VnaCB0aGlzIG1hcHBpbmcuXG4gICAgKi9cbiAgICBtYXAocG9zLCBhc3NvYyA9IDEpIHtcbiAgICAgICAgaWYgKHRoaXMubWlycm9yKVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcChwb3MsIGFzc29jLCB0cnVlKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuZnJvbTsgaSA8IHRoaXMudG87IGkrKylcbiAgICAgICAgICAgIHBvcyA9IHRoaXMubWFwc1tpXS5tYXAocG9zLCBhc3NvYyk7XG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgfVxuICAgIC8qKlxuICAgIE1hcCBhIHBvc2l0aW9uIHRocm91Z2ggdGhpcyBtYXBwaW5nLCByZXR1cm5pbmcgYSBtYXBwaW5nXG4gICAgcmVzdWx0LlxuICAgICovXG4gICAgbWFwUmVzdWx0KHBvcywgYXNzb2MgPSAxKSB7IHJldHVybiB0aGlzLl9tYXAocG9zLCBhc3NvYywgZmFsc2UpOyB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBfbWFwKHBvcywgYXNzb2MsIHNpbXBsZSkge1xuICAgICAgICBsZXQgZGVsSW5mbyA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmZyb207IGkgPCB0aGlzLnRvOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBtYXAgPSB0aGlzLm1hcHNbaV0sIHJlc3VsdCA9IG1hcC5tYXBSZXN1bHQocG9zLCBhc3NvYyk7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnJlY292ZXIgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxldCBjb3JyID0gdGhpcy5nZXRNaXJyb3IoaSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvcnIgIT0gbnVsbCAmJiBjb3JyID4gaSAmJiBjb3JyIDwgdGhpcy50bykge1xuICAgICAgICAgICAgICAgICAgICBpID0gY29ycjtcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGhpcy5tYXBzW2NvcnJdLnJlY292ZXIocmVzdWx0LnJlY292ZXIpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWxJbmZvIHw9IHJlc3VsdC5kZWxJbmZvO1xuICAgICAgICAgICAgcG9zID0gcmVzdWx0LnBvcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2ltcGxlID8gcG9zIDogbmV3IE1hcFJlc3VsdChwb3MsIGRlbEluZm8sIG51bGwpO1xuICAgIH1cbn1cblxuY29uc3Qgc3RlcHNCeUlEID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8qKlxuQSBzdGVwIG9iamVjdCByZXByZXNlbnRzIGFuIGF0b21pYyBjaGFuZ2UuIEl0IGdlbmVyYWxseSBhcHBsaWVzXG5vbmx5IHRvIHRoZSBkb2N1bWVudCBpdCB3YXMgY3JlYXRlZCBmb3IsIHNpbmNlIHRoZSBwb3NpdGlvbnNcbnN0b3JlZCBpbiBpdCB3aWxsIG9ubHkgbWFrZSBzZW5zZSBmb3IgdGhhdCBkb2N1bWVudC5cblxuTmV3IHN0ZXBzIGFyZSBkZWZpbmVkIGJ5IGNyZWF0aW5nIGNsYXNzZXMgdGhhdCBleHRlbmQgYFN0ZXBgLFxub3ZlcnJpZGluZyB0aGUgYGFwcGx5YCwgYGludmVydGAsIGBtYXBgLCBgZ2V0TWFwYCBhbmQgYGZyb21KU09OYFxubWV0aG9kcywgYW5kIHJlZ2lzdGVyaW5nIHlvdXIgY2xhc3Mgd2l0aCBhIHVuaXF1ZVxuSlNPTi1zZXJpYWxpemF0aW9uIGlkZW50aWZpZXIgdXNpbmdcbltgU3RlcC5qc29uSURgXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdHJhbnNmb3JtLlN0ZXBeanNvbklEKS5cbiovXG5jbGFzcyBTdGVwIHtcbiAgICAvKipcbiAgICBHZXQgdGhlIHN0ZXAgbWFwIHRoYXQgcmVwcmVzZW50cyB0aGUgY2hhbmdlcyBtYWRlIGJ5IHRoaXMgc3RlcCxcbiAgICBhbmQgd2hpY2ggY2FuIGJlIHVzZWQgdG8gdHJhbnNmb3JtIGJldHdlZW4gcG9zaXRpb25zIGluIHRoZSBvbGRcbiAgICBhbmQgdGhlIG5ldyBkb2N1bWVudC5cbiAgICAqL1xuICAgIGdldE1hcCgpIHsgcmV0dXJuIFN0ZXBNYXAuZW1wdHk7IH1cbiAgICAvKipcbiAgICBUcnkgdG8gbWVyZ2UgdGhpcyBzdGVwIHdpdGggYW5vdGhlciBvbmUsIHRvIGJlIGFwcGxpZWQgZGlyZWN0bHlcbiAgICBhZnRlciBpdC4gUmV0dXJucyB0aGUgbWVyZ2VkIHN0ZXAgd2hlbiBwb3NzaWJsZSwgbnVsbCBpZiB0aGVcbiAgICBzdGVwcyBjYW4ndCBiZSBtZXJnZWQuXG4gICAgKi9cbiAgICBtZXJnZShvdGhlcikgeyByZXR1cm4gbnVsbDsgfVxuICAgIC8qKlxuICAgIERlc2VyaWFsaXplIGEgc3RlcCBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uLiBXaWxsIGNhbGxcbiAgICB0aHJvdWdoIHRvIHRoZSBzdGVwIGNsYXNzJyBvd24gaW1wbGVtZW50YXRpb24gb2YgdGhpcyBtZXRob2QuXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCBqc29uKSB7XG4gICAgICAgIGlmICghanNvbiB8fCAhanNvbi5zdGVwVHlwZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiSW52YWxpZCBpbnB1dCBmb3IgU3RlcC5mcm9tSlNPTlwiKTtcbiAgICAgICAgbGV0IHR5cGUgPSBzdGVwc0J5SURbanNvbi5zdGVwVHlwZV07XG4gICAgICAgIGlmICghdHlwZSlcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBObyBzdGVwIHR5cGUgJHtqc29uLnN0ZXBUeXBlfSBkZWZpbmVkYCk7XG4gICAgICAgIHJldHVybiB0eXBlLmZyb21KU09OKHNjaGVtYSwganNvbik7XG4gICAgfVxuICAgIC8qKlxuICAgIFRvIGJlIGFibGUgdG8gc2VyaWFsaXplIHN0ZXBzIHRvIEpTT04sIGVhY2ggc3RlcCBuZWVkcyBhIHN0cmluZ1xuICAgIElEIHRvIGF0dGFjaCB0byBpdHMgSlNPTiByZXByZXNlbnRhdGlvbi4gVXNlIHRoaXMgbWV0aG9kIHRvXG4gICAgcmVnaXN0ZXIgYW4gSUQgZm9yIHlvdXIgc3RlcCBjbGFzc2VzLiBUcnkgdG8gcGljayBzb21ldGhpbmdcbiAgICB0aGF0J3MgdW5saWtlbHkgdG8gY2xhc2ggd2l0aCBzdGVwcyBmcm9tIG90aGVyIG1vZHVsZXMuXG4gICAgKi9cbiAgICBzdGF0aWMganNvbklEKGlkLCBzdGVwQ2xhc3MpIHtcbiAgICAgICAgaWYgKGlkIGluIHN0ZXBzQnlJRClcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiRHVwbGljYXRlIHVzZSBvZiBzdGVwIEpTT04gSUQgXCIgKyBpZCk7XG4gICAgICAgIHN0ZXBzQnlJRFtpZF0gPSBzdGVwQ2xhc3M7XG4gICAgICAgIHN0ZXBDbGFzcy5wcm90b3R5cGUuanNvbklEID0gaWQ7XG4gICAgICAgIHJldHVybiBzdGVwQ2xhc3M7XG4gICAgfVxufVxuLyoqXG5UaGUgcmVzdWx0IG9mIFthcHBseWluZ10oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5TdGVwLmFwcGx5KSBhIHN0ZXAuIENvbnRhaW5zIGVpdGhlciBhXG5uZXcgZG9jdW1lbnQgb3IgYSBmYWlsdXJlIHZhbHVlLlxuKi9cbmNsYXNzIFN0ZXBSZXN1bHQge1xuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHRyYW5zZm9ybWVkIGRvY3VtZW50LCBpZiBzdWNjZXNzZnVsLlxuICAgICovXG4gICAgZG9jLCBcbiAgICAvKipcbiAgICBUaGUgZmFpbHVyZSBtZXNzYWdlLCBpZiB1bnN1Y2Nlc3NmdWwuXG4gICAgKi9cbiAgICBmYWlsZWQpIHtcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgICAgIHRoaXMuZmFpbGVkID0gZmFpbGVkO1xuICAgIH1cbiAgICAvKipcbiAgICBDcmVhdGUgYSBzdWNjZXNzZnVsIHN0ZXAgcmVzdWx0LlxuICAgICovXG4gICAgc3RhdGljIG9rKGRvYykgeyByZXR1cm4gbmV3IFN0ZXBSZXN1bHQoZG9jLCBudWxsKTsgfVxuICAgIC8qKlxuICAgIENyZWF0ZSBhIGZhaWxlZCBzdGVwIHJlc3VsdC5cbiAgICAqL1xuICAgIHN0YXRpYyBmYWlsKG1lc3NhZ2UpIHsgcmV0dXJuIG5ldyBTdGVwUmVzdWx0KG51bGwsIG1lc3NhZ2UpOyB9XG4gICAgLyoqXG4gICAgQ2FsbCBbYE5vZGUucmVwbGFjZWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlLnJlcGxhY2UpIHdpdGggdGhlIGdpdmVuXG4gICAgYXJndW1lbnRzLiBDcmVhdGUgYSBzdWNjZXNzZnVsIHJlc3VsdCBpZiBpdCBzdWNjZWVkcywgYW5kIGFcbiAgICBmYWlsZWQgb25lIGlmIGl0IHRocm93cyBhIGBSZXBsYWNlRXJyb3JgLlxuICAgICovXG4gICAgc3RhdGljIGZyb21SZXBsYWNlKGRvYywgZnJvbSwgdG8sIHNsaWNlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5vayhkb2MucmVwbGFjZShmcm9tLCB0bywgc2xpY2UpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBSZXBsYWNlRXJyb3IpXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZmFpbChlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbWFwRnJhZ21lbnQoZnJhZ21lbnQsIGYsIHBhcmVudCkge1xuICAgIGxldCBtYXBwZWQgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZyYWdtZW50LmNoaWxkQ291bnQ7IGkrKykge1xuICAgICAgICBsZXQgY2hpbGQgPSBmcmFnbWVudC5jaGlsZChpKTtcbiAgICAgICAgaWYgKGNoaWxkLmNvbnRlbnQuc2l6ZSlcbiAgICAgICAgICAgIGNoaWxkID0gY2hpbGQuY29weShtYXBGcmFnbWVudChjaGlsZC5jb250ZW50LCBmLCBjaGlsZCkpO1xuICAgICAgICBpZiAoY2hpbGQuaXNJbmxpbmUpXG4gICAgICAgICAgICBjaGlsZCA9IGYoY2hpbGQsIHBhcmVudCwgaSk7XG4gICAgICAgIG1hcHBlZC5wdXNoKGNoaWxkKTtcbiAgICB9XG4gICAgcmV0dXJuIEZyYWdtZW50LmZyb21BcnJheShtYXBwZWQpO1xufVxuLyoqXG5BZGQgYSBtYXJrIHRvIGFsbCBpbmxpbmUgY29udGVudCBiZXR3ZWVuIHR3byBwb3NpdGlvbnMuXG4qL1xuY2xhc3MgQWRkTWFya1N0ZXAgZXh0ZW5kcyBTdGVwIHtcbiAgICAvKipcbiAgICBDcmVhdGUgYSBtYXJrIHN0ZXAuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgb2YgdGhlIG1hcmtlZCByYW5nZS5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgb2YgdGhlIG1hcmtlZCByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgbWFyayB0byBhZGQuXG4gICAgKi9cbiAgICBtYXJrKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICB9XG4gICAgYXBwbHkoZG9jKSB7XG4gICAgICAgIGxldCBvbGRTbGljZSA9IGRvYy5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pLCAkZnJvbSA9IGRvYy5yZXNvbHZlKHRoaXMuZnJvbSk7XG4gICAgICAgIGxldCBwYXJlbnQgPSAkZnJvbS5ub2RlKCRmcm9tLnNoYXJlZERlcHRoKHRoaXMudG8pKTtcbiAgICAgICAgbGV0IHNsaWNlID0gbmV3IFNsaWNlKG1hcEZyYWdtZW50KG9sZFNsaWNlLmNvbnRlbnQsIChub2RlLCBwYXJlbnQpID0+IHtcbiAgICAgICAgICAgIGlmICghbm9kZS5pc0F0b20gfHwgIXBhcmVudC50eXBlLmFsbG93c01hcmtUeXBlKHRoaXMubWFyay50eXBlKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIHJldHVybiBub2RlLm1hcmsodGhpcy5tYXJrLmFkZFRvU2V0KG5vZGUubWFya3MpKTtcbiAgICAgICAgfSwgcGFyZW50KSwgb2xkU2xpY2Uub3BlblN0YXJ0LCBvbGRTbGljZS5vcGVuRW5kKTtcbiAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZnJvbVJlcGxhY2UoZG9jLCB0aGlzLmZyb20sIHRoaXMudG8sIHNsaWNlKTtcbiAgICB9XG4gICAgaW52ZXJ0KCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU1hcmtTdGVwKHRoaXMuZnJvbSwgdGhpcy50bywgdGhpcy5tYXJrKTtcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcFJlc3VsdCh0aGlzLmZyb20sIDEpLCB0byA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMudG8sIC0xKTtcbiAgICAgICAgaWYgKGZyb20uZGVsZXRlZCAmJiB0by5kZWxldGVkIHx8IGZyb20ucG9zID49IHRvLnBvcylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IEFkZE1hcmtTdGVwKGZyb20ucG9zLCB0by5wb3MsIHRoaXMubWFyayk7XG4gICAgfVxuICAgIG1lcmdlKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIEFkZE1hcmtTdGVwICYmXG4gICAgICAgICAgICBvdGhlci5tYXJrLmVxKHRoaXMubWFyaykgJiZcbiAgICAgICAgICAgIHRoaXMuZnJvbSA8PSBvdGhlci50byAmJiB0aGlzLnRvID49IG90aGVyLmZyb20pXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFkZE1hcmtTdGVwKE1hdGgubWluKHRoaXMuZnJvbSwgb3RoZXIuZnJvbSksIE1hdGgubWF4KHRoaXMudG8sIG90aGVyLnRvKSwgdGhpcy5tYXJrKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RlcFR5cGU6IFwiYWRkTWFya1wiLCBtYXJrOiB0aGlzLm1hcmsudG9KU09OKCksXG4gICAgICAgICAgICBmcm9tOiB0aGlzLmZyb20sIHRvOiB0aGlzLnRvIH07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNjaGVtYSwganNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGpzb24uZnJvbSAhPSBcIm51bWJlclwiIHx8IHR5cGVvZiBqc29uLnRvICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIEFkZE1hcmtTdGVwLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IEFkZE1hcmtTdGVwKGpzb24uZnJvbSwganNvbi50bywgc2NoZW1hLm1hcmtGcm9tSlNPTihqc29uLm1hcmspKTtcbiAgICB9XG59XG5TdGVwLmpzb25JRChcImFkZE1hcmtcIiwgQWRkTWFya1N0ZXApO1xuLyoqXG5SZW1vdmUgYSBtYXJrIGZyb20gYWxsIGlubGluZSBjb250ZW50IGJldHdlZW4gdHdvIHBvc2l0aW9ucy5cbiovXG5jbGFzcyBSZW1vdmVNYXJrU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIG1hcmstcmVtb3Zpbmcgc3RlcC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBzdGFydCBvZiB0aGUgdW5tYXJrZWQgcmFuZ2UuXG4gICAgKi9cbiAgICBmcm9tLCBcbiAgICAvKipcbiAgICBUaGUgZW5kIG9mIHRoZSB1bm1hcmtlZCByYW5nZS5cbiAgICAqL1xuICAgIHRvLCBcbiAgICAvKipcbiAgICBUaGUgbWFyayB0byByZW1vdmUuXG4gICAgKi9cbiAgICBtYXJrKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5tYXJrID0gbWFyaztcbiAgICB9XG4gICAgYXBwbHkoZG9jKSB7XG4gICAgICAgIGxldCBvbGRTbGljZSA9IGRvYy5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pO1xuICAgICAgICBsZXQgc2xpY2UgPSBuZXcgU2xpY2UobWFwRnJhZ21lbnQob2xkU2xpY2UuY29udGVudCwgbm9kZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5tYXJrKHRoaXMubWFyay5yZW1vdmVGcm9tU2V0KG5vZGUubWFya3MpKTtcbiAgICAgICAgfSwgZG9jKSwgb2xkU2xpY2Uub3BlblN0YXJ0LCBvbGRTbGljZS5vcGVuRW5kKTtcbiAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZnJvbVJlcGxhY2UoZG9jLCB0aGlzLmZyb20sIHRoaXMudG8sIHNsaWNlKTtcbiAgICB9XG4gICAgaW52ZXJ0KCkge1xuICAgICAgICByZXR1cm4gbmV3IEFkZE1hcmtTdGVwKHRoaXMuZnJvbSwgdGhpcy50bywgdGhpcy5tYXJrKTtcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcFJlc3VsdCh0aGlzLmZyb20sIDEpLCB0byA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMudG8sIC0xKTtcbiAgICAgICAgaWYgKGZyb20uZGVsZXRlZCAmJiB0by5kZWxldGVkIHx8IGZyb20ucG9zID49IHRvLnBvcylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU1hcmtTdGVwKGZyb20ucG9zLCB0by5wb3MsIHRoaXMubWFyayk7XG4gICAgfVxuICAgIG1lcmdlKG90aGVyKSB7XG4gICAgICAgIGlmIChvdGhlciBpbnN0YW5jZW9mIFJlbW92ZU1hcmtTdGVwICYmXG4gICAgICAgICAgICBvdGhlci5tYXJrLmVxKHRoaXMubWFyaykgJiZcbiAgICAgICAgICAgIHRoaXMuZnJvbSA8PSBvdGhlci50byAmJiB0aGlzLnRvID49IG90aGVyLmZyb20pXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU1hcmtTdGVwKE1hdGgubWluKHRoaXMuZnJvbSwgb3RoZXIuZnJvbSksIE1hdGgubWF4KHRoaXMudG8sIG90aGVyLnRvKSwgdGhpcy5tYXJrKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RlcFR5cGU6IFwicmVtb3ZlTWFya1wiLCBtYXJrOiB0aGlzLm1hcmsudG9KU09OKCksXG4gICAgICAgICAgICBmcm9tOiB0aGlzLmZyb20sIHRvOiB0aGlzLnRvIH07XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNjaGVtYSwganNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGpzb24uZnJvbSAhPSBcIm51bWJlclwiIHx8IHR5cGVvZiBqc29uLnRvICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIFJlbW92ZU1hcmtTdGVwLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlbW92ZU1hcmtTdGVwKGpzb24uZnJvbSwganNvbi50bywgc2NoZW1hLm1hcmtGcm9tSlNPTihqc29uLm1hcmspKTtcbiAgICB9XG59XG5TdGVwLmpzb25JRChcInJlbW92ZU1hcmtcIiwgUmVtb3ZlTWFya1N0ZXApO1xuXG4vKipcblJlcGxhY2UgYSBwYXJ0IG9mIHRoZSBkb2N1bWVudCB3aXRoIGEgc2xpY2Ugb2YgbmV3IGNvbnRlbnQuXG4qL1xuY2xhc3MgUmVwbGFjZVN0ZXAgZXh0ZW5kcyBTdGVwIHtcbiAgICAvKipcbiAgICBUaGUgZ2l2ZW4gYHNsaWNlYCBzaG91bGQgZml0IHRoZSAnZ2FwJyBiZXR3ZWVuIGBmcm9tYCBhbmRcbiAgICBgdG9g4oCUdGhlIGRlcHRocyBtdXN0IGxpbmUgdXAsIGFuZCB0aGUgc3Vycm91bmRpbmcgbm9kZXMgbXVzdCBiZVxuICAgIGFibGUgdG8gYmUgam9pbmVkIHdpdGggdGhlIG9wZW4gc2lkZXMgb2YgdGhlIHNsaWNlLiBXaGVuXG4gICAgYHN0cnVjdHVyZWAgaXMgdHJ1ZSwgdGhlIHN0ZXAgd2lsbCBmYWlsIGlmIHRoZSBjb250ZW50IGJldHdlZW5cbiAgICBmcm9tIGFuZCB0byBpcyBub3QganVzdCBhIHNlcXVlbmNlIG9mIGNsb3NpbmcgYW5kIHRoZW4gb3BlbmluZ1xuICAgIHRva2VucyAodGhpcyBpcyB0byBndWFyZCBhZ2FpbnN0IHJlYmFzZWQgcmVwbGFjZSBzdGVwc1xuICAgIG92ZXJ3cml0aW5nIHNvbWV0aGluZyB0aGV5IHdlcmVuJ3Qgc3VwcG9zZWQgdG8pLlxuICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXBsYWNlZCByYW5nZS5cbiAgICAqL1xuICAgIGZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgcG9zaXRpb24gb2YgdGhlIHJlcGxhY2VkIHJhbmdlLlxuICAgICovXG4gICAgdG8sIFxuICAgIC8qKlxuICAgIFRoZSBzbGljZSB0byBpbnNlcnQuXG4gICAgKi9cbiAgICBzbGljZSwgXG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdHJ1Y3R1cmUgPSBmYWxzZSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgICB0aGlzLnRvID0gdG87XG4gICAgICAgIHRoaXMuc2xpY2UgPSBzbGljZTtcbiAgICAgICAgdGhpcy5zdHJ1Y3R1cmUgPSBzdHJ1Y3R1cmU7XG4gICAgfVxuICAgIGFwcGx5KGRvYykge1xuICAgICAgICBpZiAodGhpcy5zdHJ1Y3R1cmUgJiYgY29udGVudEJldHdlZW4oZG9jLCB0aGlzLmZyb20sIHRoaXMudG8pKVxuICAgICAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZmFpbChcIlN0cnVjdHVyZSByZXBsYWNlIHdvdWxkIG92ZXJ3cml0ZSBjb250ZW50XCIpO1xuICAgICAgICByZXR1cm4gU3RlcFJlc3VsdC5mcm9tUmVwbGFjZShkb2MsIHRoaXMuZnJvbSwgdGhpcy50bywgdGhpcy5zbGljZSk7XG4gICAgfVxuICAgIGdldE1hcCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdGVwTWFwKFt0aGlzLmZyb20sIHRoaXMudG8gLSB0aGlzLmZyb20sIHRoaXMuc2xpY2Uuc2l6ZV0pO1xuICAgIH1cbiAgICBpbnZlcnQoZG9jKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVwbGFjZVN0ZXAodGhpcy5mcm9tLCB0aGlzLmZyb20gKyB0aGlzLnNsaWNlLnNpemUsIGRvYy5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pKTtcbiAgICB9XG4gICAgbWFwKG1hcHBpbmcpIHtcbiAgICAgICAgbGV0IGZyb20gPSBtYXBwaW5nLm1hcFJlc3VsdCh0aGlzLmZyb20sIDEpLCB0byA9IG1hcHBpbmcubWFwUmVzdWx0KHRoaXMudG8sIC0xKTtcbiAgICAgICAgaWYgKGZyb20uZGVsZXRlZEFjcm9zcyAmJiB0by5kZWxldGVkQWNyb3NzKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiBuZXcgUmVwbGFjZVN0ZXAoZnJvbS5wb3MsIE1hdGgubWF4KGZyb20ucG9zLCB0by5wb3MpLCB0aGlzLnNsaWNlKTtcbiAgICB9XG4gICAgbWVyZ2Uob3RoZXIpIHtcbiAgICAgICAgaWYgKCEob3RoZXIgaW5zdGFuY2VvZiBSZXBsYWNlU3RlcCkgfHwgb3RoZXIuc3RydWN0dXJlIHx8IHRoaXMuc3RydWN0dXJlKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmICh0aGlzLmZyb20gKyB0aGlzLnNsaWNlLnNpemUgPT0gb3RoZXIuZnJvbSAmJiAhdGhpcy5zbGljZS5vcGVuRW5kICYmICFvdGhlci5zbGljZS5vcGVuU3RhcnQpIHtcbiAgICAgICAgICAgIGxldCBzbGljZSA9IHRoaXMuc2xpY2Uuc2l6ZSArIG90aGVyLnNsaWNlLnNpemUgPT0gMCA/IFNsaWNlLmVtcHR5XG4gICAgICAgICAgICAgICAgOiBuZXcgU2xpY2UodGhpcy5zbGljZS5jb250ZW50LmFwcGVuZChvdGhlci5zbGljZS5jb250ZW50KSwgdGhpcy5zbGljZS5vcGVuU3RhcnQsIG90aGVyLnNsaWNlLm9wZW5FbmQpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSZXBsYWNlU3RlcCh0aGlzLmZyb20sIHRoaXMudG8gKyAob3RoZXIudG8gLSBvdGhlci5mcm9tKSwgc2xpY2UsIHRoaXMuc3RydWN0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvdGhlci50byA9PSB0aGlzLmZyb20gJiYgIXRoaXMuc2xpY2Uub3BlblN0YXJ0ICYmICFvdGhlci5zbGljZS5vcGVuRW5kKSB7XG4gICAgICAgICAgICBsZXQgc2xpY2UgPSB0aGlzLnNsaWNlLnNpemUgKyBvdGhlci5zbGljZS5zaXplID09IDAgPyBTbGljZS5lbXB0eVxuICAgICAgICAgICAgICAgIDogbmV3IFNsaWNlKG90aGVyLnNsaWNlLmNvbnRlbnQuYXBwZW5kKHRoaXMuc2xpY2UuY29udGVudCksIG90aGVyLnNsaWNlLm9wZW5TdGFydCwgdGhpcy5zbGljZS5vcGVuRW5kKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVwbGFjZVN0ZXAob3RoZXIuZnJvbSwgdGhpcy50bywgc2xpY2UsIHRoaXMuc3RydWN0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgbGV0IGpzb24gPSB7IHN0ZXBUeXBlOiBcInJlcGxhY2VcIiwgZnJvbTogdGhpcy5mcm9tLCB0bzogdGhpcy50byB9O1xuICAgICAgICBpZiAodGhpcy5zbGljZS5zaXplKVxuICAgICAgICAgICAganNvbi5zbGljZSA9IHRoaXMuc2xpY2UudG9KU09OKCk7XG4gICAgICAgIGlmICh0aGlzLnN0cnVjdHVyZSlcbiAgICAgICAgICAgIGpzb24uc3RydWN0dXJlID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxuICAgIC8qKlxuICAgIEBpbnRlcm5hbFxuICAgICovXG4gICAgc3RhdGljIGZyb21KU09OKHNjaGVtYSwganNvbikge1xuICAgICAgICBpZiAodHlwZW9mIGpzb24uZnJvbSAhPSBcIm51bWJlclwiIHx8IHR5cGVvZiBqc29uLnRvICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIFJlcGxhY2VTdGVwLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlcGxhY2VTdGVwKGpzb24uZnJvbSwganNvbi50bywgU2xpY2UuZnJvbUpTT04oc2NoZW1hLCBqc29uLnNsaWNlKSwgISFqc29uLnN0cnVjdHVyZSk7XG4gICAgfVxufVxuU3RlcC5qc29uSUQoXCJyZXBsYWNlXCIsIFJlcGxhY2VTdGVwKTtcbi8qKlxuUmVwbGFjZSBhIHBhcnQgb2YgdGhlIGRvY3VtZW50IHdpdGggYSBzbGljZSBvZiBjb250ZW50LCBidXRcbnByZXNlcnZlIGEgcmFuZ2Ugb2YgdGhlIHJlcGxhY2VkIGNvbnRlbnQgYnkgbW92aW5nIGl0IGludG8gdGhlXG5zbGljZS5cbiovXG5jbGFzcyBSZXBsYWNlQXJvdW5kU3RlcCBleHRlbmRzIFN0ZXAge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHJlcGxhY2UtYXJvdW5kIHN0ZXAgd2l0aCB0aGUgZ2l2ZW4gcmFuZ2UgYW5kIGdhcC5cbiAgICBgaW5zZXJ0YCBzaG91bGQgYmUgdGhlIHBvaW50IGluIHRoZSBzbGljZSBpbnRvIHdoaWNoIHRoZSBjb250ZW50XG4gICAgb2YgdGhlIGdhcCBzaG91bGQgYmUgbW92ZWQuIGBzdHJ1Y3R1cmVgIGhhcyB0aGUgc2FtZSBtZWFuaW5nIGFzXG4gICAgaXQgaGFzIGluIHRoZSBbYFJlcGxhY2VTdGVwYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5SZXBsYWNlU3RlcCkgY2xhc3MuXG4gICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlcGxhY2VkIHJhbmdlLlxuICAgICovXG4gICAgZnJvbSwgXG4gICAgLyoqXG4gICAgVGhlIGVuZCBwb3NpdGlvbiBvZiB0aGUgcmVwbGFjZWQgcmFuZ2UuXG4gICAgKi9cbiAgICB0bywgXG4gICAgLyoqXG4gICAgVGhlIHN0YXJ0IG9mIHByZXNlcnZlZCByYW5nZS5cbiAgICAqL1xuICAgIGdhcEZyb20sIFxuICAgIC8qKlxuICAgIFRoZSBlbmQgb2YgcHJlc2VydmVkIHJhbmdlLlxuICAgICovXG4gICAgZ2FwVG8sIFxuICAgIC8qKlxuICAgIFRoZSBzbGljZSB0byBpbnNlcnQuXG4gICAgKi9cbiAgICBzbGljZSwgXG4gICAgLyoqXG4gICAgVGhlIHBvc2l0aW9uIGluIHRoZSBzbGljZSB3aGVyZSB0aGUgcHJlc2VydmVkIHJhbmdlIHNob3VsZCBiZVxuICAgIGluc2VydGVkLlxuICAgICovXG4gICAgaW5zZXJ0LCBcbiAgICAvKipcbiAgICBAaW50ZXJuYWxcbiAgICAqL1xuICAgIHN0cnVjdHVyZSA9IGZhbHNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZnJvbSA9IGZyb207XG4gICAgICAgIHRoaXMudG8gPSB0bztcbiAgICAgICAgdGhpcy5nYXBGcm9tID0gZ2FwRnJvbTtcbiAgICAgICAgdGhpcy5nYXBUbyA9IGdhcFRvO1xuICAgICAgICB0aGlzLnNsaWNlID0gc2xpY2U7XG4gICAgICAgIHRoaXMuaW5zZXJ0ID0gaW5zZXJ0O1xuICAgICAgICB0aGlzLnN0cnVjdHVyZSA9IHN0cnVjdHVyZTtcbiAgICB9XG4gICAgYXBwbHkoZG9jKSB7XG4gICAgICAgIGlmICh0aGlzLnN0cnVjdHVyZSAmJiAoY29udGVudEJldHdlZW4oZG9jLCB0aGlzLmZyb20sIHRoaXMuZ2FwRnJvbSkgfHxcbiAgICAgICAgICAgIGNvbnRlbnRCZXR3ZWVuKGRvYywgdGhpcy5nYXBUbywgdGhpcy50bykpKVxuICAgICAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZmFpbChcIlN0cnVjdHVyZSBnYXAtcmVwbGFjZSB3b3VsZCBvdmVyd3JpdGUgY29udGVudFwiKTtcbiAgICAgICAgbGV0IGdhcCA9IGRvYy5zbGljZSh0aGlzLmdhcEZyb20sIHRoaXMuZ2FwVG8pO1xuICAgICAgICBpZiAoZ2FwLm9wZW5TdGFydCB8fCBnYXAub3BlbkVuZClcbiAgICAgICAgICAgIHJldHVybiBTdGVwUmVzdWx0LmZhaWwoXCJHYXAgaXMgbm90IGEgZmxhdCByYW5nZVwiKTtcbiAgICAgICAgbGV0IGluc2VydGVkID0gdGhpcy5zbGljZS5pbnNlcnRBdCh0aGlzLmluc2VydCwgZ2FwLmNvbnRlbnQpO1xuICAgICAgICBpZiAoIWluc2VydGVkKVxuICAgICAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZmFpbChcIkNvbnRlbnQgZG9lcyBub3QgZml0IGluIGdhcFwiKTtcbiAgICAgICAgcmV0dXJuIFN0ZXBSZXN1bHQuZnJvbVJlcGxhY2UoZG9jLCB0aGlzLmZyb20sIHRoaXMudG8sIGluc2VydGVkKTtcbiAgICB9XG4gICAgZ2V0TWFwKCkge1xuICAgICAgICByZXR1cm4gbmV3IFN0ZXBNYXAoW3RoaXMuZnJvbSwgdGhpcy5nYXBGcm9tIC0gdGhpcy5mcm9tLCB0aGlzLmluc2VydCxcbiAgICAgICAgICAgIHRoaXMuZ2FwVG8sIHRoaXMudG8gLSB0aGlzLmdhcFRvLCB0aGlzLnNsaWNlLnNpemUgLSB0aGlzLmluc2VydF0pO1xuICAgIH1cbiAgICBpbnZlcnQoZG9jKSB7XG4gICAgICAgIGxldCBnYXAgPSB0aGlzLmdhcFRvIC0gdGhpcy5nYXBGcm9tO1xuICAgICAgICByZXR1cm4gbmV3IFJlcGxhY2VBcm91bmRTdGVwKHRoaXMuZnJvbSwgdGhpcy5mcm9tICsgdGhpcy5zbGljZS5zaXplICsgZ2FwLCB0aGlzLmZyb20gKyB0aGlzLmluc2VydCwgdGhpcy5mcm9tICsgdGhpcy5pbnNlcnQgKyBnYXAsIGRvYy5zbGljZSh0aGlzLmZyb20sIHRoaXMudG8pLnJlbW92ZUJldHdlZW4odGhpcy5nYXBGcm9tIC0gdGhpcy5mcm9tLCB0aGlzLmdhcFRvIC0gdGhpcy5mcm9tKSwgdGhpcy5nYXBGcm9tIC0gdGhpcy5mcm9tLCB0aGlzLnN0cnVjdHVyZSk7XG4gICAgfVxuICAgIG1hcChtYXBwaW5nKSB7XG4gICAgICAgIGxldCBmcm9tID0gbWFwcGluZy5tYXBSZXN1bHQodGhpcy5mcm9tLCAxKSwgdG8gPSBtYXBwaW5nLm1hcFJlc3VsdCh0aGlzLnRvLCAtMSk7XG4gICAgICAgIGxldCBnYXBGcm9tID0gbWFwcGluZy5tYXAodGhpcy5nYXBGcm9tLCAtMSksIGdhcFRvID0gbWFwcGluZy5tYXAodGhpcy5nYXBUbywgMSk7XG4gICAgICAgIGlmICgoZnJvbS5kZWxldGVkQWNyb3NzICYmIHRvLmRlbGV0ZWRBY3Jvc3MpIHx8IGdhcEZyb20gPCBmcm9tLnBvcyB8fCBnYXBUbyA+IHRvLnBvcylcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IFJlcGxhY2VBcm91bmRTdGVwKGZyb20ucG9zLCB0by5wb3MsIGdhcEZyb20sIGdhcFRvLCB0aGlzLnNsaWNlLCB0aGlzLmluc2VydCwgdGhpcy5zdHJ1Y3R1cmUpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGxldCBqc29uID0geyBzdGVwVHlwZTogXCJyZXBsYWNlQXJvdW5kXCIsIGZyb206IHRoaXMuZnJvbSwgdG86IHRoaXMudG8sXG4gICAgICAgICAgICBnYXBGcm9tOiB0aGlzLmdhcEZyb20sIGdhcFRvOiB0aGlzLmdhcFRvLCBpbnNlcnQ6IHRoaXMuaW5zZXJ0IH07XG4gICAgICAgIGlmICh0aGlzLnNsaWNlLnNpemUpXG4gICAgICAgICAgICBqc29uLnNsaWNlID0gdGhpcy5zbGljZS50b0pTT04oKTtcbiAgICAgICAgaWYgKHRoaXMuc3RydWN0dXJlKVxuICAgICAgICAgICAganNvbi5zdHJ1Y3R1cmUgPSB0cnVlO1xuICAgICAgICByZXR1cm4ganNvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBzdGF0aWMgZnJvbUpTT04oc2NoZW1hLCBqc29uKSB7XG4gICAgICAgIGlmICh0eXBlb2YganNvbi5mcm9tICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIGpzb24udG8gIT0gXCJudW1iZXJcIiB8fFxuICAgICAgICAgICAgdHlwZW9mIGpzb24uZ2FwRnJvbSAhPSBcIm51bWJlclwiIHx8IHR5cGVvZiBqc29uLmdhcFRvICE9IFwibnVtYmVyXCIgfHwgdHlwZW9mIGpzb24uaW5zZXJ0ICE9IFwibnVtYmVyXCIpXG4gICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkludmFsaWQgaW5wdXQgZm9yIFJlcGxhY2VBcm91bmRTdGVwLmZyb21KU09OXCIpO1xuICAgICAgICByZXR1cm4gbmV3IFJlcGxhY2VBcm91bmRTdGVwKGpzb24uZnJvbSwganNvbi50bywganNvbi5nYXBGcm9tLCBqc29uLmdhcFRvLCBTbGljZS5mcm9tSlNPTihzY2hlbWEsIGpzb24uc2xpY2UpLCBqc29uLmluc2VydCwgISFqc29uLnN0cnVjdHVyZSk7XG4gICAgfVxufVxuU3RlcC5qc29uSUQoXCJyZXBsYWNlQXJvdW5kXCIsIFJlcGxhY2VBcm91bmRTdGVwKTtcbmZ1bmN0aW9uIGNvbnRlbnRCZXR3ZWVuKGRvYywgZnJvbSwgdG8pIHtcbiAgICBsZXQgJGZyb20gPSBkb2MucmVzb2x2ZShmcm9tKSwgZGlzdCA9IHRvIC0gZnJvbSwgZGVwdGggPSAkZnJvbS5kZXB0aDtcbiAgICB3aGlsZSAoZGlzdCA+IDAgJiYgZGVwdGggPiAwICYmICRmcm9tLmluZGV4QWZ0ZXIoZGVwdGgpID09ICRmcm9tLm5vZGUoZGVwdGgpLmNoaWxkQ291bnQpIHtcbiAgICAgICAgZGVwdGgtLTtcbiAgICAgICAgZGlzdC0tO1xuICAgIH1cbiAgICBpZiAoZGlzdCA+IDApIHtcbiAgICAgICAgbGV0IG5leHQgPSAkZnJvbS5ub2RlKGRlcHRoKS5tYXliZUNoaWxkKCRmcm9tLmluZGV4QWZ0ZXIoZGVwdGgpKTtcbiAgICAgICAgd2hpbGUgKGRpc3QgPiAwKSB7XG4gICAgICAgICAgICBpZiAoIW5leHQgfHwgbmV4dC5pc0xlYWYpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBuZXh0ID0gbmV4dC5maXJzdENoaWxkO1xuICAgICAgICAgICAgZGlzdC0tO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYWRkTWFyayh0ciwgZnJvbSwgdG8sIG1hcmspIHtcbiAgICBsZXQgcmVtb3ZlZCA9IFtdLCBhZGRlZCA9IFtdO1xuICAgIGxldCByZW1vdmluZywgYWRkaW5nO1xuICAgIHRyLmRvYy5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIChub2RlLCBwb3MsIHBhcmVudCkgPT4ge1xuICAgICAgICBpZiAoIW5vZGUuaXNJbmxpbmUpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIGxldCBtYXJrcyA9IG5vZGUubWFya3M7XG4gICAgICAgIGlmICghbWFyay5pc0luU2V0KG1hcmtzKSAmJiBwYXJlbnQudHlwZS5hbGxvd3NNYXJrVHlwZShtYXJrLnR5cGUpKSB7XG4gICAgICAgICAgICBsZXQgc3RhcnQgPSBNYXRoLm1heChwb3MsIGZyb20pLCBlbmQgPSBNYXRoLm1pbihwb3MgKyBub2RlLm5vZGVTaXplLCB0byk7XG4gICAgICAgICAgICBsZXQgbmV3U2V0ID0gbWFyay5hZGRUb1NldChtYXJrcyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXJrc1tpXS5pc0luU2V0KG5ld1NldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbW92aW5nICYmIHJlbW92aW5nLnRvID09IHN0YXJ0ICYmIHJlbW92aW5nLm1hcmsuZXEobWFya3NbaV0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZpbmcudG8gPSBlbmQ7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZWQucHVzaChyZW1vdmluZyA9IG5ldyBSZW1vdmVNYXJrU3RlcChzdGFydCwgZW5kLCBtYXJrc1tpXSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhZGRpbmcgJiYgYWRkaW5nLnRvID09IHN0YXJ0KVxuICAgICAgICAgICAgICAgIGFkZGluZy50byA9IGVuZDtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhZGRlZC5wdXNoKGFkZGluZyA9IG5ldyBBZGRNYXJrU3RlcChzdGFydCwgZW5kLCBtYXJrKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZW1vdmVkLmZvckVhY2gocyA9PiB0ci5zdGVwKHMpKTtcbiAgICBhZGRlZC5mb3JFYWNoKHMgPT4gdHIuc3RlcChzKSk7XG59XG5mdW5jdGlvbiByZW1vdmVNYXJrKHRyLCBmcm9tLCB0bywgbWFyaykge1xuICAgIGxldCBtYXRjaGVkID0gW10sIHN0ZXAgPSAwO1xuICAgIHRyLmRvYy5ub2Rlc0JldHdlZW4oZnJvbSwgdG8sIChub2RlLCBwb3MpID0+IHtcbiAgICAgICAgaWYgKCFub2RlLmlzSW5saW5lKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBzdGVwKys7XG4gICAgICAgIGxldCB0b1JlbW92ZSA9IG51bGw7XG4gICAgICAgIGlmIChtYXJrIGluc3RhbmNlb2YgTWFya1R5cGUpIHtcbiAgICAgICAgICAgIGxldCBzZXQgPSBub2RlLm1hcmtzLCBmb3VuZDtcbiAgICAgICAgICAgIHdoaWxlIChmb3VuZCA9IG1hcmsuaXNJblNldChzZXQpKSB7XG4gICAgICAgICAgICAgICAgKHRvUmVtb3ZlIHx8ICh0b1JlbW92ZSA9IFtdKSkucHVzaChmb3VuZCk7XG4gICAgICAgICAgICAgICAgc2V0ID0gZm91bmQucmVtb3ZlRnJvbVNldChzZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1hcmspIHtcbiAgICAgICAgICAgIGlmIChtYXJrLmlzSW5TZXQobm9kZS5tYXJrcykpXG4gICAgICAgICAgICAgICAgdG9SZW1vdmUgPSBbbWFya107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0b1JlbW92ZSA9IG5vZGUubWFya3M7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvUmVtb3ZlICYmIHRvUmVtb3ZlLmxlbmd0aCkge1xuICAgICAgICAgICAgbGV0IGVuZCA9IE1hdGgubWluKHBvcyArIG5vZGUubm9kZVNpemUsIHRvKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9SZW1vdmUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGUgPSB0b1JlbW92ZVtpXSwgZm91bmQ7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBtYXRjaGVkLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtID0gbWF0Y2hlZFtqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0uc3RlcCA9PSBzdGVwIC0gMSAmJiBzdHlsZS5lcShtYXRjaGVkW2pdLnN0eWxlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kID0gbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvdW5kLnRvID0gZW5kO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZC5zdGVwID0gc3RlcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZWQucHVzaCh7IHN0eWxlLCBmcm9tOiBNYXRoLm1heChwb3MsIGZyb20pLCB0bzogZW5kLCBzdGVwIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIG1hdGNoZWQuZm9yRWFjaChtID0+IHRyLnN0ZXAobmV3IFJlbW92ZU1hcmtTdGVwKG0uZnJvbSwgbS50bywgbS5zdHlsZSkpKTtcbn1cbmZ1bmN0aW9uIGNsZWFySW5jb21wYXRpYmxlKHRyLCBwb3MsIHBhcmVudFR5cGUsIG1hdGNoID0gcGFyZW50VHlwZS5jb250ZW50TWF0Y2gpIHtcbiAgICBsZXQgbm9kZSA9IHRyLmRvYy5ub2RlQXQocG9zKTtcbiAgICBsZXQgZGVsU3RlcHMgPSBbXSwgY3VyID0gcG9zICsgMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGRDb3VudDsgaSsrKSB7XG4gICAgICAgIGxldCBjaGlsZCA9IG5vZGUuY2hpbGQoaSksIGVuZCA9IGN1ciArIGNoaWxkLm5vZGVTaXplO1xuICAgICAgICBsZXQgYWxsb3dlZCA9IG1hdGNoLm1hdGNoVHlwZShjaGlsZC50eXBlKTtcbiAgICAgICAgaWYgKCFhbGxvd2VkKSB7XG4gICAgICAgICAgICBkZWxTdGVwcy5wdXNoKG5ldyBSZXBsYWNlU3RlcChjdXIsIGVuZCwgU2xpY2UuZW1wdHkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1hdGNoID0gYWxsb3dlZDtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY2hpbGQubWFya3MubGVuZ3RoOyBqKyspXG4gICAgICAgICAgICAgICAgaWYgKCFwYXJlbnRUeXBlLmFsbG93c01hcmtUeXBlKGNoaWxkLm1hcmtzW2pdLnR5cGUpKVxuICAgICAgICAgICAgICAgICAgICB0ci5zdGVwKG5ldyBSZW1vdmVNYXJrU3RlcChjdXIsIGVuZCwgY2hpbGQubWFya3Nbal0pKTtcbiAgICAgICAgfVxuICAgICAgICBjdXIgPSBlbmQ7XG4gICAgfVxuICAgIGlmICghbWF0Y2gudmFsaWRFbmQpIHtcbiAgICAgICAgbGV0IGZpbGwgPSBtYXRjaC5maWxsQmVmb3JlKEZyYWdtZW50LmVtcHR5LCB0cnVlKTtcbiAgICAgICAgdHIucmVwbGFjZShjdXIsIGN1ciwgbmV3IFNsaWNlKGZpbGwsIDAsIDApKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IGRlbFN0ZXBzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKVxuICAgICAgICB0ci5zdGVwKGRlbFN0ZXBzW2ldKTtcbn1cblxuZnVuY3Rpb24gY2FuQ3V0KG5vZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICByZXR1cm4gKHN0YXJ0ID09IDAgfHwgbm9kZS5jYW5SZXBsYWNlKHN0YXJ0LCBub2RlLmNoaWxkQ291bnQpKSAmJlxuICAgICAgICAoZW5kID09IG5vZGUuY2hpbGRDb3VudCB8fCBub2RlLmNhblJlcGxhY2UoMCwgZW5kKSk7XG59XG4vKipcblRyeSB0byBmaW5kIGEgdGFyZ2V0IGRlcHRoIHRvIHdoaWNoIHRoZSBjb250ZW50IGluIHRoZSBnaXZlbiByYW5nZVxuY2FuIGJlIGxpZnRlZC4gV2lsbCBub3QgZ28gYWNyb3NzXG5baXNvbGF0aW5nXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuTm9kZVNwZWMuaXNvbGF0aW5nKSBwYXJlbnQgbm9kZXMuXG4qL1xuZnVuY3Rpb24gbGlmdFRhcmdldChyYW5nZSkge1xuICAgIGxldCBwYXJlbnQgPSByYW5nZS5wYXJlbnQ7XG4gICAgbGV0IGNvbnRlbnQgPSBwYXJlbnQuY29udGVudC5jdXRCeUluZGV4KHJhbmdlLnN0YXJ0SW5kZXgsIHJhbmdlLmVuZEluZGV4KTtcbiAgICBmb3IgKGxldCBkZXB0aCA9IHJhbmdlLmRlcHRoOzsgLS1kZXB0aCkge1xuICAgICAgICBsZXQgbm9kZSA9IHJhbmdlLiRmcm9tLm5vZGUoZGVwdGgpO1xuICAgICAgICBsZXQgaW5kZXggPSByYW5nZS4kZnJvbS5pbmRleChkZXB0aCksIGVuZEluZGV4ID0gcmFuZ2UuJHRvLmluZGV4QWZ0ZXIoZGVwdGgpO1xuICAgICAgICBpZiAoZGVwdGggPCByYW5nZS5kZXB0aCAmJiBub2RlLmNhblJlcGxhY2UoaW5kZXgsIGVuZEluZGV4LCBjb250ZW50KSlcbiAgICAgICAgICAgIHJldHVybiBkZXB0aDtcbiAgICAgICAgaWYgKGRlcHRoID09IDAgfHwgbm9kZS50eXBlLnNwZWMuaXNvbGF0aW5nIHx8ICFjYW5DdXQobm9kZSwgaW5kZXgsIGVuZEluZGV4KSlcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbmZ1bmN0aW9uIGxpZnQodHIsIHJhbmdlLCB0YXJnZXQpIHtcbiAgICBsZXQgeyAkZnJvbSwgJHRvLCBkZXB0aCB9ID0gcmFuZ2U7XG4gICAgbGV0IGdhcFN0YXJ0ID0gJGZyb20uYmVmb3JlKGRlcHRoICsgMSksIGdhcEVuZCA9ICR0by5hZnRlcihkZXB0aCArIDEpO1xuICAgIGxldCBzdGFydCA9IGdhcFN0YXJ0LCBlbmQgPSBnYXBFbmQ7XG4gICAgbGV0IGJlZm9yZSA9IEZyYWdtZW50LmVtcHR5LCBvcGVuU3RhcnQgPSAwO1xuICAgIGZvciAobGV0IGQgPSBkZXB0aCwgc3BsaXR0aW5nID0gZmFsc2U7IGQgPiB0YXJnZXQ7IGQtLSlcbiAgICAgICAgaWYgKHNwbGl0dGluZyB8fCAkZnJvbS5pbmRleChkKSA+IDApIHtcbiAgICAgICAgICAgIHNwbGl0dGluZyA9IHRydWU7XG4gICAgICAgICAgICBiZWZvcmUgPSBGcmFnbWVudC5mcm9tKCRmcm9tLm5vZGUoZCkuY29weShiZWZvcmUpKTtcbiAgICAgICAgICAgIG9wZW5TdGFydCsrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RhcnQtLTtcbiAgICAgICAgfVxuICAgIGxldCBhZnRlciA9IEZyYWdtZW50LmVtcHR5LCBvcGVuRW5kID0gMDtcbiAgICBmb3IgKGxldCBkID0gZGVwdGgsIHNwbGl0dGluZyA9IGZhbHNlOyBkID4gdGFyZ2V0OyBkLS0pXG4gICAgICAgIGlmIChzcGxpdHRpbmcgfHwgJHRvLmFmdGVyKGQgKyAxKSA8ICR0by5lbmQoZCkpIHtcbiAgICAgICAgICAgIHNwbGl0dGluZyA9IHRydWU7XG4gICAgICAgICAgICBhZnRlciA9IEZyYWdtZW50LmZyb20oJHRvLm5vZGUoZCkuY29weShhZnRlcikpO1xuICAgICAgICAgICAgb3BlbkVuZCsrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW5kKys7XG4gICAgICAgIH1cbiAgICB0ci5zdGVwKG5ldyBSZXBsYWNlQXJvdW5kU3RlcChzdGFydCwgZW5kLCBnYXBTdGFydCwgZ2FwRW5kLCBuZXcgU2xpY2UoYmVmb3JlLmFwcGVuZChhZnRlciksIG9wZW5TdGFydCwgb3BlbkVuZCksIGJlZm9yZS5zaXplIC0gb3BlblN0YXJ0LCB0cnVlKSk7XG59XG4vKipcblRyeSB0byBmaW5kIGEgdmFsaWQgd2F5IHRvIHdyYXAgdGhlIGNvbnRlbnQgaW4gdGhlIGdpdmVuIHJhbmdlIGluIGFcbm5vZGUgb2YgdGhlIGdpdmVuIHR5cGUuIE1heSBpbnRyb2R1Y2UgZXh0cmEgbm9kZXMgYXJvdW5kIGFuZCBpbnNpZGVcbnRoZSB3cmFwcGVyIG5vZGUsIGlmIG5lY2Vzc2FyeS4gUmV0dXJucyBudWxsIGlmIG5vIHZhbGlkIHdyYXBwaW5nXG5jb3VsZCBiZSBmb3VuZC4gV2hlbiBgaW5uZXJSYW5nZWAgaXMgZ2l2ZW4sIHRoYXQgcmFuZ2UncyBjb250ZW50IGlzXG51c2VkIGFzIHRoZSBjb250ZW50IHRvIGZpdCBpbnRvIHRoZSB3cmFwcGluZywgaW5zdGVhZCBvZiB0aGVcbmNvbnRlbnQgb2YgYHJhbmdlYC5cbiovXG5mdW5jdGlvbiBmaW5kV3JhcHBpbmcocmFuZ2UsIG5vZGVUeXBlLCBhdHRycyA9IG51bGwsIGlubmVyUmFuZ2UgPSByYW5nZSkge1xuICAgIGxldCBhcm91bmQgPSBmaW5kV3JhcHBpbmdPdXRzaWRlKHJhbmdlLCBub2RlVHlwZSk7XG4gICAgbGV0IGlubmVyID0gYXJvdW5kICYmIGZpbmRXcmFwcGluZ0luc2lkZShpbm5lclJhbmdlLCBub2RlVHlwZSk7XG4gICAgaWYgKCFpbm5lcilcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGFyb3VuZC5tYXAod2l0aEF0dHJzKVxuICAgICAgICAuY29uY2F0KHsgdHlwZTogbm9kZVR5cGUsIGF0dHJzIH0pLmNvbmNhdChpbm5lci5tYXAod2l0aEF0dHJzKSk7XG59XG5mdW5jdGlvbiB3aXRoQXR0cnModHlwZSkgeyByZXR1cm4geyB0eXBlLCBhdHRyczogbnVsbCB9OyB9XG5mdW5jdGlvbiBmaW5kV3JhcHBpbmdPdXRzaWRlKHJhbmdlLCB0eXBlKSB7XG4gICAgbGV0IHsgcGFyZW50LCBzdGFydEluZGV4LCBlbmRJbmRleCB9ID0gcmFuZ2U7XG4gICAgbGV0IGFyb3VuZCA9IHBhcmVudC5jb250ZW50TWF0Y2hBdChzdGFydEluZGV4KS5maW5kV3JhcHBpbmcodHlwZSk7XG4gICAgaWYgKCFhcm91bmQpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBvdXRlciA9IGFyb3VuZC5sZW5ndGggPyBhcm91bmRbMF0gOiB0eXBlO1xuICAgIHJldHVybiBwYXJlbnQuY2FuUmVwbGFjZVdpdGgoc3RhcnRJbmRleCwgZW5kSW5kZXgsIG91dGVyKSA/IGFyb3VuZCA6IG51bGw7XG59XG5mdW5jdGlvbiBmaW5kV3JhcHBpbmdJbnNpZGUocmFuZ2UsIHR5cGUpIHtcbiAgICBsZXQgeyBwYXJlbnQsIHN0YXJ0SW5kZXgsIGVuZEluZGV4IH0gPSByYW5nZTtcbiAgICBsZXQgaW5uZXIgPSBwYXJlbnQuY2hpbGQoc3RhcnRJbmRleCk7XG4gICAgbGV0IGluc2lkZSA9IHR5cGUuY29udGVudE1hdGNoLmZpbmRXcmFwcGluZyhpbm5lci50eXBlKTtcbiAgICBpZiAoIWluc2lkZSlcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IGxhc3RUeXBlID0gaW5zaWRlLmxlbmd0aCA/IGluc2lkZVtpbnNpZGUubGVuZ3RoIC0gMV0gOiB0eXBlO1xuICAgIGxldCBpbm5lck1hdGNoID0gbGFzdFR5cGUuY29udGVudE1hdGNoO1xuICAgIGZvciAobGV0IGkgPSBzdGFydEluZGV4OyBpbm5lck1hdGNoICYmIGkgPCBlbmRJbmRleDsgaSsrKVxuICAgICAgICBpbm5lck1hdGNoID0gaW5uZXJNYXRjaC5tYXRjaFR5cGUocGFyZW50LmNoaWxkKGkpLnR5cGUpO1xuICAgIGlmICghaW5uZXJNYXRjaCB8fCAhaW5uZXJNYXRjaC52YWxpZEVuZClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGluc2lkZTtcbn1cbmZ1bmN0aW9uIHdyYXAodHIsIHJhbmdlLCB3cmFwcGVycykge1xuICAgIGxldCBjb250ZW50ID0gRnJhZ21lbnQuZW1wdHk7XG4gICAgZm9yIChsZXQgaSA9IHdyYXBwZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgIGlmIChjb250ZW50LnNpemUpIHtcbiAgICAgICAgICAgIGxldCBtYXRjaCA9IHdyYXBwZXJzW2ldLnR5cGUuY29udGVudE1hdGNoLm1hdGNoRnJhZ21lbnQoY29udGVudCk7XG4gICAgICAgICAgICBpZiAoIW1hdGNoIHx8ICFtYXRjaC52YWxpZEVuZClcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIldyYXBwZXIgdHlwZSBnaXZlbiB0byBUcmFuc2Zvcm0ud3JhcCBkb2VzIG5vdCBmb3JtIHZhbGlkIGNvbnRlbnQgb2YgaXRzIHBhcmVudCB3cmFwcGVyXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRlbnQgPSBGcmFnbWVudC5mcm9tKHdyYXBwZXJzW2ldLnR5cGUuY3JlYXRlKHdyYXBwZXJzW2ldLmF0dHJzLCBjb250ZW50KSk7XG4gICAgfVxuICAgIGxldCBzdGFydCA9IHJhbmdlLnN0YXJ0LCBlbmQgPSByYW5nZS5lbmQ7XG4gICAgdHIuc3RlcChuZXcgUmVwbGFjZUFyb3VuZFN0ZXAoc3RhcnQsIGVuZCwgc3RhcnQsIGVuZCwgbmV3IFNsaWNlKGNvbnRlbnQsIDAsIDApLCB3cmFwcGVycy5sZW5ndGgsIHRydWUpKTtcbn1cbmZ1bmN0aW9uIHNldEJsb2NrVHlwZSh0ciwgZnJvbSwgdG8sIHR5cGUsIGF0dHJzKSB7XG4gICAgaWYgKCF0eXBlLmlzVGV4dGJsb2NrKVxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIlR5cGUgZ2l2ZW4gdG8gc2V0QmxvY2tUeXBlIHNob3VsZCBiZSBhIHRleHRibG9ja1wiKTtcbiAgICBsZXQgbWFwRnJvbSA9IHRyLnN0ZXBzLmxlbmd0aDtcbiAgICB0ci5kb2Mubm9kZXNCZXR3ZWVuKGZyb20sIHRvLCAobm9kZSwgcG9zKSA9PiB7XG4gICAgICAgIGlmIChub2RlLmlzVGV4dGJsb2NrICYmICFub2RlLmhhc01hcmt1cCh0eXBlLCBhdHRycykgJiYgY2FuQ2hhbmdlVHlwZSh0ci5kb2MsIHRyLm1hcHBpbmcuc2xpY2UobWFwRnJvbSkubWFwKHBvcyksIHR5cGUpKSB7XG4gICAgICAgICAgICAvLyBFbnN1cmUgYWxsIG1hcmt1cCB0aGF0IGlzbid0IGFsbG93ZWQgaW4gdGhlIG5ldyBub2RlIHR5cGUgaXMgY2xlYXJlZFxuICAgICAgICAgICAgdHIuY2xlYXJJbmNvbXBhdGlibGUodHIubWFwcGluZy5zbGljZShtYXBGcm9tKS5tYXAocG9zLCAxKSwgdHlwZSk7XG4gICAgICAgICAgICBsZXQgbWFwcGluZyA9IHRyLm1hcHBpbmcuc2xpY2UobWFwRnJvbSk7XG4gICAgICAgICAgICBsZXQgc3RhcnRNID0gbWFwcGluZy5tYXAocG9zLCAxKSwgZW5kTSA9IG1hcHBpbmcubWFwKHBvcyArIG5vZGUubm9kZVNpemUsIDEpO1xuICAgICAgICAgICAgdHIuc3RlcChuZXcgUmVwbGFjZUFyb3VuZFN0ZXAoc3RhcnRNLCBlbmRNLCBzdGFydE0gKyAxLCBlbmRNIC0gMSwgbmV3IFNsaWNlKEZyYWdtZW50LmZyb20odHlwZS5jcmVhdGUoYXR0cnMsIG51bGwsIG5vZGUubWFya3MpKSwgMCwgMCksIDEsIHRydWUpKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZnVuY3Rpb24gY2FuQ2hhbmdlVHlwZShkb2MsIHBvcywgdHlwZSkge1xuICAgIGxldCAkcG9zID0gZG9jLnJlc29sdmUocG9zKSwgaW5kZXggPSAkcG9zLmluZGV4KCk7XG4gICAgcmV0dXJuICRwb3MucGFyZW50LmNhblJlcGxhY2VXaXRoKGluZGV4LCBpbmRleCArIDEsIHR5cGUpO1xufVxuLyoqXG5DaGFuZ2UgdGhlIHR5cGUsIGF0dHJpYnV0ZXMsIGFuZC9vciBtYXJrcyBvZiB0aGUgbm9kZSBhdCBgcG9zYC5cbldoZW4gYHR5cGVgIGlzbid0IGdpdmVuLCB0aGUgZXhpc3Rpbmcgbm9kZSB0eXBlIGlzIHByZXNlcnZlZCxcbiovXG5mdW5jdGlvbiBzZXROb2RlTWFya3VwKHRyLCBwb3MsIHR5cGUsIGF0dHJzLCBtYXJrcykge1xuICAgIGxldCBub2RlID0gdHIuZG9jLm5vZGVBdChwb3MpO1xuICAgIGlmICghbm9kZSlcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJObyBub2RlIGF0IGdpdmVuIHBvc2l0aW9uXCIpO1xuICAgIGlmICghdHlwZSlcbiAgICAgICAgdHlwZSA9IG5vZGUudHlwZTtcbiAgICBsZXQgbmV3Tm9kZSA9IHR5cGUuY3JlYXRlKGF0dHJzLCBudWxsLCBtYXJrcyB8fCBub2RlLm1hcmtzKTtcbiAgICBpZiAobm9kZS5pc0xlYWYpXG4gICAgICAgIHJldHVybiB0ci5yZXBsYWNlV2l0aChwb3MsIHBvcyArIG5vZGUubm9kZVNpemUsIG5ld05vZGUpO1xuICAgIGlmICghdHlwZS52YWxpZENvbnRlbnQobm9kZS5jb250ZW50KSlcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJJbnZhbGlkIGNvbnRlbnQgZm9yIG5vZGUgdHlwZSBcIiArIHR5cGUubmFtZSk7XG4gICAgdHIuc3RlcChuZXcgUmVwbGFjZUFyb3VuZFN0ZXAocG9zLCBwb3MgKyBub2RlLm5vZGVTaXplLCBwb3MgKyAxLCBwb3MgKyBub2RlLm5vZGVTaXplIC0gMSwgbmV3IFNsaWNlKEZyYWdtZW50LmZyb20obmV3Tm9kZSksIDAsIDApLCAxLCB0cnVlKSk7XG59XG4vKipcbkNoZWNrIHdoZXRoZXIgc3BsaXR0aW5nIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiBpcyBhbGxvd2VkLlxuKi9cbmZ1bmN0aW9uIGNhblNwbGl0KGRvYywgcG9zLCBkZXB0aCA9IDEsIHR5cGVzQWZ0ZXIpIHtcbiAgICBsZXQgJHBvcyA9IGRvYy5yZXNvbHZlKHBvcyksIGJhc2UgPSAkcG9zLmRlcHRoIC0gZGVwdGg7XG4gICAgbGV0IGlubmVyVHlwZSA9ICh0eXBlc0FmdGVyICYmIHR5cGVzQWZ0ZXJbdHlwZXNBZnRlci5sZW5ndGggLSAxXSkgfHwgJHBvcy5wYXJlbnQ7XG4gICAgaWYgKGJhc2UgPCAwIHx8ICRwb3MucGFyZW50LnR5cGUuc3BlYy5pc29sYXRpbmcgfHxcbiAgICAgICAgISRwb3MucGFyZW50LmNhblJlcGxhY2UoJHBvcy5pbmRleCgpLCAkcG9zLnBhcmVudC5jaGlsZENvdW50KSB8fFxuICAgICAgICAhaW5uZXJUeXBlLnR5cGUudmFsaWRDb250ZW50KCRwb3MucGFyZW50LmNvbnRlbnQuY3V0QnlJbmRleCgkcG9zLmluZGV4KCksICRwb3MucGFyZW50LmNoaWxkQ291bnQpKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGZvciAobGV0IGQgPSAkcG9zLmRlcHRoIC0gMSwgaSA9IGRlcHRoIC0gMjsgZCA+IGJhc2U7IGQtLSwgaS0tKSB7XG4gICAgICAgIGxldCBub2RlID0gJHBvcy5ub2RlKGQpLCBpbmRleCA9ICRwb3MuaW5kZXgoZCk7XG4gICAgICAgIGlmIChub2RlLnR5cGUuc3BlYy5pc29sYXRpbmcpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGxldCByZXN0ID0gbm9kZS5jb250ZW50LmN1dEJ5SW5kZXgoaW5kZXgsIG5vZGUuY2hpbGRDb3VudCk7XG4gICAgICAgIGxldCBhZnRlciA9ICh0eXBlc0FmdGVyICYmIHR5cGVzQWZ0ZXJbaV0pIHx8IG5vZGU7XG4gICAgICAgIGlmIChhZnRlciAhPSBub2RlKVxuICAgICAgICAgICAgcmVzdCA9IHJlc3QucmVwbGFjZUNoaWxkKDAsIGFmdGVyLnR5cGUuY3JlYXRlKGFmdGVyLmF0dHJzKSk7XG4gICAgICAgIGlmICghbm9kZS5jYW5SZXBsYWNlKGluZGV4ICsgMSwgbm9kZS5jaGlsZENvdW50KSB8fCAhYWZ0ZXIudHlwZS52YWxpZENvbnRlbnQocmVzdCkpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGxldCBpbmRleCA9ICRwb3MuaW5kZXhBZnRlcihiYXNlKTtcbiAgICBsZXQgYmFzZVR5cGUgPSB0eXBlc0FmdGVyICYmIHR5cGVzQWZ0ZXJbMF07XG4gICAgcmV0dXJuICRwb3Mubm9kZShiYXNlKS5jYW5SZXBsYWNlV2l0aChpbmRleCwgaW5kZXgsIGJhc2VUeXBlID8gYmFzZVR5cGUudHlwZSA6ICRwb3Mubm9kZShiYXNlICsgMSkudHlwZSk7XG59XG5mdW5jdGlvbiBzcGxpdCh0ciwgcG9zLCBkZXB0aCA9IDEsIHR5cGVzQWZ0ZXIpIHtcbiAgICBsZXQgJHBvcyA9IHRyLmRvYy5yZXNvbHZlKHBvcyksIGJlZm9yZSA9IEZyYWdtZW50LmVtcHR5LCBhZnRlciA9IEZyYWdtZW50LmVtcHR5O1xuICAgIGZvciAobGV0IGQgPSAkcG9zLmRlcHRoLCBlID0gJHBvcy5kZXB0aCAtIGRlcHRoLCBpID0gZGVwdGggLSAxOyBkID4gZTsgZC0tLCBpLS0pIHtcbiAgICAgICAgYmVmb3JlID0gRnJhZ21lbnQuZnJvbSgkcG9zLm5vZGUoZCkuY29weShiZWZvcmUpKTtcbiAgICAgICAgbGV0IHR5cGVBZnRlciA9IHR5cGVzQWZ0ZXIgJiYgdHlwZXNBZnRlcltpXTtcbiAgICAgICAgYWZ0ZXIgPSBGcmFnbWVudC5mcm9tKHR5cGVBZnRlciA/IHR5cGVBZnRlci50eXBlLmNyZWF0ZSh0eXBlQWZ0ZXIuYXR0cnMsIGFmdGVyKSA6ICRwb3Mubm9kZShkKS5jb3B5KGFmdGVyKSk7XG4gICAgfVxuICAgIHRyLnN0ZXAobmV3IFJlcGxhY2VTdGVwKHBvcywgcG9zLCBuZXcgU2xpY2UoYmVmb3JlLmFwcGVuZChhZnRlciksIGRlcHRoLCBkZXB0aCksIHRydWUpKTtcbn1cbi8qKlxuVGVzdCB3aGV0aGVyIHRoZSBibG9ja3MgYmVmb3JlIGFuZCBhZnRlciBhIGdpdmVuIHBvc2l0aW9uIGNhbiBiZVxuam9pbmVkLlxuKi9cbmZ1bmN0aW9uIGNhbkpvaW4oZG9jLCBwb3MpIHtcbiAgICBsZXQgJHBvcyA9IGRvYy5yZXNvbHZlKHBvcyksIGluZGV4ID0gJHBvcy5pbmRleCgpO1xuICAgIHJldHVybiBqb2luYWJsZSgkcG9zLm5vZGVCZWZvcmUsICRwb3Mubm9kZUFmdGVyKSAmJlxuICAgICAgICAkcG9zLnBhcmVudC5jYW5SZXBsYWNlKGluZGV4LCBpbmRleCArIDEpO1xufVxuZnVuY3Rpb24gam9pbmFibGUoYSwgYikge1xuICAgIHJldHVybiAhIShhICYmIGIgJiYgIWEuaXNMZWFmICYmIGEuY2FuQXBwZW5kKGIpKTtcbn1cbi8qKlxuRmluZCBhbiBhbmNlc3RvciBvZiB0aGUgZ2l2ZW4gcG9zaXRpb24gdGhhdCBjYW4gYmUgam9pbmVkIHRvIHRoZVxuYmxvY2sgYmVmb3JlIChvciBhZnRlciBpZiBgZGlyYCBpcyBwb3NpdGl2ZSkuIFJldHVybnMgdGhlIGpvaW5hYmxlXG5wb2ludCwgaWYgYW55LlxuKi9cbmZ1bmN0aW9uIGpvaW5Qb2ludChkb2MsIHBvcywgZGlyID0gLTEpIHtcbiAgICBsZXQgJHBvcyA9IGRvYy5yZXNvbHZlKHBvcyk7XG4gICAgZm9yIChsZXQgZCA9ICRwb3MuZGVwdGg7OyBkLS0pIHtcbiAgICAgICAgbGV0IGJlZm9yZSwgYWZ0ZXIsIGluZGV4ID0gJHBvcy5pbmRleChkKTtcbiAgICAgICAgaWYgKGQgPT0gJHBvcy5kZXB0aCkge1xuICAgICAgICAgICAgYmVmb3JlID0gJHBvcy5ub2RlQmVmb3JlO1xuICAgICAgICAgICAgYWZ0ZXIgPSAkcG9zLm5vZGVBZnRlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkaXIgPiAwKSB7XG4gICAgICAgICAgICBiZWZvcmUgPSAkcG9zLm5vZGUoZCArIDEpO1xuICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgIGFmdGVyID0gJHBvcy5ub2RlKGQpLm1heWJlQ2hpbGQoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYmVmb3JlID0gJHBvcy5ub2RlKGQpLm1heWJlQ2hpbGQoaW5kZXggLSAxKTtcbiAgICAgICAgICAgIGFmdGVyID0gJHBvcy5ub2RlKGQgKyAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYmVmb3JlICYmICFiZWZvcmUuaXNUZXh0YmxvY2sgJiYgam9pbmFibGUoYmVmb3JlLCBhZnRlcikgJiZcbiAgICAgICAgICAgICRwb3Mubm9kZShkKS5jYW5SZXBsYWNlKGluZGV4LCBpbmRleCArIDEpKVxuICAgICAgICAgICAgcmV0dXJuIHBvcztcbiAgICAgICAgaWYgKGQgPT0gMClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBwb3MgPSBkaXIgPCAwID8gJHBvcy5iZWZvcmUoZCkgOiAkcG9zLmFmdGVyKGQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGpvaW4odHIsIHBvcywgZGVwdGgpIHtcbiAgICBsZXQgc3RlcCA9IG5ldyBSZXBsYWNlU3RlcChwb3MgLSBkZXB0aCwgcG9zICsgZGVwdGgsIFNsaWNlLmVtcHR5LCB0cnVlKTtcbiAgICB0ci5zdGVwKHN0ZXApO1xufVxuLyoqXG5UcnkgdG8gZmluZCBhIHBvaW50IHdoZXJlIGEgbm9kZSBvZiB0aGUgZ2l2ZW4gdHlwZSBjYW4gYmUgaW5zZXJ0ZWRcbm5lYXIgYHBvc2AsIGJ5IHNlYXJjaGluZyB1cCB0aGUgbm9kZSBoaWVyYXJjaHkgd2hlbiBgcG9zYCBpdHNlbGZcbmlzbid0IGEgdmFsaWQgcGxhY2UgYnV0IGlzIGF0IHRoZSBzdGFydCBvciBlbmQgb2YgYSBub2RlLiBSZXR1cm5cbm51bGwgaWYgbm8gcG9zaXRpb24gd2FzIGZvdW5kLlxuKi9cbmZ1bmN0aW9uIGluc2VydFBvaW50KGRvYywgcG9zLCBub2RlVHlwZSkge1xuICAgIGxldCAkcG9zID0gZG9jLnJlc29sdmUocG9zKTtcbiAgICBpZiAoJHBvcy5wYXJlbnQuY2FuUmVwbGFjZVdpdGgoJHBvcy5pbmRleCgpLCAkcG9zLmluZGV4KCksIG5vZGVUeXBlKSlcbiAgICAgICAgcmV0dXJuIHBvcztcbiAgICBpZiAoJHBvcy5wYXJlbnRPZmZzZXQgPT0gMClcbiAgICAgICAgZm9yIChsZXQgZCA9ICRwb3MuZGVwdGggLSAxOyBkID49IDA7IGQtLSkge1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gJHBvcy5pbmRleChkKTtcbiAgICAgICAgICAgIGlmICgkcG9zLm5vZGUoZCkuY2FuUmVwbGFjZVdpdGgoaW5kZXgsIGluZGV4LCBub2RlVHlwZSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuICRwb3MuYmVmb3JlKGQgKyAxKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICBpZiAoJHBvcy5wYXJlbnRPZmZzZXQgPT0gJHBvcy5wYXJlbnQuY29udGVudC5zaXplKVxuICAgICAgICBmb3IgKGxldCBkID0gJHBvcy5kZXB0aCAtIDE7IGQgPj0gMDsgZC0tKSB7XG4gICAgICAgICAgICBsZXQgaW5kZXggPSAkcG9zLmluZGV4QWZ0ZXIoZCk7XG4gICAgICAgICAgICBpZiAoJHBvcy5ub2RlKGQpLmNhblJlcGxhY2VXaXRoKGluZGV4LCBpbmRleCwgbm9kZVR5cGUpKVxuICAgICAgICAgICAgICAgIHJldHVybiAkcG9zLmFmdGVyKGQgKyAxKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA8ICRwb3Mubm9kZShkKS5jaGlsZENvdW50KVxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbkZpbmRzIGEgcG9zaXRpb24gYXQgb3IgYXJvdW5kIHRoZSBnaXZlbiBwb3NpdGlvbiB3aGVyZSB0aGUgZ2l2ZW5cbnNsaWNlIGNhbiBiZSBpbnNlcnRlZC4gV2lsbCBsb29rIGF0IHBhcmVudCBub2RlcycgbmVhcmVzdCBib3VuZGFyeVxuYW5kIHRyeSB0aGVyZSwgZXZlbiBpZiB0aGUgb3JpZ2luYWwgcG9zaXRpb24gd2Fzbid0IGRpcmVjdGx5IGF0IHRoZVxuc3RhcnQgb3IgZW5kIG9mIHRoYXQgbm9kZS4gUmV0dXJucyBudWxsIHdoZW4gbm8gcG9zaXRpb24gd2FzIGZvdW5kLlxuKi9cbmZ1bmN0aW9uIGRyb3BQb2ludChkb2MsIHBvcywgc2xpY2UpIHtcbiAgICBsZXQgJHBvcyA9IGRvYy5yZXNvbHZlKHBvcyk7XG4gICAgaWYgKCFzbGljZS5jb250ZW50LnNpemUpXG4gICAgICAgIHJldHVybiBwb3M7XG4gICAgbGV0IGNvbnRlbnQgPSBzbGljZS5jb250ZW50O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2xpY2Uub3BlblN0YXJ0OyBpKyspXG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LmZpcnN0Q2hpbGQuY29udGVudDtcbiAgICBmb3IgKGxldCBwYXNzID0gMTsgcGFzcyA8PSAoc2xpY2Uub3BlblN0YXJ0ID09IDAgJiYgc2xpY2Uuc2l6ZSA/IDIgOiAxKTsgcGFzcysrKSB7XG4gICAgICAgIGZvciAobGV0IGQgPSAkcG9zLmRlcHRoOyBkID49IDA7IGQtLSkge1xuICAgICAgICAgICAgbGV0IGJpYXMgPSBkID09ICRwb3MuZGVwdGggPyAwIDogJHBvcy5wb3MgPD0gKCRwb3Muc3RhcnQoZCArIDEpICsgJHBvcy5lbmQoZCArIDEpKSAvIDIgPyAtMSA6IDE7XG4gICAgICAgICAgICBsZXQgaW5zZXJ0UG9zID0gJHBvcy5pbmRleChkKSArIChiaWFzID4gMCA/IDEgOiAwKTtcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSAkcG9zLm5vZGUoZCksIGZpdHMgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChwYXNzID09IDEpIHtcbiAgICAgICAgICAgICAgICBmaXRzID0gcGFyZW50LmNhblJlcGxhY2UoaW5zZXJ0UG9zLCBpbnNlcnRQb3MsIGNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHdyYXBwaW5nID0gcGFyZW50LmNvbnRlbnRNYXRjaEF0KGluc2VydFBvcykuZmluZFdyYXBwaW5nKGNvbnRlbnQuZmlyc3RDaGlsZC50eXBlKTtcbiAgICAgICAgICAgICAgICBmaXRzID0gd3JhcHBpbmcgJiYgcGFyZW50LmNhblJlcGxhY2VXaXRoKGluc2VydFBvcywgaW5zZXJ0UG9zLCB3cmFwcGluZ1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZml0cylcbiAgICAgICAgICAgICAgICByZXR1cm4gYmlhcyA9PSAwID8gJHBvcy5wb3MgOiBiaWFzIDwgMCA/ICRwb3MuYmVmb3JlKGQgKyAxKSA6ICRwb3MuYWZ0ZXIoZCArIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbuKAmEZpdOKAmSBhIHNsaWNlIGludG8gYSBnaXZlbiBwb3NpdGlvbiBpbiB0aGUgZG9jdW1lbnQsIHByb2R1Y2luZyBhXG5bc3RlcF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5TdGVwKSB0aGF0IGluc2VydHMgaXQuIFdpbGwgcmV0dXJuIG51bGwgaWZcbnRoZXJlJ3Mgbm8gbWVhbmluZ2Z1bCB3YXkgdG8gaW5zZXJ0IHRoZSBzbGljZSBoZXJlLCBvciBpbnNlcnRpbmcgaXRcbndvdWxkIGJlIGEgbm8tb3AgKGFuIGVtcHR5IHNsaWNlIG92ZXIgYW4gZW1wdHkgcmFuZ2UpLlxuKi9cbmZ1bmN0aW9uIHJlcGxhY2VTdGVwKGRvYywgZnJvbSwgdG8gPSBmcm9tLCBzbGljZSA9IFNsaWNlLmVtcHR5KSB7XG4gICAgaWYgKGZyb20gPT0gdG8gJiYgIXNsaWNlLnNpemUpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCAkZnJvbSA9IGRvYy5yZXNvbHZlKGZyb20pLCAkdG8gPSBkb2MucmVzb2x2ZSh0byk7XG4gICAgLy8gT3B0aW1pemF0aW9uIC0tIGF2b2lkIHdvcmsgaWYgaXQncyBvYnZpb3VzIHRoYXQgaXQncyBub3QgbmVlZGVkLlxuICAgIGlmIChmaXRzVHJpdmlhbGx5KCRmcm9tLCAkdG8sIHNsaWNlKSlcbiAgICAgICAgcmV0dXJuIG5ldyBSZXBsYWNlU3RlcChmcm9tLCB0bywgc2xpY2UpO1xuICAgIHJldHVybiBuZXcgRml0dGVyKCRmcm9tLCAkdG8sIHNsaWNlKS5maXQoKTtcbn1cbmZ1bmN0aW9uIGZpdHNUcml2aWFsbHkoJGZyb20sICR0bywgc2xpY2UpIHtcbiAgICByZXR1cm4gIXNsaWNlLm9wZW5TdGFydCAmJiAhc2xpY2Uub3BlbkVuZCAmJiAkZnJvbS5zdGFydCgpID09ICR0by5zdGFydCgpICYmXG4gICAgICAgICRmcm9tLnBhcmVudC5jYW5SZXBsYWNlKCRmcm9tLmluZGV4KCksICR0by5pbmRleCgpLCBzbGljZS5jb250ZW50KTtcbn1cbi8vIEFsZ29yaXRobSBmb3IgJ3BsYWNpbmcnIHRoZSBlbGVtZW50cyBvZiBhIHNsaWNlIGludG8gYSBnYXA6XG4vL1xuLy8gV2UgY29uc2lkZXIgdGhlIGNvbnRlbnQgb2YgZWFjaCBub2RlIHRoYXQgaXMgb3BlbiB0byB0aGUgbGVmdCB0byBiZVxuLy8gaW5kZXBlbmRlbnRseSBwbGFjZWFibGUuIEkuZS4gaW4gPHAoXCJmb29cIiksIHAoXCJiYXJcIik+LCB3aGVuIHRoZVxuLy8gcGFyYWdyYXBoIG9uIHRoZSBsZWZ0IGlzIG9wZW4sIFwiZm9vXCIgY2FuIGJlIHBsYWNlZCAoc29tZXdoZXJlIG9uXG4vLyB0aGUgbGVmdCBzaWRlIG9mIHRoZSByZXBsYWNlbWVudCBnYXApIGluZGVwZW5kZW50bHkgZnJvbSBwKFwiYmFyXCIpLlxuLy9cbi8vIFRoaXMgY2xhc3MgdHJhY2tzIHRoZSBzdGF0ZSBvZiB0aGUgcGxhY2VtZW50IHByb2dyZXNzIGluIHRoZVxuLy8gZm9sbG93aW5nIHByb3BlcnRpZXM6XG4vL1xuLy8gIC0gYGZyb250aWVyYCBob2xkcyBhIHN0YWNrIG9mIGB7dHlwZSwgbWF0Y2h9YCBvYmplY3RzIHRoYXRcbi8vICAgIHJlcHJlc2VudCB0aGUgb3BlbiBzaWRlIG9mIHRoZSByZXBsYWNlbWVudC4gSXQgc3RhcnRzIGF0XG4vLyAgICBgJGZyb21gLCB0aGVuIG1vdmVzIGZvcndhcmQgYXMgY29udGVudCBpcyBwbGFjZWQsIGFuZCBpcyBmaW5hbGx5XG4vLyAgICByZWNvbmNpbGVkIHdpdGggYCR0b2AuXG4vL1xuLy8gIC0gYHVucGxhY2VkYCBpcyBhIHNsaWNlIHRoYXQgcmVwcmVzZW50cyB0aGUgY29udGVudCB0aGF0IGhhc24ndFxuLy8gICAgYmVlbiBwbGFjZWQgeWV0LlxuLy9cbi8vICAtIGBwbGFjZWRgIGlzIGEgZnJhZ21lbnQgb2YgcGxhY2VkIGNvbnRlbnQuIEl0cyBvcGVuLXN0YXJ0IHZhbHVlXG4vLyAgICBpcyBpbXBsaWNpdCBpbiBgJGZyb21gLCBhbmQgaXRzIG9wZW4tZW5kIHZhbHVlIGluIGBmcm9udGllcmAuXG5jbGFzcyBGaXR0ZXIge1xuICAgIGNvbnN0cnVjdG9yKCRmcm9tLCAkdG8sIHVucGxhY2VkKSB7XG4gICAgICAgIHRoaXMuJGZyb20gPSAkZnJvbTtcbiAgICAgICAgdGhpcy4kdG8gPSAkdG87XG4gICAgICAgIHRoaXMudW5wbGFjZWQgPSB1bnBsYWNlZDtcbiAgICAgICAgdGhpcy5mcm9udGllciA9IFtdO1xuICAgICAgICB0aGlzLnBsYWNlZCA9IEZyYWdtZW50LmVtcHR5O1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSAkZnJvbS5kZXB0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbm9kZSA9ICRmcm9tLm5vZGUoaSk7XG4gICAgICAgICAgICB0aGlzLmZyb250aWVyLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IG5vZGUudHlwZSxcbiAgICAgICAgICAgICAgICBtYXRjaDogbm9kZS5jb250ZW50TWF0Y2hBdCgkZnJvbS5pbmRleEFmdGVyKGkpKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9ICRmcm9tLmRlcHRoOyBpID4gMDsgaS0tKVxuICAgICAgICAgICAgdGhpcy5wbGFjZWQgPSBGcmFnbWVudC5mcm9tKCRmcm9tLm5vZGUoaSkuY29weSh0aGlzLnBsYWNlZCkpO1xuICAgIH1cbiAgICBnZXQgZGVwdGgoKSB7IHJldHVybiB0aGlzLmZyb250aWVyLmxlbmd0aCAtIDE7IH1cbiAgICBmaXQoKSB7XG4gICAgICAgIC8vIEFzIGxvbmcgYXMgdGhlcmUncyB1bnBsYWNlZCBjb250ZW50LCB0cnkgdG8gcGxhY2Ugc29tZSBvZiBpdC5cbiAgICAgICAgLy8gSWYgdGhhdCBmYWlscywgZWl0aGVyIGluY3JlYXNlIHRoZSBvcGVuIHNjb3JlIG9mIHRoZSB1bnBsYWNlZFxuICAgICAgICAvLyBzbGljZSwgb3IgZHJvcCBub2RlcyBmcm9tIGl0LCBhbmQgdGhlbiB0cnkgYWdhaW4uXG4gICAgICAgIHdoaWxlICh0aGlzLnVucGxhY2VkLnNpemUpIHtcbiAgICAgICAgICAgIGxldCBmaXQgPSB0aGlzLmZpbmRGaXR0YWJsZSgpO1xuICAgICAgICAgICAgaWYgKGZpdClcbiAgICAgICAgICAgICAgICB0aGlzLnBsYWNlTm9kZXMoZml0KTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Nb3JlKCkgfHwgdGhpcy5kcm9wTm9kZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdoZW4gdGhlcmUncyBpbmxpbmUgY29udGVudCBkaXJlY3RseSBhZnRlciB0aGUgZnJvbnRpZXIgX2FuZF9cbiAgICAgICAgLy8gZGlyZWN0bHkgYWZ0ZXIgYHRoaXMuJHRvYCwgd2UgbXVzdCBnZW5lcmF0ZSBhIGBSZXBsYWNlQXJvdW5kYFxuICAgICAgICAvLyBzdGVwIHRoYXQgcHVsbHMgdGhhdCBjb250ZW50IGludG8gdGhlIG5vZGUgYWZ0ZXIgdGhlIGZyb250aWVyLlxuICAgICAgICAvLyBUaGF0IG1lYW5zIHRoZSBmaXR0aW5nIG11c3QgYmUgZG9uZSB0byB0aGUgZW5kIG9mIHRoZSB0ZXh0YmxvY2tcbiAgICAgICAgLy8gbm9kZSBhZnRlciBgdGhpcy4kdG9gLCBub3QgYHRoaXMuJHRvYCBpdHNlbGYuXG4gICAgICAgIGxldCBtb3ZlSW5saW5lID0gdGhpcy5tdXN0TW92ZUlubGluZSgpLCBwbGFjZWRTaXplID0gdGhpcy5wbGFjZWQuc2l6ZSAtIHRoaXMuZGVwdGggLSB0aGlzLiRmcm9tLmRlcHRoO1xuICAgICAgICBsZXQgJGZyb20gPSB0aGlzLiRmcm9tLCAkdG8gPSB0aGlzLmNsb3NlKG1vdmVJbmxpbmUgPCAwID8gdGhpcy4kdG8gOiAkZnJvbS5kb2MucmVzb2x2ZShtb3ZlSW5saW5lKSk7XG4gICAgICAgIGlmICghJHRvKVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIC8vIElmIGNsb3NpbmcgdG8gYCR0b2Agc3VjY2VlZGVkLCBjcmVhdGUgYSBzdGVwXG4gICAgICAgIGxldCBjb250ZW50ID0gdGhpcy5wbGFjZWQsIG9wZW5TdGFydCA9ICRmcm9tLmRlcHRoLCBvcGVuRW5kID0gJHRvLmRlcHRoO1xuICAgICAgICB3aGlsZSAob3BlblN0YXJ0ICYmIG9wZW5FbmQgJiYgY29udGVudC5jaGlsZENvdW50ID09IDEpIHsgLy8gTm9ybWFsaXplIGJ5IGRyb3BwaW5nIG9wZW4gcGFyZW50IG5vZGVzXG4gICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5maXJzdENoaWxkLmNvbnRlbnQ7XG4gICAgICAgICAgICBvcGVuU3RhcnQtLTtcbiAgICAgICAgICAgIG9wZW5FbmQtLTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgc2xpY2UgPSBuZXcgU2xpY2UoY29udGVudCwgb3BlblN0YXJ0LCBvcGVuRW5kKTtcbiAgICAgICAgaWYgKG1vdmVJbmxpbmUgPiAtMSlcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmVwbGFjZUFyb3VuZFN0ZXAoJGZyb20ucG9zLCBtb3ZlSW5saW5lLCB0aGlzLiR0by5wb3MsIHRoaXMuJHRvLmVuZCgpLCBzbGljZSwgcGxhY2VkU2l6ZSk7XG4gICAgICAgIGlmIChzbGljZS5zaXplIHx8ICRmcm9tLnBvcyAhPSB0aGlzLiR0by5wb3MpIC8vIERvbid0IGdlbmVyYXRlIG5vLW9wIHN0ZXBzXG4gICAgICAgICAgICByZXR1cm4gbmV3IFJlcGxhY2VTdGVwKCRmcm9tLnBvcywgJHRvLnBvcywgc2xpY2UpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gRmluZCBhIHBvc2l0aW9uIG9uIHRoZSBzdGFydCBzcGluZSBvZiBgdGhpcy51bnBsYWNlZGAgdGhhdCBoYXNcbiAgICAvLyBjb250ZW50IHRoYXQgY2FuIGJlIG1vdmVkIHNvbWV3aGVyZSBvbiB0aGUgZnJvbnRpZXIuIFJldHVybnMgdHdvXG4gICAgLy8gZGVwdGhzLCBvbmUgZm9yIHRoZSBzbGljZSBhbmQgb25lIGZvciB0aGUgZnJvbnRpZXIuXG4gICAgZmluZEZpdHRhYmxlKCkge1xuICAgICAgICAvLyBPbmx5IHRyeSB3cmFwcGluZyBub2RlcyAocGFzcyAyKSBhZnRlciBmaW5kaW5nIGEgcGxhY2Ugd2l0aG91dFxuICAgICAgICAvLyB3cmFwcGluZyBmYWlsZWQuXG4gICAgICAgIGZvciAobGV0IHBhc3MgPSAxOyBwYXNzIDw9IDI7IHBhc3MrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgc2xpY2VEZXB0aCA9IHRoaXMudW5wbGFjZWQub3BlblN0YXJ0OyBzbGljZURlcHRoID49IDA7IHNsaWNlRGVwdGgtLSkge1xuICAgICAgICAgICAgICAgIGxldCBmcmFnbWVudCwgcGFyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoc2xpY2VEZXB0aCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQgPSBjb250ZW50QXQodGhpcy51bnBsYWNlZC5jb250ZW50LCBzbGljZURlcHRoIC0gMSkuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQgPSBwYXJlbnQuY29udGVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gdGhpcy51bnBsYWNlZC5jb250ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgZmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGZyb250aWVyRGVwdGggPSB0aGlzLmRlcHRoOyBmcm9udGllckRlcHRoID49IDA7IGZyb250aWVyRGVwdGgtLSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgeyB0eXBlLCBtYXRjaCB9ID0gdGhpcy5mcm9udGllcltmcm9udGllckRlcHRoXSwgd3JhcCwgaW5qZWN0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gcGFzcyAxLCBpZiB0aGUgbmV4dCBub2RlIG1hdGNoZXMsIG9yIHRoZXJlIGlzIG5vIG5leHRcbiAgICAgICAgICAgICAgICAgICAgLy8gbm9kZSBidXQgdGhlIHBhcmVudHMgbG9vayBjb21wYXRpYmxlLCB3ZSd2ZSBmb3VuZCBhXG4gICAgICAgICAgICAgICAgICAgIC8vIHBsYWNlLlxuICAgICAgICAgICAgICAgICAgICBpZiAocGFzcyA9PSAxICYmIChmaXJzdCA/IG1hdGNoLm1hdGNoVHlwZShmaXJzdC50eXBlKSB8fCAoaW5qZWN0ID0gbWF0Y2guZmlsbEJlZm9yZShGcmFnbWVudC5mcm9tKGZpcnN0KSwgZmFsc2UpKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBwYXJlbnQgJiYgdHlwZS5jb21wYXRpYmxlQ29udGVudChwYXJlbnQudHlwZSkpKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc2xpY2VEZXB0aCwgZnJvbnRpZXJEZXB0aCwgcGFyZW50LCBpbmplY3QgfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSW4gcGFzcyAyLCBsb29rIGZvciBhIHNldCBvZiB3cmFwcGluZyBub2RlcyB0aGF0IG1ha2VcbiAgICAgICAgICAgICAgICAgICAgLy8gYGZpcnN0YCBmaXQgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFzcyA9PSAyICYmIGZpcnN0ICYmICh3cmFwID0gbWF0Y2guZmluZFdyYXBwaW5nKGZpcnN0LnR5cGUpKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7IHNsaWNlRGVwdGgsIGZyb250aWVyRGVwdGgsIHBhcmVudCwgd3JhcCB9O1xuICAgICAgICAgICAgICAgICAgICAvLyBEb24ndCBjb250aW51ZSBsb29raW5nIGZ1cnRoZXIgdXAgaWYgdGhlIHBhcmVudCBub2RlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdvdWxkIGZpdCBoZXJlLlxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50ICYmIG1hdGNoLm1hdGNoVHlwZShwYXJlbnQudHlwZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3Blbk1vcmUoKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnQsIG9wZW5TdGFydCwgb3BlbkVuZCB9ID0gdGhpcy51bnBsYWNlZDtcbiAgICAgICAgbGV0IGlubmVyID0gY29udGVudEF0KGNvbnRlbnQsIG9wZW5TdGFydCk7XG4gICAgICAgIGlmICghaW5uZXIuY2hpbGRDb3VudCB8fCBpbm5lci5maXJzdENoaWxkLmlzTGVhZilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdGhpcy51bnBsYWNlZCA9IG5ldyBTbGljZShjb250ZW50LCBvcGVuU3RhcnQgKyAxLCBNYXRoLm1heChvcGVuRW5kLCBpbm5lci5zaXplICsgb3BlblN0YXJ0ID49IGNvbnRlbnQuc2l6ZSAtIG9wZW5FbmQgPyBvcGVuU3RhcnQgKyAxIDogMCkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZHJvcE5vZGUoKSB7XG4gICAgICAgIGxldCB7IGNvbnRlbnQsIG9wZW5TdGFydCwgb3BlbkVuZCB9ID0gdGhpcy51bnBsYWNlZDtcbiAgICAgICAgbGV0IGlubmVyID0gY29udGVudEF0KGNvbnRlbnQsIG9wZW5TdGFydCk7XG4gICAgICAgIGlmIChpbm5lci5jaGlsZENvdW50IDw9IDEgJiYgb3BlblN0YXJ0ID4gMCkge1xuICAgICAgICAgICAgbGV0IG9wZW5BdEVuZCA9IGNvbnRlbnQuc2l6ZSAtIG9wZW5TdGFydCA8PSBvcGVuU3RhcnQgKyBpbm5lci5zaXplO1xuICAgICAgICAgICAgdGhpcy51bnBsYWNlZCA9IG5ldyBTbGljZShkcm9wRnJvbUZyYWdtZW50KGNvbnRlbnQsIG9wZW5TdGFydCAtIDEsIDEpLCBvcGVuU3RhcnQgLSAxLCBvcGVuQXRFbmQgPyBvcGVuU3RhcnQgLSAxIDogb3BlbkVuZCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnVucGxhY2VkID0gbmV3IFNsaWNlKGRyb3BGcm9tRnJhZ21lbnQoY29udGVudCwgb3BlblN0YXJ0LCAxKSwgb3BlblN0YXJ0LCBvcGVuRW5kKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBNb3ZlIGNvbnRlbnQgZnJvbSB0aGUgdW5wbGFjZWQgc2xpY2UgYXQgYHNsaWNlRGVwdGhgIHRvIHRoZVxuICAgIC8vIGZyb250aWVyIG5vZGUgYXQgYGZyb250aWVyRGVwdGhgLiBDbG9zZSB0aGF0IGZyb250aWVyIG5vZGUgd2hlblxuICAgIC8vIGFwcGxpY2FibGUuXG4gICAgcGxhY2VOb2Rlcyh7IHNsaWNlRGVwdGgsIGZyb250aWVyRGVwdGgsIHBhcmVudCwgaW5qZWN0LCB3cmFwIH0pIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuZGVwdGggPiBmcm9udGllckRlcHRoKVxuICAgICAgICAgICAgdGhpcy5jbG9zZUZyb250aWVyTm9kZSgpO1xuICAgICAgICBpZiAod3JhcClcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgd3JhcC5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5Gcm9udGllck5vZGUod3JhcFtpXSk7XG4gICAgICAgIGxldCBzbGljZSA9IHRoaXMudW5wbGFjZWQsIGZyYWdtZW50ID0gcGFyZW50ID8gcGFyZW50LmNvbnRlbnQgOiBzbGljZS5jb250ZW50O1xuICAgICAgICBsZXQgb3BlblN0YXJ0ID0gc2xpY2Uub3BlblN0YXJ0IC0gc2xpY2VEZXB0aDtcbiAgICAgICAgbGV0IHRha2VuID0gMCwgYWRkID0gW107XG4gICAgICAgIGxldCB7IG1hdGNoLCB0eXBlIH0gPSB0aGlzLmZyb250aWVyW2Zyb250aWVyRGVwdGhdO1xuICAgICAgICBpZiAoaW5qZWN0KSB7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluamVjdC5jaGlsZENvdW50OyBpKyspXG4gICAgICAgICAgICAgICAgYWRkLnB1c2goaW5qZWN0LmNoaWxkKGkpKTtcbiAgICAgICAgICAgIG1hdGNoID0gbWF0Y2gubWF0Y2hGcmFnbWVudChpbmplY3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENvbXB1dGVzIHRoZSBhbW91bnQgb2YgKGVuZCkgb3BlbiBub2RlcyBhdCB0aGUgZW5kIG9mIHRoZVxuICAgICAgICAvLyBmcmFnbWVudC4gV2hlbiAwLCB0aGUgcGFyZW50IGlzIG9wZW4sIGJ1dCBubyBtb3JlLiBXaGVuXG4gICAgICAgIC8vIG5lZ2F0aXZlLCBub3RoaW5nIGlzIG9wZW4uXG4gICAgICAgIGxldCBvcGVuRW5kQ291bnQgPSAoZnJhZ21lbnQuc2l6ZSArIHNsaWNlRGVwdGgpIC0gKHNsaWNlLmNvbnRlbnQuc2l6ZSAtIHNsaWNlLm9wZW5FbmQpO1xuICAgICAgICAvLyBTY2FuIG92ZXIgdGhlIGZyYWdtZW50LCBmaXR0aW5nIGFzIG1hbnkgY2hpbGQgbm9kZXMgYXNcbiAgICAgICAgLy8gcG9zc2libGUuXG4gICAgICAgIHdoaWxlICh0YWtlbiA8IGZyYWdtZW50LmNoaWxkQ291bnQpIHtcbiAgICAgICAgICAgIGxldCBuZXh0ID0gZnJhZ21lbnQuY2hpbGQodGFrZW4pLCBtYXRjaGVzID0gbWF0Y2gubWF0Y2hUeXBlKG5leHQudHlwZSk7XG4gICAgICAgICAgICBpZiAoIW1hdGNoZXMpXG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB0YWtlbisrO1xuICAgICAgICAgICAgaWYgKHRha2VuID4gMSB8fCBvcGVuU3RhcnQgPT0gMCB8fCBuZXh0LmNvbnRlbnQuc2l6ZSkgeyAvLyBEcm9wIGVtcHR5IG9wZW4gbm9kZXNcbiAgICAgICAgICAgICAgICBtYXRjaCA9IG1hdGNoZXM7XG4gICAgICAgICAgICAgICAgYWRkLnB1c2goY2xvc2VOb2RlU3RhcnQobmV4dC5tYXJrKHR5cGUuYWxsb3dlZE1hcmtzKG5leHQubWFya3MpKSwgdGFrZW4gPT0gMSA/IG9wZW5TdGFydCA6IDAsIHRha2VuID09IGZyYWdtZW50LmNoaWxkQ291bnQgPyBvcGVuRW5kQ291bnQgOiAtMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGxldCB0b0VuZCA9IHRha2VuID09IGZyYWdtZW50LmNoaWxkQ291bnQ7XG4gICAgICAgIGlmICghdG9FbmQpXG4gICAgICAgICAgICBvcGVuRW5kQ291bnQgPSAtMTtcbiAgICAgICAgdGhpcy5wbGFjZWQgPSBhZGRUb0ZyYWdtZW50KHRoaXMucGxhY2VkLCBmcm9udGllckRlcHRoLCBGcmFnbWVudC5mcm9tKGFkZCkpO1xuICAgICAgICB0aGlzLmZyb250aWVyW2Zyb250aWVyRGVwdGhdLm1hdGNoID0gbWF0Y2g7XG4gICAgICAgIC8vIElmIHRoZSBwYXJlbnQgdHlwZXMgbWF0Y2gsIGFuZCB0aGUgZW50aXJlIG5vZGUgd2FzIG1vdmVkLCBhbmRcbiAgICAgICAgLy8gaXQncyBub3Qgb3BlbiwgY2xvc2UgdGhpcyBmcm9udGllciBub2RlIHJpZ2h0IGF3YXkuXG4gICAgICAgIGlmICh0b0VuZCAmJiBvcGVuRW5kQ291bnQgPCAwICYmIHBhcmVudCAmJiBwYXJlbnQudHlwZSA9PSB0aGlzLmZyb250aWVyW3RoaXMuZGVwdGhdLnR5cGUgJiYgdGhpcy5mcm9udGllci5sZW5ndGggPiAxKVxuICAgICAgICAgICAgdGhpcy5jbG9zZUZyb250aWVyTm9kZSgpO1xuICAgICAgICAvLyBBZGQgbmV3IGZyb250aWVyIG5vZGVzIGZvciBhbnkgb3BlbiBub2RlcyBhdCB0aGUgZW5kLlxuICAgICAgICBmb3IgKGxldCBpID0gMCwgY3VyID0gZnJhZ21lbnQ7IGkgPCBvcGVuRW5kQ291bnQ7IGkrKykge1xuICAgICAgICAgICAgbGV0IG5vZGUgPSBjdXIubGFzdENoaWxkO1xuICAgICAgICAgICAgdGhpcy5mcm9udGllci5wdXNoKHsgdHlwZTogbm9kZS50eXBlLCBtYXRjaDogbm9kZS5jb250ZW50TWF0Y2hBdChub2RlLmNoaWxkQ291bnQpIH0pO1xuICAgICAgICAgICAgY3VyID0gbm9kZS5jb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIC8vIFVwZGF0ZSBgdGhpcy51bnBsYWNlZGAuIERyb3AgdGhlIGVudGlyZSBub2RlIGZyb20gd2hpY2ggd2VcbiAgICAgICAgLy8gcGxhY2VkIGl0IHdlIGdvdCB0byBpdHMgZW5kLCBvdGhlcndpc2UganVzdCBkcm9wIHRoZSBwbGFjZWRcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIHRoaXMudW5wbGFjZWQgPSAhdG9FbmQgPyBuZXcgU2xpY2UoZHJvcEZyb21GcmFnbWVudChzbGljZS5jb250ZW50LCBzbGljZURlcHRoLCB0YWtlbiksIHNsaWNlLm9wZW5TdGFydCwgc2xpY2Uub3BlbkVuZClcbiAgICAgICAgICAgIDogc2xpY2VEZXB0aCA9PSAwID8gU2xpY2UuZW1wdHlcbiAgICAgICAgICAgICAgICA6IG5ldyBTbGljZShkcm9wRnJvbUZyYWdtZW50KHNsaWNlLmNvbnRlbnQsIHNsaWNlRGVwdGggLSAxLCAxKSwgc2xpY2VEZXB0aCAtIDEsIG9wZW5FbmRDb3VudCA8IDAgPyBzbGljZS5vcGVuRW5kIDogc2xpY2VEZXB0aCAtIDEpO1xuICAgIH1cbiAgICBtdXN0TW92ZUlubGluZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLiR0by5wYXJlbnQuaXNUZXh0YmxvY2spXG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIGxldCB0b3AgPSB0aGlzLmZyb250aWVyW3RoaXMuZGVwdGhdLCBsZXZlbDtcbiAgICAgICAgaWYgKCF0b3AudHlwZS5pc1RleHRibG9jayB8fCAhY29udGVudEFmdGVyRml0cyh0aGlzLiR0bywgdGhpcy4kdG8uZGVwdGgsIHRvcC50eXBlLCB0b3AubWF0Y2gsIGZhbHNlKSB8fFxuICAgICAgICAgICAgKHRoaXMuJHRvLmRlcHRoID09IHRoaXMuZGVwdGggJiYgKGxldmVsID0gdGhpcy5maW5kQ2xvc2VMZXZlbCh0aGlzLiR0bykpICYmIGxldmVsLmRlcHRoID09IHRoaXMuZGVwdGgpKVxuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICBsZXQgeyBkZXB0aCB9ID0gdGhpcy4kdG8sIGFmdGVyID0gdGhpcy4kdG8uYWZ0ZXIoZGVwdGgpO1xuICAgICAgICB3aGlsZSAoZGVwdGggPiAxICYmIGFmdGVyID09IHRoaXMuJHRvLmVuZCgtLWRlcHRoKSlcbiAgICAgICAgICAgICsrYWZ0ZXI7XG4gICAgICAgIHJldHVybiBhZnRlcjtcbiAgICB9XG4gICAgZmluZENsb3NlTGV2ZWwoJHRvKSB7XG4gICAgICAgIHNjYW46IGZvciAobGV0IGkgPSBNYXRoLm1pbih0aGlzLmRlcHRoLCAkdG8uZGVwdGgpOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgbGV0IHsgbWF0Y2gsIHR5cGUgfSA9IHRoaXMuZnJvbnRpZXJbaV07XG4gICAgICAgICAgICBsZXQgZHJvcElubmVyID0gaSA8ICR0by5kZXB0aCAmJiAkdG8uZW5kKGkgKyAxKSA9PSAkdG8ucG9zICsgKCR0by5kZXB0aCAtIChpICsgMSkpO1xuICAgICAgICAgICAgbGV0IGZpdCA9IGNvbnRlbnRBZnRlckZpdHMoJHRvLCBpLCB0eXBlLCBtYXRjaCwgZHJvcElubmVyKTtcbiAgICAgICAgICAgIGlmICghZml0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgZm9yIChsZXQgZCA9IGkgLSAxOyBkID49IDA7IGQtLSkge1xuICAgICAgICAgICAgICAgIGxldCB7IG1hdGNoLCB0eXBlIH0gPSB0aGlzLmZyb250aWVyW2RdO1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaGVzID0gY29udGVudEFmdGVyRml0cygkdG8sIGQsIHR5cGUsIG1hdGNoLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGNoZXMgfHwgbWF0Y2hlcy5jaGlsZENvdW50KVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBzY2FuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgZGVwdGg6IGksIGZpdCwgbW92ZTogZHJvcElubmVyID8gJHRvLmRvYy5yZXNvbHZlKCR0by5hZnRlcihpICsgMSkpIDogJHRvIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoJHRvKSB7XG4gICAgICAgIGxldCBjbG9zZSA9IHRoaXMuZmluZENsb3NlTGV2ZWwoJHRvKTtcbiAgICAgICAgaWYgKCFjbG9zZSlcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB3aGlsZSAodGhpcy5kZXB0aCA+IGNsb3NlLmRlcHRoKVxuICAgICAgICAgICAgdGhpcy5jbG9zZUZyb250aWVyTm9kZSgpO1xuICAgICAgICBpZiAoY2xvc2UuZml0LmNoaWxkQ291bnQpXG4gICAgICAgICAgICB0aGlzLnBsYWNlZCA9IGFkZFRvRnJhZ21lbnQodGhpcy5wbGFjZWQsIGNsb3NlLmRlcHRoLCBjbG9zZS5maXQpO1xuICAgICAgICAkdG8gPSBjbG9zZS5tb3ZlO1xuICAgICAgICBmb3IgKGxldCBkID0gY2xvc2UuZGVwdGggKyAxOyBkIDw9ICR0by5kZXB0aDsgZCsrKSB7XG4gICAgICAgICAgICBsZXQgbm9kZSA9ICR0by5ub2RlKGQpLCBhZGQgPSBub2RlLnR5cGUuY29udGVudE1hdGNoLmZpbGxCZWZvcmUobm9kZS5jb250ZW50LCB0cnVlLCAkdG8uaW5kZXgoZCkpO1xuICAgICAgICAgICAgdGhpcy5vcGVuRnJvbnRpZXJOb2RlKG5vZGUudHlwZSwgbm9kZS5hdHRycywgYWRkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJHRvO1xuICAgIH1cbiAgICBvcGVuRnJvbnRpZXJOb2RlKHR5cGUsIGF0dHJzID0gbnVsbCwgY29udGVudCkge1xuICAgICAgICBsZXQgdG9wID0gdGhpcy5mcm9udGllclt0aGlzLmRlcHRoXTtcbiAgICAgICAgdG9wLm1hdGNoID0gdG9wLm1hdGNoLm1hdGNoVHlwZSh0eXBlKTtcbiAgICAgICAgdGhpcy5wbGFjZWQgPSBhZGRUb0ZyYWdtZW50KHRoaXMucGxhY2VkLCB0aGlzLmRlcHRoLCBGcmFnbWVudC5mcm9tKHR5cGUuY3JlYXRlKGF0dHJzLCBjb250ZW50KSkpO1xuICAgICAgICB0aGlzLmZyb250aWVyLnB1c2goeyB0eXBlLCBtYXRjaDogdHlwZS5jb250ZW50TWF0Y2ggfSk7XG4gICAgfVxuICAgIGNsb3NlRnJvbnRpZXJOb2RlKCkge1xuICAgICAgICBsZXQgb3BlbiA9IHRoaXMuZnJvbnRpZXIucG9wKCk7XG4gICAgICAgIGxldCBhZGQgPSBvcGVuLm1hdGNoLmZpbGxCZWZvcmUoRnJhZ21lbnQuZW1wdHksIHRydWUpO1xuICAgICAgICBpZiAoYWRkLmNoaWxkQ291bnQpXG4gICAgICAgICAgICB0aGlzLnBsYWNlZCA9IGFkZFRvRnJhZ21lbnQodGhpcy5wbGFjZWQsIHRoaXMuZnJvbnRpZXIubGVuZ3RoLCBhZGQpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGRyb3BGcm9tRnJhZ21lbnQoZnJhZ21lbnQsIGRlcHRoLCBjb3VudCkge1xuICAgIGlmIChkZXB0aCA9PSAwKVxuICAgICAgICByZXR1cm4gZnJhZ21lbnQuY3V0QnlJbmRleChjb3VudCwgZnJhZ21lbnQuY2hpbGRDb3VudCk7XG4gICAgcmV0dXJuIGZyYWdtZW50LnJlcGxhY2VDaGlsZCgwLCBmcmFnbWVudC5maXJzdENoaWxkLmNvcHkoZHJvcEZyb21GcmFnbWVudChmcmFnbWVudC5maXJzdENoaWxkLmNvbnRlbnQsIGRlcHRoIC0gMSwgY291bnQpKSk7XG59XG5mdW5jdGlvbiBhZGRUb0ZyYWdtZW50KGZyYWdtZW50LCBkZXB0aCwgY29udGVudCkge1xuICAgIGlmIChkZXB0aCA9PSAwKVxuICAgICAgICByZXR1cm4gZnJhZ21lbnQuYXBwZW5kKGNvbnRlbnQpO1xuICAgIHJldHVybiBmcmFnbWVudC5yZXBsYWNlQ2hpbGQoZnJhZ21lbnQuY2hpbGRDb3VudCAtIDEsIGZyYWdtZW50Lmxhc3RDaGlsZC5jb3B5KGFkZFRvRnJhZ21lbnQoZnJhZ21lbnQubGFzdENoaWxkLmNvbnRlbnQsIGRlcHRoIC0gMSwgY29udGVudCkpKTtcbn1cbmZ1bmN0aW9uIGNvbnRlbnRBdChmcmFnbWVudCwgZGVwdGgpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcHRoOyBpKyspXG4gICAgICAgIGZyYWdtZW50ID0gZnJhZ21lbnQuZmlyc3RDaGlsZC5jb250ZW50O1xuICAgIHJldHVybiBmcmFnbWVudDtcbn1cbmZ1bmN0aW9uIGNsb3NlTm9kZVN0YXJ0KG5vZGUsIG9wZW5TdGFydCwgb3BlbkVuZCkge1xuICAgIGlmIChvcGVuU3RhcnQgPD0gMClcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgbGV0IGZyYWcgPSBub2RlLmNvbnRlbnQ7XG4gICAgaWYgKG9wZW5TdGFydCA+IDEpXG4gICAgICAgIGZyYWcgPSBmcmFnLnJlcGxhY2VDaGlsZCgwLCBjbG9zZU5vZGVTdGFydChmcmFnLmZpcnN0Q2hpbGQsIG9wZW5TdGFydCAtIDEsIGZyYWcuY2hpbGRDb3VudCA9PSAxID8gb3BlbkVuZCAtIDEgOiAwKSk7XG4gICAgaWYgKG9wZW5TdGFydCA+IDApIHtcbiAgICAgICAgZnJhZyA9IG5vZGUudHlwZS5jb250ZW50TWF0Y2guZmlsbEJlZm9yZShmcmFnKS5hcHBlbmQoZnJhZyk7XG4gICAgICAgIGlmIChvcGVuRW5kIDw9IDApXG4gICAgICAgICAgICBmcmFnID0gZnJhZy5hcHBlbmQobm9kZS50eXBlLmNvbnRlbnRNYXRjaC5tYXRjaEZyYWdtZW50KGZyYWcpLmZpbGxCZWZvcmUoRnJhZ21lbnQuZW1wdHksIHRydWUpKTtcbiAgICB9XG4gICAgcmV0dXJuIG5vZGUuY29weShmcmFnKTtcbn1cbmZ1bmN0aW9uIGNvbnRlbnRBZnRlckZpdHMoJHRvLCBkZXB0aCwgdHlwZSwgbWF0Y2gsIG9wZW4pIHtcbiAgICBsZXQgbm9kZSA9ICR0by5ub2RlKGRlcHRoKSwgaW5kZXggPSBvcGVuID8gJHRvLmluZGV4QWZ0ZXIoZGVwdGgpIDogJHRvLmluZGV4KGRlcHRoKTtcbiAgICBpZiAoaW5kZXggPT0gbm9kZS5jaGlsZENvdW50ICYmICF0eXBlLmNvbXBhdGlibGVDb250ZW50KG5vZGUudHlwZSkpXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIGxldCBmaXQgPSBtYXRjaC5maWxsQmVmb3JlKG5vZGUuY29udGVudCwgdHJ1ZSwgaW5kZXgpO1xuICAgIHJldHVybiBmaXQgJiYgIWludmFsaWRNYXJrcyh0eXBlLCBub2RlLmNvbnRlbnQsIGluZGV4KSA/IGZpdCA6IG51bGw7XG59XG5mdW5jdGlvbiBpbnZhbGlkTWFya3ModHlwZSwgZnJhZ21lbnQsIHN0YXJ0KSB7XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZnJhZ21lbnQuY2hpbGRDb3VudDsgaSsrKVxuICAgICAgICBpZiAoIXR5cGUuYWxsb3dzTWFya3MoZnJhZ21lbnQuY2hpbGQoaSkubWFya3MpKVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZGVmaW5lc0NvbnRlbnQodHlwZSkge1xuICAgIHJldHVybiB0eXBlLnNwZWMuZGVmaW5pbmcgfHwgdHlwZS5zcGVjLmRlZmluaW5nRm9yQ29udGVudDtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VSYW5nZSh0ciwgZnJvbSwgdG8sIHNsaWNlKSB7XG4gICAgaWYgKCFzbGljZS5zaXplKVxuICAgICAgICByZXR1cm4gdHIuZGVsZXRlUmFuZ2UoZnJvbSwgdG8pO1xuICAgIGxldCAkZnJvbSA9IHRyLmRvYy5yZXNvbHZlKGZyb20pLCAkdG8gPSB0ci5kb2MucmVzb2x2ZSh0byk7XG4gICAgaWYgKGZpdHNUcml2aWFsbHkoJGZyb20sICR0bywgc2xpY2UpKVxuICAgICAgICByZXR1cm4gdHIuc3RlcChuZXcgUmVwbGFjZVN0ZXAoZnJvbSwgdG8sIHNsaWNlKSk7XG4gICAgbGV0IHRhcmdldERlcHRocyA9IGNvdmVyZWREZXB0aHMoJGZyb20sIHRyLmRvYy5yZXNvbHZlKHRvKSk7XG4gICAgLy8gQ2FuJ3QgcmVwbGFjZSB0aGUgd2hvbGUgZG9jdW1lbnQsIHNvIHJlbW92ZSAwIGlmIGl0J3MgcHJlc2VudFxuICAgIGlmICh0YXJnZXREZXB0aHNbdGFyZ2V0RGVwdGhzLmxlbmd0aCAtIDFdID09IDApXG4gICAgICAgIHRhcmdldERlcHRocy5wb3AoKTtcbiAgICAvLyBOZWdhdGl2ZSBudW1iZXJzIHJlcHJlc2VudCBub3QgZXhwYW5zaW9uIG92ZXIgdGhlIHdob2xlIG5vZGUgYXRcbiAgICAvLyB0aGF0IGRlcHRoLCBidXQgcmVwbGFjaW5nIGZyb20gJGZyb20uYmVmb3JlKC1EKSB0byAkdG8ucG9zLlxuICAgIGxldCBwcmVmZXJyZWRUYXJnZXQgPSAtKCRmcm9tLmRlcHRoICsgMSk7XG4gICAgdGFyZ2V0RGVwdGhzLnVuc2hpZnQocHJlZmVycmVkVGFyZ2V0KTtcbiAgICAvLyBUaGlzIGxvb3AgcGlja3MgYSBwcmVmZXJyZWQgdGFyZ2V0IGRlcHRoLCBpZiBvbmUgb2YgdGhlIGNvdmVyaW5nXG4gICAgLy8gZGVwdGhzIGlzIG5vdCBvdXRzaWRlIG9mIGEgZGVmaW5pbmcgbm9kZSwgYW5kIGFkZHMgbmVnYXRpdmVcbiAgICAvLyBkZXB0aHMgZm9yIGFueSBkZXB0aCB0aGF0IGhhcyAkZnJvbSBhdCBpdHMgc3RhcnQgYW5kIGRvZXMgbm90XG4gICAgLy8gY3Jvc3MgYSBkZWZpbmluZyBub2RlLlxuICAgIGZvciAobGV0IGQgPSAkZnJvbS5kZXB0aCwgcG9zID0gJGZyb20ucG9zIC0gMTsgZCA+IDA7IGQtLSwgcG9zLS0pIHtcbiAgICAgICAgbGV0IHNwZWMgPSAkZnJvbS5ub2RlKGQpLnR5cGUuc3BlYztcbiAgICAgICAgaWYgKHNwZWMuZGVmaW5pbmcgfHwgc3BlYy5kZWZpbmluZ0FzQ29udGV4dCB8fCBzcGVjLmlzb2xhdGluZylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBpZiAodGFyZ2V0RGVwdGhzLmluZGV4T2YoZCkgPiAtMSlcbiAgICAgICAgICAgIHByZWZlcnJlZFRhcmdldCA9IGQ7XG4gICAgICAgIGVsc2UgaWYgKCRmcm9tLmJlZm9yZShkKSA9PSBwb3MpXG4gICAgICAgICAgICB0YXJnZXREZXB0aHMuc3BsaWNlKDEsIDAsIC1kKTtcbiAgICB9XG4gICAgLy8gVHJ5IHRvIGZpdCBlYWNoIHBvc3NpYmxlIGRlcHRoIG9mIHRoZSBzbGljZSBpbnRvIGVhY2ggcG9zc2libGVcbiAgICAvLyB0YXJnZXQgZGVwdGgsIHN0YXJ0aW5nIHdpdGggdGhlIHByZWZlcnJlZCBkZXB0aHMuXG4gICAgbGV0IHByZWZlcnJlZFRhcmdldEluZGV4ID0gdGFyZ2V0RGVwdGhzLmluZGV4T2YocHJlZmVycmVkVGFyZ2V0KTtcbiAgICBsZXQgbGVmdE5vZGVzID0gW10sIHByZWZlcnJlZERlcHRoID0gc2xpY2Uub3BlblN0YXJ0O1xuICAgIGZvciAobGV0IGNvbnRlbnQgPSBzbGljZS5jb250ZW50LCBpID0gMDs7IGkrKykge1xuICAgICAgICBsZXQgbm9kZSA9IGNvbnRlbnQuZmlyc3RDaGlsZDtcbiAgICAgICAgbGVmdE5vZGVzLnB1c2gobm9kZSk7XG4gICAgICAgIGlmIChpID09IHNsaWNlLm9wZW5TdGFydClcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjb250ZW50ID0gbm9kZS5jb250ZW50O1xuICAgIH1cbiAgICAvLyBCYWNrIHVwIHByZWZlcnJlZERlcHRoIHRvIGNvdmVyIGRlZmluaW5nIHRleHRibG9ja3MgZGlyZWN0bHlcbiAgICAvLyBhYm92ZSBpdCwgcG9zc2libHkgc2tpcHBpbmcgYSBub24tZGVmaW5pbmcgdGV4dGJsb2NrLlxuICAgIGZvciAobGV0IGQgPSBwcmVmZXJyZWREZXB0aCAtIDE7IGQgPj0gMDsgZC0tKSB7XG4gICAgICAgIGxldCB0eXBlID0gbGVmdE5vZGVzW2RdLnR5cGUsIGRlZiA9IGRlZmluZXNDb250ZW50KHR5cGUpO1xuICAgICAgICBpZiAoZGVmICYmICRmcm9tLm5vZGUocHJlZmVycmVkVGFyZ2V0SW5kZXgpLnR5cGUgIT0gdHlwZSlcbiAgICAgICAgICAgIHByZWZlcnJlZERlcHRoID0gZDtcbiAgICAgICAgZWxzZSBpZiAoZGVmIHx8ICF0eXBlLmlzVGV4dGJsb2NrKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGZvciAobGV0IGogPSBzbGljZS5vcGVuU3RhcnQ7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIGxldCBvcGVuRGVwdGggPSAoaiArIHByZWZlcnJlZERlcHRoICsgMSkgJSAoc2xpY2Uub3BlblN0YXJ0ICsgMSk7XG4gICAgICAgIGxldCBpbnNlcnQgPSBsZWZ0Tm9kZXNbb3BlbkRlcHRoXTtcbiAgICAgICAgaWYgKCFpbnNlcnQpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0YXJnZXREZXB0aHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIExvb3Agb3ZlciBwb3NzaWJsZSBleHBhbnNpb24gbGV2ZWxzLCBzdGFydGluZyB3aXRoIHRoZVxuICAgICAgICAgICAgLy8gcHJlZmVycmVkIG9uZVxuICAgICAgICAgICAgbGV0IHRhcmdldERlcHRoID0gdGFyZ2V0RGVwdGhzWyhpICsgcHJlZmVycmVkVGFyZ2V0SW5kZXgpICUgdGFyZ2V0RGVwdGhzLmxlbmd0aF0sIGV4cGFuZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAodGFyZ2V0RGVwdGggPCAwKSB7XG4gICAgICAgICAgICAgICAgZXhwYW5kID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGFyZ2V0RGVwdGggPSAtdGFyZ2V0RGVwdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gJGZyb20ubm9kZSh0YXJnZXREZXB0aCAtIDEpLCBpbmRleCA9ICRmcm9tLmluZGV4KHRhcmdldERlcHRoIC0gMSk7XG4gICAgICAgICAgICBpZiAocGFyZW50LmNhblJlcGxhY2VXaXRoKGluZGV4LCBpbmRleCwgaW5zZXJ0LnR5cGUsIGluc2VydC5tYXJrcykpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyLnJlcGxhY2UoJGZyb20uYmVmb3JlKHRhcmdldERlcHRoKSwgZXhwYW5kID8gJHRvLmFmdGVyKHRhcmdldERlcHRoKSA6IHRvLCBuZXcgU2xpY2UoY2xvc2VGcmFnbWVudChzbGljZS5jb250ZW50LCAwLCBzbGljZS5vcGVuU3RhcnQsIG9wZW5EZXB0aCksIG9wZW5EZXB0aCwgc2xpY2Uub3BlbkVuZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBzdGFydFN0ZXBzID0gdHIuc3RlcHMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSB0YXJnZXREZXB0aHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgdHIucmVwbGFjZShmcm9tLCB0bywgc2xpY2UpO1xuICAgICAgICBpZiAodHIuc3RlcHMubGVuZ3RoID4gc3RhcnRTdGVwcylcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBsZXQgZGVwdGggPSB0YXJnZXREZXB0aHNbaV07XG4gICAgICAgIGlmIChkZXB0aCA8IDApXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgZnJvbSA9ICRmcm9tLmJlZm9yZShkZXB0aCk7XG4gICAgICAgIHRvID0gJHRvLmFmdGVyKGRlcHRoKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjbG9zZUZyYWdtZW50KGZyYWdtZW50LCBkZXB0aCwgb2xkT3BlbiwgbmV3T3BlbiwgcGFyZW50KSB7XG4gICAgaWYgKGRlcHRoIDwgb2xkT3Blbikge1xuICAgICAgICBsZXQgZmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuICAgICAgICBmcmFnbWVudCA9IGZyYWdtZW50LnJlcGxhY2VDaGlsZCgwLCBmaXJzdC5jb3B5KGNsb3NlRnJhZ21lbnQoZmlyc3QuY29udGVudCwgZGVwdGggKyAxLCBvbGRPcGVuLCBuZXdPcGVuLCBmaXJzdCkpKTtcbiAgICB9XG4gICAgaWYgKGRlcHRoID4gbmV3T3Blbikge1xuICAgICAgICBsZXQgbWF0Y2ggPSBwYXJlbnQuY29udGVudE1hdGNoQXQoMCk7XG4gICAgICAgIGxldCBzdGFydCA9IG1hdGNoLmZpbGxCZWZvcmUoZnJhZ21lbnQpLmFwcGVuZChmcmFnbWVudCk7XG4gICAgICAgIGZyYWdtZW50ID0gc3RhcnQuYXBwZW5kKG1hdGNoLm1hdGNoRnJhZ21lbnQoc3RhcnQpLmZpbGxCZWZvcmUoRnJhZ21lbnQuZW1wdHksIHRydWUpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWdtZW50O1xufVxuZnVuY3Rpb24gcmVwbGFjZVJhbmdlV2l0aCh0ciwgZnJvbSwgdG8sIG5vZGUpIHtcbiAgICBpZiAoIW5vZGUuaXNJbmxpbmUgJiYgZnJvbSA9PSB0byAmJiB0ci5kb2MucmVzb2x2ZShmcm9tKS5wYXJlbnQuY29udGVudC5zaXplKSB7XG4gICAgICAgIGxldCBwb2ludCA9IGluc2VydFBvaW50KHRyLmRvYywgZnJvbSwgbm9kZS50eXBlKTtcbiAgICAgICAgaWYgKHBvaW50ICE9IG51bGwpXG4gICAgICAgICAgICBmcm9tID0gdG8gPSBwb2ludDtcbiAgICB9XG4gICAgdHIucmVwbGFjZVJhbmdlKGZyb20sIHRvLCBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbShub2RlKSwgMCwgMCkpO1xufVxuZnVuY3Rpb24gZGVsZXRlUmFuZ2UodHIsIGZyb20sIHRvKSB7XG4gICAgbGV0ICRmcm9tID0gdHIuZG9jLnJlc29sdmUoZnJvbSksICR0byA9IHRyLmRvYy5yZXNvbHZlKHRvKTtcbiAgICBsZXQgY292ZXJlZCA9IGNvdmVyZWREZXB0aHMoJGZyb20sICR0byk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3ZlcmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBkZXB0aCA9IGNvdmVyZWRbaV0sIGxhc3QgPSBpID09IGNvdmVyZWQubGVuZ3RoIC0gMTtcbiAgICAgICAgaWYgKChsYXN0ICYmIGRlcHRoID09IDApIHx8ICRmcm9tLm5vZGUoZGVwdGgpLnR5cGUuY29udGVudE1hdGNoLnZhbGlkRW5kKVxuICAgICAgICAgICAgcmV0dXJuIHRyLmRlbGV0ZSgkZnJvbS5zdGFydChkZXB0aCksICR0by5lbmQoZGVwdGgpKTtcbiAgICAgICAgaWYgKGRlcHRoID4gMCAmJiAobGFzdCB8fCAkZnJvbS5ub2RlKGRlcHRoIC0gMSkuY2FuUmVwbGFjZSgkZnJvbS5pbmRleChkZXB0aCAtIDEpLCAkdG8uaW5kZXhBZnRlcihkZXB0aCAtIDEpKSkpXG4gICAgICAgICAgICByZXR1cm4gdHIuZGVsZXRlKCRmcm9tLmJlZm9yZShkZXB0aCksICR0by5hZnRlcihkZXB0aCkpO1xuICAgIH1cbiAgICBmb3IgKGxldCBkID0gMTsgZCA8PSAkZnJvbS5kZXB0aCAmJiBkIDw9ICR0by5kZXB0aDsgZCsrKSB7XG4gICAgICAgIGlmIChmcm9tIC0gJGZyb20uc3RhcnQoZCkgPT0gJGZyb20uZGVwdGggLSBkICYmIHRvID4gJGZyb20uZW5kKGQpICYmICR0by5lbmQoZCkgLSB0byAhPSAkdG8uZGVwdGggLSBkKVxuICAgICAgICAgICAgcmV0dXJuIHRyLmRlbGV0ZSgkZnJvbS5iZWZvcmUoZCksIHRvKTtcbiAgICB9XG4gICAgdHIuZGVsZXRlKGZyb20sIHRvKTtcbn1cbi8vIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIGRlcHRocyBmb3Igd2hpY2ggJGZyb20gLSAkdG8gc3BhbnMgdGhlXG4vLyB3aG9sZSBjb250ZW50IG9mIHRoZSBub2RlcyBhdCB0aGF0IGRlcHRoLlxuZnVuY3Rpb24gY292ZXJlZERlcHRocygkZnJvbSwgJHRvKSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdLCBtaW5EZXB0aCA9IE1hdGgubWluKCRmcm9tLmRlcHRoLCAkdG8uZGVwdGgpO1xuICAgIGZvciAobGV0IGQgPSBtaW5EZXB0aDsgZCA+PSAwOyBkLS0pIHtcbiAgICAgICAgbGV0IHN0YXJ0ID0gJGZyb20uc3RhcnQoZCk7XG4gICAgICAgIGlmIChzdGFydCA8ICRmcm9tLnBvcyAtICgkZnJvbS5kZXB0aCAtIGQpIHx8XG4gICAgICAgICAgICAkdG8uZW5kKGQpID4gJHRvLnBvcyArICgkdG8uZGVwdGggLSBkKSB8fFxuICAgICAgICAgICAgJGZyb20ubm9kZShkKS50eXBlLnNwZWMuaXNvbGF0aW5nIHx8XG4gICAgICAgICAgICAkdG8ubm9kZShkKS50eXBlLnNwZWMuaXNvbGF0aW5nKVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmIChzdGFydCA9PSAkdG8uc3RhcnQoZCkgfHxcbiAgICAgICAgICAgIChkID09ICRmcm9tLmRlcHRoICYmIGQgPT0gJHRvLmRlcHRoICYmICRmcm9tLnBhcmVudC5pbmxpbmVDb250ZW50ICYmICR0by5wYXJlbnQuaW5saW5lQ29udGVudCAmJlxuICAgICAgICAgICAgICAgIGQgJiYgJHRvLnN0YXJ0KGQgLSAxKSA9PSBzdGFydCAtIDEpKVxuICAgICAgICAgICAgcmVzdWx0LnB1c2goZCk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuQGludGVybmFsXG4qL1xubGV0IFRyYW5zZm9ybUVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG59O1xuVHJhbnNmb3JtRXJyb3IgPSBmdW5jdGlvbiBUcmFuc2Zvcm1FcnJvcihtZXNzYWdlKSB7XG4gICAgbGV0IGVyciA9IEVycm9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG4gICAgZXJyLl9fcHJvdG9fXyA9IFRyYW5zZm9ybUVycm9yLnByb3RvdHlwZTtcbiAgICByZXR1cm4gZXJyO1xufTtcblRyYW5zZm9ybUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcblRyYW5zZm9ybUVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRyYW5zZm9ybUVycm9yO1xuVHJhbnNmb3JtRXJyb3IucHJvdG90eXBlLm5hbWUgPSBcIlRyYW5zZm9ybUVycm9yXCI7XG4vKipcbkFic3RyYWN0aW9uIHRvIGJ1aWxkIHVwIGFuZCB0cmFjayBhbiBhcnJheSBvZlxuW3N0ZXBzXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jdHJhbnNmb3JtLlN0ZXApIHJlcHJlc2VudGluZyBhIGRvY3VtZW50IHRyYW5zZm9ybWF0aW9uLlxuXG5Nb3N0IHRyYW5zZm9ybWluZyBtZXRob2RzIHJldHVybiB0aGUgYFRyYW5zZm9ybWAgb2JqZWN0IGl0c2VsZiwgc29cbnRoYXQgdGhleSBjYW4gYmUgY2hhaW5lZC5cbiovXG5jbGFzcyBUcmFuc2Zvcm0ge1xuICAgIC8qKlxuICAgIENyZWF0ZSBhIHRyYW5zZm9ybSB0aGF0IHN0YXJ0cyB3aXRoIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgIFRoZSBjdXJyZW50IGRvY3VtZW50ICh0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBzdGVwcyBpbiB0aGVcbiAgICB0cmFuc2Zvcm0pLlxuICAgICovXG4gICAgZG9jKSB7XG4gICAgICAgIHRoaXMuZG9jID0gZG9jO1xuICAgICAgICAvKipcbiAgICAgICAgVGhlIHN0ZXBzIGluIHRoaXMgdHJhbnNmb3JtLlxuICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0ZXBzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICBUaGUgZG9jdW1lbnRzIGJlZm9yZSBlYWNoIG9mIHRoZSBzdGVwcy5cbiAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kb2NzID0gW107XG4gICAgICAgIC8qKlxuICAgICAgICBBIG1hcHBpbmcgd2l0aCB0aGUgbWFwcyBmb3IgZWFjaCBvZiB0aGUgc3RlcHMgaW4gdGhpcyB0cmFuc2Zvcm0uXG4gICAgICAgICovXG4gICAgICAgIHRoaXMubWFwcGluZyA9IG5ldyBNYXBwaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICBUaGUgc3RhcnRpbmcgZG9jdW1lbnQuXG4gICAgKi9cbiAgICBnZXQgYmVmb3JlKCkgeyByZXR1cm4gdGhpcy5kb2NzLmxlbmd0aCA/IHRoaXMuZG9jc1swXSA6IHRoaXMuZG9jOyB9XG4gICAgLyoqXG4gICAgQXBwbHkgYSBuZXcgc3RlcCBpbiB0aGlzIHRyYW5zZm9ybSwgc2F2aW5nIHRoZSByZXN1bHQuIFRocm93cyBhblxuICAgIGVycm9yIHdoZW4gdGhlIHN0ZXAgZmFpbHMuXG4gICAgKi9cbiAgICBzdGVwKHN0ZXApIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IHRoaXMubWF5YmVTdGVwKHN0ZXApO1xuICAgICAgICBpZiAocmVzdWx0LmZhaWxlZClcbiAgICAgICAgICAgIHRocm93IG5ldyBUcmFuc2Zvcm1FcnJvcihyZXN1bHQuZmFpbGVkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFRyeSB0byBhcHBseSBhIHN0ZXAgaW4gdGhpcyB0cmFuc2Zvcm1hdGlvbiwgaWdub3JpbmcgaXQgaWYgaXRcbiAgICBmYWlscy4gUmV0dXJucyB0aGUgc3RlcCByZXN1bHQuXG4gICAgKi9cbiAgICBtYXliZVN0ZXAoc3RlcCkge1xuICAgICAgICBsZXQgcmVzdWx0ID0gc3RlcC5hcHBseSh0aGlzLmRvYyk7XG4gICAgICAgIGlmICghcmVzdWx0LmZhaWxlZClcbiAgICAgICAgICAgIHRoaXMuYWRkU3RlcChzdGVwLCByZXN1bHQuZG9jKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgLyoqXG4gICAgVHJ1ZSB3aGVuIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBjaGFuZ2VkICh3aGVuIHRoZXJlIGFyZSBhbnlcbiAgICBzdGVwcykuXG4gICAgKi9cbiAgICBnZXQgZG9jQ2hhbmdlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHMubGVuZ3RoID4gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgQGludGVybmFsXG4gICAgKi9cbiAgICBhZGRTdGVwKHN0ZXAsIGRvYykge1xuICAgICAgICB0aGlzLmRvY3MucHVzaCh0aGlzLmRvYyk7XG4gICAgICAgIHRoaXMuc3RlcHMucHVzaChzdGVwKTtcbiAgICAgICAgdGhpcy5tYXBwaW5nLmFwcGVuZE1hcChzdGVwLmdldE1hcCgpKTtcbiAgICAgICAgdGhpcy5kb2MgPSBkb2M7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlcGxhY2UgdGhlIHBhcnQgb2YgdGhlIGRvY3VtZW50IGJldHdlZW4gYGZyb21gIGFuZCBgdG9gIHdpdGggdGhlXG4gICAgZ2l2ZW4gYHNsaWNlYC5cbiAgICAqL1xuICAgIHJlcGxhY2UoZnJvbSwgdG8gPSBmcm9tLCBzbGljZSA9IFNsaWNlLmVtcHR5KSB7XG4gICAgICAgIGxldCBzdGVwID0gcmVwbGFjZVN0ZXAodGhpcy5kb2MsIGZyb20sIHRvLCBzbGljZSk7XG4gICAgICAgIGlmIChzdGVwKVxuICAgICAgICAgICAgdGhpcy5zdGVwKHN0ZXApO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmVwbGFjZSB0aGUgZ2l2ZW4gcmFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gY29udGVudCwgd2hpY2ggbWF5IGJlIGFcbiAgICBmcmFnbWVudCwgbm9kZSwgb3IgYXJyYXkgb2Ygbm9kZXMuXG4gICAgKi9cbiAgICByZXBsYWNlV2l0aChmcm9tLCB0bywgY29udGVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXBsYWNlKGZyb20sIHRvLCBuZXcgU2xpY2UoRnJhZ21lbnQuZnJvbShjb250ZW50KSwgMCwgMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICBEZWxldGUgdGhlIGNvbnRlbnQgYmV0d2VlbiB0aGUgZ2l2ZW4gcG9zaXRpb25zLlxuICAgICovXG4gICAgZGVsZXRlKGZyb20sIHRvKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcGxhY2UoZnJvbSwgdG8sIFNsaWNlLmVtcHR5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgSW5zZXJ0IHRoZSBnaXZlbiBjb250ZW50IGF0IHRoZSBnaXZlbiBwb3NpdGlvbi5cbiAgICAqL1xuICAgIGluc2VydChwb3MsIGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZVdpdGgocG9zLCBwb3MsIGNvbnRlbnQpO1xuICAgIH1cbiAgICAvKipcbiAgICBSZXBsYWNlIGEgcmFuZ2Ugb2YgdGhlIGRvY3VtZW50IHdpdGggYSBnaXZlbiBzbGljZSwgdXNpbmdcbiAgICBgZnJvbWAsIGB0b2AsIGFuZCB0aGUgc2xpY2Unc1xuICAgIFtgb3BlblN0YXJ0YF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLlNsaWNlLm9wZW5TdGFydCkgcHJvcGVydHkgYXMgaGludHMsIHJhdGhlclxuICAgIHRoYW4gZml4ZWQgc3RhcnQgYW5kIGVuZCBwb2ludHMuIFRoaXMgbWV0aG9kIG1heSBncm93IHRoZVxuICAgIHJlcGxhY2VkIGFyZWEgb3IgY2xvc2Ugb3BlbiBub2RlcyBpbiB0aGUgc2xpY2UgaW4gb3JkZXIgdG8gZ2V0IGFcbiAgICBmaXQgdGhhdCBpcyBtb3JlIGluIGxpbmUgd2l0aCBXWVNJV1lHIGV4cGVjdGF0aW9ucywgYnkgZHJvcHBpbmdcbiAgICBmdWxseSBjb3ZlcmVkIHBhcmVudCBub2RlcyBvZiB0aGUgcmVwbGFjZWQgcmVnaW9uIHdoZW4gdGhleSBhcmVcbiAgICBtYXJrZWQgW25vbi1kZWZpbmluZyBhc1xuICAgIGNvbnRleHRdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlU3BlYy5kZWZpbmluZ0FzQ29udGV4dCksIG9yIGluY2x1ZGluZyBhblxuICAgIG9wZW4gcGFyZW50IG5vZGUgZnJvbSB0aGUgc2xpY2UgdGhhdCBfaXNfIG1hcmtlZCBhcyBbZGVmaW5pbmdcbiAgICBpdHMgY29udGVudF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI21vZGVsLk5vZGVTcGVjLmRlZmluaW5nRm9yQ29udGVudCkuXG4gICAgXG4gICAgVGhpcyBpcyB0aGUgbWV0aG9kLCBmb3IgZXhhbXBsZSwgdG8gaGFuZGxlIHBhc3RlLiBUaGUgc2ltaWxhclxuICAgIFtgcmVwbGFjZWBdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyN0cmFuc2Zvcm0uVHJhbnNmb3JtLnJlcGxhY2UpIG1ldGhvZCBpcyBhIG1vcmVcbiAgICBwcmltaXRpdmUgdG9vbCB3aGljaCB3aWxsIF9ub3RfIG1vdmUgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgaXRzIGdpdmVuXG4gICAgcmFuZ2UsIGFuZCBpcyB1c2VmdWwgaW4gc2l0dWF0aW9ucyB3aGVyZSB5b3UgbmVlZCBtb3JlIHByZWNpc2VcbiAgICBjb250cm9sIG92ZXIgd2hhdCBoYXBwZW5zLlxuICAgICovXG4gICAgcmVwbGFjZVJhbmdlKGZyb20sIHRvLCBzbGljZSkge1xuICAgICAgICByZXBsYWNlUmFuZ2UodGhpcywgZnJvbSwgdG8sIHNsaWNlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlcGxhY2UgdGhlIGdpdmVuIHJhbmdlIHdpdGggYSBub2RlLCBidXQgdXNlIGBmcm9tYCBhbmQgYHRvYCBhc1xuICAgIGhpbnRzLCByYXRoZXIgdGhhbiBwcmVjaXNlIHBvc2l0aW9ucy4gV2hlbiBmcm9tIGFuZCB0byBhcmUgdGhlIHNhbWVcbiAgICBhbmQgYXJlIGF0IHRoZSBzdGFydCBvciBlbmQgb2YgYSBwYXJlbnQgbm9kZSBpbiB3aGljaCB0aGUgZ2l2ZW5cbiAgICBub2RlIGRvZXNuJ3QgZml0LCB0aGlzIG1ldGhvZCBtYXkgX21vdmVfIHRoZW0gb3V0IHRvd2FyZHMgYSBwYXJlbnRcbiAgICB0aGF0IGRvZXMgYWxsb3cgdGhlIGdpdmVuIG5vZGUgdG8gYmUgcGxhY2VkLiBXaGVuIHRoZSBnaXZlbiByYW5nZVxuICAgIGNvbXBsZXRlbHkgY292ZXJzIGEgcGFyZW50IG5vZGUsIHRoaXMgbWV0aG9kIG1heSBjb21wbGV0ZWx5IHJlcGxhY2VcbiAgICB0aGF0IHBhcmVudCBub2RlLlxuICAgICovXG4gICAgcmVwbGFjZVJhbmdlV2l0aChmcm9tLCB0bywgbm9kZSkge1xuICAgICAgICByZXBsYWNlUmFuZ2VXaXRoKHRoaXMsIGZyb20sIHRvLCBub2RlKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIERlbGV0ZSB0aGUgZ2l2ZW4gcmFuZ2UsIGV4cGFuZGluZyBpdCB0byBjb3ZlciBmdWxseSBjb3ZlcmVkXG4gICAgcGFyZW50IG5vZGVzIHVudGlsIGEgdmFsaWQgcmVwbGFjZSBpcyBmb3VuZC5cbiAgICAqL1xuICAgIGRlbGV0ZVJhbmdlKGZyb20sIHRvKSB7XG4gICAgICAgIGRlbGV0ZVJhbmdlKHRoaXMsIGZyb20sIHRvKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFNwbGl0IHRoZSBjb250ZW50IGluIHRoZSBnaXZlbiByYW5nZSBvZmYgZnJvbSBpdHMgcGFyZW50LCBpZiB0aGVyZVxuICAgIGlzIHNpYmxpbmcgY29udGVudCBiZWZvcmUgb3IgYWZ0ZXIgaXQsIGFuZCBtb3ZlIGl0IHVwIHRoZSB0cmVlIHRvXG4gICAgdGhlIGRlcHRoIHNwZWNpZmllZCBieSBgdGFyZ2V0YC4gWW91J2xsIHByb2JhYmx5IHdhbnQgdG8gdXNlXG4gICAgW2BsaWZ0VGFyZ2V0YF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5saWZ0VGFyZ2V0KSB0byBjb21wdXRlIGB0YXJnZXRgLCB0byBtYWtlXG4gICAgc3VyZSB0aGUgbGlmdCBpcyB2YWxpZC5cbiAgICAqL1xuICAgIGxpZnQocmFuZ2UsIHRhcmdldCkge1xuICAgICAgICBsaWZ0KHRoaXMsIHJhbmdlLCB0YXJnZXQpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgSm9pbiB0aGUgYmxvY2tzIGFyb3VuZCB0aGUgZ2l2ZW4gcG9zaXRpb24uIElmIGRlcHRoIGlzIDIsIHRoZWlyXG4gICAgbGFzdCBhbmQgZmlyc3Qgc2libGluZ3MgYXJlIGFsc28gam9pbmVkLCBhbmQgc28gb24uXG4gICAgKi9cbiAgICBqb2luKHBvcywgZGVwdGggPSAxKSB7XG4gICAgICAgIGpvaW4odGhpcywgcG9zLCBkZXB0aCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBXcmFwIHRoZSBnaXZlbiBbcmFuZ2VdKGh0dHBzOi8vcHJvc2VtaXJyb3IubmV0L2RvY3MvcmVmLyNtb2RlbC5Ob2RlUmFuZ2UpIGluIHRoZSBnaXZlbiBzZXQgb2Ygd3JhcHBlcnMuXG4gICAgVGhlIHdyYXBwZXJzIGFyZSBhc3N1bWVkIHRvIGJlIHZhbGlkIGluIHRoaXMgcG9zaXRpb24sIGFuZCBzaG91bGRcbiAgICBwcm9iYWJseSBiZSBjb21wdXRlZCB3aXRoIFtgZmluZFdyYXBwaW5nYF0oaHR0cHM6Ly9wcm9zZW1pcnJvci5uZXQvZG9jcy9yZWYvI3RyYW5zZm9ybS5maW5kV3JhcHBpbmcpLlxuICAgICovXG4gICAgd3JhcChyYW5nZSwgd3JhcHBlcnMpIHtcbiAgICAgICAgd3JhcCh0aGlzLCByYW5nZSwgd3JhcHBlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgU2V0IHRoZSB0eXBlIG9mIGFsbCB0ZXh0YmxvY2tzIChwYXJ0bHkpIGJldHdlZW4gYGZyb21gIGFuZCBgdG9gIHRvXG4gICAgdGhlIGdpdmVuIG5vZGUgdHlwZSB3aXRoIHRoZSBnaXZlbiBhdHRyaWJ1dGVzLlxuICAgICovXG4gICAgc2V0QmxvY2tUeXBlKGZyb20sIHRvID0gZnJvbSwgdHlwZSwgYXR0cnMgPSBudWxsKSB7XG4gICAgICAgIHNldEJsb2NrVHlwZSh0aGlzLCBmcm9tLCB0bywgdHlwZSwgYXR0cnMpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgQ2hhbmdlIHRoZSB0eXBlLCBhdHRyaWJ1dGVzLCBhbmQvb3IgbWFya3Mgb2YgdGhlIG5vZGUgYXQgYHBvc2AuXG4gICAgV2hlbiBgdHlwZWAgaXNuJ3QgZ2l2ZW4sIHRoZSBleGlzdGluZyBub2RlIHR5cGUgaXMgcHJlc2VydmVkLFxuICAgICovXG4gICAgc2V0Tm9kZU1hcmt1cChwb3MsIHR5cGUsIGF0dHJzID0gbnVsbCwgbWFya3MgPSBbXSkge1xuICAgICAgICBzZXROb2RlTWFya3VwKHRoaXMsIHBvcywgdHlwZSwgYXR0cnMsIG1hcmtzKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFNwbGl0IHRoZSBub2RlIGF0IHRoZSBnaXZlbiBwb3NpdGlvbiwgYW5kIG9wdGlvbmFsbHksIGlmIGBkZXB0aGAgaXNcbiAgICBncmVhdGVyIHRoYW4gb25lLCBhbnkgbnVtYmVyIG9mIG5vZGVzIGFib3ZlIHRoYXQuIEJ5IGRlZmF1bHQsIHRoZVxuICAgIHBhcnRzIHNwbGl0IG9mZiB3aWxsIGluaGVyaXQgdGhlIG5vZGUgdHlwZSBvZiB0aGUgb3JpZ2luYWwgbm9kZS5cbiAgICBUaGlzIGNhbiBiZSBjaGFuZ2VkIGJ5IHBhc3NpbmcgYW4gYXJyYXkgb2YgdHlwZXMgYW5kIGF0dHJpYnV0ZXMgdG9cbiAgICB1c2UgYWZ0ZXIgdGhlIHNwbGl0LlxuICAgICovXG4gICAgc3BsaXQocG9zLCBkZXB0aCA9IDEsIHR5cGVzQWZ0ZXIpIHtcbiAgICAgICAgc3BsaXQodGhpcywgcG9zLCBkZXB0aCwgdHlwZXNBZnRlcik7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICBBZGQgdGhlIGdpdmVuIG1hcmsgdG8gdGhlIGlubGluZSBjb250ZW50IGJldHdlZW4gYGZyb21gIGFuZCBgdG9gLlxuICAgICovXG4gICAgYWRkTWFyayhmcm9tLCB0bywgbWFyaykge1xuICAgICAgICBhZGRNYXJrKHRoaXMsIGZyb20sIHRvLCBtYXJrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgIFJlbW92ZSBtYXJrcyBmcm9tIGlubGluZSBub2RlcyBiZXR3ZWVuIGBmcm9tYCBhbmQgYHRvYC4gV2hlblxuICAgIGBtYXJrYCBpcyBhIHNpbmdsZSBtYXJrLCByZW1vdmUgcHJlY2lzZWx5IHRoYXQgbWFyay4gV2hlbiBpdCBpc1xuICAgIGEgbWFyayB0eXBlLCByZW1vdmUgYWxsIG1hcmtzIG9mIHRoYXQgdHlwZS4gV2hlbiBpdCBpcyBudWxsLFxuICAgIHJlbW92ZSBhbGwgbWFya3Mgb2YgYW55IHR5cGUuXG4gICAgKi9cbiAgICByZW1vdmVNYXJrKGZyb20sIHRvLCBtYXJrKSB7XG4gICAgICAgIHJlbW92ZU1hcmsodGhpcywgZnJvbSwgdG8sIG1hcmspO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgUmVtb3ZlcyBhbGwgbWFya3MgYW5kIG5vZGVzIGZyb20gdGhlIGNvbnRlbnQgb2YgdGhlIG5vZGUgYXRcbiAgICBgcG9zYCB0aGF0IGRvbid0IG1hdGNoIHRoZSBnaXZlbiBuZXcgcGFyZW50IG5vZGUgdHlwZS4gQWNjZXB0c1xuICAgIGFuIG9wdGlvbmFsIHN0YXJ0aW5nIFtjb250ZW50IG1hdGNoXShodHRwczovL3Byb3NlbWlycm9yLm5ldC9kb2NzL3JlZi8jbW9kZWwuQ29udGVudE1hdGNoKSBhc1xuICAgIHRoaXJkIGFyZ3VtZW50LlxuICAgICovXG4gICAgY2xlYXJJbmNvbXBhdGlibGUocG9zLCBwYXJlbnRUeXBlLCBtYXRjaCkge1xuICAgICAgICBjbGVhckluY29tcGF0aWJsZSh0aGlzLCBwb3MsIHBhcmVudFR5cGUsIG1hdGNoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5leHBvcnQgeyBBZGRNYXJrU3RlcCwgTWFwUmVzdWx0LCBNYXBwaW5nLCBSZW1vdmVNYXJrU3RlcCwgUmVwbGFjZUFyb3VuZFN0ZXAsIFJlcGxhY2VTdGVwLCBTdGVwLCBTdGVwTWFwLCBTdGVwUmVzdWx0LCBUcmFuc2Zvcm0sIFRyYW5zZm9ybUVycm9yLCBjYW5Kb2luLCBjYW5TcGxpdCwgZHJvcFBvaW50LCBmaW5kV3JhcHBpbmcsIGluc2VydFBvaW50LCBqb2luUG9pbnQsIGxpZnRUYXJnZXQsIHJlcGxhY2VTdGVwIH07XG4iXSwibmFtZXMiOlsibWFjIiwibmF2aWdhdG9yIiwidGVzdCIsInBsYXRmb3JtIiwibm9ybWFsaXplS2V5TmFtZSIsIm5hbWUiLCJhbHQiLCJjdHJsIiwic2hpZnQiLCJtZXRhIiwicGFydHMiLCJzcGxpdCIsInJlc3VsdCIsImxlbmd0aCIsImkiLCJtb2QiLCJFcnJvciIsIm1vZGlmaWVycyIsImV2ZW50IiwiYWx0S2V5IiwiY3RybEtleSIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImtleW1hcCIsImJpbmRpbmdzIiwicHJvcHMiLCJoYW5kbGVLZXlEb3duIiwia2V5ZG93bkhhbmRsZXIiLCJtYXAiLCJjb3B5IiwiT2JqZWN0IiwiY3JlYXRlIiwicHJvcCIsIm5vcm1hbGl6ZSIsInZpZXciLCJiYXNlTmFtZSIsImlzQ2hhciIsImRpcmVjdCIsInN0YXRlIiwiZGlzcGF0Y2giLCJjaGFyQ29kZUF0Iiwia2V5Q29kZSIsImZyb21Db2RlIiwid2l0aFNoaWZ0IiwiZmluZERpZmZTdGFydCIsImEiLCJiIiwicG9zIiwiY2hpbGRDb3VudCIsImNoaWxkQSIsImNoaWxkIiwiY2hpbGRCIiwic2FtZU1hcmt1cCIsImlzVGV4dCIsInRleHQiLCJqIiwiY29udGVudCIsInNpemUiLCJpbm5lciIsIm5vZGVTaXplIiwiZmluZERpZmZFbmQiLCJwb3NBIiwicG9zQiIsImlBIiwiaUIiLCJzYW1lIiwibWluU2l6ZSIsIk1hdGgiLCJtaW4iLCJGcmFnbWVudCIsImNvbnN0cnVjdG9yIiwidGhpcyIsIm5vZGVzQmV0d2VlbiIsImZyb20iLCJ0byIsImYiLCJub2RlU3RhcnQiLCJwYXJlbnQiLCJlbmQiLCJzdGFydCIsIm1heCIsImRlc2NlbmRhbnRzIiwidGV4dEJldHdlZW4iLCJibG9ja1NlcGFyYXRvciIsImxlYWZUZXh0Iiwic2VwYXJhdGVkIiwibm9kZSIsInNsaWNlIiwiaXNMZWFmIiwidHlwZSIsInNwZWMiLCJpc0Jsb2NrIiwiYXBwZW5kIiwib3RoZXIiLCJsYXN0IiwibGFzdENoaWxkIiwiZmlyc3QiLCJmaXJzdENoaWxkIiwid2l0aFRleHQiLCJwdXNoIiwiY3V0IiwiY3V0QnlJbmRleCIsImVtcHR5IiwicmVwbGFjZUNoaWxkIiwiaW5kZXgiLCJjdXJyZW50IiwiYWRkVG9TdGFydCIsImNvbmNhdCIsImFkZFRvRW5kIiwiZXEiLCJmb3VuZCIsIlJhbmdlRXJyb3IiLCJtYXliZUNoaWxkIiwiZm9yRWFjaCIsInAiLCJvdGhlclBvcyIsImZpbmRJbmRleCIsInJvdW5kIiwicmV0SW5kZXgiLCJjdXJQb3MiLCJ0b1N0cmluZyIsInRvU3RyaW5nSW5uZXIiLCJqb2luIiwidG9KU09OIiwibiIsInN0YXRpYyIsInNjaGVtYSIsInZhbHVlIiwiQXJyYXkiLCJpc0FycmF5Iiwibm9kZUZyb21KU09OIiwiYXJyYXkiLCJqb2luZWQiLCJub2RlcyIsImZyb21BcnJheSIsImF0dHJzIiwib2Zmc2V0IiwiY29tcGFyZURlZXAiLCJNYXJrIiwiYWRkVG9TZXQiLCJzZXQiLCJwbGFjZWQiLCJleGNsdWRlcyIsInJhbmsiLCJyZW1vdmVGcm9tU2V0IiwiaXNJblNldCIsIm9iaiIsIl8iLCJqc29uIiwibWFya3MiLCJub25lIiwic29ydCIsIlJlcGxhY2VFcnJvciIsIlNsaWNlIiwib3BlblN0YXJ0Iiwib3BlbkVuZCIsImluc2VydEF0IiwiZnJhZ21lbnQiLCJpbnNlcnRJbnRvIiwicmVtb3ZlQmV0d2VlbiIsInJlbW92ZVJhbmdlIiwiZnJvbUpTT04iLCJvcGVuSXNvbGF0aW5nIiwiaXNvbGF0aW5nIiwiaW5kZXhUbyIsIm9mZnNldFRvIiwiZGlzdCIsImluc2VydCIsImNhblJlcGxhY2UiLCJyZXBsYWNlIiwiJGZyb20iLCIkdG8iLCJkZXB0aCIsInJlcGxhY2VPdXRlciIsIiRhbG9uZyIsImV4dHJhIiwicmVzb2x2ZU5vQ2FjaGUiLCJwcmVwYXJlU2xpY2VGb3JSZXBsYWNlIiwiY2xvc2UiLCJyZXBsYWNlVGhyZWVXYXkiLCJwYXJlbnRPZmZzZXQiLCJyZXBsYWNlVHdvV2F5IiwiY2hlY2tKb2luIiwibWFpbiIsInN1YiIsImNvbXBhdGlibGVDb250ZW50Iiwiam9pbmFibGUiLCIkYmVmb3JlIiwiJGFmdGVyIiwiYWRkTm9kZSIsInRhcmdldCIsImFkZFJhbmdlIiwiJHN0YXJ0IiwiJGVuZCIsInN0YXJ0SW5kZXgiLCJlbmRJbmRleCIsInRleHRPZmZzZXQiLCJub2RlQWZ0ZXIiLCJub2RlQmVmb3JlIiwidmFsaWRDb250ZW50IiwiUmVzb2x2ZWRQb3MiLCJwYXRoIiwicmVzb2x2ZURlcHRoIiwidmFsIiwiZG9jIiwiaW5kZXhBZnRlciIsImJlZm9yZSIsImFmdGVyIiwiZE9mZiIsInBvc0F0SW5kZXgiLCJ0bXAiLCJpbmNsdXNpdmUiLCJtYXJrc0Fjcm9zcyIsImlzSW5saW5lIiwibmV4dCIsInNoYXJlZERlcHRoIiwiYmxvY2tSYW5nZSIsInByZWQiLCJkIiwiaW5saW5lQ29udGVudCIsIk5vZGVSYW5nZSIsInNhbWVQYXJlbnQiLCJzdHIiLCJyZW0iLCJyZXNvbHZlQ2FjaGUiLCJjYWNoZWQiLCJyZXNvbHZlQ2FjaGVQb3MiLCJyZXNvbHZlIiwicmVzb2x2ZUNhY2hlU2l6ZSIsImVtcHR5QXR0cnMiLCJOb2RlIiwic3RhcnRQb3MiLCJ0ZXh0Q29udGVudCIsImhhc01hcmt1cCIsImRlZmF1bHRBdHRycyIsInNhbWVTZXQiLCJtYXJrIiwiaW5jbHVkZVBhcmVudHMiLCJub2RlQXQiLCJjaGlsZEFmdGVyIiwiY2hpbGRCZWZvcmUiLCJyZXNvbHZlQ2FjaGVkIiwicmFuZ2VIYXNNYXJrIiwiaXNUZXh0YmxvY2siLCJpc0F0b20iLCJ0b0RlYnVnU3RyaW5nIiwid3JhcE1hcmtzIiwiY29udGVudE1hdGNoQXQiLCJtYXRjaCIsImNvbnRlbnRNYXRjaCIsIm1hdGNoRnJhZ21lbnQiLCJyZXBsYWNlbWVudCIsIm9uZSIsInR3byIsInZhbGlkRW5kIiwiYWxsb3dzTWFya3MiLCJjYW5SZXBsYWNlV2l0aCIsIm1hdGNoVHlwZSIsImNhbkFwcGVuZCIsImNoZWNrIiwibSIsIm1hcmtGcm9tSlNPTiIsIm5vZGVUeXBlIiwicHJvdG90eXBlIiwidW5kZWZpbmVkIiwiVGV4dE5vZGUiLCJzdXBlciIsIkpTT04iLCJzdHJpbmdpZnkiLCJiYXNlIiwiQ29udGVudE1hdGNoIiwid3JhcENhY2hlIiwic3RyaW5nIiwibm9kZVR5cGVzIiwic3RyZWFtIiwiVG9rZW5TdHJlYW0iLCJleHByIiwicGFyc2VFeHByIiwiZXJyIiwibmZhIiwibGFiZWxlZCIsImV4cGxvcmUiLCJzdGF0ZXMiLCJvdXQiLCJ0ZXJtIiwibnVsbEZyb20iLCJpbmRleE9mIiwiY21wIiwiZGZhIiwiY29ubmVjdCIsImNvbXBpbGUiLCJleHBycyIsInJlZHVjZSIsImxvb3AiLCJlZGdlIiwiY3VyIiwiZWRnZXMiLCJ3b3JrIiwiZGVhZCIsImhhc1JlcXVpcmVkQXR0cnMiLCJjaGVja0ZvckRlYWRFbmRzIiwiZnJhZyIsImRlZmF1bHRUeXBlIiwiY29tcGF0aWJsZSIsImZpbGxCZWZvcmUiLCJ0b0VuZCIsInNlZW4iLCJzZWFyY2giLCJ0eXBlcyIsImZpbmlzaGVkIiwidHAiLCJjcmVhdGVBbmRGaWxsIiwiZmluZFdyYXBwaW5nIiwiY29tcHV0ZWQiLCJjb21wdXRlV3JhcHBpbmciLCJhY3RpdmUiLCJ2aWEiLCJyZXZlcnNlIiwiZWRnZUNvdW50Iiwic2NhbiIsImlubGluZSIsInRva2VucyIsInBvcCIsImVhdCIsInRvayIsIlN5bnRheEVycm9yIiwicGFyc2VFeHByU2VxIiwicGFyc2VFeHByU3Vic2NyaXB0IiwidHlwZU5hbWUiLCJncm91cHMiLCJyZXNvbHZlTmFtZSIsInBhcnNlRXhwckF0b20iLCJwYXJzZUV4cHJSYW5nZSIsInBhcnNlTnVtIiwiTnVtYmVyIiwiZGVmYXVsdHMiLCJhdHRyTmFtZSIsImF0dHIiLCJoYXNEZWZhdWx0IiwiZGVmYXVsdCIsImNvbXB1dGVBdHRycyIsImJ1aWx0IiwiZ2l2ZW4iLCJpbml0QXR0cnMiLCJBdHRyaWJ1dGUiLCJOb2RlVHlwZSIsIm1hcmtTZXQiLCJncm91cCIsImF0b20iLCJ3aGl0ZXNwYWNlIiwiY29kZSIsImlzUmVxdWlyZWQiLCJzZXRGcm9tIiwiY3JlYXRlQ2hlY2tlZCIsIm1hdGNoZWQiLCJhbGxvd3NNYXJrVHlwZSIsIm1hcmtUeXBlIiwiYWxsb3dlZE1hcmtzIiwidG9wVHlwZSIsInRvcE5vZGUiLCJvcHRpb25zIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiTWFya1R5cGUiLCJleGNsdWRlZCIsImluc3RhbmNlIiwiU2NoZW1hIiwiY29udGVudEV4cHJDYWNoZSIsImNvbnRlbnRFeHByIiwibWFya0V4cHIiLCJwYXJzZSIsImdhdGhlck1hcmtzIiwiZXhjbCIsImJpbmQiLCJ0b3BOb2RlVHlwZSIsIndyYXBwaW5ncyIsIm9rIiwiRE9NUGFyc2VyIiwicnVsZXMiLCJ0YWdzIiwic3R5bGVzIiwicnVsZSIsInRhZyIsInN0eWxlIiwibm9ybWFsaXplTGlzdHMiLCJzb21lIiwiciIsImRvbSIsImNvbnRleHQiLCJQYXJzZUNvbnRleHQiLCJhZGRBbGwiLCJmaW5pc2giLCJwYXJzZVNsaWNlIiwibWF4T3BlbiIsIm1hdGNoVGFnIiwibWF0Y2hlcyIsIm5hbWVzcGFjZSIsIm5hbWVzcGFjZVVSSSIsIm1hdGNoZXNDb250ZXh0IiwiZ2V0QXR0cnMiLCJtYXRjaFN0eWxlIiwicHJpb3JpdHkiLCJzcGxpY2UiLCJwYXJzZURPTSIsImRvbVBhcnNlciIsInNjaGVtYVJ1bGVzIiwiYmxvY2tUYWdzIiwiYWRkcmVzcyIsImFydGljbGUiLCJhc2lkZSIsImJsb2NrcXVvdGUiLCJjYW52YXMiLCJkZCIsImRpdiIsImRsIiwiZmllbGRzZXQiLCJmaWdjYXB0aW9uIiwiZmlndXJlIiwiZm9vdGVyIiwiZm9ybSIsImgxIiwiaDIiLCJoMyIsImg0IiwiaDUiLCJoNiIsImhlYWRlciIsImhncm91cCIsImhyIiwibGkiLCJub3NjcmlwdCIsIm9sIiwib3V0cHV0IiwicHJlIiwic2VjdGlvbiIsInRhYmxlIiwidGZvb3QiLCJ1bCIsImlnbm9yZVRhZ3MiLCJoZWFkIiwib2JqZWN0Iiwic2NyaXB0IiwidGl0bGUiLCJsaXN0VGFncyIsIndzT3B0aW9uc0ZvciIsInByZXNlcnZlV2hpdGVzcGFjZSIsIk9QVF9QUkVTRVJWRV9XUyIsIk5vZGVDb250ZXh0IiwicGVuZGluZ01hcmtzIiwic29saWQiLCJhY3RpdmVNYXJrcyIsInN0YXNoTWFya3MiLCJmaWxsIiwid3JhcCIsImV4ZWMiLCJwb3BGcm9tU3Rhc2hNYXJrIiwiYXBwbHlQZW5kaW5nIiwibmV4dFR5cGUiLCJwZW5kaW5nIiwibWFya01heUFwcGx5IiwiaW5saW5lQ29udGV4dCIsInBhcmVudE5vZGUiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwicGFyc2VyIiwiaXNPcGVuIiwib3BlbiIsInRvcENvbnRleHQiLCJ0b3BPcHRpb25zIiwidG9wTWF0Y2giLCJmaW5kIiwiZmluZFBvc2l0aW9ucyIsIm5lZWRzQmxvY2siLCJ0b3AiLCJhZGRET00iLCJhZGRUZXh0Tm9kZSIsImdldEF0dHJpYnV0ZSIsInJlYWRTdHlsZXMiLCJyZSIsInRyaW0iLCJwYXJzZVN0eWxlcyIsImFkZFBlbmRpbmdNYXJrIiwiYWRkRWxlbWVudCIsInJlbW92ZVBlbmRpbmdNYXJrIiwibm9kZVZhbHVlIiwiZG9tTm9kZUJlZm9yZSIsInByZXZpb3VzU2libGluZyIsImluc2VydE5vZGUiLCJmaW5kSW5UZXh0IiwiZmluZEluc2lkZSIsIm1hdGNoQWZ0ZXIiLCJydWxlSUQiLCJwcmV2SXRlbSIsIm5leHRTaWJsaW5nIiwiYXBwZW5kQ2hpbGQiLCJub3JtYWxpemVMaXN0IiwicnVsZUZyb21Ob2RlIiwiaWdub3JlIiwiaWdub3JlRmFsbGJhY2siLCJza2lwIiwiY2xvc2VQYXJlbnQiLCJzeW5jIiwib2xkTmVlZHNCbG9jayIsImxlYWZGYWxsYmFjayIsImFkZEVsZW1lbnRCeVJ1bGUiLCJjb25zdW1pbmciLCJvd25lckRvY3VtZW50IiwiY3JlYXRlVGV4dE5vZGUiLCJmaW5kUGxhY2UiLCJjb250aW51ZUFmdGVyIiwiZW50ZXIiLCJzdGFydEluIiwiZ2V0Q29udGVudCIsImNvbnRlbnRET00iLCJjb250ZW50RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmaW5kQXJvdW5kIiwiY2hpbGROb2RlcyIsImZpbmRBdFBvaW50Iiwicm91dGUiLCJjeCIsImVudGVySW5uZXIiLCJibG9jayIsInRleHRibG9ja0Zyb21Db250ZXh0IiwiY2xvc2VFeHRyYSIsInByZXNlcnZlV1MiLCJ0b3BPcGVuIiwiY3VycmVudFBvcyIsImNvbnRhaW5zIiwiY29tcGFyZURvY3VtZW50UG9zaXRpb24iLCJ0ZXh0Tm9kZSIsIm9wdGlvbiIsInVzZVJvb3QiLCJtaW5EZXB0aCIsInBhcnQiLCIkY29udGV4dCIsImRlZmx0IiwiZmluZFNhbWVNYXJrSW5TZXQiLCJ1cHRvIiwibGV2ZWwiLCJsYXN0SW5kZXhPZiIsInN0YXNoTWFyayIsInNlbGVjdG9yIiwibXNNYXRjaGVzU2VsZWN0b3IiLCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3IiLCJtb3pNYXRjaGVzU2VsZWN0b3IiLCJET01TZXJpYWxpemVyIiwic2VyaWFsaXplRnJhZ21lbnQiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50Iiwia2VlcCIsInJlbmRlcmVkIiwic3Bhbm5pbmciLCJhZGQiLCJtYXJrRE9NIiwic2VyaWFsaXplTWFyayIsInNlcmlhbGl6ZU5vZGVJbm5lciIsInJlbmRlclNwZWMiLCJzZXJpYWxpemVOb2RlIiwidG9ET00iLCJzdHJ1Y3R1cmUiLCJ4bWxOUyIsInRhZ05hbWUiLCJzcGFjZSIsImNyZWF0ZUVsZW1lbnROUyIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGVOUyIsInNldEF0dHJpYnV0ZSIsImlubmVyQ29udGVudCIsImRvbVNlcmlhbGl6ZXIiLCJub2Rlc0Zyb21TY2hlbWEiLCJtYXJrc0Zyb21TY2hlbWEiLCJnYXRoZXJUb0RPTSIsImRvY3VtZW50Iiwid2luZG93Iiwid3JhcEluTGlzdCIsImxpc3RUeXBlIiwic2VsZWN0aW9uIiwicmFuZ2UiLCJkb0pvaW4iLCJvdXRlclJhbmdlIiwiJGluc2VydCIsInRyIiwid3JhcHBlcnMiLCJqb2luQmVmb3JlIiwic3RlcCIsInNwbGl0RGVwdGgiLCJzcGxpdFBvcyIsImUiLCJkb1dyYXBJbkxpc3QiLCJzY3JvbGxJbnRvVmlldyIsImxpZnRMaXN0SXRlbSIsIml0ZW1UeXBlIiwiZW5kT2ZMaXN0IiwibGlmdCIsImxpZnRUb091dGVyTGlzdCIsImxpc3QiLCJkZWxldGUiLCJpdGVtIiwibWFwcGluZyIsImF0U3RhcnQiLCJhdEVuZCIsImluZGV4QmVmb3JlIiwibGlmdE91dE9mTGlzdCIsInNpbmtMaXN0SXRlbSIsIm5lc3RlZEJlZm9yZSIsImNsYXNzZXNCeUlkIiwiU2VsZWN0aW9uIiwiJGFuY2hvciIsIiRoZWFkIiwicmFuZ2VzIiwiU2VsZWN0aW9uUmFuZ2UiLCJhbmNob3IiLCJsYXN0Tm9kZSIsImxhc3RQYXJlbnQiLCJtYXBGcm9tIiwic3RlcHMiLCJyZXBsYWNlUmFuZ2UiLCJzZWxlY3Rpb25Ub0luc2VydGlvbkVuZCIsInJlcGxhY2VXaXRoIiwiZGVsZXRlUmFuZ2UiLCJyZXBsYWNlUmFuZ2VXaXRoIiwiJHBvcyIsImRpciIsInRleHRPbmx5IiwiVGV4dFNlbGVjdGlvbiIsImZpbmRTZWxlY3Rpb25JbiIsImJpYXMiLCJmaW5kRnJvbSIsIkFsbFNlbGVjdGlvbiIsImNscyIsImlkIiwic2VsZWN0aW9uQ2xhc3MiLCJqc29uSUQiLCJnZXRCb29rbWFyayIsImJldHdlZW4iLCJ2aXNpYmxlIiwid2FybmVkQWJvdXRUZXh0U2VsZWN0aW9uIiwiY2hlY2tUZXh0U2VsZWN0aW9uIiwiY29uc29sZSIsIiRjdXJzb3IiLCJuZWFyIiwiZW5zdXJlTWFya3MiLCJUZXh0Qm9va21hcmsiLCJkUG9zIiwiTm9kZVNlbGVjdGlvbiIsImRlbGV0ZWQiLCJtYXBSZXN1bHQiLCJOb2RlQm9va21hcmsiLCJzZWxlY3RhYmxlIiwiaXNTZWxlY3RhYmxlIiwic2VsIiwic2V0U2VsZWN0aW9uIiwiQWxsQm9va21hcmsiLCJzdGFydExlbiIsIm1hcHMiLCJfZnJvbSIsIl90byIsIl9uZXdGcm9tIiwibmV3VG8iLCJUcmFuc2FjdGlvbiIsImN1clNlbGVjdGlvbkZvciIsInVwZGF0ZWQiLCJ0aW1lIiwiRGF0ZSIsIm5vdyIsImN1clNlbGVjdGlvbiIsInN0b3JlZE1hcmtzIiwic2VsZWN0aW9uU2V0Iiwic2V0U3RvcmVkTWFya3MiLCJhZGRTdG9yZWRNYXJrIiwicmVtb3ZlU3RvcmVkTWFyayIsInN0b3JlZE1hcmtzU2V0IiwiYWRkU3RlcCIsInNldFRpbWUiLCJyZXBsYWNlU2VsZWN0aW9uIiwicmVwbGFjZVNlbGVjdGlvbldpdGgiLCJpbmhlcml0TWFya3MiLCJkZWxldGVTZWxlY3Rpb24iLCJpbnNlcnRUZXh0Iiwic2V0TWV0YSIsImtleSIsImdldE1ldGEiLCJpc0dlbmVyaWMiLCJzY3JvbGxlZEludG9WaWV3Iiwic2VsZiIsIkZpZWxkRGVzYyIsImRlc2MiLCJpbml0IiwiYXBwbHkiLCJiYXNlRmllbGRzIiwiY29uZmlnIiwiX21hcmtzIiwiX29sZCIsInByZXYiLCJDb25maWd1cmF0aW9uIiwicGx1Z2lucyIsInBsdWdpbnNCeUtleSIsImZpZWxkcyIsInBsdWdpbiIsIkVkaXRvclN0YXRlIiwiYXBwbHlUcmFuc2FjdGlvbiIsImZpbHRlclRyYW5zYWN0aW9uIiwicm9vdFRyIiwidHJhbnNhY3Rpb25zIiwidHJzIiwibmV3U3RhdGUiLCJhcHBseUlubmVyIiwiaGF2ZU5ldyIsImFwcGVuZFRyYW5zYWN0aW9uIiwib2xkU3RhdGUiLCJuZXdJbnN0YW5jZSIsImZpZWxkIiwiJGNvbmZpZyIsInJlY29uZmlndXJlIiwicGx1Z2luRmllbGRzIiwiYmluZFByb3BzIiwiRnVuY3Rpb24iLCJQbHVnaW4iLCJjcmVhdGVLZXkiLCJnZXRTdGF0ZSIsImtleXMiLCJQbHVnaW5LZXkiLCJnZXQiLCJmYWN0b3IxNiIsInBvdyIsInJlY292ZXJJbmRleCIsIk1hcFJlc3VsdCIsImRlbEluZm8iLCJyZWNvdmVyIiwiZGVsZXRlZEJlZm9yZSIsImRlbGV0ZWRBZnRlciIsImRlbGV0ZWRBY3Jvc3MiLCJTdGVwTWFwIiwiaW52ZXJ0ZWQiLCJkaWZmIiwicmVjb3Zlck9mZnNldCIsImFzc29jIiwiX21hcCIsInNpbXBsZSIsIm9sZEluZGV4IiwibmV3SW5kZXgiLCJvbGRTaXplIiwibmV3U2l6ZSIsImRlbCIsInRvdWNoZXMiLCJvbGRTdGFydCIsIm5ld1N0YXJ0IiwiaW52ZXJ0IiwiTWFwcGluZyIsIm1pcnJvciIsImFwcGVuZE1hcCIsIm1pcnJvcnMiLCJzZXRNaXJyb3IiLCJhcHBlbmRNYXBwaW5nIiwic3RhcnRTaXplIiwibWlyciIsImdldE1pcnJvciIsImFwcGVuZE1hcHBpbmdJbnZlcnRlZCIsInRvdGFsU2l6ZSIsImludmVyc2UiLCJjb3JyIiwic3RlcHNCeUlEIiwiU3RlcCIsImdldE1hcCIsIm1lcmdlIiwic3RlcFR5cGUiLCJzdGVwQ2xhc3MiLCJTdGVwUmVzdWx0IiwiZmFpbGVkIiwibWVzc2FnZSIsImZhaWwiLCJtYXBGcmFnbWVudCIsIm1hcHBlZCIsIkFkZE1hcmtTdGVwIiwib2xkU2xpY2UiLCJmcm9tUmVwbGFjZSIsIlJlbW92ZU1hcmtTdGVwIiwiUmVwbGFjZVN0ZXAiLCJjb250ZW50QmV0d2VlbiIsIlJlcGxhY2VBcm91bmRTdGVwIiwiZ2FwRnJvbSIsImdhcFRvIiwiZ2FwIiwiaW5zZXJ0ZWQiLCJjYW5DdXQiLCJsaWZ0VGFyZ2V0IiwiaW5uZXJSYW5nZSIsImFyb3VuZCIsIm91dGVyIiwiZmluZFdyYXBwaW5nT3V0c2lkZSIsImluc2lkZSIsImlubmVyTWF0Y2giLCJmaW5kV3JhcHBpbmdJbnNpZGUiLCJ3aXRoQXR0cnMiLCJjYW5TcGxpdCIsInR5cGVzQWZ0ZXIiLCJpbm5lclR5cGUiLCJyZXN0IiwiYmFzZVR5cGUiLCJjYW5Kb2luIiwiZHJvcFBvaW50IiwicGFzcyIsImluc2VydFBvcyIsImZpdHMiLCJ3cmFwcGluZyIsInJlcGxhY2VTdGVwIiwiZml0c1RyaXZpYWxseSIsIkZpdHRlciIsImZpdCIsInVucGxhY2VkIiwiZnJvbnRpZXIiLCJmaW5kRml0dGFibGUiLCJwbGFjZU5vZGVzIiwib3Blbk1vcmUiLCJkcm9wTm9kZSIsIm1vdmVJbmxpbmUiLCJtdXN0TW92ZUlubGluZSIsInBsYWNlZFNpemUiLCJzbGljZURlcHRoIiwiY29udGVudEF0IiwiZnJvbnRpZXJEZXB0aCIsImluamVjdCIsIm9wZW5BdEVuZCIsImRyb3BGcm9tRnJhZ21lbnQiLCJjbG9zZUZyb250aWVyTm9kZSIsIm9wZW5Gcm9udGllck5vZGUiLCJ0YWtlbiIsIm9wZW5FbmRDb3VudCIsImNsb3NlTm9kZVN0YXJ0IiwiYWRkVG9GcmFnbWVudCIsImNvbnRlbnRBZnRlckZpdHMiLCJmaW5kQ2xvc2VMZXZlbCIsImRyb3BJbm5lciIsIm1vdmUiLCJjb3VudCIsImludmFsaWRNYXJrcyIsImRlZmluZXNDb250ZW50IiwiZGVmaW5pbmciLCJkZWZpbmluZ0ZvckNvbnRlbnQiLCJjbG9zZUZyYWdtZW50Iiwib2xkT3BlbiIsIm5ld09wZW4iLCJjb3ZlcmVkRGVwdGhzIiwiVHJhbnNmb3JtRXJyb3IiLCJfX3Byb3RvX18iLCJUcmFuc2Zvcm0iLCJkb2NzIiwibWF5YmVTdGVwIiwiZG9jQ2hhbmdlZCIsInRhcmdldERlcHRocyIsInByZWZlcnJlZFRhcmdldCIsInVuc2hpZnQiLCJkZWZpbmluZ0FzQ29udGV4dCIsInByZWZlcnJlZFRhcmdldEluZGV4IiwibGVmdE5vZGVzIiwicHJlZmVycmVkRGVwdGgiLCJkZWYiLCJvcGVuRGVwdGgiLCJ0YXJnZXREZXB0aCIsImV4cGFuZCIsInN0YXJ0U3RlcHMiLCJwb2ludCIsImluc2VydFBvaW50IiwiY292ZXJlZCIsImdhcFN0YXJ0IiwiZ2FwRW5kIiwic3BsaXR0aW5nIiwic2V0QmxvY2tUeXBlIiwiY2FuQ2hhbmdlVHlwZSIsImNsZWFySW5jb21wYXRpYmxlIiwic3RhcnRNIiwiZW5kTSIsInNldE5vZGVNYXJrdXAiLCJuZXdOb2RlIiwidHlwZUFmdGVyIiwiYWRkTWFyayIsInJlbW92aW5nIiwiYWRkaW5nIiwicmVtb3ZlZCIsImFkZGVkIiwibmV3U2V0IiwicyIsInJlbW92ZU1hcmsiLCJ0b1JlbW92ZSIsInBhcmVudFR5cGUiLCJkZWxTdGVwcyIsImFsbG93ZWQiXSwic291cmNlUm9vdCI6IiJ9